"use strict";var Ei=Object.create;var oe=Object.defineProperty;var gi=Object.getOwnPropertyDescriptor;var yi=Object.getOwnPropertyNames;var Si=Object.getPrototypeOf,wi=Object.prototype.hasOwnProperty;var l=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Ii=(e,r)=>{for(var t in r)oe(e,t,{get:r[t],enumerable:!0})},jr=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of yi(r))!wi.call(e,s)&&s!==t&&oe(e,s,{get:()=>r[s],enumerable:!(n=gi(r,s))||n.enumerable});return e};var Ue=(e,r,t)=>(t=e!=null?Ei(Si(e)):{},jr(r||!e||!e.__esModule?oe(t,"default",{value:e,enumerable:!0}):t,e)),vi=e=>jr(oe({},"__esModule",{value:!0}),e);var G=l((He,Dr)=>{var ae=require("buffer"),q=ae.Buffer;function kr(e,r){for(var t in e)r[t]=e[t]}q.from&&q.alloc&&q.allocUnsafe&&q.allocUnsafeSlow?Dr.exports=ae:(kr(ae,He),He.Buffer=D);function D(e,r,t){return q(e,r,t)}D.prototype=Object.create(q.prototype);kr(q,D);D.from=function(e,r,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return q(e,r,t)};D.alloc=function(e,r,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=q(e);return r!==void 0?typeof t=="string"?n.fill(r,t):n.fill(r):n.fill(0),n};D.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return q(e)};D.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return ae.SlowBuffer(e)}});var Me=l((kl,_r)=>{var ce=G().Buffer,Ri=require("stream"),bi=require("util");function ue(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=ce.alloc(0),this;if(typeof e.pipe=="function")return this.buffer=ce.alloc(0),e.pipe(this),this;if(e.length||typeof e=="object")return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}bi.inherits(ue,Ri);ue.prototype.write=function(r){this.buffer=ce.concat([this.buffer,ce.from(r)]),this.emit("data",r)};ue.prototype.end=function(r){r&&this.write(r),this.emit("end",r),this.emit("close"),this.writable=!1,this.readable=!1};_r.exports=ue});var Gr=l((Dl,Cr)=>{"use strict";function Xe(e){var r=(e/8|0)+(e%8===0?0:1);return r}var Ti={ES256:Xe(256),ES384:Xe(384),ES512:Xe(521)};function Ai(e){var r=Ti[e];if(r)return r;throw new Error('Unknown algorithm "'+e+'"')}Cr.exports=Ai});var Xr=l((_l,Mr)=>{"use strict";var fe=G().Buffer,Br=Gr(),le=128,Fr=0,$i=32,xi=16,Li=2,Ur=xi|$i|Fr<<6,he=Li|Fr<<6;function Oi(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Hr(e){if(fe.isBuffer(e))return e;if(typeof e=="string")return fe.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function Ni(e,r){e=Hr(e);var t=Br(r),n=t+1,s=e.length,i=0;if(e[i++]!==Ur)throw new Error('Could not find expected "seq"');var o=e[i++];if(o===(le|1)&&(o=e[i++]),s-i<o)throw new Error('"seq" specified length of "'+o+'", only "'+(s-i)+'" remaining');if(e[i++]!==he)throw new Error('Could not find expected "int" for "r"');var a=e[i++];if(s-i-2<a)throw new Error('"r" specified length of "'+a+'", only "'+(s-i-2)+'" available');if(n<a)throw new Error('"r" specified length of "'+a+'", max of "'+n+'" is acceptable');var f=i;if(i+=a,e[i++]!==he)throw new Error('Could not find expected "int" for "s"');var u=e[i++];if(s-i!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(s-i)+'"');if(n<u)throw new Error('"s" specified length of "'+u+'", max of "'+n+'" is acceptable');var h=i;if(i+=u,i!==s)throw new Error('Expected to consume entire buffer, but "'+(s-i)+'" bytes remain');var c=t-a,g=t-u,m=fe.allocUnsafe(c+a+g+u);for(i=0;i<c;++i)m[i]=0;e.copy(m,i,f+Math.max(-c,0),f+a),i=t;for(var w=i;i<w+g;++i)m[i]=0;return e.copy(m,i,h+Math.max(-g,0),h+u),m=m.toString("base64"),m=Oi(m),m}function Vr(e,r,t){for(var n=0;r+n<t&&e[r+n]===0;)++n;var s=e[r+n]>=le;return s&&--n,n}function qi(e,r){e=Hr(e);var t=Br(r),n=e.length;if(n!==t*2)throw new TypeError('"'+r+'" signatures must be "'+t*2+'" bytes, saw "'+n+'"');var s=Vr(e,0,t),i=Vr(e,t,e.length),o=t-s,a=t-i,f=2+o+1+1+a,u=f<le,h=fe.allocUnsafe((u?2:3)+f),c=0;return h[c++]=Ur,u?h[c++]=f:(h[c++]=le|1,h[c++]=f&255),h[c++]=he,h[c++]=o,s<0?(h[c++]=0,c+=e.copy(h,c,0,t)):c+=e.copy(h,c,s,t),h[c++]=he,h[c++]=a,i<0?(h[c++]=0,e.copy(h,c,t)):e.copy(h,c,t+i),h}Mr.exports={derToJose:Ni,joseToDer:qi}});var Jr=l((Cl,Kr)=>{"use strict";var z=require("buffer").Buffer,Ke=require("buffer").SlowBuffer;Kr.exports=pe;function pe(e,r){if(!z.isBuffer(e)||!z.isBuffer(r)||e.length!==r.length)return!1;for(var t=0,n=0;n<e.length;n++)t|=e[n]^r[n];return t===0}pe.install=function(){z.prototype.equal=Ke.prototype.equal=function(r){return pe(this,r)}};var Pi=z.prototype.equal,ji=Ke.prototype.equal;pe.restore=function(){z.prototype.equal=Pi,Ke.prototype.equal=ji}});var Ye=l((Gl,nt)=>{var B=G().Buffer,x=require("crypto"),Wr=Xr(),zr=require("util"),ki=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,W="secret must be a string or buffer",V="key must be a string or a buffer",Di="key must be a string, a buffer or an object",ze=typeof x.createPublicKey=="function";ze&&(V+=" or a KeyObject",W+="or a KeyObject");function Yr(e){if(!B.isBuffer(e)&&typeof e!="string"&&(!ze||typeof e!="object"||typeof e.type!="string"||typeof e.asymmetricKeyType!="string"||typeof e.export!="function"))throw N(V)}function Zr(e){if(!B.isBuffer(e)&&typeof e!="string"&&typeof e!="object")throw N(Di)}function _i(e){if(!B.isBuffer(e)){if(typeof e=="string")return e;if(!ze||typeof e!="object"||e.type!=="secret"||typeof e.export!="function")throw N(W)}}function We(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qr(e){e=e.toString();var r=4-e.length%4;if(r!==4)for(var t=0;t<r;++t)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function N(e){var r=[].slice.call(arguments,1),t=zr.format.bind(zr,e).apply(null,r);return new TypeError(t)}function Ci(e){return B.isBuffer(e)||typeof e=="string"}function Y(e){return Ci(e)||(e=JSON.stringify(e)),e}function et(e){return function(t,n){_i(n),t=Y(t);var s=x.createHmac("sha"+e,n),i=(s.update(t),s.digest("base64"));return We(i)}}var Je,Gi="timingSafeEqual"in x?function(r,t){return r.byteLength!==t.byteLength?!1:x.timingSafeEqual(r,t)}:function(r,t){return Je||(Je=Jr()),Je(r,t)};function Vi(e){return function(t,n,s){var i=et(e)(t,s);return Gi(B.from(n),B.from(i))}}function rt(e){return function(t,n){Zr(n),t=Y(t);var s=x.createSign("RSA-SHA"+e),i=(s.update(t),s.sign(n,"base64"));return We(i)}}function tt(e){return function(t,n,s){Yr(s),t=Y(t),n=Qr(n);var i=x.createVerify("RSA-SHA"+e);return i.update(t),i.verify(s,n,"base64")}}function Bi(e){return function(t,n){Zr(n),t=Y(t);var s=x.createSign("RSA-SHA"+e),i=(s.update(t),s.sign({key:n,padding:x.constants.RSA_PKCS1_PSS_PADDING,saltLength:x.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return We(i)}}function Fi(e){return function(t,n,s){Yr(s),t=Y(t),n=Qr(n);var i=x.createVerify("RSA-SHA"+e);return i.update(t),i.verify({key:s,padding:x.constants.RSA_PKCS1_PSS_PADDING,saltLength:x.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function Ui(e){var r=rt(e);return function(){var n=r.apply(null,arguments);return n=Wr.derToJose(n,"ES"+e),n}}function Hi(e){var r=tt(e);return function(n,s,i){s=Wr.joseToDer(s,"ES"+e).toString("base64");var o=r(n,s,i);return o}}function Mi(){return function(){return""}}function Xi(){return function(r,t){return t===""}}nt.exports=function(r){var t={hs:et,rs:rt,ps:Bi,es:Ui,none:Mi},n={hs:Vi,rs:tt,ps:Fi,es:Hi,none:Xi},s=r.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!s)throw N(ki,r);var i=(s[1]||s[3]).toLowerCase(),o=s[2];return{sign:t[i](o),verify:n[i](o)}}});var Ze=l((Vl,st)=>{var Ki=require("buffer").Buffer;st.exports=function(r){return typeof r=="string"?r:typeof r=="number"||Ki.isBuffer(r)?r.toString():JSON.stringify(r)}});var ft=l((Bl,ut)=>{var Ji=G().Buffer,it=Me(),zi=Ye(),Wi=require("stream"),ot=Ze(),Qe=require("util");function at(e,r){return Ji.from(e,r).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Yi(e,r,t){t=t||"utf8";var n=at(ot(e),"binary"),s=at(ot(r),t);return Qe.format("%s.%s",n,s)}function ct(e){var r=e.header,t=e.payload,n=e.secret||e.privateKey,s=e.encoding,i=zi(r.alg),o=Yi(r,t,s),a=i.sign(o,n);return Qe.format("%s.%s",o,a)}function de(e){var r=e.secret||e.privateKey||e.key,t=new it(r);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=t,this.payload=new it(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}Qe.inherits(de,Wi);de.prototype.sign=function(){try{var r=ct({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",r),this.emit("data",r),this.emit("end"),this.readable=!1,r}catch(t){this.readable=!1,this.emit("error",t),this.emit("close")}};de.sign=ct;ut.exports=de});var wt=l((Fl,St)=>{var ht=G().Buffer,lt=Me(),Zi=Ye(),Qi=require("stream"),pt=Ze(),eo=require("util"),ro=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function to(e){return Object.prototype.toString.call(e)==="[object Object]"}function no(e){if(to(e))return e;try{return JSON.parse(e)}catch{return}}function dt(e){var r=e.split(".",1)[0];return no(ht.from(r,"base64").toString("binary"))}function so(e){return e.split(".",2).join(".")}function mt(e){return e.split(".")[2]}function io(e,r){r=r||"utf8";var t=e.split(".")[1];return ht.from(t,"base64").toString(r)}function Et(e){return ro.test(e)&&!!dt(e)}function gt(e,r,t){if(!r){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}e=pt(e);var s=mt(e),i=so(e),o=Zi(r);return o.verify(i,s,t)}function yt(e,r){if(r=r||{},e=pt(e),!Et(e))return null;var t=dt(e);if(!t)return null;var n=io(e);return(t.typ==="JWT"||r.json)&&(n=JSON.parse(n,r.encoding)),{header:t,payload:n,signature:mt(e)}}function F(e){e=e||{};var r=e.secret||e.publicKey||e.key,t=new lt(r);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=t,this.signature=new lt(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}eo.inherits(F,Qi);F.prototype.verify=function(){try{var r=gt(this.signature.buffer,this.algorithm,this.key.buffer),t=yt(this.signature.buffer,this.encoding);return this.emit("done",r,t),this.emit("data",r),this.emit("end"),this.readable=!1,r}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};F.decode=yt;F.isValid=Et;F.verify=gt;St.exports=F});var Ee=l(j=>{var It=ft(),me=wt(),oo=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];j.ALGORITHMS=oo;j.sign=It.sign;j.verify=me.verify;j.decode=me.decode;j.isValid=me.isValid;j.createSign=function(r){return new It(r)};j.createVerify=function(r){return new me(r)}});var er=l((Hl,vt)=>{var ao=Ee();vt.exports=function(e,r){r=r||{};var t=ao.decode(e,r);if(!t)return null;var n=t.payload;if(typeof n=="string")try{var s=JSON.parse(n);s!==null&&typeof s=="object"&&(n=s)}catch{}return r.complete===!0?{header:t.header,payload:n,signature:t.signature}:n}});var Z=l((Ml,Rt)=>{var ge=function(e,r){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,r&&(this.inner=r)};ge.prototype=Object.create(Error.prototype);ge.prototype.constructor=ge;Rt.exports=ge});var rr=l((Xl,Tt)=>{var bt=Z(),ye=function(e,r){bt.call(this,e),this.name="NotBeforeError",this.date=r};ye.prototype=Object.create(bt.prototype);ye.prototype.constructor=ye;Tt.exports=ye});var tr=l((Kl,$t)=>{var At=Z(),Se=function(e,r){At.call(this,e),this.name="TokenExpiredError",this.expiredAt=r};Se.prototype=Object.create(At.prototype);Se.prototype.constructor=Se;$t.exports=Se});var Lt=l((Jl,xt)=>{var U=1e3,H=U*60,M=H*60,_=M*24,co=_*7,uo=_*365.25;xt.exports=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return fo(e);if(t==="number"&&isFinite(e))return r.long?ho(e):lo(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function fo(e){if(e=String(e),!(e.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(r){var t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*uo;case"weeks":case"week":case"w":return t*co;case"days":case"day":case"d":return t*_;case"hours":case"hour":case"hrs":case"hr":case"h":return t*M;case"minutes":case"minute":case"mins":case"min":case"m":return t*H;case"seconds":case"second":case"secs":case"sec":case"s":return t*U;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function lo(e){var r=Math.abs(e);return r>=_?Math.round(e/_)+"d":r>=M?Math.round(e/M)+"h":r>=H?Math.round(e/H)+"m":r>=U?Math.round(e/U)+"s":e+"ms"}function ho(e){var r=Math.abs(e);return r>=_?we(e,r,_,"day"):r>=M?we(e,r,M,"hour"):r>=H?we(e,r,H,"minute"):r>=U?we(e,r,U,"second"):e+" ms"}function we(e,r,t,n){var s=r>=t*1.5;return Math.round(e/t)+" "+n+(s?"s":"")}});var nr=l((zl,Ot)=>{var po=Lt();Ot.exports=function(e,r){var t=r||Math.floor(Date.now()/1e3);if(typeof e=="string"){var n=po(e);return typeof n>"u"?void 0:Math.floor(t+n/1e3)}else return typeof e=="number"?t+e:void 0}});var Q=l((Wl,Nt)=>{"use strict";var mo="2.0.0",Eo=Number.MAX_SAFE_INTEGER||9007199254740991,go=16,yo=250,So=["major","premajor","minor","preminor","patch","prepatch","prerelease"];Nt.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:go,MAX_SAFE_BUILD_LENGTH:yo,MAX_SAFE_INTEGER:Eo,RELEASE_TYPES:So,SEMVER_SPEC_VERSION:mo,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var ee=l((Yl,qt)=>{"use strict";var wo=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};qt.exports=wo});var X=l((P,Pt)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:sr,MAX_SAFE_BUILD_LENGTH:Io,MAX_LENGTH:vo}=Q(),Ro=ee();P=Pt.exports={};var bo=P.re=[],To=P.safeRe=[],p=P.src=[],Ao=P.safeSrc=[],d=P.t={},$o=0,ir="[a-zA-Z0-9-]",xo=[["\\s",1],["\\d",vo],[ir,Io]],Lo=e=>{for(let[r,t]of xo)e=e.split(`${r}*`).join(`${r}{0,${t}}`).split(`${r}+`).join(`${r}{1,${t}}`);return e},E=(e,r,t)=>{let n=Lo(r),s=$o++;Ro(e,s,r),d[e]=s,p[s]=r,Ao[s]=n,bo[s]=new RegExp(r,t?"g":void 0),To[s]=new RegExp(n,t?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*");E("NUMERICIDENTIFIERLOOSE","\\d+");E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${ir}*`);E("MAINVERSION",`(${p[d.NUMERICIDENTIFIER]})\\.(${p[d.NUMERICIDENTIFIER]})\\.(${p[d.NUMERICIDENTIFIER]})`);E("MAINVERSIONLOOSE",`(${p[d.NUMERICIDENTIFIERLOOSE]})\\.(${p[d.NUMERICIDENTIFIERLOOSE]})\\.(${p[d.NUMERICIDENTIFIERLOOSE]})`);E("PRERELEASEIDENTIFIER",`(?:${p[d.NONNUMERICIDENTIFIER]}|${p[d.NUMERICIDENTIFIER]})`);E("PRERELEASEIDENTIFIERLOOSE",`(?:${p[d.NONNUMERICIDENTIFIER]}|${p[d.NUMERICIDENTIFIERLOOSE]})`);E("PRERELEASE",`(?:-(${p[d.PRERELEASEIDENTIFIER]}(?:\\.${p[d.PRERELEASEIDENTIFIER]})*))`);E("PRERELEASELOOSE",`(?:-?(${p[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${p[d.PRERELEASEIDENTIFIERLOOSE]})*))`);E("BUILDIDENTIFIER",`${ir}+`);E("BUILD",`(?:\\+(${p[d.BUILDIDENTIFIER]}(?:\\.${p[d.BUILDIDENTIFIER]})*))`);E("FULLPLAIN",`v?${p[d.MAINVERSION]}${p[d.PRERELEASE]}?${p[d.BUILD]}?`);E("FULL",`^${p[d.FULLPLAIN]}$`);E("LOOSEPLAIN",`[v=\\s]*${p[d.MAINVERSIONLOOSE]}${p[d.PRERELEASELOOSE]}?${p[d.BUILD]}?`);E("LOOSE",`^${p[d.LOOSEPLAIN]}$`);E("GTLT","((?:<|>)?=?)");E("XRANGEIDENTIFIERLOOSE",`${p[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);E("XRANGEIDENTIFIER",`${p[d.NUMERICIDENTIFIER]}|x|X|\\*`);E("XRANGEPLAIN",`[v=\\s]*(${p[d.XRANGEIDENTIFIER]})(?:\\.(${p[d.XRANGEIDENTIFIER]})(?:\\.(${p[d.XRANGEIDENTIFIER]})(?:${p[d.PRERELEASE]})?${p[d.BUILD]}?)?)?`);E("XRANGEPLAINLOOSE",`[v=\\s]*(${p[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[d.XRANGEIDENTIFIERLOOSE]})(?:${p[d.PRERELEASELOOSE]})?${p[d.BUILD]}?)?)?`);E("XRANGE",`^${p[d.GTLT]}\\s*${p[d.XRANGEPLAIN]}$`);E("XRANGELOOSE",`^${p[d.GTLT]}\\s*${p[d.XRANGEPLAINLOOSE]}$`);E("COERCEPLAIN",`(^|[^\\d])(\\d{1,${sr}})(?:\\.(\\d{1,${sr}}))?(?:\\.(\\d{1,${sr}}))?`);E("COERCE",`${p[d.COERCEPLAIN]}(?:$|[^\\d])`);E("COERCEFULL",p[d.COERCEPLAIN]+`(?:${p[d.PRERELEASE]})?(?:${p[d.BUILD]})?(?:$|[^\\d])`);E("COERCERTL",p[d.COERCE],!0);E("COERCERTLFULL",p[d.COERCEFULL],!0);E("LONETILDE","(?:~>?)");E("TILDETRIM",`(\\s*)${p[d.LONETILDE]}\\s+`,!0);P.tildeTrimReplace="$1~";E("TILDE",`^${p[d.LONETILDE]}${p[d.XRANGEPLAIN]}$`);E("TILDELOOSE",`^${p[d.LONETILDE]}${p[d.XRANGEPLAINLOOSE]}$`);E("LONECARET","(?:\\^)");E("CARETTRIM",`(\\s*)${p[d.LONECARET]}\\s+`,!0);P.caretTrimReplace="$1^";E("CARET",`^${p[d.LONECARET]}${p[d.XRANGEPLAIN]}$`);E("CARETLOOSE",`^${p[d.LONECARET]}${p[d.XRANGEPLAINLOOSE]}$`);E("COMPARATORLOOSE",`^${p[d.GTLT]}\\s*(${p[d.LOOSEPLAIN]})$|^$`);E("COMPARATOR",`^${p[d.GTLT]}\\s*(${p[d.FULLPLAIN]})$|^$`);E("COMPARATORTRIM",`(\\s*)${p[d.GTLT]}\\s*(${p[d.LOOSEPLAIN]}|${p[d.XRANGEPLAIN]})`,!0);P.comparatorTrimReplace="$1$2$3";E("HYPHENRANGE",`^\\s*(${p[d.XRANGEPLAIN]})\\s+-\\s+(${p[d.XRANGEPLAIN]})\\s*$`);E("HYPHENRANGELOOSE",`^\\s*(${p[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${p[d.XRANGEPLAINLOOSE]})\\s*$`);E("STAR","(<|>)?=?\\s*\\*");E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Ie=l((Zl,jt)=>{"use strict";var Oo=Object.freeze({loose:!0}),No=Object.freeze({}),qo=e=>e?typeof e!="object"?Oo:e:No;jt.exports=qo});var or=l((Ql,_t)=>{"use strict";var kt=/^[0-9]+$/,Dt=(e,r)=>{let t=kt.test(e),n=kt.test(r);return t&&n&&(e=+e,r=+r),e===r?0:t&&!n?-1:n&&!t?1:e<r?-1:1},Po=(e,r)=>Dt(r,e);_t.exports={compareIdentifiers:Dt,rcompareIdentifiers:Po}});var v=l((eh,Gt)=>{"use strict";var ve=ee(),{MAX_LENGTH:Ct,MAX_SAFE_INTEGER:Re}=Q(),{safeRe:be,t:Te}=X(),jo=Ie(),{compareIdentifiers:K}=or(),ar=class e{constructor(r,t){if(t=jo(t),r instanceof e){if(r.loose===!!t.loose&&r.includePrerelease===!!t.includePrerelease)return r;r=r.version}else if(typeof r!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof r}".`);if(r.length>Ct)throw new TypeError(`version is longer than ${Ct} characters`);ve("SemVer",r,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=r.trim().match(t.loose?be[Te.LOOSE]:be[Te.FULL]);if(!n)throw new TypeError(`Invalid Version: ${r}`);if(this.raw=r,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Re||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Re||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Re||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<Re)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(r){if(ve("SemVer.compare",this.version,this.options,r),!(r instanceof e)){if(typeof r=="string"&&r===this.version)return 0;r=new e(r,this.options)}return r.version===this.version?0:this.compareMain(r)||this.comparePre(r)}compareMain(r){return r instanceof e||(r=new e(r,this.options)),K(this.major,r.major)||K(this.minor,r.minor)||K(this.patch,r.patch)}comparePre(r){if(r instanceof e||(r=new e(r,this.options)),this.prerelease.length&&!r.prerelease.length)return-1;if(!this.prerelease.length&&r.prerelease.length)return 1;if(!this.prerelease.length&&!r.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],s=r.prerelease[t];if(ve("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return K(n,s)}while(++t)}compareBuild(r){r instanceof e||(r=new e(r,this.options));let t=0;do{let n=this.build[t],s=r.build[t];if(ve("build compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return K(n,s)}while(++t)}inc(r,t,n){if(r.startsWith("pre")){if(!t&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(t){let s=`-${t}`.match(this.options.loose?be[Te.PRERELEASELOOSE]:be[Te.PRERELEASE]);if(!s||s[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(r){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(t===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(t){let i=[t,s];n===!1&&(i=[t]),K(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${r}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Gt.exports=ar});var C=l((rh,Bt)=>{"use strict";var Vt=v(),ko=(e,r,t=!1)=>{if(e instanceof Vt)return e;try{return new Vt(e,r)}catch(n){if(!t)return null;throw n}};Bt.exports=ko});var Ut=l((th,Ft)=>{"use strict";var Do=C(),_o=(e,r)=>{let t=Do(e,r);return t?t.version:null};Ft.exports=_o});var Mt=l((nh,Ht)=>{"use strict";var Co=C(),Go=(e,r)=>{let t=Co(e.trim().replace(/^[=v]+/,""),r);return t?t.version:null};Ht.exports=Go});var Jt=l((sh,Kt)=>{"use strict";var Xt=v(),Vo=(e,r,t,n,s)=>{typeof t=="string"&&(s=n,n=t,t=void 0);try{return new Xt(e instanceof Xt?e.version:e,t).inc(r,n,s).version}catch{return null}};Kt.exports=Vo});var Yt=l((ih,Wt)=>{"use strict";var zt=C(),Bo=(e,r)=>{let t=zt(e,null,!0),n=zt(r,null,!0),s=t.compare(n);if(s===0)return null;let i=s>0,o=i?t:n,a=i?n:t,f=!!o.prerelease.length;if(!!a.prerelease.length&&!f){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let h=f?"pre":"";return t.major!==n.major?h+"major":t.minor!==n.minor?h+"minor":t.patch!==n.patch?h+"patch":"prerelease"};Wt.exports=Bo});var Qt=l((oh,Zt)=>{"use strict";var Fo=v(),Uo=(e,r)=>new Fo(e,r).major;Zt.exports=Uo});var rn=l((ah,en)=>{"use strict";var Ho=v(),Mo=(e,r)=>new Ho(e,r).minor;en.exports=Mo});var nn=l((ch,tn)=>{"use strict";var Xo=v(),Ko=(e,r)=>new Xo(e,r).patch;tn.exports=Ko});var on=l((uh,sn)=>{"use strict";var Jo=C(),zo=(e,r)=>{let t=Jo(e,r);return t&&t.prerelease.length?t.prerelease:null};sn.exports=zo});var L=l((fh,cn)=>{"use strict";var an=v(),Wo=(e,r,t)=>new an(e,t).compare(new an(r,t));cn.exports=Wo});var fn=l((lh,un)=>{"use strict";var Yo=L(),Zo=(e,r,t)=>Yo(r,e,t);un.exports=Zo});var hn=l((hh,ln)=>{"use strict";var Qo=L(),ea=(e,r)=>Qo(e,r,!0);ln.exports=ea});var Ae=l((ph,dn)=>{"use strict";var pn=v(),ra=(e,r,t)=>{let n=new pn(e,t),s=new pn(r,t);return n.compare(s)||n.compareBuild(s)};dn.exports=ra});var En=l((dh,mn)=>{"use strict";var ta=Ae(),na=(e,r)=>e.sort((t,n)=>ta(t,n,r));mn.exports=na});var yn=l((mh,gn)=>{"use strict";var sa=Ae(),ia=(e,r)=>e.sort((t,n)=>sa(n,t,r));gn.exports=ia});var re=l((Eh,Sn)=>{"use strict";var oa=L(),aa=(e,r,t)=>oa(e,r,t)>0;Sn.exports=aa});var $e=l((gh,wn)=>{"use strict";var ca=L(),ua=(e,r,t)=>ca(e,r,t)<0;wn.exports=ua});var cr=l((yh,In)=>{"use strict";var fa=L(),la=(e,r,t)=>fa(e,r,t)===0;In.exports=la});var ur=l((Sh,vn)=>{"use strict";var ha=L(),pa=(e,r,t)=>ha(e,r,t)!==0;vn.exports=pa});var xe=l((wh,Rn)=>{"use strict";var da=L(),ma=(e,r,t)=>da(e,r,t)>=0;Rn.exports=ma});var Le=l((Ih,bn)=>{"use strict";var Ea=L(),ga=(e,r,t)=>Ea(e,r,t)<=0;bn.exports=ga});var fr=l((vh,Tn)=>{"use strict";var ya=cr(),Sa=ur(),wa=re(),Ia=xe(),va=$e(),Ra=Le(),ba=(e,r,t,n)=>{switch(r){case"===":return typeof e=="object"&&(e=e.version),typeof t=="object"&&(t=t.version),e===t;case"!==":return typeof e=="object"&&(e=e.version),typeof t=="object"&&(t=t.version),e!==t;case"":case"=":case"==":return ya(e,t,n);case"!=":return Sa(e,t,n);case">":return wa(e,t,n);case">=":return Ia(e,t,n);case"<":return va(e,t,n);case"<=":return Ra(e,t,n);default:throw new TypeError(`Invalid operator: ${r}`)}};Tn.exports=ba});var $n=l((Rh,An)=>{"use strict";var Ta=v(),Aa=C(),{safeRe:Oe,t:Ne}=X(),$a=(e,r)=>{if(e instanceof Ta)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;r=r||{};let t=null;if(!r.rtl)t=e.match(r.includePrerelease?Oe[Ne.COERCEFULL]:Oe[Ne.COERCE]);else{let f=r.includePrerelease?Oe[Ne.COERCERTLFULL]:Oe[Ne.COERCERTL],u;for(;(u=f.exec(e))&&(!t||t.index+t[0].length!==e.length);)(!t||u.index+u[0].length!==t.index+t[0].length)&&(t=u),f.lastIndex=u.index+u[1].length+u[2].length;f.lastIndex=-1}if(t===null)return null;let n=t[2],s=t[3]||"0",i=t[4]||"0",o=r.includePrerelease&&t[5]?`-${t[5]}`:"",a=r.includePrerelease&&t[6]?`+${t[6]}`:"";return Aa(`${n}.${s}.${i}${o}${a}`,r)};An.exports=$a});var Ln=l((bh,xn)=>{"use strict";var lr=class{constructor(){this.max=1e3,this.map=new Map}get(r){let t=this.map.get(r);if(t!==void 0)return this.map.delete(r),this.map.set(r,t),t}delete(r){return this.map.delete(r)}set(r,t){if(!this.delete(r)&&t!==void 0){if(this.map.size>=this.max){let s=this.map.keys().next().value;this.delete(s)}this.map.set(r,t)}return this}};xn.exports=lr});var O=l((Th,Pn)=>{"use strict";var xa=/\s+/g,hr=class e{constructor(r,t){if(t=Oa(t),r instanceof e)return r.loose===!!t.loose&&r.includePrerelease===!!t.includePrerelease?r:new e(r.raw,t);if(r instanceof pr)return this.raw=r.value,this.set=[[r]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=r.trim().replace(xa," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!Nn(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&_a(s[0])){this.set=[s];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let r=0;r<this.set.length;r++){r>0&&(this.formatted+="||");let t=this.set[r];for(let n=0;n<t.length;n++)n>0&&(this.formatted+=" "),this.formatted+=t[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(r){let n=((this.options.includePrerelease&&ka)|(this.options.loose&&Da))+":"+r,s=On.get(n);if(s)return s;let i=this.options.loose,o=i?$[b.HYPHENRANGELOOSE]:$[b.HYPHENRANGE];r=r.replace(o,Ka(this.options.includePrerelease)),S("hyphen replace",r),r=r.replace($[b.COMPARATORTRIM],qa),S("comparator trim",r),r=r.replace($[b.TILDETRIM],Pa),S("tilde trim",r),r=r.replace($[b.CARETTRIM],ja),S("caret trim",r);let a=r.split(" ").map(c=>Ca(c,this.options)).join(" ").split(/\s+/).map(c=>Xa(c,this.options));i&&(a=a.filter(c=>(S("loose invalid filter",c,this.options),!!c.match($[b.COMPARATORLOOSE])))),S("range list",a);let f=new Map,u=a.map(c=>new pr(c,this.options));for(let c of u){if(Nn(c))return[c];f.set(c.value,c)}f.size>1&&f.has("")&&f.delete("");let h=[...f.values()];return On.set(n,h),h}intersects(r,t){if(!(r instanceof e))throw new TypeError("a Range is required");return this.set.some(n=>qn(n,t)&&r.set.some(s=>qn(s,t)&&n.every(i=>s.every(o=>i.intersects(o,t)))))}test(r){if(!r)return!1;if(typeof r=="string")try{r=new Na(r,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(Ja(this.set[t],r,this.options))return!0;return!1}};Pn.exports=hr;var La=Ln(),On=new La,Oa=Ie(),pr=te(),S=ee(),Na=v(),{safeRe:$,t:b,comparatorTrimReplace:qa,tildeTrimReplace:Pa,caretTrimReplace:ja}=X(),{FLAG_INCLUDE_PRERELEASE:ka,FLAG_LOOSE:Da}=Q(),Nn=e=>e.value==="<0.0.0-0",_a=e=>e.value==="",qn=(e,r)=>{let t=!0,n=e.slice(),s=n.pop();for(;t&&n.length;)t=n.every(i=>s.intersects(i,r)),s=n.pop();return t},Ca=(e,r)=>(S("comp",e,r),e=Ba(e,r),S("caret",e),e=Ga(e,r),S("tildes",e),e=Ua(e,r),S("xrange",e),e=Ma(e,r),S("stars",e),e),T=e=>!e||e.toLowerCase()==="x"||e==="*",Ga=(e,r)=>e.trim().split(/\s+/).map(t=>Va(t,r)).join(" "),Va=(e,r)=>{let t=r.loose?$[b.TILDELOOSE]:$[b.TILDE];return e.replace(t,(n,s,i,o,a)=>{S("tilde",e,n,s,i,o,a);let f;return T(s)?f="":T(i)?f=`>=${s}.0.0 <${+s+1}.0.0-0`:T(o)?f=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(S("replaceTilde pr",a),f=`>=${s}.${i}.${o}-${a} <${s}.${+i+1}.0-0`):f=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,S("tilde return",f),f})},Ba=(e,r)=>e.trim().split(/\s+/).map(t=>Fa(t,r)).join(" "),Fa=(e,r)=>{S("caret",e,r);let t=r.loose?$[b.CARETLOOSE]:$[b.CARET],n=r.includePrerelease?"-0":"";return e.replace(t,(s,i,o,a,f)=>{S("caret",e,s,i,o,a,f);let u;return T(i)?u="":T(o)?u=`>=${i}.0.0${n} <${+i+1}.0.0-0`:T(a)?i==="0"?u=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:f?(S("replaceCaret pr",f),i==="0"?o==="0"?u=`>=${i}.${o}.${a}-${f} <${i}.${o}.${+a+1}-0`:u=`>=${i}.${o}.${a}-${f} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${a}-${f} <${+i+1}.0.0-0`):(S("no pr"),i==="0"?o==="0"?u=`>=${i}.${o}.${a}${n} <${i}.${o}.${+a+1}-0`:u=`>=${i}.${o}.${a}${n} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),S("caret return",u),u})},Ua=(e,r)=>(S("replaceXRanges",e,r),e.split(/\s+/).map(t=>Ha(t,r)).join(" ")),Ha=(e,r)=>{e=e.trim();let t=r.loose?$[b.XRANGELOOSE]:$[b.XRANGE];return e.replace(t,(n,s,i,o,a,f)=>{S("xRange",e,n,s,i,o,a,f);let u=T(i),h=u||T(o),c=h||T(a),g=c;return s==="="&&g&&(s=""),f=r.includePrerelease?"-0":"",u?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&g?(h&&(o=0),a=0,s===">"?(s=">=",h?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",h?i=+i+1:o=+o+1),s==="<"&&(f="-0"),n=`${s+i}.${o}.${a}${f}`):h?n=`>=${i}.0.0${f} <${+i+1}.0.0-0`:c&&(n=`>=${i}.${o}.0${f} <${i}.${+o+1}.0-0`),S("xRange return",n),n})},Ma=(e,r)=>(S("replaceStars",e,r),e.trim().replace($[b.STAR],"")),Xa=(e,r)=>(S("replaceGTE0",e,r),e.trim().replace($[r.includePrerelease?b.GTE0PRE:b.GTE0],"")),Ka=e=>(r,t,n,s,i,o,a,f,u,h,c,g)=>(T(n)?t="":T(s)?t=`>=${n}.0.0${e?"-0":""}`:T(i)?t=`>=${n}.${s}.0${e?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${e?"-0":""}`,T(u)?f="":T(h)?f=`<${+u+1}.0.0-0`:T(c)?f=`<${u}.${+h+1}.0-0`:g?f=`<=${u}.${h}.${c}-${g}`:e?f=`<${u}.${h}.${+c+1}-0`:f=`<=${f}`,`${t} ${f}`.trim()),Ja=(e,r,t)=>{for(let n=0;n<e.length;n++)if(!e[n].test(r))return!1;if(r.prerelease.length&&!t.includePrerelease){for(let n=0;n<e.length;n++)if(S(e[n].semver),e[n].semver!==pr.ANY&&e[n].semver.prerelease.length>0){let s=e[n].semver;if(s.major===r.major&&s.minor===r.minor&&s.patch===r.patch)return!0}return!1}return!0}});var te=l((Ah,Gn)=>{"use strict";var ne=Symbol("SemVer ANY"),Er=class e{static get ANY(){return ne}constructor(r,t){if(t=jn(t),r instanceof e){if(r.loose===!!t.loose)return r;r=r.value}r=r.trim().split(/\s+/).join(" "),mr("comparator",r,t),this.options=t,this.loose=!!t.loose,this.parse(r),this.semver===ne?this.value="":this.value=this.operator+this.semver.version,mr("comp",this)}parse(r){let t=this.options.loose?kn[Dn.COMPARATORLOOSE]:kn[Dn.COMPARATOR],n=r.match(t);if(!n)throw new TypeError(`Invalid comparator: ${r}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new _n(n[2],this.options.loose):this.semver=ne}toString(){return this.value}test(r){if(mr("Comparator.test",r,this.options.loose),this.semver===ne||r===ne)return!0;if(typeof r=="string")try{r=new _n(r,this.options)}catch{return!1}return dr(r,this.operator,this.semver,this.options)}intersects(r,t){if(!(r instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Cn(r.value,t).test(this.value):r.operator===""?r.value===""?!0:new Cn(this.value,t).test(r.semver):(t=jn(t),t.includePrerelease&&(this.value==="<0.0.0-0"||r.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||r.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&r.operator.startsWith(">")||this.operator.startsWith("<")&&r.operator.startsWith("<")||this.semver.version===r.semver.version&&this.operator.includes("=")&&r.operator.includes("=")||dr(this.semver,"<",r.semver,t)&&this.operator.startsWith(">")&&r.operator.startsWith("<")||dr(this.semver,">",r.semver,t)&&this.operator.startsWith("<")&&r.operator.startsWith(">")))}};Gn.exports=Er;var jn=Ie(),{safeRe:kn,t:Dn}=X(),dr=fr(),mr=ee(),_n=v(),Cn=O()});var se=l(($h,Vn)=>{"use strict";var za=O(),Wa=(e,r,t)=>{try{r=new za(r,t)}catch{return!1}return r.test(e)};Vn.exports=Wa});var Fn=l((xh,Bn)=>{"use strict";var Ya=O(),Za=(e,r)=>new Ya(e,r).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));Bn.exports=Za});var Hn=l((Lh,Un)=>{"use strict";var Qa=v(),ec=O(),rc=(e,r,t)=>{let n=null,s=null,i=null;try{i=new ec(r,t)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new Qa(n,t))}),n};Un.exports=rc});var Xn=l((Oh,Mn)=>{"use strict";var tc=v(),nc=O(),sc=(e,r,t)=>{let n=null,s=null,i=null;try{i=new nc(r,t)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new tc(n,t))}),n};Mn.exports=sc});var zn=l((Nh,Jn)=>{"use strict";var gr=v(),ic=O(),Kn=re(),oc=(e,r)=>{e=new ic(e,r);let t=new gr("0.0.0");if(e.test(t)||(t=new gr("0.0.0-0"),e.test(t)))return t;t=null;for(let n=0;n<e.set.length;++n){let s=e.set[n],i=null;s.forEach(o=>{let a=new gr(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||Kn(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!t||Kn(t,i))&&(t=i)}return t&&e.test(t)?t:null};Jn.exports=oc});var Yn=l((qh,Wn)=>{"use strict";var ac=O(),cc=(e,r)=>{try{return new ac(e,r).range||"*"}catch{return null}};Wn.exports=cc});var qe=l((Ph,rs)=>{"use strict";var uc=v(),es=te(),{ANY:fc}=es,lc=O(),hc=se(),Zn=re(),Qn=$e(),pc=Le(),dc=xe(),mc=(e,r,t,n)=>{e=new uc(e,n),r=new lc(r,n);let s,i,o,a,f;switch(t){case">":s=Zn,i=pc,o=Qn,a=">",f=">=";break;case"<":s=Qn,i=dc,o=Zn,a="<",f="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(hc(e,r,n))return!1;for(let u=0;u<r.set.length;++u){let h=r.set[u],c=null,g=null;if(h.forEach(m=>{m.semver===fc&&(m=new es(">=0.0.0")),c=c||m,g=g||m,s(m.semver,c.semver,n)?c=m:o(m.semver,g.semver,n)&&(g=m)}),c.operator===a||c.operator===f||(!g.operator||g.operator===a)&&i(e,g.semver))return!1;if(g.operator===f&&o(e,g.semver))return!1}return!0};rs.exports=mc});var ns=l((jh,ts)=>{"use strict";var Ec=qe(),gc=(e,r,t)=>Ec(e,r,">",t);ts.exports=gc});var is=l((kh,ss)=>{"use strict";var yc=qe(),Sc=(e,r,t)=>yc(e,r,"<",t);ss.exports=Sc});var cs=l((Dh,as)=>{"use strict";var os=O(),wc=(e,r,t)=>(e=new os(e,t),r=new os(r,t),e.intersects(r,t));as.exports=wc});var fs=l((_h,us)=>{"use strict";var Ic=se(),vc=L();us.exports=(e,r,t)=>{let n=[],s=null,i=null,o=e.sort((h,c)=>vc(h,c,t));for(let h of o)Ic(h,r,t)?(i=h,s||(s=h)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let a=[];for(let[h,c]of n)h===c?a.push(h):!c&&h===o[0]?a.push("*"):c?h===o[0]?a.push(`<=${c}`):a.push(`${h} - ${c}`):a.push(`>=${h}`);let f=a.join(" || "),u=typeof r.raw=="string"?r.raw:String(r);return f.length<u.length?f:r}});var Es=l((Ch,ms)=>{"use strict";var ls=O(),Sr=te(),{ANY:yr}=Sr,ie=se(),wr=L(),Rc=(e,r,t={})=>{if(e===r)return!0;e=new ls(e,t),r=new ls(r,t);let n=!1;e:for(let s of e.set){for(let i of r.set){let o=Tc(s,i,t);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},bc=[new Sr(">=0.0.0-0")],hs=[new Sr(">=0.0.0")],Tc=(e,r,t)=>{if(e===r)return!0;if(e.length===1&&e[0].semver===yr){if(r.length===1&&r[0].semver===yr)return!0;t.includePrerelease?e=bc:e=hs}if(r.length===1&&r[0].semver===yr){if(t.includePrerelease)return!0;r=hs}let n=new Set,s,i;for(let m of e)m.operator===">"||m.operator===">="?s=ps(s,m,t):m.operator==="<"||m.operator==="<="?i=ds(i,m,t):n.add(m.semver);if(n.size>1)return null;let o;if(s&&i){if(o=wr(s.semver,i.semver,t),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let m of n){if(s&&!ie(m,String(s),t)||i&&!ie(m,String(i),t))return null;for(let w of r)if(!ie(m,String(w),t))return!1;return!0}let a,f,u,h,c=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1,g=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1;c&&c.prerelease.length===1&&i.operator==="<"&&c.prerelease[0]===0&&(c=!1);for(let m of r){if(h=h||m.operator===">"||m.operator===">=",u=u||m.operator==="<"||m.operator==="<=",s){if(g&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===g.major&&m.semver.minor===g.minor&&m.semver.patch===g.patch&&(g=!1),m.operator===">"||m.operator===">="){if(a=ps(s,m,t),a===m&&a!==s)return!1}else if(s.operator===">="&&!ie(s.semver,String(m),t))return!1}if(i){if(c&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===c.major&&m.semver.minor===c.minor&&m.semver.patch===c.patch&&(c=!1),m.operator==="<"||m.operator==="<="){if(f=ds(i,m,t),f===m&&f!==i)return!1}else if(i.operator==="<="&&!ie(i.semver,String(m),t))return!1}if(!m.operator&&(i||s)&&o!==0)return!1}return!(s&&u&&!i&&o!==0||i&&h&&!s&&o!==0||g||c)},ps=(e,r,t)=>{if(!e)return r;let n=wr(e.semver,r.semver,t);return n>0?e:n<0||r.operator===">"&&e.operator===">="?r:e},ds=(e,r,t)=>{if(!e)return r;let n=wr(e.semver,r.semver,t);return n<0?e:n>0||r.operator==="<"&&e.operator==="<="?r:e};ms.exports=Rc});var Pe=l((Gh,Ss)=>{"use strict";var Ir=X(),gs=Q(),Ac=v(),ys=or(),$c=C(),xc=Ut(),Lc=Mt(),Oc=Jt(),Nc=Yt(),qc=Qt(),Pc=rn(),jc=nn(),kc=on(),Dc=L(),_c=fn(),Cc=hn(),Gc=Ae(),Vc=En(),Bc=yn(),Fc=re(),Uc=$e(),Hc=cr(),Mc=ur(),Xc=xe(),Kc=Le(),Jc=fr(),zc=$n(),Wc=te(),Yc=O(),Zc=se(),Qc=Fn(),eu=Hn(),ru=Xn(),tu=zn(),nu=Yn(),su=qe(),iu=ns(),ou=is(),au=cs(),cu=fs(),uu=Es();Ss.exports={parse:$c,valid:xc,clean:Lc,inc:Oc,diff:Nc,major:qc,minor:Pc,patch:jc,prerelease:kc,compare:Dc,rcompare:_c,compareLoose:Cc,compareBuild:Gc,sort:Vc,rsort:Bc,gt:Fc,lt:Uc,eq:Hc,neq:Mc,gte:Xc,lte:Kc,cmp:Jc,coerce:zc,Comparator:Wc,Range:Yc,satisfies:Zc,toComparators:Qc,maxSatisfying:eu,minSatisfying:ru,minVersion:tu,validRange:nu,outside:su,gtr:iu,ltr:ou,intersects:au,simplifyRange:cu,subset:uu,SemVer:Ac,re:Ir.re,src:Ir.src,tokens:Ir.t,SEMVER_SPEC_VERSION:gs.SEMVER_SPEC_VERSION,RELEASE_TYPES:gs.RELEASE_TYPES,compareIdentifiers:ys.compareIdentifiers,rcompareIdentifiers:ys.rcompareIdentifiers}});var Is=l((Vh,ws)=>{var fu=Pe();ws.exports=fu.satisfies(process.version,">=15.7.0")});var Rs=l((Bh,vs)=>{var lu=Pe();vs.exports=lu.satisfies(process.version,">=16.9.0")});var vr=l((Fh,bs)=>{var hu=Is(),pu=Rs(),du={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},mu={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};bs.exports=function(e,r){if(!e||!r)return;let t=r.asymmetricKeyType;if(!t)return;let n=du[t];if(!n)throw new Error(`Unknown key type "${t}".`);if(!n.includes(e))throw new Error(`"alg" parameter for "${t}" key type must be one of: ${n.join(", ")}.`);if(hu)switch(t){case"ec":let s=r.asymmetricKeyDetails.namedCurve,i=mu[e];if(s!==i)throw new Error(`"alg" parameter "${e}" requires curve "${i}".`);break;case"rsa-pss":if(pu){let o=parseInt(e.slice(-3),10),{hashAlgorithm:a,mgf1HashAlgorithm:f,saltLength:u}=r.asymmetricKeyDetails;if(a!==`sha${o}`||f!==a)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`);if(u!==void 0&&u>o>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}break}}});var Rr=l((Uh,Ts)=>{var Eu=Pe();Ts.exports=Eu.satisfies(process.version,"^6.12.0 || >=8.0.0")});var xs=l((Hh,$s)=>{var y=Z(),gu=rr(),As=tr(),yu=er(),Su=nr(),wu=vr(),Iu=Rr(),vu=Ee(),{KeyObject:Ru,createSecretKey:bu,createPublicKey:Tu}=require("crypto"),br=["RS256","RS384","RS512"],Au=["ES256","ES384","ES512"],Tr=["RS256","RS384","RS512"],$u=["HS256","HS384","HS512"];Iu&&(br.splice(br.length,0,"PS256","PS384","PS512"),Tr.splice(Tr.length,0,"PS256","PS384","PS512"));$s.exports=function(e,r,t,n){typeof t=="function"&&!n&&(n=t,t={}),t||(t={}),t=Object.assign({},t);let s;if(n?s=n:s=function(h,c){if(h)throw h;return c},t.clockTimestamp&&typeof t.clockTimestamp!="number")return s(new y("clockTimestamp must be a number"));if(t.nonce!==void 0&&(typeof t.nonce!="string"||t.nonce.trim()===""))return s(new y("nonce must be a non-empty string"));if(t.allowInvalidAsymmetricKeyTypes!==void 0&&typeof t.allowInvalidAsymmetricKeyTypes!="boolean")return s(new y("allowInvalidAsymmetricKeyTypes must be a boolean"));let i=t.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return s(new y("jwt must be provided"));if(typeof e!="string")return s(new y("jwt must be a string"));let o=e.split(".");if(o.length!==3)return s(new y("jwt malformed"));let a;try{a=yu(e,{complete:!0})}catch(h){return s(h)}if(!a)return s(new y("invalid token"));let f=a.header,u;if(typeof r=="function"){if(!n)return s(new y("verify must be called asynchronous if secret or public key is provided as a callback"));u=r}else u=function(h,c){return c(null,r)};return u(f,function(h,c){if(h)return s(new y("error in secret or public key callback: "+h.message));let g=o[2].trim()!=="";if(!g&&c)return s(new y("jwt signature is required"));if(g&&!c)return s(new y("secret or public key must be provided"));if(!g&&!t.algorithms)return s(new y('please specify "none" in "algorithms" to verify unsigned tokens'));if(c!=null&&!(c instanceof Ru))try{c=Tu(c)}catch{try{c=bu(typeof c=="string"?Buffer.from(c):c)}catch{return s(new y("secretOrPublicKey is not valid key material"))}}if(t.algorithms||(c.type==="secret"?t.algorithms=$u:["rsa","rsa-pss"].includes(c.asymmetricKeyType)?t.algorithms=Tr:c.asymmetricKeyType==="ec"?t.algorithms=Au:t.algorithms=br),t.algorithms.indexOf(a.header.alg)===-1)return s(new y("invalid algorithm"));if(f.alg.startsWith("HS")&&c.type!=="secret")return s(new y(`secretOrPublicKey must be a symmetric key when using ${f.alg}`));if(/^(?:RS|PS|ES)/.test(f.alg)&&c.type!=="public")return s(new y(`secretOrPublicKey must be an asymmetric key when using ${f.alg}`));if(!t.allowInvalidAsymmetricKeyTypes)try{wu(f.alg,c)}catch(A){return s(A)}let m;try{m=vu.verify(e,a.header.alg,c)}catch(A){return s(A)}if(!m)return s(new y("invalid signature"));let w=a.payload;if(typeof w.nbf<"u"&&!t.ignoreNotBefore){if(typeof w.nbf!="number")return s(new y("invalid nbf value"));if(w.nbf>i+(t.clockTolerance||0))return s(new gu("jwt not active",new Date(w.nbf*1e3)))}if(typeof w.exp<"u"&&!t.ignoreExpiration){if(typeof w.exp!="number")return s(new y("invalid exp value"));if(i>=w.exp+(t.clockTolerance||0))return s(new As("jwt expired",new Date(w.exp*1e3)))}if(t.audience){let A=Array.isArray(t.audience)?t.audience:[t.audience];if(!(Array.isArray(w.aud)?w.aud:[w.aud]).some(function(Pr){return A.some(function(Fe){return Fe instanceof RegExp?Fe.test(Pr):Fe===Pr})}))return s(new y("jwt audience invalid. expected: "+A.join(" or ")))}if(t.issuer&&(typeof t.issuer=="string"&&w.iss!==t.issuer||Array.isArray(t.issuer)&&t.issuer.indexOf(w.iss)===-1))return s(new y("jwt issuer invalid. expected: "+t.issuer));if(t.subject&&w.sub!==t.subject)return s(new y("jwt subject invalid. expected: "+t.subject));if(t.jwtid&&w.jti!==t.jwtid)return s(new y("jwt jwtid invalid. expected: "+t.jwtid));if(t.nonce&&w.nonce!==t.nonce)return s(new y("jwt nonce invalid. expected: "+t.nonce));if(t.maxAge){if(typeof w.iat!="number")return s(new y("iat required when maxAge is specified"));let A=Su(t.maxAge,w.iat);if(typeof A>"u")return s(new y('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(i>=A+(t.clockTolerance||0))return s(new As("maxAge exceeded",new Date(A*1e3)))}if(t.complete===!0){let A=a.signature;return s(null,{header:f,payload:w,signature:A})}return s(null,w)})}});var js=l((Mh,Ps)=>{var Ls=1/0,Ns=9007199254740991,xu=17976931348623157e292,Os=NaN,Lu="[object Arguments]",Ou="[object Function]",Nu="[object GeneratorFunction]",qu="[object String]",Pu="[object Symbol]",ju=/^\s+|\s+$/g,ku=/^[-+]0x[0-9a-f]+$/i,Du=/^0b[01]+$/i,_u=/^0o[0-7]+$/i,Cu=/^(?:0|[1-9]\d*)$/,Gu=parseInt;function Vu(e,r){for(var t=-1,n=e?e.length:0,s=Array(n);++t<n;)s[t]=r(e[t],t,e);return s}function Bu(e,r,t,n){for(var s=e.length,i=t+(n?1:-1);n?i--:++i<s;)if(r(e[i],i,e))return i;return-1}function Fu(e,r,t){if(r!==r)return Bu(e,Uu,t);for(var n=t-1,s=e.length;++n<s;)if(e[n]===r)return n;return-1}function Uu(e){return e!==e}function Hu(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}function Mu(e,r){return Vu(r,function(t){return e[t]})}function Xu(e,r){return function(t){return e(r(t))}}var je=Object.prototype,$r=je.hasOwnProperty,ke=je.toString,Ku=je.propertyIsEnumerable,Ju=Xu(Object.keys,Object),zu=Math.max;function Wu(e,r){var t=qs(e)||rf(e)?Hu(e.length,String):[],n=t.length,s=!!n;for(var i in e)(r||$r.call(e,i))&&!(s&&(i=="length"||Zu(i,n)))&&t.push(i);return t}function Yu(e){if(!Qu(e))return Ju(e);var r=[];for(var t in Object(e))$r.call(e,t)&&t!="constructor"&&r.push(t);return r}function Zu(e,r){return r=r??Ns,!!r&&(typeof e=="number"||Cu.test(e))&&e>-1&&e%1==0&&e<r}function Qu(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||je;return e===t}function ef(e,r,t,n){e=xr(e)?e:hf(e),t=t&&!n?uf(t):0;var s=e.length;return t<0&&(t=zu(s+t,0)),of(e)?t<=s&&e.indexOf(r,t)>-1:!!s&&Fu(e,r,t)>-1}function rf(e){return tf(e)&&$r.call(e,"callee")&&(!Ku.call(e,"callee")||ke.call(e)==Lu)}var qs=Array.isArray;function xr(e){return e!=null&&sf(e.length)&&!nf(e)}function tf(e){return Lr(e)&&xr(e)}function nf(e){var r=Ar(e)?ke.call(e):"";return r==Ou||r==Nu}function sf(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ns}function Ar(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function Lr(e){return!!e&&typeof e=="object"}function of(e){return typeof e=="string"||!qs(e)&&Lr(e)&&ke.call(e)==qu}function af(e){return typeof e=="symbol"||Lr(e)&&ke.call(e)==Pu}function cf(e){if(!e)return e===0?e:0;if(e=ff(e),e===Ls||e===-Ls){var r=e<0?-1:1;return r*xu}return e===e?e:0}function uf(e){var r=cf(e),t=r%1;return r===r?t?r-t:r:0}function ff(e){if(typeof e=="number")return e;if(af(e))return Os;if(Ar(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Ar(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(ju,"");var t=Du.test(e);return t||_u.test(e)?Gu(e.slice(2),t?2:8):ku.test(e)?Os:+e}function lf(e){return xr(e)?Wu(e):Yu(e)}function hf(e){return e?Mu(e,lf(e)):[]}Ps.exports=ef});var Ds=l((Xh,ks)=>{var pf="[object Boolean]",df=Object.prototype,mf=df.toString;function Ef(e){return e===!0||e===!1||gf(e)&&mf.call(e)==pf}function gf(e){return!!e&&typeof e=="object"}ks.exports=Ef});var Bs=l((Kh,Vs)=>{var _s=1/0,yf=17976931348623157e292,Cs=NaN,Sf="[object Symbol]",wf=/^\s+|\s+$/g,If=/^[-+]0x[0-9a-f]+$/i,vf=/^0b[01]+$/i,Rf=/^0o[0-7]+$/i,bf=parseInt,Tf=Object.prototype,Af=Tf.toString;function $f(e){return typeof e=="number"&&e==Nf(e)}function Gs(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function xf(e){return!!e&&typeof e=="object"}function Lf(e){return typeof e=="symbol"||xf(e)&&Af.call(e)==Sf}function Of(e){if(!e)return e===0?e:0;if(e=qf(e),e===_s||e===-_s){var r=e<0?-1:1;return r*yf}return e===e?e:0}function Nf(e){var r=Of(e),t=r%1;return r===r?t?r-t:r:0}function qf(e){if(typeof e=="number")return e;if(Lf(e))return Cs;if(Gs(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Gs(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(wf,"");var t=vf.test(e);return t||Rf.test(e)?bf(e.slice(2),t?2:8):If.test(e)?Cs:+e}Vs.exports=$f});var Us=l((Jh,Fs)=>{var Pf="[object Number]",jf=Object.prototype,kf=jf.toString;function Df(e){return!!e&&typeof e=="object"}function _f(e){return typeof e=="number"||Df(e)&&kf.call(e)==Pf}Fs.exports=_f});var Ks=l((zh,Xs)=>{var Cf="[object Object]";function Gf(e){var r=!1;if(e!=null&&typeof e.toString!="function")try{r=!!(e+"")}catch{}return r}function Vf(e,r){return function(t){return e(r(t))}}var Bf=Function.prototype,Hs=Object.prototype,Ms=Bf.toString,Ff=Hs.hasOwnProperty,Uf=Ms.call(Object),Hf=Hs.toString,Mf=Vf(Object.getPrototypeOf,Object);function Xf(e){return!!e&&typeof e=="object"}function Kf(e){if(!Xf(e)||Hf.call(e)!=Cf||Gf(e))return!1;var r=Mf(e);if(r===null)return!0;var t=Ff.call(r,"constructor")&&r.constructor;return typeof t=="function"&&t instanceof t&&Ms.call(t)==Uf}Xs.exports=Kf});var zs=l((Wh,Js)=>{var Jf="[object String]",zf=Object.prototype,Wf=zf.toString,Yf=Array.isArray;function Zf(e){return!!e&&typeof e=="object"}function Qf(e){return typeof e=="string"||!Yf(e)&&Zf(e)&&Wf.call(e)==Jf}Js.exports=Qf});var ei=l((Yh,Qs)=>{var el="Expected a function",Ws=1/0,rl=17976931348623157e292,Ys=NaN,tl="[object Symbol]",nl=/^\s+|\s+$/g,sl=/^[-+]0x[0-9a-f]+$/i,il=/^0b[01]+$/i,ol=/^0o[0-7]+$/i,al=parseInt,cl=Object.prototype,ul=cl.toString;function fl(e,r){var t;if(typeof r!="function")throw new TypeError(el);return e=ml(e),function(){return--e>0&&(t=r.apply(this,arguments)),e<=1&&(r=void 0),t}}function ll(e){return fl(2,e)}function Zs(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function hl(e){return!!e&&typeof e=="object"}function pl(e){return typeof e=="symbol"||hl(e)&&ul.call(e)==tl}function dl(e){if(!e)return e===0?e:0;if(e=El(e),e===Ws||e===-Ws){var r=e<0?-1:1;return r*rl}return e===e?e:0}function ml(e){var r=dl(e),t=r%1;return r===r?t?r-t:r:0}function El(e){if(typeof e=="number")return e;if(pl(e))return Ys;if(Zs(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Zs(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(nl,"");var t=il.test(e);return t||ol.test(e)?al(e.slice(2),t?2:8):sl.test(e)?Ys:+e}Qs.exports=ll});var ui=l((Zh,ci)=>{var ri=nr(),gl=Rr(),yl=vr(),ti=Ee(),Sl=js(),De=Ds(),ni=Bs(),Or=Us(),ii=Ks(),k=zs(),wl=ei(),{KeyObject:Il,createSecretKey:vl,createPrivateKey:Rl}=require("crypto"),oi=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];gl&&oi.splice(3,0,"PS256","PS384","PS512");var bl={expiresIn:{isValid:function(e){return ni(e)||k(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return ni(e)||k(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return k(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:Sl.bind(null,oi),message:'"algorithm" must be a valid string enum value'},header:{isValid:ii,message:'"header" must be an object'},encoding:{isValid:k,message:'"encoding" must be a string'},issuer:{isValid:k,message:'"issuer" must be a string'},subject:{isValid:k,message:'"subject" must be a string'},jwtid:{isValid:k,message:'"jwtid" must be a string'},noTimestamp:{isValid:De,message:'"noTimestamp" must be a boolean'},keyid:{isValid:k,message:'"keyid" must be a string'},mutatePayload:{isValid:De,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:De,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:De,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},Tl={iat:{isValid:Or,message:'"iat" should be a number of seconds'},exp:{isValid:Or,message:'"exp" should be a number of seconds'},nbf:{isValid:Or,message:'"nbf" should be a number of seconds'}};function ai(e,r,t,n){if(!ii(t))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(t).forEach(function(s){let i=e[s];if(!i){if(!r)throw new Error('"'+s+'" is not allowed in "'+n+'"');return}if(!i.isValid(t[s]))throw new Error(i.message)})}function Al(e){return ai(bl,!1,e,"options")}function $l(e){return ai(Tl,!0,e,"payload")}var si={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},xl=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];ci.exports=function(e,r,t,n){typeof t=="function"?(n=t,t={}):t=t||{};let s=typeof e=="object"&&!Buffer.isBuffer(e),i=Object.assign({alg:t.algorithm||"HS256",typ:s?"JWT":void 0,kid:t.keyid},t.header);function o(u){if(n)return n(u);throw u}if(!r&&t.algorithm!=="none")return o(new Error("secretOrPrivateKey must have a value"));if(r!=null&&!(r instanceof Il))try{r=Rl(r)}catch{try{r=vl(typeof r=="string"?Buffer.from(r):r)}catch{return o(new Error("secretOrPrivateKey is not valid key material"))}}if(i.alg.startsWith("HS")&&r.type!=="secret")return o(new Error(`secretOrPrivateKey must be a symmetric key when using ${i.alg}`));if(/^(?:RS|PS|ES)/.test(i.alg)){if(r.type!=="private")return o(new Error(`secretOrPrivateKey must be an asymmetric key when using ${i.alg}`));if(!t.allowInsecureKeySizes&&!i.alg.startsWith("ES")&&r.asymmetricKeyDetails!==void 0&&r.asymmetricKeyDetails.modulusLength<2048)return o(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`))}if(typeof e>"u")return o(new Error("payload is required"));if(s){try{$l(e)}catch(u){return o(u)}t.mutatePayload||(e=Object.assign({},e))}else{let u=xl.filter(function(h){return typeof t[h]<"u"});if(u.length>0)return o(new Error("invalid "+u.join(",")+" option for "+typeof e+" payload"))}if(typeof e.exp<"u"&&typeof t.expiresIn<"u")return o(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof e.nbf<"u"&&typeof t.notBefore<"u")return o(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{Al(t)}catch(u){return o(u)}if(!t.allowInvalidAsymmetricKeyTypes)try{yl(i.alg,r)}catch(u){return o(u)}let a=e.iat||Math.floor(Date.now()/1e3);if(t.noTimestamp?delete e.iat:s&&(e.iat=a),typeof t.notBefore<"u"){try{e.nbf=ri(t.notBefore,a)}catch(u){return o(u)}if(typeof e.nbf>"u")return o(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof t.expiresIn<"u"&&typeof e=="object"){try{e.exp=ri(t.expiresIn,a)}catch(u){return o(u)}if(typeof e.exp>"u")return o(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(si).forEach(function(u){let h=si[u];if(typeof t[u]<"u"){if(typeof e[h]<"u")return o(new Error('Bad "options.'+u+'" option. The payload already has an "'+h+'" property.'));e[h]=t[u]}});let f=t.encoding||"utf8";if(typeof n=="function")n=n&&wl(n),ti.createSign({header:i,privateKey:r,payload:e,encoding:f}).once("error",n).once("done",function(u){if(!t.allowInsecureKeySizes&&/^(?:RS|PS)/.test(i.alg)&&u.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`));n(null,u)});else{let u=ti.sign({header:i,payload:e,secret:r,encoding:f});if(!t.allowInsecureKeySizes&&/^(?:RS|PS)/.test(i.alg)&&u.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`);return u}}});var li=l((Qh,fi)=>{fi.exports={decode:er(),verify:xs(),sign:ui(),JsonWebTokenError:Z(),NotBeforeError:rr(),TokenExpiredError:tr()}});var ql={};Ii(ql,{TokenAuthorizer:()=>Be,handler:()=>Nl});module.exports=vi(ql);var R=Ue(li());var J=class{constructor(r){this.context=r,this.logLevel=process.env.LOG_LEVEL||"INFO"}info(r,t){this.shouldLog("INFO")&&this.log("INFO",r,t)}debug(r,t){this.shouldLog("DEBUG")&&this.log("DEBUG",r,t)}warn(r,t){this.shouldLog("WARN")&&this.log("WARN",r,t)}error(r,t){let n=t instanceof Error?{name:t.name,message:t.message,stack:t.stack}:t;this.log("ERROR",r,n)}perf(r,t,n){this.info(`Performance: ${r}`,{duration:`${t}ms`,operation:r,...n})}log(r,t,n){let s={timestamp:new Date().toISOString(),level:r,context:this.context,message:t,stage:process.env.STAGE||"unknown",version:"2.0.0",...n&&{data:n}};switch(r){case"ERROR":console.error(JSON.stringify(s));break;case"WARN":console.warn(JSON.stringify(s));break;default:console.log(JSON.stringify(s))}}shouldLog(r){let t=["ERROR","WARN","INFO","DEBUG"],n=t.indexOf(this.logLevel);return t.indexOf(r)<=n}};var I=[];for(let e=0;e<256;++e)I.push((e+256).toString(16).slice(1));function hi(e,r=0){return(I[e[r+0]]+I[e[r+1]]+I[e[r+2]]+I[e[r+3]]+"-"+I[e[r+4]]+I[e[r+5]]+"-"+I[e[r+6]]+I[e[r+7]]+"-"+I[e[r+8]]+I[e[r+9]]+"-"+I[e[r+10]]+I[e[r+11]]+I[e[r+12]]+I[e[r+13]]+I[e[r+14]]+I[e[r+15]]).toLowerCase()}var pi=Ue(require("crypto")),Ce=new Uint8Array(256),_e=Ce.length;function Nr(){return _e>Ce.length-16&&(pi.default.randomFillSync(Ce),_e=0),Ce.slice(_e,_e+=16)}var di=Ue(require("crypto")),qr={randomUUID:di.default.randomUUID};function Ll(e,r,t){if(qr.randomUUID&&!r&&!e)return qr.randomUUID();e=e||{};let n=e.random||(e.rng||Nr)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){t=t||0;for(let s=0;s<16;++s)r[t+s]=n[s];return r}return hi(n)}var Ge=Ll;var Ve=class{constructor(){this.logger=new J("JwtService"),this.jwtSecret=process.env.JWT_SECRET||"your-jwt-secret",this.refreshSecret=process.env.REFRESH_TOKEN_SECRET||"your-refresh-secret"}validateToken(r){try{let t=r.replace(/^Bearer\s+/i,"");if(!t)return{isValid:!1,error:"Token is empty"};let n=R.verify(t,this.jwtSecret);return!n.userId||!n.email?{isValid:!1,error:"Token missing required fields"}:n.exp&&n.exp<Math.floor(Date.now()/1e3)?{isValid:!1,error:"Token has expired"}:(this.logger.debug("Token validated successfully",{userId:n.userId,email:n.email,exp:n.exp}),{isValid:!0,payload:n})}catch(t){let n="Token validation failed";return t instanceof R.JsonWebTokenError?n="Invalid token format":t instanceof R.TokenExpiredError?n="Token has expired":t instanceof R.NotBeforeError&&(n="Token not active yet"),this.logger.warn("Token validation failed",{error:t instanceof Error?t.message:t,errorType:t instanceof Error?t.constructor.name:"Unknown"}),{isValid:!1,error:n}}}generateAccessToken(r,t,n){let s={userId:r,email:t,role:n,iat:Math.floor(Date.now()/1e3),tokenId:Ge()},i=process.env.ACCESS_TOKEN_EXPIRES_IN||"15m",o=R.sign(s,this.jwtSecret,{expiresIn:i});return this.logger.debug("Access token generated",{userId:r,email:t,expiresIn:i}),o}generateRefreshToken(r){let t={userId:r,tokenType:"refresh",tokenId:Ge(),iat:Math.floor(Date.now()/1e3)},n=process.env.REFRESH_TOKEN_EXPIRES_IN||"7d",s=R.sign(t,this.refreshSecret,{expiresIn:n});return this.logger.debug("Refresh token generated",{userId:r,expiresIn:n}),s}generateTokenPair(r,t,n){let s=this.generateAccessToken(r,t,n),i=this.generateRefreshToken(r),o=process.env.ACCESS_TOKEN_EXPIRES_IN||"15m",a=this.parseExpirationTime(o);return{accessToken:s,refreshToken:i,expiresIn:a}}validateRefreshToken(r){try{let t=r.replace(/^Bearer\s+/i,"");if(!t)return{isValid:!1,error:"Refresh token is empty"};let n=R.verify(t,this.refreshSecret);return!n.userId||n.tokenType!=="refresh"?{isValid:!1,error:"Invalid refresh token format"}:n.exp&&n.exp<Math.floor(Date.now()/1e3)?{isValid:!1,error:"Refresh token has expired"}:(this.logger.debug("Refresh token validated successfully",{userId:n.userId}),{isValid:!0,userId:n.userId})}catch(t){let n="Refresh token validation failed";return t instanceof R.JsonWebTokenError?n="Invalid refresh token format":t instanceof R.TokenExpiredError&&(n="Refresh token has expired"),this.logger.warn("Refresh token validation failed",{error:t instanceof Error?t.message:t}),{isValid:!1,error:n}}}parseExpirationTime(r){let t=r.slice(-1),n=parseInt(r.slice(0,-1),10);switch(t){case"s":return n;case"m":return n*60;case"h":return n*60*60;case"d":return n*24*60*60;default:return 900}}extractUserIdUnsafe(r){try{let t=r.replace(/^Bearer\s+/i,"");return R.decode(t)?.userId||null}catch{return null}}};var Be=class{constructor(){this.jwtService=new Ve,this.logger=new J("TokenAuthorizer")}async authorize(r){let t=r.requestId||"unknown",n=r.authorizationToken;this.logger.info(`[${t}] Authorizer invoked`,{methodArn:r.methodArn,tokenLength:n?n.length:0,tokenPrefix:n?n.substring(0,10)+"...":"null"});try{if(!n)throw this.logger.warn(`[${t}] No authorization token provided`),new Error("Unauthorized");let s=this.jwtService.validateToken(n);if(!s.isValid)throw this.logger.warn(`[${t}] Token validation failed`,{error:s.error}),new Error("Unauthorized");let{payload:i}=s;if(!i)throw this.logger.error(`[${t}] Token validation succeeded but no payload returned`),new Error("Unauthorized");this.logger.info(`[${t}] Token validated successfully`,{userId:i.userId,email:i.email});let o=this.generatePolicy(i.userId,"Allow",r.methodArn);return o.context={userId:i.userId,email:i.email,role:i.role||"user"},this.logger.info(`[${t}] Authorization successful`,{principalId:o.principalId,effect:"Allow"}),o}catch(s){return this.logger.error(`[${t}] Authorization failed`,{error:s instanceof Error?s.message:s}),this.generatePolicy("anonymous","Deny",r.methodArn)}}generatePolicy(r,t,n){let s=n.split(":"),i=s[5]?.split("/")||[],o=i[0]||"*",a=i[1]||"*",f=`arn:aws:execute-api:${s[3]}:${s[4]}:${o}/${a}/*`;return{principalId:r,policyDocument:{Version:"2012-10-17",Statement:[{Action:"execute-api:Invoke",Effect:t,Resource:f}]}}}},Ol=new Be,Nl=async(e,r)=>await Ol.authorize(e);0&&(module.exports={TokenAuthorizer,handler});
/*! Bundled license information:

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
//# sourceMappingURL=index.js.map
