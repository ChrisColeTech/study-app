"use strict";var oi=Object.create;var ie=Object.defineProperty;var ai=Object.getOwnPropertyDescriptor;var ci=Object.getOwnPropertyNames;var ui=Object.getPrototypeOf,fi=Object.prototype.hasOwnProperty;var l=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),li=(e,r)=>{for(var t in r)ie(e,t,{get:r[t],enumerable:!0})},$r=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of ci(r))!fi.call(e,s)&&s!==t&&ie(e,s,{get:()=>r[s],enumerable:!(n=ai(r,s))||n.enumerable});return e};var hi=(e,r,t)=>(t=e!=null?oi(ui(e)):{},$r(r||!e||!e.__esModule?ie(t,"default",{value:e,enumerable:!0}):t,e)),pi=e=>$r(ie({},"__esModule",{value:!0}),e);var G=l((ke,Or)=>{var oe=require("buffer"),q=oe.Buffer;function Lr(e,r){for(var t in e)r[t]=e[t]}q.from&&q.alloc&&q.allocUnsafe&&q.allocUnsafeSlow?Or.exports=oe:(Lr(oe,ke),ke.Buffer=D);function D(e,r,t){return q(e,r,t)}D.prototype=Object.create(q.prototype);Lr(q,D);D.from=function(e,r,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return q(e,r,t)};D.alloc=function(e,r,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=q(e);return r!==void 0?typeof t=="string"?n.fill(r,t):n.fill(r):n.fill(0),n};D.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return q(e)};D.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return oe.SlowBuffer(e)}});var Be=l((Al,Nr)=>{var ae=G().Buffer,di=require("stream"),mi=require("util");function ce(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=ae.alloc(0),this;if(typeof e.pipe=="function")return this.buffer=ae.alloc(0),e.pipe(this),this;if(e.length||typeof e=="object")return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}mi.inherits(ce,di);ce.prototype.write=function(r){this.buffer=ae.concat([this.buffer,ae.from(r)]),this.emit("data",r)};ce.prototype.end=function(r){r&&this.write(r),this.emit("end",r),this.emit("close"),this.writable=!1,this.readable=!1};Nr.exports=ce});var xr=l((Tl,qr)=>{"use strict";function Ve(e){var r=(e/8|0)+(e%8===0?0:1);return r}var Ei={ES256:Ve(256),ES384:Ve(384),ES512:Ve(521)};function gi(e){var r=Ei[e];if(r)return r;throw new Error('Unknown algorithm "'+e+'"')}qr.exports=gi});var kr=l(($l,Gr)=>{"use strict";var ue=G().Buffer,jr=xr(),fe=128,Dr=0,yi=32,Si=16,wi=2,Cr=Si|yi|Dr<<6,le=wi|Dr<<6;function Ii(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _r(e){if(ue.isBuffer(e))return e;if(typeof e=="string")return ue.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function bi(e,r){e=_r(e);var t=jr(r),n=t+1,s=e.length,i=0;if(e[i++]!==Cr)throw new Error('Could not find expected "seq"');var o=e[i++];if(o===(fe|1)&&(o=e[i++]),s-i<o)throw new Error('"seq" specified length of "'+o+'", only "'+(s-i)+'" remaining');if(e[i++]!==le)throw new Error('Could not find expected "int" for "r"');var a=e[i++];if(s-i-2<a)throw new Error('"r" specified length of "'+a+'", only "'+(s-i-2)+'" available');if(n<a)throw new Error('"r" specified length of "'+a+'", max of "'+n+'" is acceptable');var f=i;if(i+=a,e[i++]!==le)throw new Error('Could not find expected "int" for "s"');var u=e[i++];if(s-i!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(s-i)+'"');if(n<u)throw new Error('"s" specified length of "'+u+'", max of "'+n+'" is acceptable');var h=i;if(i+=u,i!==s)throw new Error('Expected to consume entire buffer, but "'+(s-i)+'" bytes remain');var c=t-a,g=t-u,m=ue.allocUnsafe(c+a+g+u);for(i=0;i<c;++i)m[i]=0;e.copy(m,i,f+Math.max(-c,0),f+a),i=t;for(var w=i;i<w+g;++i)m[i]=0;return e.copy(m,i,h+Math.max(-g,0),h+u),m=m.toString("base64"),m=Ii(m),m}function Pr(e,r,t){for(var n=0;r+n<t&&e[r+n]===0;)++n;var s=e[r+n]>=fe;return s&&--n,n}function Ri(e,r){e=_r(e);var t=jr(r),n=e.length;if(n!==t*2)throw new TypeError('"'+r+'" signatures must be "'+t*2+'" bytes, saw "'+n+'"');var s=Pr(e,0,t),i=Pr(e,t,e.length),o=t-s,a=t-i,f=2+o+1+1+a,u=f<fe,h=ue.allocUnsafe((u?2:3)+f),c=0;return h[c++]=Cr,u?h[c++]=f:(h[c++]=fe|1,h[c++]=f&255),h[c++]=le,h[c++]=o,s<0?(h[c++]=0,c+=e.copy(h,c,0,t)):c+=e.copy(h,c,s,t),h[c++]=le,h[c++]=a,i<0?(h[c++]=0,e.copy(h,c,t)):e.copy(h,c,t+i),h}Gr.exports={derToJose:bi,joseToDer:Ri}});var Vr=l((Ll,Br)=>{"use strict";var J=require("buffer").Buffer,Fe=require("buffer").SlowBuffer;Br.exports=he;function he(e,r){if(!J.isBuffer(e)||!J.isBuffer(r)||e.length!==r.length)return!1;for(var t=0,n=0;n<e.length;n++)t|=e[n]^r[n];return t===0}he.install=function(){J.prototype.equal=Fe.prototype.equal=function(r){return he(this,r)}};var vi=J.prototype.equal,Ai=Fe.prototype.equal;he.restore=function(){J.prototype.equal=vi,Fe.prototype.equal=Ai}});var Xe=l((Ol,Wr)=>{var B=G().Buffer,T=require("crypto"),Ur=kr(),Fr=require("util"),Ti=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,K="secret must be a string or buffer",k="key must be a string or a buffer",$i="key must be a string, a buffer or an object",He=typeof T.createPublicKey=="function";He&&(k+=" or a KeyObject",K+="or a KeyObject");function Hr(e){if(!B.isBuffer(e)&&typeof e!="string"&&(!He||typeof e!="object"||typeof e.type!="string"||typeof e.asymmetricKeyType!="string"||typeof e.export!="function"))throw N(k)}function Mr(e){if(!B.isBuffer(e)&&typeof e!="string"&&typeof e!="object")throw N($i)}function Li(e){if(!B.isBuffer(e)){if(typeof e=="string")return e;if(!He||typeof e!="object"||e.type!=="secret"||typeof e.export!="function")throw N(K)}}function Me(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Xr(e){e=e.toString();var r=4-e.length%4;if(r!==4)for(var t=0;t<r;++t)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function N(e){var r=[].slice.call(arguments,1),t=Fr.format.bind(Fr,e).apply(null,r);return new TypeError(t)}function Oi(e){return B.isBuffer(e)||typeof e=="string"}function W(e){return Oi(e)||(e=JSON.stringify(e)),e}function zr(e){return function(t,n){Li(n),t=W(t);var s=T.createHmac("sha"+e,n),i=(s.update(t),s.digest("base64"));return Me(i)}}var Ue,Ni="timingSafeEqual"in T?function(r,t){return r.byteLength!==t.byteLength?!1:T.timingSafeEqual(r,t)}:function(r,t){return Ue||(Ue=Vr()),Ue(r,t)};function qi(e){return function(t,n,s){var i=zr(e)(t,s);return Ni(B.from(n),B.from(i))}}function Jr(e){return function(t,n){Mr(n),t=W(t);var s=T.createSign("RSA-SHA"+e),i=(s.update(t),s.sign(n,"base64"));return Me(i)}}function Kr(e){return function(t,n,s){Hr(s),t=W(t),n=Xr(n);var i=T.createVerify("RSA-SHA"+e);return i.update(t),i.verify(s,n,"base64")}}function xi(e){return function(t,n){Mr(n),t=W(t);var s=T.createSign("RSA-SHA"+e),i=(s.update(t),s.sign({key:n,padding:T.constants.RSA_PKCS1_PSS_PADDING,saltLength:T.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Me(i)}}function Pi(e){return function(t,n,s){Hr(s),t=W(t),n=Xr(n);var i=T.createVerify("RSA-SHA"+e);return i.update(t),i.verify({key:s,padding:T.constants.RSA_PKCS1_PSS_PADDING,saltLength:T.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function ji(e){var r=Jr(e);return function(){var n=r.apply(null,arguments);return n=Ur.derToJose(n,"ES"+e),n}}function Di(e){var r=Kr(e);return function(n,s,i){s=Ur.joseToDer(s,"ES"+e).toString("base64");var o=r(n,s,i);return o}}function Ci(){return function(){return""}}function _i(){return function(r,t){return t===""}}Wr.exports=function(r){var t={hs:zr,rs:Jr,ps:xi,es:ji,none:Ci},n={hs:qi,rs:Kr,ps:Pi,es:Di,none:_i},s=r.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!s)throw N(Ti,r);var i=(s[1]||s[3]).toLowerCase(),o=s[2];return{sign:t[i](o),verify:n[i](o)}}});var ze=l((Nl,Yr)=>{var Gi=require("buffer").Buffer;Yr.exports=function(r){return typeof r=="string"?r:typeof r=="number"||Gi.isBuffer(r)?r.toString():JSON.stringify(r)}});var nt=l((ql,tt)=>{var ki=G().Buffer,Zr=Be(),Bi=Xe(),Vi=require("stream"),Qr=ze(),Je=require("util");function et(e,r){return ki.from(e,r).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Fi(e,r,t){t=t||"utf8";var n=et(Qr(e),"binary"),s=et(Qr(r),t);return Je.format("%s.%s",n,s)}function rt(e){var r=e.header,t=e.payload,n=e.secret||e.privateKey,s=e.encoding,i=Bi(r.alg),o=Fi(r,t,s),a=i.sign(o,n);return Je.format("%s.%s",o,a)}function pe(e){var r=e.secret||e.privateKey||e.key,t=new Zr(r);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=t,this.payload=new Zr(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}Je.inherits(pe,Vi);pe.prototype.sign=function(){try{var r=rt({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",r),this.emit("data",r),this.emit("end"),this.readable=!1,r}catch(t){this.readable=!1,this.emit("error",t),this.emit("close")}};pe.sign=rt;tt.exports=pe});var pt=l((xl,ht)=>{var it=G().Buffer,st=Be(),Ui=Xe(),Hi=require("stream"),ot=ze(),Mi=require("util"),Xi=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function zi(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ji(e){if(zi(e))return e;try{return JSON.parse(e)}catch{return}}function at(e){var r=e.split(".",1)[0];return Ji(it.from(r,"base64").toString("binary"))}function Ki(e){return e.split(".",2).join(".")}function ct(e){return e.split(".")[2]}function Wi(e,r){r=r||"utf8";var t=e.split(".")[1];return it.from(t,"base64").toString(r)}function ut(e){return Xi.test(e)&&!!at(e)}function ft(e,r,t){if(!r){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}e=ot(e);var s=ct(e),i=Ki(e),o=Ui(r);return o.verify(i,s,t)}function lt(e,r){if(r=r||{},e=ot(e),!ut(e))return null;var t=at(e);if(!t)return null;var n=Wi(e);return(t.typ==="JWT"||r.json)&&(n=JSON.parse(n,r.encoding)),{header:t,payload:n,signature:ct(e)}}function V(e){e=e||{};var r=e.secret||e.publicKey||e.key,t=new st(r);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=t,this.signature=new st(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}Mi.inherits(V,Hi);V.prototype.verify=function(){try{var r=ft(this.signature.buffer,this.algorithm,this.key.buffer),t=lt(this.signature.buffer,this.encoding);return this.emit("done",r,t),this.emit("data",r),this.emit("end"),this.readable=!1,r}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};V.decode=lt;V.isValid=ut;V.verify=ft;ht.exports=V});var me=l(P=>{var dt=nt(),de=pt(),Yi=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];P.ALGORITHMS=Yi;P.sign=dt.sign;P.verify=de.verify;P.decode=de.decode;P.isValid=de.isValid;P.createSign=function(r){return new dt(r)};P.createVerify=function(r){return new de(r)}});var Ke=l((jl,mt)=>{var Zi=me();mt.exports=function(e,r){r=r||{};var t=Zi.decode(e,r);if(!t)return null;var n=t.payload;if(typeof n=="string")try{var s=JSON.parse(n);s!==null&&typeof s=="object"&&(n=s)}catch{}return r.complete===!0?{header:t.header,payload:n,signature:t.signature}:n}});var Y=l((Dl,Et)=>{var Ee=function(e,r){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,r&&(this.inner=r)};Ee.prototype=Object.create(Error.prototype);Ee.prototype.constructor=Ee;Et.exports=Ee});var We=l((Cl,yt)=>{var gt=Y(),ge=function(e,r){gt.call(this,e),this.name="NotBeforeError",this.date=r};ge.prototype=Object.create(gt.prototype);ge.prototype.constructor=ge;yt.exports=ge});var Ye=l((_l,wt)=>{var St=Y(),ye=function(e,r){St.call(this,e),this.name="TokenExpiredError",this.expiredAt=r};ye.prototype=Object.create(St.prototype);ye.prototype.constructor=ye;wt.exports=ye});var bt=l((Gl,It)=>{var F=1e3,U=F*60,H=U*60,C=H*24,Qi=C*7,eo=C*365.25;It.exports=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return ro(e);if(t==="number"&&isFinite(e))return r.long?no(e):to(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function ro(e){if(e=String(e),!(e.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(r){var t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*eo;case"weeks":case"week":case"w":return t*Qi;case"days":case"day":case"d":return t*C;case"hours":case"hour":case"hrs":case"hr":case"h":return t*H;case"minutes":case"minute":case"mins":case"min":case"m":return t*U;case"seconds":case"second":case"secs":case"sec":case"s":return t*F;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function to(e){var r=Math.abs(e);return r>=C?Math.round(e/C)+"d":r>=H?Math.round(e/H)+"h":r>=U?Math.round(e/U)+"m":r>=F?Math.round(e/F)+"s":e+"ms"}function no(e){var r=Math.abs(e);return r>=C?Se(e,r,C,"day"):r>=H?Se(e,r,H,"hour"):r>=U?Se(e,r,U,"minute"):r>=F?Se(e,r,F,"second"):e+" ms"}function Se(e,r,t,n){var s=r>=t*1.5;return Math.round(e/t)+" "+n+(s?"s":"")}});var Ze=l((kl,Rt)=>{var so=bt();Rt.exports=function(e,r){var t=r||Math.floor(Date.now()/1e3);if(typeof e=="string"){var n=so(e);return typeof n>"u"?void 0:Math.floor(t+n/1e3)}else return typeof e=="number"?t+e:void 0}});var Z=l((Bl,vt)=>{"use strict";var io="2.0.0",oo=Number.MAX_SAFE_INTEGER||9007199254740991,ao=16,co=250,uo=["major","premajor","minor","preminor","patch","prepatch","prerelease"];vt.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:ao,MAX_SAFE_BUILD_LENGTH:co,MAX_SAFE_INTEGER:oo,RELEASE_TYPES:uo,SEMVER_SPEC_VERSION:io,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Q=l((Vl,At)=>{"use strict";var fo=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};At.exports=fo});var M=l((x,Tt)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:Qe,MAX_SAFE_BUILD_LENGTH:lo,MAX_LENGTH:ho}=Z(),po=Q();x=Tt.exports={};var mo=x.re=[],Eo=x.safeRe=[],p=x.src=[],go=x.safeSrc=[],d=x.t={},yo=0,er="[a-zA-Z0-9-]",So=[["\\s",1],["\\d",ho],[er,lo]],wo=e=>{for(let[r,t]of So)e=e.split(`${r}*`).join(`${r}{0,${t}}`).split(`${r}+`).join(`${r}{1,${t}}`);return e},E=(e,r,t)=>{let n=wo(r),s=yo++;po(e,s,r),d[e]=s,p[s]=r,go[s]=n,mo[s]=new RegExp(r,t?"g":void 0),Eo[s]=new RegExp(n,t?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*");E("NUMERICIDENTIFIERLOOSE","\\d+");E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${er}*`);E("MAINVERSION",`(${p[d.NUMERICIDENTIFIER]})\\.(${p[d.NUMERICIDENTIFIER]})\\.(${p[d.NUMERICIDENTIFIER]})`);E("MAINVERSIONLOOSE",`(${p[d.NUMERICIDENTIFIERLOOSE]})\\.(${p[d.NUMERICIDENTIFIERLOOSE]})\\.(${p[d.NUMERICIDENTIFIERLOOSE]})`);E("PRERELEASEIDENTIFIER",`(?:${p[d.NONNUMERICIDENTIFIER]}|${p[d.NUMERICIDENTIFIER]})`);E("PRERELEASEIDENTIFIERLOOSE",`(?:${p[d.NONNUMERICIDENTIFIER]}|${p[d.NUMERICIDENTIFIERLOOSE]})`);E("PRERELEASE",`(?:-(${p[d.PRERELEASEIDENTIFIER]}(?:\\.${p[d.PRERELEASEIDENTIFIER]})*))`);E("PRERELEASELOOSE",`(?:-?(${p[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${p[d.PRERELEASEIDENTIFIERLOOSE]})*))`);E("BUILDIDENTIFIER",`${er}+`);E("BUILD",`(?:\\+(${p[d.BUILDIDENTIFIER]}(?:\\.${p[d.BUILDIDENTIFIER]})*))`);E("FULLPLAIN",`v?${p[d.MAINVERSION]}${p[d.PRERELEASE]}?${p[d.BUILD]}?`);E("FULL",`^${p[d.FULLPLAIN]}$`);E("LOOSEPLAIN",`[v=\\s]*${p[d.MAINVERSIONLOOSE]}${p[d.PRERELEASELOOSE]}?${p[d.BUILD]}?`);E("LOOSE",`^${p[d.LOOSEPLAIN]}$`);E("GTLT","((?:<|>)?=?)");E("XRANGEIDENTIFIERLOOSE",`${p[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);E("XRANGEIDENTIFIER",`${p[d.NUMERICIDENTIFIER]}|x|X|\\*`);E("XRANGEPLAIN",`[v=\\s]*(${p[d.XRANGEIDENTIFIER]})(?:\\.(${p[d.XRANGEIDENTIFIER]})(?:\\.(${p[d.XRANGEIDENTIFIER]})(?:${p[d.PRERELEASE]})?${p[d.BUILD]}?)?)?`);E("XRANGEPLAINLOOSE",`[v=\\s]*(${p[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[d.XRANGEIDENTIFIERLOOSE]})(?:${p[d.PRERELEASELOOSE]})?${p[d.BUILD]}?)?)?`);E("XRANGE",`^${p[d.GTLT]}\\s*${p[d.XRANGEPLAIN]}$`);E("XRANGELOOSE",`^${p[d.GTLT]}\\s*${p[d.XRANGEPLAINLOOSE]}$`);E("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Qe}})(?:\\.(\\d{1,${Qe}}))?(?:\\.(\\d{1,${Qe}}))?`);E("COERCE",`${p[d.COERCEPLAIN]}(?:$|[^\\d])`);E("COERCEFULL",p[d.COERCEPLAIN]+`(?:${p[d.PRERELEASE]})?(?:${p[d.BUILD]})?(?:$|[^\\d])`);E("COERCERTL",p[d.COERCE],!0);E("COERCERTLFULL",p[d.COERCEFULL],!0);E("LONETILDE","(?:~>?)");E("TILDETRIM",`(\\s*)${p[d.LONETILDE]}\\s+`,!0);x.tildeTrimReplace="$1~";E("TILDE",`^${p[d.LONETILDE]}${p[d.XRANGEPLAIN]}$`);E("TILDELOOSE",`^${p[d.LONETILDE]}${p[d.XRANGEPLAINLOOSE]}$`);E("LONECARET","(?:\\^)");E("CARETTRIM",`(\\s*)${p[d.LONECARET]}\\s+`,!0);x.caretTrimReplace="$1^";E("CARET",`^${p[d.LONECARET]}${p[d.XRANGEPLAIN]}$`);E("CARETLOOSE",`^${p[d.LONECARET]}${p[d.XRANGEPLAINLOOSE]}$`);E("COMPARATORLOOSE",`^${p[d.GTLT]}\\s*(${p[d.LOOSEPLAIN]})$|^$`);E("COMPARATOR",`^${p[d.GTLT]}\\s*(${p[d.FULLPLAIN]})$|^$`);E("COMPARATORTRIM",`(\\s*)${p[d.GTLT]}\\s*(${p[d.LOOSEPLAIN]}|${p[d.XRANGEPLAIN]})`,!0);x.comparatorTrimReplace="$1$2$3";E("HYPHENRANGE",`^\\s*(${p[d.XRANGEPLAIN]})\\s+-\\s+(${p[d.XRANGEPLAIN]})\\s*$`);E("HYPHENRANGELOOSE",`^\\s*(${p[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${p[d.XRANGEPLAINLOOSE]})\\s*$`);E("STAR","(<|>)?=?\\s*\\*");E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var we=l((Fl,$t)=>{"use strict";var Io=Object.freeze({loose:!0}),bo=Object.freeze({}),Ro=e=>e?typeof e!="object"?Io:e:bo;$t.exports=Ro});var rr=l((Ul,Nt)=>{"use strict";var Lt=/^[0-9]+$/,Ot=(e,r)=>{let t=Lt.test(e),n=Lt.test(r);return t&&n&&(e=+e,r=+r),e===r?0:t&&!n?-1:n&&!t?1:e<r?-1:1},vo=(e,r)=>Ot(r,e);Nt.exports={compareIdentifiers:Ot,rcompareIdentifiers:vo}});var I=l((Hl,xt)=>{"use strict";var Ie=Q(),{MAX_LENGTH:qt,MAX_SAFE_INTEGER:be}=Z(),{safeRe:Re,t:ve}=M(),Ao=we(),{compareIdentifiers:X}=rr(),tr=class e{constructor(r,t){if(t=Ao(t),r instanceof e){if(r.loose===!!t.loose&&r.includePrerelease===!!t.includePrerelease)return r;r=r.version}else if(typeof r!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof r}".`);if(r.length>qt)throw new TypeError(`version is longer than ${qt} characters`);Ie("SemVer",r,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=r.trim().match(t.loose?Re[ve.LOOSE]:Re[ve.FULL]);if(!n)throw new TypeError(`Invalid Version: ${r}`);if(this.raw=r,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>be||this.major<0)throw new TypeError("Invalid major version");if(this.minor>be||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>be||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<be)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(r){if(Ie("SemVer.compare",this.version,this.options,r),!(r instanceof e)){if(typeof r=="string"&&r===this.version)return 0;r=new e(r,this.options)}return r.version===this.version?0:this.compareMain(r)||this.comparePre(r)}compareMain(r){return r instanceof e||(r=new e(r,this.options)),X(this.major,r.major)||X(this.minor,r.minor)||X(this.patch,r.patch)}comparePre(r){if(r instanceof e||(r=new e(r,this.options)),this.prerelease.length&&!r.prerelease.length)return-1;if(!this.prerelease.length&&r.prerelease.length)return 1;if(!this.prerelease.length&&!r.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],s=r.prerelease[t];if(Ie("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return X(n,s)}while(++t)}compareBuild(r){r instanceof e||(r=new e(r,this.options));let t=0;do{let n=this.build[t],s=r.build[t];if(Ie("build compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return X(n,s)}while(++t)}inc(r,t,n){if(r.startsWith("pre")){if(!t&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(t){let s=`-${t}`.match(this.options.loose?Re[ve.PRERELEASELOOSE]:Re[ve.PRERELEASE]);if(!s||s[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(r){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(t===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(t){let i=[t,s];n===!1&&(i=[t]),X(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${r}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};xt.exports=tr});var _=l((Ml,jt)=>{"use strict";var Pt=I(),To=(e,r,t=!1)=>{if(e instanceof Pt)return e;try{return new Pt(e,r)}catch(n){if(!t)return null;throw n}};jt.exports=To});var Ct=l((Xl,Dt)=>{"use strict";var $o=_(),Lo=(e,r)=>{let t=$o(e,r);return t?t.version:null};Dt.exports=Lo});var Gt=l((zl,_t)=>{"use strict";var Oo=_(),No=(e,r)=>{let t=Oo(e.trim().replace(/^[=v]+/,""),r);return t?t.version:null};_t.exports=No});var Vt=l((Jl,Bt)=>{"use strict";var kt=I(),qo=(e,r,t,n,s)=>{typeof t=="string"&&(s=n,n=t,t=void 0);try{return new kt(e instanceof kt?e.version:e,t).inc(r,n,s).version}catch{return null}};Bt.exports=qo});var Ht=l((Kl,Ut)=>{"use strict";var Ft=_(),xo=(e,r)=>{let t=Ft(e,null,!0),n=Ft(r,null,!0),s=t.compare(n);if(s===0)return null;let i=s>0,o=i?t:n,a=i?n:t,f=!!o.prerelease.length;if(!!a.prerelease.length&&!f){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let h=f?"pre":"";return t.major!==n.major?h+"major":t.minor!==n.minor?h+"minor":t.patch!==n.patch?h+"patch":"prerelease"};Ut.exports=xo});var Xt=l((Wl,Mt)=>{"use strict";var Po=I(),jo=(e,r)=>new Po(e,r).major;Mt.exports=jo});var Jt=l((Yl,zt)=>{"use strict";var Do=I(),Co=(e,r)=>new Do(e,r).minor;zt.exports=Co});var Wt=l((Zl,Kt)=>{"use strict";var _o=I(),Go=(e,r)=>new _o(e,r).patch;Kt.exports=Go});var Zt=l((Ql,Yt)=>{"use strict";var ko=_(),Bo=(e,r)=>{let t=ko(e,r);return t&&t.prerelease.length?t.prerelease:null};Yt.exports=Bo});var $=l((eh,en)=>{"use strict";var Qt=I(),Vo=(e,r,t)=>new Qt(e,t).compare(new Qt(r,t));en.exports=Vo});var tn=l((rh,rn)=>{"use strict";var Fo=$(),Uo=(e,r,t)=>Fo(r,e,t);rn.exports=Uo});var sn=l((th,nn)=>{"use strict";var Ho=$(),Mo=(e,r)=>Ho(e,r,!0);nn.exports=Mo});var Ae=l((nh,an)=>{"use strict";var on=I(),Xo=(e,r,t)=>{let n=new on(e,t),s=new on(r,t);return n.compare(s)||n.compareBuild(s)};an.exports=Xo});var un=l((sh,cn)=>{"use strict";var zo=Ae(),Jo=(e,r)=>e.sort((t,n)=>zo(t,n,r));cn.exports=Jo});var ln=l((ih,fn)=>{"use strict";var Ko=Ae(),Wo=(e,r)=>e.sort((t,n)=>Ko(n,t,r));fn.exports=Wo});var ee=l((oh,hn)=>{"use strict";var Yo=$(),Zo=(e,r,t)=>Yo(e,r,t)>0;hn.exports=Zo});var Te=l((ah,pn)=>{"use strict";var Qo=$(),ea=(e,r,t)=>Qo(e,r,t)<0;pn.exports=ea});var nr=l((ch,dn)=>{"use strict";var ra=$(),ta=(e,r,t)=>ra(e,r,t)===0;dn.exports=ta});var sr=l((uh,mn)=>{"use strict";var na=$(),sa=(e,r,t)=>na(e,r,t)!==0;mn.exports=sa});var $e=l((fh,En)=>{"use strict";var ia=$(),oa=(e,r,t)=>ia(e,r,t)>=0;En.exports=oa});var Le=l((lh,gn)=>{"use strict";var aa=$(),ca=(e,r,t)=>aa(e,r,t)<=0;gn.exports=ca});var ir=l((hh,yn)=>{"use strict";var ua=nr(),fa=sr(),la=ee(),ha=$e(),pa=Te(),da=Le(),ma=(e,r,t,n)=>{switch(r){case"===":return typeof e=="object"&&(e=e.version),typeof t=="object"&&(t=t.version),e===t;case"!==":return typeof e=="object"&&(e=e.version),typeof t=="object"&&(t=t.version),e!==t;case"":case"=":case"==":return ua(e,t,n);case"!=":return fa(e,t,n);case">":return la(e,t,n);case">=":return ha(e,t,n);case"<":return pa(e,t,n);case"<=":return da(e,t,n);default:throw new TypeError(`Invalid operator: ${r}`)}};yn.exports=ma});var wn=l((ph,Sn)=>{"use strict";var Ea=I(),ga=_(),{safeRe:Oe,t:Ne}=M(),ya=(e,r)=>{if(e instanceof Ea)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;r=r||{};let t=null;if(!r.rtl)t=e.match(r.includePrerelease?Oe[Ne.COERCEFULL]:Oe[Ne.COERCE]);else{let f=r.includePrerelease?Oe[Ne.COERCERTLFULL]:Oe[Ne.COERCERTL],u;for(;(u=f.exec(e))&&(!t||t.index+t[0].length!==e.length);)(!t||u.index+u[0].length!==t.index+t[0].length)&&(t=u),f.lastIndex=u.index+u[1].length+u[2].length;f.lastIndex=-1}if(t===null)return null;let n=t[2],s=t[3]||"0",i=t[4]||"0",o=r.includePrerelease&&t[5]?`-${t[5]}`:"",a=r.includePrerelease&&t[6]?`+${t[6]}`:"";return ga(`${n}.${s}.${i}${o}${a}`,r)};Sn.exports=ya});var bn=l((dh,In)=>{"use strict";var or=class{constructor(){this.max=1e3,this.map=new Map}get(r){let t=this.map.get(r);if(t!==void 0)return this.map.delete(r),this.map.set(r,t),t}delete(r){return this.map.delete(r)}set(r,t){if(!this.delete(r)&&t!==void 0){if(this.map.size>=this.max){let s=this.map.keys().next().value;this.delete(s)}this.map.set(r,t)}return this}};In.exports=or});var L=l((mh,Tn)=>{"use strict";var Sa=/\s+/g,ar=class e{constructor(r,t){if(t=Ia(t),r instanceof e)return r.loose===!!t.loose&&r.includePrerelease===!!t.includePrerelease?r:new e(r.raw,t);if(r instanceof cr)return this.raw=r.value,this.set=[[r]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=r.trim().replace(Sa," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!vn(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&La(s[0])){this.set=[s];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let r=0;r<this.set.length;r++){r>0&&(this.formatted+="||");let t=this.set[r];for(let n=0;n<t.length;n++)n>0&&(this.formatted+=" "),this.formatted+=t[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(r){let n=((this.options.includePrerelease&&Ta)|(this.options.loose&&$a))+":"+r,s=Rn.get(n);if(s)return s;let i=this.options.loose,o=i?A[b.HYPHENRANGELOOSE]:A[b.HYPHENRANGE];r=r.replace(o,Ga(this.options.includePrerelease)),S("hyphen replace",r),r=r.replace(A[b.COMPARATORTRIM],Ra),S("comparator trim",r),r=r.replace(A[b.TILDETRIM],va),S("tilde trim",r),r=r.replace(A[b.CARETTRIM],Aa),S("caret trim",r);let a=r.split(" ").map(c=>Oa(c,this.options)).join(" ").split(/\s+/).map(c=>_a(c,this.options));i&&(a=a.filter(c=>(S("loose invalid filter",c,this.options),!!c.match(A[b.COMPARATORLOOSE])))),S("range list",a);let f=new Map,u=a.map(c=>new cr(c,this.options));for(let c of u){if(vn(c))return[c];f.set(c.value,c)}f.size>1&&f.has("")&&f.delete("");let h=[...f.values()];return Rn.set(n,h),h}intersects(r,t){if(!(r instanceof e))throw new TypeError("a Range is required");return this.set.some(n=>An(n,t)&&r.set.some(s=>An(s,t)&&n.every(i=>s.every(o=>i.intersects(o,t)))))}test(r){if(!r)return!1;if(typeof r=="string")try{r=new ba(r,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(ka(this.set[t],r,this.options))return!0;return!1}};Tn.exports=ar;var wa=bn(),Rn=new wa,Ia=we(),cr=re(),S=Q(),ba=I(),{safeRe:A,t:b,comparatorTrimReplace:Ra,tildeTrimReplace:va,caretTrimReplace:Aa}=M(),{FLAG_INCLUDE_PRERELEASE:Ta,FLAG_LOOSE:$a}=Z(),vn=e=>e.value==="<0.0.0-0",La=e=>e.value==="",An=(e,r)=>{let t=!0,n=e.slice(),s=n.pop();for(;t&&n.length;)t=n.every(i=>s.intersects(i,r)),s=n.pop();return t},Oa=(e,r)=>(S("comp",e,r),e=xa(e,r),S("caret",e),e=Na(e,r),S("tildes",e),e=ja(e,r),S("xrange",e),e=Ca(e,r),S("stars",e),e),R=e=>!e||e.toLowerCase()==="x"||e==="*",Na=(e,r)=>e.trim().split(/\s+/).map(t=>qa(t,r)).join(" "),qa=(e,r)=>{let t=r.loose?A[b.TILDELOOSE]:A[b.TILDE];return e.replace(t,(n,s,i,o,a)=>{S("tilde",e,n,s,i,o,a);let f;return R(s)?f="":R(i)?f=`>=${s}.0.0 <${+s+1}.0.0-0`:R(o)?f=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(S("replaceTilde pr",a),f=`>=${s}.${i}.${o}-${a} <${s}.${+i+1}.0-0`):f=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,S("tilde return",f),f})},xa=(e,r)=>e.trim().split(/\s+/).map(t=>Pa(t,r)).join(" "),Pa=(e,r)=>{S("caret",e,r);let t=r.loose?A[b.CARETLOOSE]:A[b.CARET],n=r.includePrerelease?"-0":"";return e.replace(t,(s,i,o,a,f)=>{S("caret",e,s,i,o,a,f);let u;return R(i)?u="":R(o)?u=`>=${i}.0.0${n} <${+i+1}.0.0-0`:R(a)?i==="0"?u=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:f?(S("replaceCaret pr",f),i==="0"?o==="0"?u=`>=${i}.${o}.${a}-${f} <${i}.${o}.${+a+1}-0`:u=`>=${i}.${o}.${a}-${f} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${a}-${f} <${+i+1}.0.0-0`):(S("no pr"),i==="0"?o==="0"?u=`>=${i}.${o}.${a}${n} <${i}.${o}.${+a+1}-0`:u=`>=${i}.${o}.${a}${n} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),S("caret return",u),u})},ja=(e,r)=>(S("replaceXRanges",e,r),e.split(/\s+/).map(t=>Da(t,r)).join(" ")),Da=(e,r)=>{e=e.trim();let t=r.loose?A[b.XRANGELOOSE]:A[b.XRANGE];return e.replace(t,(n,s,i,o,a,f)=>{S("xRange",e,n,s,i,o,a,f);let u=R(i),h=u||R(o),c=h||R(a),g=c;return s==="="&&g&&(s=""),f=r.includePrerelease?"-0":"",u?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&g?(h&&(o=0),a=0,s===">"?(s=">=",h?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",h?i=+i+1:o=+o+1),s==="<"&&(f="-0"),n=`${s+i}.${o}.${a}${f}`):h?n=`>=${i}.0.0${f} <${+i+1}.0.0-0`:c&&(n=`>=${i}.${o}.0${f} <${i}.${+o+1}.0-0`),S("xRange return",n),n})},Ca=(e,r)=>(S("replaceStars",e,r),e.trim().replace(A[b.STAR],"")),_a=(e,r)=>(S("replaceGTE0",e,r),e.trim().replace(A[r.includePrerelease?b.GTE0PRE:b.GTE0],"")),Ga=e=>(r,t,n,s,i,o,a,f,u,h,c,g)=>(R(n)?t="":R(s)?t=`>=${n}.0.0${e?"-0":""}`:R(i)?t=`>=${n}.${s}.0${e?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${e?"-0":""}`,R(u)?f="":R(h)?f=`<${+u+1}.0.0-0`:R(c)?f=`<${u}.${+h+1}.0-0`:g?f=`<=${u}.${h}.${c}-${g}`:e?f=`<${u}.${h}.${+c+1}-0`:f=`<=${f}`,`${t} ${f}`.trim()),ka=(e,r,t)=>{for(let n=0;n<e.length;n++)if(!e[n].test(r))return!1;if(r.prerelease.length&&!t.includePrerelease){for(let n=0;n<e.length;n++)if(S(e[n].semver),e[n].semver!==cr.ANY&&e[n].semver.prerelease.length>0){let s=e[n].semver;if(s.major===r.major&&s.minor===r.minor&&s.patch===r.patch)return!0}return!1}return!0}});var re=l((Eh,xn)=>{"use strict";var te=Symbol("SemVer ANY"),lr=class e{static get ANY(){return te}constructor(r,t){if(t=$n(t),r instanceof e){if(r.loose===!!t.loose)return r;r=r.value}r=r.trim().split(/\s+/).join(" "),fr("comparator",r,t),this.options=t,this.loose=!!t.loose,this.parse(r),this.semver===te?this.value="":this.value=this.operator+this.semver.version,fr("comp",this)}parse(r){let t=this.options.loose?Ln[On.COMPARATORLOOSE]:Ln[On.COMPARATOR],n=r.match(t);if(!n)throw new TypeError(`Invalid comparator: ${r}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Nn(n[2],this.options.loose):this.semver=te}toString(){return this.value}test(r){if(fr("Comparator.test",r,this.options.loose),this.semver===te||r===te)return!0;if(typeof r=="string")try{r=new Nn(r,this.options)}catch{return!1}return ur(r,this.operator,this.semver,this.options)}intersects(r,t){if(!(r instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new qn(r.value,t).test(this.value):r.operator===""?r.value===""?!0:new qn(this.value,t).test(r.semver):(t=$n(t),t.includePrerelease&&(this.value==="<0.0.0-0"||r.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||r.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&r.operator.startsWith(">")||this.operator.startsWith("<")&&r.operator.startsWith("<")||this.semver.version===r.semver.version&&this.operator.includes("=")&&r.operator.includes("=")||ur(this.semver,"<",r.semver,t)&&this.operator.startsWith(">")&&r.operator.startsWith("<")||ur(this.semver,">",r.semver,t)&&this.operator.startsWith("<")&&r.operator.startsWith(">")))}};xn.exports=lr;var $n=we(),{safeRe:Ln,t:On}=M(),ur=ir(),fr=Q(),Nn=I(),qn=L()});var ne=l((gh,Pn)=>{"use strict";var Ba=L(),Va=(e,r,t)=>{try{r=new Ba(r,t)}catch{return!1}return r.test(e)};Pn.exports=Va});var Dn=l((yh,jn)=>{"use strict";var Fa=L(),Ua=(e,r)=>new Fa(e,r).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));jn.exports=Ua});var _n=l((Sh,Cn)=>{"use strict";var Ha=I(),Ma=L(),Xa=(e,r,t)=>{let n=null,s=null,i=null;try{i=new Ma(r,t)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new Ha(n,t))}),n};Cn.exports=Xa});var kn=l((wh,Gn)=>{"use strict";var za=I(),Ja=L(),Ka=(e,r,t)=>{let n=null,s=null,i=null;try{i=new Ja(r,t)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new za(n,t))}),n};Gn.exports=Ka});var Fn=l((Ih,Vn)=>{"use strict";var hr=I(),Wa=L(),Bn=ee(),Ya=(e,r)=>{e=new Wa(e,r);let t=new hr("0.0.0");if(e.test(t)||(t=new hr("0.0.0-0"),e.test(t)))return t;t=null;for(let n=0;n<e.set.length;++n){let s=e.set[n],i=null;s.forEach(o=>{let a=new hr(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||Bn(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!t||Bn(t,i))&&(t=i)}return t&&e.test(t)?t:null};Vn.exports=Ya});var Hn=l((bh,Un)=>{"use strict";var Za=L(),Qa=(e,r)=>{try{return new Za(e,r).range||"*"}catch{return null}};Un.exports=Qa});var qe=l((Rh,Jn)=>{"use strict";var ec=I(),zn=re(),{ANY:rc}=zn,tc=L(),nc=ne(),Mn=ee(),Xn=Te(),sc=Le(),ic=$e(),oc=(e,r,t,n)=>{e=new ec(e,n),r=new tc(r,n);let s,i,o,a,f;switch(t){case">":s=Mn,i=sc,o=Xn,a=">",f=">=";break;case"<":s=Xn,i=ic,o=Mn,a="<",f="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(nc(e,r,n))return!1;for(let u=0;u<r.set.length;++u){let h=r.set[u],c=null,g=null;if(h.forEach(m=>{m.semver===rc&&(m=new zn(">=0.0.0")),c=c||m,g=g||m,s(m.semver,c.semver,n)?c=m:o(m.semver,g.semver,n)&&(g=m)}),c.operator===a||c.operator===f||(!g.operator||g.operator===a)&&i(e,g.semver))return!1;if(g.operator===f&&o(e,g.semver))return!1}return!0};Jn.exports=oc});var Wn=l((vh,Kn)=>{"use strict";var ac=qe(),cc=(e,r,t)=>ac(e,r,">",t);Kn.exports=cc});var Zn=l((Ah,Yn)=>{"use strict";var uc=qe(),fc=(e,r,t)=>uc(e,r,"<",t);Yn.exports=fc});var rs=l((Th,es)=>{"use strict";var Qn=L(),lc=(e,r,t)=>(e=new Qn(e,t),r=new Qn(r,t),e.intersects(r,t));es.exports=lc});var ns=l(($h,ts)=>{"use strict";var hc=ne(),pc=$();ts.exports=(e,r,t)=>{let n=[],s=null,i=null,o=e.sort((h,c)=>pc(h,c,t));for(let h of o)hc(h,r,t)?(i=h,s||(s=h)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let a=[];for(let[h,c]of n)h===c?a.push(h):!c&&h===o[0]?a.push("*"):c?h===o[0]?a.push(`<=${c}`):a.push(`${h} - ${c}`):a.push(`>=${h}`);let f=a.join(" || "),u=typeof r.raw=="string"?r.raw:String(r);return f.length<u.length?f:r}});var us=l((Lh,cs)=>{"use strict";var ss=L(),dr=re(),{ANY:pr}=dr,se=ne(),mr=$(),dc=(e,r,t={})=>{if(e===r)return!0;e=new ss(e,t),r=new ss(r,t);let n=!1;e:for(let s of e.set){for(let i of r.set){let o=Ec(s,i,t);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},mc=[new dr(">=0.0.0-0")],is=[new dr(">=0.0.0")],Ec=(e,r,t)=>{if(e===r)return!0;if(e.length===1&&e[0].semver===pr){if(r.length===1&&r[0].semver===pr)return!0;t.includePrerelease?e=mc:e=is}if(r.length===1&&r[0].semver===pr){if(t.includePrerelease)return!0;r=is}let n=new Set,s,i;for(let m of e)m.operator===">"||m.operator===">="?s=os(s,m,t):m.operator==="<"||m.operator==="<="?i=as(i,m,t):n.add(m.semver);if(n.size>1)return null;let o;if(s&&i){if(o=mr(s.semver,i.semver,t),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let m of n){if(s&&!se(m,String(s),t)||i&&!se(m,String(i),t))return null;for(let w of r)if(!se(m,String(w),t))return!1;return!0}let a,f,u,h,c=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1,g=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1;c&&c.prerelease.length===1&&i.operator==="<"&&c.prerelease[0]===0&&(c=!1);for(let m of r){if(h=h||m.operator===">"||m.operator===">=",u=u||m.operator==="<"||m.operator==="<=",s){if(g&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===g.major&&m.semver.minor===g.minor&&m.semver.patch===g.patch&&(g=!1),m.operator===">"||m.operator===">="){if(a=os(s,m,t),a===m&&a!==s)return!1}else if(s.operator===">="&&!se(s.semver,String(m),t))return!1}if(i){if(c&&m.semver.prerelease&&m.semver.prerelease.length&&m.semver.major===c.major&&m.semver.minor===c.minor&&m.semver.patch===c.patch&&(c=!1),m.operator==="<"||m.operator==="<="){if(f=as(i,m,t),f===m&&f!==i)return!1}else if(i.operator==="<="&&!se(i.semver,String(m),t))return!1}if(!m.operator&&(i||s)&&o!==0)return!1}return!(s&&u&&!i&&o!==0||i&&h&&!s&&o!==0||g||c)},os=(e,r,t)=>{if(!e)return r;let n=mr(e.semver,r.semver,t);return n>0?e:n<0||r.operator===">"&&e.operator===">="?r:e},as=(e,r,t)=>{if(!e)return r;let n=mr(e.semver,r.semver,t);return n<0?e:n>0||r.operator==="<"&&e.operator==="<="?r:e};cs.exports=dc});var xe=l((Oh,hs)=>{"use strict";var Er=M(),fs=Z(),gc=I(),ls=rr(),yc=_(),Sc=Ct(),wc=Gt(),Ic=Vt(),bc=Ht(),Rc=Xt(),vc=Jt(),Ac=Wt(),Tc=Zt(),$c=$(),Lc=tn(),Oc=sn(),Nc=Ae(),qc=un(),xc=ln(),Pc=ee(),jc=Te(),Dc=nr(),Cc=sr(),_c=$e(),Gc=Le(),kc=ir(),Bc=wn(),Vc=re(),Fc=L(),Uc=ne(),Hc=Dn(),Mc=_n(),Xc=kn(),zc=Fn(),Jc=Hn(),Kc=qe(),Wc=Wn(),Yc=Zn(),Zc=rs(),Qc=ns(),eu=us();hs.exports={parse:yc,valid:Sc,clean:wc,inc:Ic,diff:bc,major:Rc,minor:vc,patch:Ac,prerelease:Tc,compare:$c,rcompare:Lc,compareLoose:Oc,compareBuild:Nc,sort:qc,rsort:xc,gt:Pc,lt:jc,eq:Dc,neq:Cc,gte:_c,lte:Gc,cmp:kc,coerce:Bc,Comparator:Vc,Range:Fc,satisfies:Uc,toComparators:Hc,maxSatisfying:Mc,minSatisfying:Xc,minVersion:zc,validRange:Jc,outside:Kc,gtr:Wc,ltr:Yc,intersects:Zc,simplifyRange:Qc,subset:eu,SemVer:gc,re:Er.re,src:Er.src,tokens:Er.t,SEMVER_SPEC_VERSION:fs.SEMVER_SPEC_VERSION,RELEASE_TYPES:fs.RELEASE_TYPES,compareIdentifiers:ls.compareIdentifiers,rcompareIdentifiers:ls.rcompareIdentifiers}});var ds=l((Nh,ps)=>{var ru=xe();ps.exports=ru.satisfies(process.version,">=15.7.0")});var Es=l((qh,ms)=>{var tu=xe();ms.exports=tu.satisfies(process.version,">=16.9.0")});var gr=l((xh,gs)=>{var nu=ds(),su=Es(),iu={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},ou={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};gs.exports=function(e,r){if(!e||!r)return;let t=r.asymmetricKeyType;if(!t)return;let n=iu[t];if(!n)throw new Error(`Unknown key type "${t}".`);if(!n.includes(e))throw new Error(`"alg" parameter for "${t}" key type must be one of: ${n.join(", ")}.`);if(nu)switch(t){case"ec":let s=r.asymmetricKeyDetails.namedCurve,i=ou[e];if(s!==i)throw new Error(`"alg" parameter "${e}" requires curve "${i}".`);break;case"rsa-pss":if(su){let o=parseInt(e.slice(-3),10),{hashAlgorithm:a,mgf1HashAlgorithm:f,saltLength:u}=r.asymmetricKeyDetails;if(a!==`sha${o}`||f!==a)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`);if(u!==void 0&&u>o>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}break}}});var yr=l((Ph,ys)=>{var au=xe();ys.exports=au.satisfies(process.version,"^6.12.0 || >=8.0.0")});var Is=l((jh,ws)=>{var y=Y(),cu=We(),Ss=Ye(),uu=Ke(),fu=Ze(),lu=gr(),hu=yr(),pu=me(),{KeyObject:du,createSecretKey:mu,createPublicKey:Eu}=require("crypto"),Sr=["RS256","RS384","RS512"],gu=["ES256","ES384","ES512"],wr=["RS256","RS384","RS512"],yu=["HS256","HS384","HS512"];hu&&(Sr.splice(Sr.length,0,"PS256","PS384","PS512"),wr.splice(wr.length,0,"PS256","PS384","PS512"));ws.exports=function(e,r,t,n){typeof t=="function"&&!n&&(n=t,t={}),t||(t={}),t=Object.assign({},t);let s;if(n?s=n:s=function(h,c){if(h)throw h;return c},t.clockTimestamp&&typeof t.clockTimestamp!="number")return s(new y("clockTimestamp must be a number"));if(t.nonce!==void 0&&(typeof t.nonce!="string"||t.nonce.trim()===""))return s(new y("nonce must be a non-empty string"));if(t.allowInvalidAsymmetricKeyTypes!==void 0&&typeof t.allowInvalidAsymmetricKeyTypes!="boolean")return s(new y("allowInvalidAsymmetricKeyTypes must be a boolean"));let i=t.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return s(new y("jwt must be provided"));if(typeof e!="string")return s(new y("jwt must be a string"));let o=e.split(".");if(o.length!==3)return s(new y("jwt malformed"));let a;try{a=uu(e,{complete:!0})}catch(h){return s(h)}if(!a)return s(new y("invalid token"));let f=a.header,u;if(typeof r=="function"){if(!n)return s(new y("verify must be called asynchronous if secret or public key is provided as a callback"));u=r}else u=function(h,c){return c(null,r)};return u(f,function(h,c){if(h)return s(new y("error in secret or public key callback: "+h.message));let g=o[2].trim()!=="";if(!g&&c)return s(new y("jwt signature is required"));if(g&&!c)return s(new y("secret or public key must be provided"));if(!g&&!t.algorithms)return s(new y('please specify "none" in "algorithms" to verify unsigned tokens'));if(c!=null&&!(c instanceof du))try{c=Eu(c)}catch{try{c=mu(typeof c=="string"?Buffer.from(c):c)}catch{return s(new y("secretOrPublicKey is not valid key material"))}}if(t.algorithms||(c.type==="secret"?t.algorithms=yu:["rsa","rsa-pss"].includes(c.asymmetricKeyType)?t.algorithms=wr:c.asymmetricKeyType==="ec"?t.algorithms=gu:t.algorithms=Sr),t.algorithms.indexOf(a.header.alg)===-1)return s(new y("invalid algorithm"));if(f.alg.startsWith("HS")&&c.type!=="secret")return s(new y(`secretOrPublicKey must be a symmetric key when using ${f.alg}`));if(/^(?:RS|PS|ES)/.test(f.alg)&&c.type!=="public")return s(new y(`secretOrPublicKey must be an asymmetric key when using ${f.alg}`));if(!t.allowInvalidAsymmetricKeyTypes)try{lu(f.alg,c)}catch(v){return s(v)}let m;try{m=pu.verify(e,a.header.alg,c)}catch(v){return s(v)}if(!m)return s(new y("invalid signature"));let w=a.payload;if(typeof w.nbf<"u"&&!t.ignoreNotBefore){if(typeof w.nbf!="number")return s(new y("invalid nbf value"));if(w.nbf>i+(t.clockTolerance||0))return s(new cu("jwt not active",new Date(w.nbf*1e3)))}if(typeof w.exp<"u"&&!t.ignoreExpiration){if(typeof w.exp!="number")return s(new y("invalid exp value"));if(i>=w.exp+(t.clockTolerance||0))return s(new Ss("jwt expired",new Date(w.exp*1e3)))}if(t.audience){let v=Array.isArray(t.audience)?t.audience:[t.audience];if(!(Array.isArray(w.aud)?w.aud:[w.aud]).some(function(Tr){return v.some(function(Ge){return Ge instanceof RegExp?Ge.test(Tr):Ge===Tr})}))return s(new y("jwt audience invalid. expected: "+v.join(" or ")))}if(t.issuer&&(typeof t.issuer=="string"&&w.iss!==t.issuer||Array.isArray(t.issuer)&&t.issuer.indexOf(w.iss)===-1))return s(new y("jwt issuer invalid. expected: "+t.issuer));if(t.subject&&w.sub!==t.subject)return s(new y("jwt subject invalid. expected: "+t.subject));if(t.jwtid&&w.jti!==t.jwtid)return s(new y("jwt jwtid invalid. expected: "+t.jwtid));if(t.nonce&&w.nonce!==t.nonce)return s(new y("jwt nonce invalid. expected: "+t.nonce));if(t.maxAge){if(typeof w.iat!="number")return s(new y("iat required when maxAge is specified"));let v=fu(t.maxAge,w.iat);if(typeof v>"u")return s(new y('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(i>=v+(t.clockTolerance||0))return s(new Ss("maxAge exceeded",new Date(v*1e3)))}if(t.complete===!0){let v=a.signature;return s(null,{header:f,payload:w,signature:v})}return s(null,w)})}});var $s=l((Dh,Ts)=>{var bs=1/0,vs=9007199254740991,Su=17976931348623157e292,Rs=NaN,wu="[object Arguments]",Iu="[object Function]",bu="[object GeneratorFunction]",Ru="[object String]",vu="[object Symbol]",Au=/^\s+|\s+$/g,Tu=/^[-+]0x[0-9a-f]+$/i,$u=/^0b[01]+$/i,Lu=/^0o[0-7]+$/i,Ou=/^(?:0|[1-9]\d*)$/,Nu=parseInt;function qu(e,r){for(var t=-1,n=e?e.length:0,s=Array(n);++t<n;)s[t]=r(e[t],t,e);return s}function xu(e,r,t,n){for(var s=e.length,i=t+(n?1:-1);n?i--:++i<s;)if(r(e[i],i,e))return i;return-1}function Pu(e,r,t){if(r!==r)return xu(e,ju,t);for(var n=t-1,s=e.length;++n<s;)if(e[n]===r)return n;return-1}function ju(e){return e!==e}function Du(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}function Cu(e,r){return qu(r,function(t){return e[t]})}function _u(e,r){return function(t){return e(r(t))}}var Pe=Object.prototype,br=Pe.hasOwnProperty,je=Pe.toString,Gu=Pe.propertyIsEnumerable,ku=_u(Object.keys,Object),Bu=Math.max;function Vu(e,r){var t=As(e)||Xu(e)?Du(e.length,String):[],n=t.length,s=!!n;for(var i in e)(r||br.call(e,i))&&!(s&&(i=="length"||Uu(i,n)))&&t.push(i);return t}function Fu(e){if(!Hu(e))return ku(e);var r=[];for(var t in Object(e))br.call(e,t)&&t!="constructor"&&r.push(t);return r}function Uu(e,r){return r=r??vs,!!r&&(typeof e=="number"||Ou.test(e))&&e>-1&&e%1==0&&e<r}function Hu(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||Pe;return e===t}function Mu(e,r,t,n){e=Rr(e)?e:tf(e),t=t&&!n?Qu(t):0;var s=e.length;return t<0&&(t=Bu(s+t,0)),Wu(e)?t<=s&&e.indexOf(r,t)>-1:!!s&&Pu(e,r,t)>-1}function Xu(e){return zu(e)&&br.call(e,"callee")&&(!Gu.call(e,"callee")||je.call(e)==wu)}var As=Array.isArray;function Rr(e){return e!=null&&Ku(e.length)&&!Ju(e)}function zu(e){return vr(e)&&Rr(e)}function Ju(e){var r=Ir(e)?je.call(e):"";return r==Iu||r==bu}function Ku(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=vs}function Ir(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function vr(e){return!!e&&typeof e=="object"}function Wu(e){return typeof e=="string"||!As(e)&&vr(e)&&je.call(e)==Ru}function Yu(e){return typeof e=="symbol"||vr(e)&&je.call(e)==vu}function Zu(e){if(!e)return e===0?e:0;if(e=ef(e),e===bs||e===-bs){var r=e<0?-1:1;return r*Su}return e===e?e:0}function Qu(e){var r=Zu(e),t=r%1;return r===r?t?r-t:r:0}function ef(e){if(typeof e=="number")return e;if(Yu(e))return Rs;if(Ir(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Ir(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(Au,"");var t=$u.test(e);return t||Lu.test(e)?Nu(e.slice(2),t?2:8):Tu.test(e)?Rs:+e}function rf(e){return Rr(e)?Vu(e):Fu(e)}function tf(e){return e?Cu(e,rf(e)):[]}Ts.exports=Mu});var Os=l((Ch,Ls)=>{var nf="[object Boolean]",sf=Object.prototype,of=sf.toString;function af(e){return e===!0||e===!1||cf(e)&&of.call(e)==nf}function cf(e){return!!e&&typeof e=="object"}Ls.exports=af});var js=l((_h,Ps)=>{var Ns=1/0,uf=17976931348623157e292,qs=NaN,ff="[object Symbol]",lf=/^\s+|\s+$/g,hf=/^[-+]0x[0-9a-f]+$/i,pf=/^0b[01]+$/i,df=/^0o[0-7]+$/i,mf=parseInt,Ef=Object.prototype,gf=Ef.toString;function yf(e){return typeof e=="number"&&e==bf(e)}function xs(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function Sf(e){return!!e&&typeof e=="object"}function wf(e){return typeof e=="symbol"||Sf(e)&&gf.call(e)==ff}function If(e){if(!e)return e===0?e:0;if(e=Rf(e),e===Ns||e===-Ns){var r=e<0?-1:1;return r*uf}return e===e?e:0}function bf(e){var r=If(e),t=r%1;return r===r?t?r-t:r:0}function Rf(e){if(typeof e=="number")return e;if(wf(e))return qs;if(xs(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=xs(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(lf,"");var t=pf.test(e);return t||df.test(e)?mf(e.slice(2),t?2:8):hf.test(e)?qs:+e}Ps.exports=yf});var Cs=l((Gh,Ds)=>{var vf="[object Number]",Af=Object.prototype,Tf=Af.toString;function $f(e){return!!e&&typeof e=="object"}function Lf(e){return typeof e=="number"||$f(e)&&Tf.call(e)==vf}Ds.exports=Lf});var Bs=l((kh,ks)=>{var Of="[object Object]";function Nf(e){var r=!1;if(e!=null&&typeof e.toString!="function")try{r=!!(e+"")}catch{}return r}function qf(e,r){return function(t){return e(r(t))}}var xf=Function.prototype,_s=Object.prototype,Gs=xf.toString,Pf=_s.hasOwnProperty,jf=Gs.call(Object),Df=_s.toString,Cf=qf(Object.getPrototypeOf,Object);function _f(e){return!!e&&typeof e=="object"}function Gf(e){if(!_f(e)||Df.call(e)!=Of||Nf(e))return!1;var r=Cf(e);if(r===null)return!0;var t=Pf.call(r,"constructor")&&r.constructor;return typeof t=="function"&&t instanceof t&&Gs.call(t)==jf}ks.exports=Gf});var Fs=l((Bh,Vs)=>{var kf="[object String]",Bf=Object.prototype,Vf=Bf.toString,Ff=Array.isArray;function Uf(e){return!!e&&typeof e=="object"}function Hf(e){return typeof e=="string"||!Ff(e)&&Uf(e)&&Vf.call(e)==kf}Vs.exports=Hf});var zs=l((Vh,Xs)=>{var Mf="Expected a function",Us=1/0,Xf=17976931348623157e292,Hs=NaN,zf="[object Symbol]",Jf=/^\s+|\s+$/g,Kf=/^[-+]0x[0-9a-f]+$/i,Wf=/^0b[01]+$/i,Yf=/^0o[0-7]+$/i,Zf=parseInt,Qf=Object.prototype,el=Qf.toString;function rl(e,r){var t;if(typeof r!="function")throw new TypeError(Mf);return e=ol(e),function(){return--e>0&&(t=r.apply(this,arguments)),e<=1&&(r=void 0),t}}function tl(e){return rl(2,e)}function Ms(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function nl(e){return!!e&&typeof e=="object"}function sl(e){return typeof e=="symbol"||nl(e)&&el.call(e)==zf}function il(e){if(!e)return e===0?e:0;if(e=al(e),e===Us||e===-Us){var r=e<0?-1:1;return r*Xf}return e===e?e:0}function ol(e){var r=il(e),t=r%1;return r===r?t?r-t:r:0}function al(e){if(typeof e=="number")return e;if(sl(e))return Hs;if(Ms(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Ms(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(Jf,"");var t=Wf.test(e);return t||Yf.test(e)?Zf(e.slice(2),t?2:8):Kf.test(e)?Hs:+e}Xs.exports=tl});var ti=l((Fh,ri)=>{var Js=Ze(),cl=yr(),ul=gr(),Ks=me(),fl=$s(),De=Os(),Ws=js(),Ar=Cs(),Zs=Bs(),j=Fs(),ll=zs(),{KeyObject:hl,createSecretKey:pl,createPrivateKey:dl}=require("crypto"),Qs=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];cl&&Qs.splice(3,0,"PS256","PS384","PS512");var ml={expiresIn:{isValid:function(e){return Ws(e)||j(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return Ws(e)||j(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return j(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:fl.bind(null,Qs),message:'"algorithm" must be a valid string enum value'},header:{isValid:Zs,message:'"header" must be an object'},encoding:{isValid:j,message:'"encoding" must be a string'},issuer:{isValid:j,message:'"issuer" must be a string'},subject:{isValid:j,message:'"subject" must be a string'},jwtid:{isValid:j,message:'"jwtid" must be a string'},noTimestamp:{isValid:De,message:'"noTimestamp" must be a boolean'},keyid:{isValid:j,message:'"keyid" must be a string'},mutatePayload:{isValid:De,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:De,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:De,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},El={iat:{isValid:Ar,message:'"iat" should be a number of seconds'},exp:{isValid:Ar,message:'"exp" should be a number of seconds'},nbf:{isValid:Ar,message:'"nbf" should be a number of seconds'}};function ei(e,r,t,n){if(!Zs(t))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(t).forEach(function(s){let i=e[s];if(!i){if(!r)throw new Error('"'+s+'" is not allowed in "'+n+'"');return}if(!i.isValid(t[s]))throw new Error(i.message)})}function gl(e){return ei(ml,!1,e,"options")}function yl(e){return ei(El,!0,e,"payload")}var Ys={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},Sl=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];ri.exports=function(e,r,t,n){typeof t=="function"?(n=t,t={}):t=t||{};let s=typeof e=="object"&&!Buffer.isBuffer(e),i=Object.assign({alg:t.algorithm||"HS256",typ:s?"JWT":void 0,kid:t.keyid},t.header);function o(u){if(n)return n(u);throw u}if(!r&&t.algorithm!=="none")return o(new Error("secretOrPrivateKey must have a value"));if(r!=null&&!(r instanceof hl))try{r=dl(r)}catch{try{r=pl(typeof r=="string"?Buffer.from(r):r)}catch{return o(new Error("secretOrPrivateKey is not valid key material"))}}if(i.alg.startsWith("HS")&&r.type!=="secret")return o(new Error(`secretOrPrivateKey must be a symmetric key when using ${i.alg}`));if(/^(?:RS|PS|ES)/.test(i.alg)){if(r.type!=="private")return o(new Error(`secretOrPrivateKey must be an asymmetric key when using ${i.alg}`));if(!t.allowInsecureKeySizes&&!i.alg.startsWith("ES")&&r.asymmetricKeyDetails!==void 0&&r.asymmetricKeyDetails.modulusLength<2048)return o(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`))}if(typeof e>"u")return o(new Error("payload is required"));if(s){try{yl(e)}catch(u){return o(u)}t.mutatePayload||(e=Object.assign({},e))}else{let u=Sl.filter(function(h){return typeof t[h]<"u"});if(u.length>0)return o(new Error("invalid "+u.join(",")+" option for "+typeof e+" payload"))}if(typeof e.exp<"u"&&typeof t.expiresIn<"u")return o(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof e.nbf<"u"&&typeof t.notBefore<"u")return o(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{gl(t)}catch(u){return o(u)}if(!t.allowInvalidAsymmetricKeyTypes)try{ul(i.alg,r)}catch(u){return o(u)}let a=e.iat||Math.floor(Date.now()/1e3);if(t.noTimestamp?delete e.iat:s&&(e.iat=a),typeof t.notBefore<"u"){try{e.nbf=Js(t.notBefore,a)}catch(u){return o(u)}if(typeof e.nbf>"u")return o(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof t.expiresIn<"u"&&typeof e=="object"){try{e.exp=Js(t.expiresIn,a)}catch(u){return o(u)}if(typeof e.exp>"u")return o(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(Ys).forEach(function(u){let h=Ys[u];if(typeof t[u]<"u"){if(typeof e[h]<"u")return o(new Error('Bad "options.'+u+'" option. The payload already has an "'+h+'" property.'));e[h]=t[u]}});let f=t.encoding||"utf8";if(typeof n=="function")n=n&&ll(n),Ks.createSign({header:i,privateKey:r,payload:e,encoding:f}).once("error",n).once("done",function(u){if(!t.allowInsecureKeySizes&&/^(?:RS|PS)/.test(i.alg)&&u.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`));n(null,u)});else{let u=Ks.sign({header:i,payload:e,secret:r,encoding:f});if(!t.allowInsecureKeySizes&&/^(?:RS|PS)/.test(i.alg)&&u.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`);return u}}});var si=l((Uh,ni)=>{ni.exports={decode:Ke(),verify:Is(),sign:ti(),JsonWebTokenError:Y(),NotBeforeError:We(),TokenExpiredError:Ye()}});var bl={};li(bl,{TokenAuthorizer:()=>_e,handler:()=>Il});module.exports=pi(bl);var O=hi(si());var z=class{constructor(r){this.context=r,this.logLevel=process.env.LOG_LEVEL||"INFO"}info(r,t){this.shouldLog("INFO")&&this.log("INFO",r,t)}debug(r,t){this.shouldLog("DEBUG")&&this.log("DEBUG",r,t)}warn(r,t){this.shouldLog("WARN")&&this.log("WARN",r,t)}error(r,t){let n=t instanceof Error?{name:t.name,message:t.message,stack:t.stack}:t;this.log("ERROR",r,n)}perf(r,t,n){this.info(`Performance: ${r}`,{duration:`${t}ms`,operation:r,...n})}log(r,t,n){let s={timestamp:new Date().toISOString(),level:r,context:this.context,message:t,stage:process.env.STAGE||"unknown",version:"2.0.0",...n&&{data:n}};switch(r){case"ERROR":console.error(JSON.stringify(s));break;case"WARN":console.warn(JSON.stringify(s));break;default:console.log(JSON.stringify(s))}}shouldLog(r){let t=["ERROR","WARN","INFO","DEBUG"],n=t.indexOf(this.logLevel);return t.indexOf(r)<=n}};var Ce=class{constructor(){this.logger=new z("JwtService"),this.jwtSecret=process.env.JWT_SECRET||"your-jwt-secret"}validateToken(r){try{let t=r.replace(/^Bearer\s+/i,"");if(!t)return{isValid:!1,error:"Token is empty"};let n=O.verify(t,this.jwtSecret);return!n.userId||!n.email?{isValid:!1,error:"Token missing required fields"}:n.exp&&n.exp<Math.floor(Date.now()/1e3)?{isValid:!1,error:"Token has expired"}:(this.logger.debug("Token validated successfully",{userId:n.userId,email:n.email,exp:n.exp}),{isValid:!0,payload:n})}catch(t){let n="Token validation failed";return t instanceof O.JsonWebTokenError?n="Invalid token format":t instanceof O.TokenExpiredError?n="Token has expired":t instanceof O.NotBeforeError&&(n="Token not active yet"),this.logger.warn("Token validation failed",{error:t instanceof Error?t.message:t,errorType:t instanceof Error?t.constructor.name:"Unknown"}),{isValid:!1,error:n}}}generateToken(r,t,n="24h"){let s={userId:r,email:t,iat:Math.floor(Date.now()/1e3)};return O.sign(s,this.jwtSecret,{expiresIn:n})}extractUserIdUnsafe(r){try{let t=r.replace(/^Bearer\s+/i,"");return O.decode(t)?.userId||null}catch{return null}}};var _e=class{constructor(){this.jwtService=new Ce,this.logger=new z("TokenAuthorizer")}async authorize(r){let t=r.requestId||"unknown",n=r.authorizationToken;this.logger.info(`[${t}] Authorizer invoked`,{methodArn:r.methodArn,tokenLength:n?n.length:0,tokenPrefix:n?n.substring(0,10)+"...":"null"});try{if(!n)throw this.logger.warn(`[${t}] No authorization token provided`),new Error("Unauthorized");let s=this.jwtService.validateToken(n);if(!s.isValid)throw this.logger.warn(`[${t}] Token validation failed`,{error:s.error}),new Error("Unauthorized");let{payload:i}=s;if(!i)throw this.logger.error(`[${t}] Token validation succeeded but no payload returned`),new Error("Unauthorized");this.logger.info(`[${t}] Token validated successfully`,{userId:i.userId,email:i.email});let o=this.generatePolicy(i.userId,"Allow",r.methodArn);return o.context={userId:i.userId,email:i.email,role:i.role||"user"},this.logger.info(`[${t}] Authorization successful`,{principalId:o.principalId,effect:"Allow"}),o}catch(s){return this.logger.error(`[${t}] Authorization failed`,{error:s instanceof Error?s.message:s}),this.generatePolicy("anonymous","Deny",r.methodArn)}}generatePolicy(r,t,n){let s=n.split(":"),i=s[5]?.split("/")||[],o=i[0]||"*",a=i[1]||"*",f=`arn:aws:execute-api:${s[3]}:${s[4]}:${o}/${a}/*`;return{principalId:r,policyDocument:{Version:"2012-10-17",Statement:[{Action:"execute-api:Invoke",Effect:t,Resource:f}]}}}},wl=new _e,Il=async(e,r)=>await wl.authorize(e);0&&(module.exports={TokenAuthorizer,handler});
/*! Bundled license information:

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
//# sourceMappingURL=index.js.map
