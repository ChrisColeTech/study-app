{
  "version": 3,
  "sources": ["../../node_modules/safe-buffer/index.js", "../../node_modules/jws/lib/data-stream.js", "../../node_modules/ecdsa-sig-formatter/src/param-bytes-for-alg.js", "../../node_modules/ecdsa-sig-formatter/src/ecdsa-sig-formatter.js", "../../node_modules/buffer-equal-constant-time/index.js", "../../node_modules/jwa/index.js", "../../node_modules/jws/lib/tostring.js", "../../node_modules/jws/lib/sign-stream.js", "../../node_modules/jws/lib/verify-stream.js", "../../node_modules/jws/index.js", "../../node_modules/jsonwebtoken/decode.js", "../../node_modules/jsonwebtoken/lib/JsonWebTokenError.js", "../../node_modules/jsonwebtoken/lib/NotBeforeError.js", "../../node_modules/jsonwebtoken/lib/TokenExpiredError.js", "../../node_modules/ms/index.js", "../../node_modules/jsonwebtoken/lib/timespan.js", "../../node_modules/jsonwebtoken/node_modules/semver/internal/constants.js", "../../node_modules/jsonwebtoken/node_modules/semver/internal/debug.js", "../../node_modules/jsonwebtoken/node_modules/semver/internal/re.js", "../../node_modules/jsonwebtoken/node_modules/semver/internal/parse-options.js", "../../node_modules/jsonwebtoken/node_modules/semver/internal/identifiers.js", "../../node_modules/jsonwebtoken/node_modules/semver/classes/semver.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/parse.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/valid.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/clean.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/inc.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/diff.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/major.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/minor.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/patch.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/prerelease.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/compare.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/rcompare.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/compare-loose.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/compare-build.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/sort.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/rsort.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/gt.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/lt.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/eq.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/neq.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/gte.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/lte.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/cmp.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/coerce.js", "../../node_modules/jsonwebtoken/node_modules/semver/internal/lrucache.js", "../../node_modules/jsonwebtoken/node_modules/semver/classes/range.js", "../../node_modules/jsonwebtoken/node_modules/semver/classes/comparator.js", "../../node_modules/jsonwebtoken/node_modules/semver/functions/satisfies.js", "../../node_modules/jsonwebtoken/node_modules/semver/ranges/to-comparators.js", "../../node_modules/jsonwebtoken/node_modules/semver/ranges/max-satisfying.js", "../../node_modules/jsonwebtoken/node_modules/semver/ranges/min-satisfying.js", "../../node_modules/jsonwebtoken/node_modules/semver/ranges/min-version.js", "../../node_modules/jsonwebtoken/node_modules/semver/ranges/valid.js", "../../node_modules/jsonwebtoken/node_modules/semver/ranges/outside.js", "../../node_modules/jsonwebtoken/node_modules/semver/ranges/gtr.js", "../../node_modules/jsonwebtoken/node_modules/semver/ranges/ltr.js", "../../node_modules/jsonwebtoken/node_modules/semver/ranges/intersects.js", "../../node_modules/jsonwebtoken/node_modules/semver/ranges/simplify.js", "../../node_modules/jsonwebtoken/node_modules/semver/ranges/subset.js", "../../node_modules/jsonwebtoken/node_modules/semver/index.js", "../../node_modules/jsonwebtoken/lib/asymmetricKeyDetailsSupported.js", "../../node_modules/jsonwebtoken/lib/rsaPssKeyDetailsSupported.js", "../../node_modules/jsonwebtoken/lib/validateAsymmetricKey.js", "../../node_modules/jsonwebtoken/lib/psSupported.js", "../../node_modules/jsonwebtoken/verify.js", "../../node_modules/lodash.includes/index.js", "../../node_modules/lodash.isboolean/index.js", "../../node_modules/lodash.isinteger/index.js", "../../node_modules/lodash.isnumber/index.js", "../../node_modules/lodash.isplainobject/index.js", "../../node_modules/lodash.isstring/index.js", "../../node_modules/lodash.once/index.js", "../../node_modules/jsonwebtoken/sign.js", "../../node_modules/jsonwebtoken/index.js", "../../node_modules/@hapi/hoek/lib/stringify.js", "../../node_modules/@hapi/hoek/lib/error.js", "../../node_modules/@hapi/hoek/lib/assert.js", "../../node_modules/@hapi/hoek/lib/reach.js", "../../node_modules/@hapi/hoek/lib/types.js", "../../node_modules/@hapi/hoek/lib/utils.js", "../../node_modules/@hapi/hoek/lib/clone.js", "../../node_modules/joi/package.json", "../../node_modules/joi/lib/schemas.js", "../../node_modules/@hapi/hoek/lib/escapeHtml.js", "../../node_modules/@sideway/formula/lib/index.js", "../../node_modules/joi/lib/annotate.js", "../../node_modules/joi/lib/errors.js", "../../node_modules/joi/lib/ref.js", "../../node_modules/joi/lib/template.js", "../../node_modules/joi/lib/messages.js", "../../node_modules/joi/lib/common.js", "../../node_modules/joi/lib/cache.js", "../../node_modules/joi/lib/compile.js", "../../node_modules/joi/lib/extend.js", "../../node_modules/joi/lib/manifest.js", "../../node_modules/@hapi/hoek/lib/deepEqual.js", "../../node_modules/@sideway/pinpoint/lib/index.js", "../../node_modules/joi/lib/trace.js", "../../node_modules/@hapi/hoek/lib/merge.js", "../../node_modules/joi/lib/modify.js", "../../node_modules/@hapi/hoek/lib/ignore.js", "../../node_modules/joi/lib/state.js", "../../node_modules/joi/lib/validator.js", "../../node_modules/joi/lib/values.js", "../../node_modules/joi/lib/base.js", "../../node_modules/joi/lib/types/any.js", "../../node_modules/joi/lib/types/alternatives.js", "../../node_modules/joi/lib/types/array.js", "../../node_modules/joi/lib/types/boolean.js", "../../node_modules/joi/lib/types/date.js", "../../node_modules/@hapi/hoek/lib/applyToDefaults.js", "../../node_modules/@hapi/topo/lib/index.js", "../../node_modules/joi/lib/types/keys.js", "../../node_modules/joi/lib/types/function.js", "../../node_modules/joi/lib/types/link.js", "../../node_modules/joi/lib/types/number.js", "../../node_modules/joi/lib/types/object.js", "../../node_modules/@sideway/address/lib/errors.js", "../../node_modules/@sideway/address/lib/domain.js", "../../node_modules/@sideway/address/lib/email.js", "../../node_modules/@hapi/hoek/lib/escapeRegex.js", "../../node_modules/@sideway/address/lib/uri.js", "../../node_modules/@sideway/address/lib/ip.js", "../../node_modules/@sideway/address/lib/tlds.js", "../../node_modules/joi/lib/types/string.js", "../../node_modules/joi/lib/types/symbol.js", "../../node_modules/joi/lib/types/binary.js", "../../node_modules/joi/lib/index.js", "../../src/handlers/auth-handler.ts", "../../src/types/index.ts", "../../src/shared/response-builder.ts", "../../src/shared/logger.ts", "../../src/shared/base-handler.ts", "../../src/services/user-service.ts", "../../node_modules/uuid/dist/esm-node/stringify.js", "../../node_modules/uuid/dist/esm-node/rng.js", "../../node_modules/uuid/dist/esm-node/native.js", "../../node_modules/uuid/dist/esm-node/v4.js", "../../node_modules/bcryptjs/index.js", "../../src/services/password-service.ts", "../../src/services/jwt-service.ts", "../../src/services/validation-service.ts"],
  "sourcesContent": ["/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n", "/*global module, process*/\nvar Buffer = require('safe-buffer').Buffer;\nvar Stream = require('stream');\nvar util = require('util');\n\nfunction DataStream(data) {\n  this.buffer = null;\n  this.writable = true;\n  this.readable = true;\n\n  // No input\n  if (!data) {\n    this.buffer = Buffer.alloc(0);\n    return this;\n  }\n\n  // Stream\n  if (typeof data.pipe === 'function') {\n    this.buffer = Buffer.alloc(0);\n    data.pipe(this);\n    return this;\n  }\n\n  // Buffer or String\n  // or Object (assumedly a passworded key)\n  if (data.length || typeof data === 'object') {\n    this.buffer = data;\n    this.writable = false;\n    process.nextTick(function () {\n      this.emit('end', data);\n      this.readable = false;\n      this.emit('close');\n    }.bind(this));\n    return this;\n  }\n\n  throw new TypeError('Unexpected data type ('+ typeof data + ')');\n}\nutil.inherits(DataStream, Stream);\n\nDataStream.prototype.write = function write(data) {\n  this.buffer = Buffer.concat([this.buffer, Buffer.from(data)]);\n  this.emit('data', data);\n};\n\nDataStream.prototype.end = function end(data) {\n  if (data)\n    this.write(data);\n  this.emit('end', data);\n  this.emit('close');\n  this.writable = false;\n  this.readable = false;\n};\n\nmodule.exports = DataStream;\n", "'use strict';\n\nfunction getParamSize(keySize) {\n\tvar result = ((keySize / 8) | 0) + (keySize % 8 === 0 ? 0 : 1);\n\treturn result;\n}\n\nvar paramBytesForAlg = {\n\tES256: getParamSize(256),\n\tES384: getParamSize(384),\n\tES512: getParamSize(521)\n};\n\nfunction getParamBytesForAlg(alg) {\n\tvar paramBytes = paramBytesForAlg[alg];\n\tif (paramBytes) {\n\t\treturn paramBytes;\n\t}\n\n\tthrow new Error('Unknown algorithm \"' + alg + '\"');\n}\n\nmodule.exports = getParamBytesForAlg;\n", "'use strict';\n\nvar Buffer = require('safe-buffer').Buffer;\n\nvar getParamBytesForAlg = require('./param-bytes-for-alg');\n\nvar MAX_OCTET = 0x80,\n\tCLASS_UNIVERSAL = 0,\n\tPRIMITIVE_BIT = 0x20,\n\tTAG_SEQ = 0x10,\n\tTAG_INT = 0x02,\n\tENCODED_TAG_SEQ = (TAG_SEQ | PRIMITIVE_BIT) | (CLASS_UNIVERSAL << 6),\n\tENCODED_TAG_INT = TAG_INT | (CLASS_UNIVERSAL << 6);\n\nfunction base64Url(base64) {\n\treturn base64\n\t\t.replace(/=/g, '')\n\t\t.replace(/\\+/g, '-')\n\t\t.replace(/\\//g, '_');\n}\n\nfunction signatureAsBuffer(signature) {\n\tif (Buffer.isBuffer(signature)) {\n\t\treturn signature;\n\t} else if ('string' === typeof signature) {\n\t\treturn Buffer.from(signature, 'base64');\n\t}\n\n\tthrow new TypeError('ECDSA signature must be a Base64 string or a Buffer');\n}\n\nfunction derToJose(signature, alg) {\n\tsignature = signatureAsBuffer(signature);\n\tvar paramBytes = getParamBytesForAlg(alg);\n\n\t// the DER encoded param should at most be the param size, plus a padding\n\t// zero, since due to being a signed integer\n\tvar maxEncodedParamLength = paramBytes + 1;\n\n\tvar inputLength = signature.length;\n\n\tvar offset = 0;\n\tif (signature[offset++] !== ENCODED_TAG_SEQ) {\n\t\tthrow new Error('Could not find expected \"seq\"');\n\t}\n\n\tvar seqLength = signature[offset++];\n\tif (seqLength === (MAX_OCTET | 1)) {\n\t\tseqLength = signature[offset++];\n\t}\n\n\tif (inputLength - offset < seqLength) {\n\t\tthrow new Error('\"seq\" specified length of \"' + seqLength + '\", only \"' + (inputLength - offset) + '\" remaining');\n\t}\n\n\tif (signature[offset++] !== ENCODED_TAG_INT) {\n\t\tthrow new Error('Could not find expected \"int\" for \"r\"');\n\t}\n\n\tvar rLength = signature[offset++];\n\n\tif (inputLength - offset - 2 < rLength) {\n\t\tthrow new Error('\"r\" specified length of \"' + rLength + '\", only \"' + (inputLength - offset - 2) + '\" available');\n\t}\n\n\tif (maxEncodedParamLength < rLength) {\n\t\tthrow new Error('\"r\" specified length of \"' + rLength + '\", max of \"' + maxEncodedParamLength + '\" is acceptable');\n\t}\n\n\tvar rOffset = offset;\n\toffset += rLength;\n\n\tif (signature[offset++] !== ENCODED_TAG_INT) {\n\t\tthrow new Error('Could not find expected \"int\" for \"s\"');\n\t}\n\n\tvar sLength = signature[offset++];\n\n\tif (inputLength - offset !== sLength) {\n\t\tthrow new Error('\"s\" specified length of \"' + sLength + '\", expected \"' + (inputLength - offset) + '\"');\n\t}\n\n\tif (maxEncodedParamLength < sLength) {\n\t\tthrow new Error('\"s\" specified length of \"' + sLength + '\", max of \"' + maxEncodedParamLength + '\" is acceptable');\n\t}\n\n\tvar sOffset = offset;\n\toffset += sLength;\n\n\tif (offset !== inputLength) {\n\t\tthrow new Error('Expected to consume entire buffer, but \"' + (inputLength - offset) + '\" bytes remain');\n\t}\n\n\tvar rPadding = paramBytes - rLength,\n\t\tsPadding = paramBytes - sLength;\n\n\tvar dst = Buffer.allocUnsafe(rPadding + rLength + sPadding + sLength);\n\n\tfor (offset = 0; offset < rPadding; ++offset) {\n\t\tdst[offset] = 0;\n\t}\n\tsignature.copy(dst, offset, rOffset + Math.max(-rPadding, 0), rOffset + rLength);\n\n\toffset = paramBytes;\n\n\tfor (var o = offset; offset < o + sPadding; ++offset) {\n\t\tdst[offset] = 0;\n\t}\n\tsignature.copy(dst, offset, sOffset + Math.max(-sPadding, 0), sOffset + sLength);\n\n\tdst = dst.toString('base64');\n\tdst = base64Url(dst);\n\n\treturn dst;\n}\n\nfunction countPadding(buf, start, stop) {\n\tvar padding = 0;\n\twhile (start + padding < stop && buf[start + padding] === 0) {\n\t\t++padding;\n\t}\n\n\tvar needsSign = buf[start + padding] >= MAX_OCTET;\n\tif (needsSign) {\n\t\t--padding;\n\t}\n\n\treturn padding;\n}\n\nfunction joseToDer(signature, alg) {\n\tsignature = signatureAsBuffer(signature);\n\tvar paramBytes = getParamBytesForAlg(alg);\n\n\tvar signatureBytes = signature.length;\n\tif (signatureBytes !== paramBytes * 2) {\n\t\tthrow new TypeError('\"' + alg + '\" signatures must be \"' + paramBytes * 2 + '\" bytes, saw \"' + signatureBytes + '\"');\n\t}\n\n\tvar rPadding = countPadding(signature, 0, paramBytes);\n\tvar sPadding = countPadding(signature, paramBytes, signature.length);\n\tvar rLength = paramBytes - rPadding;\n\tvar sLength = paramBytes - sPadding;\n\n\tvar rsBytes = 1 + 1 + rLength + 1 + 1 + sLength;\n\n\tvar shortLength = rsBytes < MAX_OCTET;\n\n\tvar dst = Buffer.allocUnsafe((shortLength ? 2 : 3) + rsBytes);\n\n\tvar offset = 0;\n\tdst[offset++] = ENCODED_TAG_SEQ;\n\tif (shortLength) {\n\t\t// Bit 8 has value \"0\"\n\t\t// bits 7-1 give the length.\n\t\tdst[offset++] = rsBytes;\n\t} else {\n\t\t// Bit 8 of first octet has value \"1\"\n\t\t// bits 7-1 give the number of additional length octets.\n\t\tdst[offset++] = MAX_OCTET\t| 1;\n\t\t// length, base 256\n\t\tdst[offset++] = rsBytes & 0xff;\n\t}\n\tdst[offset++] = ENCODED_TAG_INT;\n\tdst[offset++] = rLength;\n\tif (rPadding < 0) {\n\t\tdst[offset++] = 0;\n\t\toffset += signature.copy(dst, offset, 0, paramBytes);\n\t} else {\n\t\toffset += signature.copy(dst, offset, rPadding, paramBytes);\n\t}\n\tdst[offset++] = ENCODED_TAG_INT;\n\tdst[offset++] = sLength;\n\tif (sPadding < 0) {\n\t\tdst[offset++] = 0;\n\t\tsignature.copy(dst, offset, paramBytes);\n\t} else {\n\t\tsignature.copy(dst, offset, paramBytes + sPadding);\n\t}\n\n\treturn dst;\n}\n\nmodule.exports = {\n\tderToJose: derToJose,\n\tjoseToDer: joseToDer\n};\n", "/*jshint node:true */\n'use strict';\nvar Buffer = require('buffer').Buffer; // browserify\nvar SlowBuffer = require('buffer').SlowBuffer;\n\nmodule.exports = bufferEq;\n\nfunction bufferEq(a, b) {\n\n  // shortcutting on type is necessary for correctness\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    return false;\n  }\n\n  // buffer sizes should be well-known information, so despite this\n  // shortcutting, it doesn't leak any information about the *contents* of the\n  // buffers.\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  var c = 0;\n  for (var i = 0; i < a.length; i++) {\n    /*jshint bitwise:false */\n    c |= a[i] ^ b[i]; // XOR\n  }\n  return c === 0;\n}\n\nbufferEq.install = function() {\n  Buffer.prototype.equal = SlowBuffer.prototype.equal = function equal(that) {\n    return bufferEq(this, that);\n  };\n};\n\nvar origBufEqual = Buffer.prototype.equal;\nvar origSlowBufEqual = SlowBuffer.prototype.equal;\nbufferEq.restore = function() {\n  Buffer.prototype.equal = origBufEqual;\n  SlowBuffer.prototype.equal = origSlowBufEqual;\n};\n", "var Buffer = require('safe-buffer').Buffer;\nvar crypto = require('crypto');\nvar formatEcdsa = require('ecdsa-sig-formatter');\nvar util = require('util');\n\nvar MSG_INVALID_ALGORITHM = '\"%s\" is not a valid algorithm.\\n  Supported algorithms are:\\n  \"HS256\", \"HS384\", \"HS512\", \"RS256\", \"RS384\", \"RS512\", \"PS256\", \"PS384\", \"PS512\", \"ES256\", \"ES384\", \"ES512\" and \"none\".'\nvar MSG_INVALID_SECRET = 'secret must be a string or buffer';\nvar MSG_INVALID_VERIFIER_KEY = 'key must be a string or a buffer';\nvar MSG_INVALID_SIGNER_KEY = 'key must be a string, a buffer or an object';\n\nvar supportsKeyObjects = typeof crypto.createPublicKey === 'function';\nif (supportsKeyObjects) {\n  MSG_INVALID_VERIFIER_KEY += ' or a KeyObject';\n  MSG_INVALID_SECRET += 'or a KeyObject';\n}\n\nfunction checkIsPublicKey(key) {\n  if (Buffer.isBuffer(key)) {\n    return;\n  }\n\n  if (typeof key === 'string') {\n    return;\n  }\n\n  if (!supportsKeyObjects) {\n    throw typeError(MSG_INVALID_VERIFIER_KEY);\n  }\n\n  if (typeof key !== 'object') {\n    throw typeError(MSG_INVALID_VERIFIER_KEY);\n  }\n\n  if (typeof key.type !== 'string') {\n    throw typeError(MSG_INVALID_VERIFIER_KEY);\n  }\n\n  if (typeof key.asymmetricKeyType !== 'string') {\n    throw typeError(MSG_INVALID_VERIFIER_KEY);\n  }\n\n  if (typeof key.export !== 'function') {\n    throw typeError(MSG_INVALID_VERIFIER_KEY);\n  }\n};\n\nfunction checkIsPrivateKey(key) {\n  if (Buffer.isBuffer(key)) {\n    return;\n  }\n\n  if (typeof key === 'string') {\n    return;\n  }\n\n  if (typeof key === 'object') {\n    return;\n  }\n\n  throw typeError(MSG_INVALID_SIGNER_KEY);\n};\n\nfunction checkIsSecretKey(key) {\n  if (Buffer.isBuffer(key)) {\n    return;\n  }\n\n  if (typeof key === 'string') {\n    return key;\n  }\n\n  if (!supportsKeyObjects) {\n    throw typeError(MSG_INVALID_SECRET);\n  }\n\n  if (typeof key !== 'object') {\n    throw typeError(MSG_INVALID_SECRET);\n  }\n\n  if (key.type !== 'secret') {\n    throw typeError(MSG_INVALID_SECRET);\n  }\n\n  if (typeof key.export !== 'function') {\n    throw typeError(MSG_INVALID_SECRET);\n  }\n}\n\nfunction fromBase64(base64) {\n  return base64\n    .replace(/=/g, '')\n    .replace(/\\+/g, '-')\n    .replace(/\\//g, '_');\n}\n\nfunction toBase64(base64url) {\n  base64url = base64url.toString();\n\n  var padding = 4 - base64url.length % 4;\n  if (padding !== 4) {\n    for (var i = 0; i < padding; ++i) {\n      base64url += '=';\n    }\n  }\n\n  return base64url\n    .replace(/\\-/g, '+')\n    .replace(/_/g, '/');\n}\n\nfunction typeError(template) {\n  var args = [].slice.call(arguments, 1);\n  var errMsg = util.format.bind(util, template).apply(null, args);\n  return new TypeError(errMsg);\n}\n\nfunction bufferOrString(obj) {\n  return Buffer.isBuffer(obj) || typeof obj === 'string';\n}\n\nfunction normalizeInput(thing) {\n  if (!bufferOrString(thing))\n    thing = JSON.stringify(thing);\n  return thing;\n}\n\nfunction createHmacSigner(bits) {\n  return function sign(thing, secret) {\n    checkIsSecretKey(secret);\n    thing = normalizeInput(thing);\n    var hmac = crypto.createHmac('sha' + bits, secret);\n    var sig = (hmac.update(thing), hmac.digest('base64'))\n    return fromBase64(sig);\n  }\n}\n\nvar bufferEqual;\nvar timingSafeEqual = 'timingSafeEqual' in crypto ? function timingSafeEqual(a, b) {\n  if (a.byteLength !== b.byteLength) {\n    return false;\n  }\n\n  return crypto.timingSafeEqual(a, b)\n} : function timingSafeEqual(a, b) {\n  if (!bufferEqual) {\n    bufferEqual = require('buffer-equal-constant-time');\n  }\n\n  return bufferEqual(a, b)\n}\n\nfunction createHmacVerifier(bits) {\n  return function verify(thing, signature, secret) {\n    var computedSig = createHmacSigner(bits)(thing, secret);\n    return timingSafeEqual(Buffer.from(signature), Buffer.from(computedSig));\n  }\n}\n\nfunction createKeySigner(bits) {\n return function sign(thing, privateKey) {\n    checkIsPrivateKey(privateKey);\n    thing = normalizeInput(thing);\n    // Even though we are specifying \"RSA\" here, this works with ECDSA\n    // keys as well.\n    var signer = crypto.createSign('RSA-SHA' + bits);\n    var sig = (signer.update(thing), signer.sign(privateKey, 'base64'));\n    return fromBase64(sig);\n  }\n}\n\nfunction createKeyVerifier(bits) {\n  return function verify(thing, signature, publicKey) {\n    checkIsPublicKey(publicKey);\n    thing = normalizeInput(thing);\n    signature = toBase64(signature);\n    var verifier = crypto.createVerify('RSA-SHA' + bits);\n    verifier.update(thing);\n    return verifier.verify(publicKey, signature, 'base64');\n  }\n}\n\nfunction createPSSKeySigner(bits) {\n  return function sign(thing, privateKey) {\n    checkIsPrivateKey(privateKey);\n    thing = normalizeInput(thing);\n    var signer = crypto.createSign('RSA-SHA' + bits);\n    var sig = (signer.update(thing), signer.sign({\n      key: privateKey,\n      padding: crypto.constants.RSA_PKCS1_PSS_PADDING,\n      saltLength: crypto.constants.RSA_PSS_SALTLEN_DIGEST\n    }, 'base64'));\n    return fromBase64(sig);\n  }\n}\n\nfunction createPSSKeyVerifier(bits) {\n  return function verify(thing, signature, publicKey) {\n    checkIsPublicKey(publicKey);\n    thing = normalizeInput(thing);\n    signature = toBase64(signature);\n    var verifier = crypto.createVerify('RSA-SHA' + bits);\n    verifier.update(thing);\n    return verifier.verify({\n      key: publicKey,\n      padding: crypto.constants.RSA_PKCS1_PSS_PADDING,\n      saltLength: crypto.constants.RSA_PSS_SALTLEN_DIGEST\n    }, signature, 'base64');\n  }\n}\n\nfunction createECDSASigner(bits) {\n  var inner = createKeySigner(bits);\n  return function sign() {\n    var signature = inner.apply(null, arguments);\n    signature = formatEcdsa.derToJose(signature, 'ES' + bits);\n    return signature;\n  };\n}\n\nfunction createECDSAVerifer(bits) {\n  var inner = createKeyVerifier(bits);\n  return function verify(thing, signature, publicKey) {\n    signature = formatEcdsa.joseToDer(signature, 'ES' + bits).toString('base64');\n    var result = inner(thing, signature, publicKey);\n    return result;\n  };\n}\n\nfunction createNoneSigner() {\n  return function sign() {\n    return '';\n  }\n}\n\nfunction createNoneVerifier() {\n  return function verify(thing, signature) {\n    return signature === '';\n  }\n}\n\nmodule.exports = function jwa(algorithm) {\n  var signerFactories = {\n    hs: createHmacSigner,\n    rs: createKeySigner,\n    ps: createPSSKeySigner,\n    es: createECDSASigner,\n    none: createNoneSigner,\n  }\n  var verifierFactories = {\n    hs: createHmacVerifier,\n    rs: createKeyVerifier,\n    ps: createPSSKeyVerifier,\n    es: createECDSAVerifer,\n    none: createNoneVerifier,\n  }\n  var match = algorithm.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);\n  if (!match)\n    throw typeError(MSG_INVALID_ALGORITHM, algorithm);\n  var algo = (match[1] || match[3]).toLowerCase();\n  var bits = match[2];\n\n  return {\n    sign: signerFactories[algo](bits),\n    verify: verifierFactories[algo](bits),\n  }\n};\n", "/*global module*/\nvar Buffer = require('buffer').Buffer;\n\nmodule.exports = function toString(obj) {\n  if (typeof obj === 'string')\n    return obj;\n  if (typeof obj === 'number' || Buffer.isBuffer(obj))\n    return obj.toString();\n  return JSON.stringify(obj);\n};\n", "/*global module*/\nvar Buffer = require('safe-buffer').Buffer;\nvar DataStream = require('./data-stream');\nvar jwa = require('jwa');\nvar Stream = require('stream');\nvar toString = require('./tostring');\nvar util = require('util');\n\nfunction base64url(string, encoding) {\n  return Buffer\n    .from(string, encoding)\n    .toString('base64')\n    .replace(/=/g, '')\n    .replace(/\\+/g, '-')\n    .replace(/\\//g, '_');\n}\n\nfunction jwsSecuredInput(header, payload, encoding) {\n  encoding = encoding || 'utf8';\n  var encodedHeader = base64url(toString(header), 'binary');\n  var encodedPayload = base64url(toString(payload), encoding);\n  return util.format('%s.%s', encodedHeader, encodedPayload);\n}\n\nfunction jwsSign(opts) {\n  var header = opts.header;\n  var payload = opts.payload;\n  var secretOrKey = opts.secret || opts.privateKey;\n  var encoding = opts.encoding;\n  var algo = jwa(header.alg);\n  var securedInput = jwsSecuredInput(header, payload, encoding);\n  var signature = algo.sign(securedInput, secretOrKey);\n  return util.format('%s.%s', securedInput, signature);\n}\n\nfunction SignStream(opts) {\n  var secret = opts.secret||opts.privateKey||opts.key;\n  var secretStream = new DataStream(secret);\n  this.readable = true;\n  this.header = opts.header;\n  this.encoding = opts.encoding;\n  this.secret = this.privateKey = this.key = secretStream;\n  this.payload = new DataStream(opts.payload);\n  this.secret.once('close', function () {\n    if (!this.payload.writable && this.readable)\n      this.sign();\n  }.bind(this));\n\n  this.payload.once('close', function () {\n    if (!this.secret.writable && this.readable)\n      this.sign();\n  }.bind(this));\n}\nutil.inherits(SignStream, Stream);\n\nSignStream.prototype.sign = function sign() {\n  try {\n    var signature = jwsSign({\n      header: this.header,\n      payload: this.payload.buffer,\n      secret: this.secret.buffer,\n      encoding: this.encoding\n    });\n    this.emit('done', signature);\n    this.emit('data', signature);\n    this.emit('end');\n    this.readable = false;\n    return signature;\n  } catch (e) {\n    this.readable = false;\n    this.emit('error', e);\n    this.emit('close');\n  }\n};\n\nSignStream.sign = jwsSign;\n\nmodule.exports = SignStream;\n", "/*global module*/\nvar Buffer = require('safe-buffer').Buffer;\nvar DataStream = require('./data-stream');\nvar jwa = require('jwa');\nvar Stream = require('stream');\nvar toString = require('./tostring');\nvar util = require('util');\nvar JWS_REGEX = /^[a-zA-Z0-9\\-_]+?\\.[a-zA-Z0-9\\-_]+?\\.([a-zA-Z0-9\\-_]+)?$/;\n\nfunction isObject(thing) {\n  return Object.prototype.toString.call(thing) === '[object Object]';\n}\n\nfunction safeJsonParse(thing) {\n  if (isObject(thing))\n    return thing;\n  try { return JSON.parse(thing); }\n  catch (e) { return undefined; }\n}\n\nfunction headerFromJWS(jwsSig) {\n  var encodedHeader = jwsSig.split('.', 1)[0];\n  return safeJsonParse(Buffer.from(encodedHeader, 'base64').toString('binary'));\n}\n\nfunction securedInputFromJWS(jwsSig) {\n  return jwsSig.split('.', 2).join('.');\n}\n\nfunction signatureFromJWS(jwsSig) {\n  return jwsSig.split('.')[2];\n}\n\nfunction payloadFromJWS(jwsSig, encoding) {\n  encoding = encoding || 'utf8';\n  var payload = jwsSig.split('.')[1];\n  return Buffer.from(payload, 'base64').toString(encoding);\n}\n\nfunction isValidJws(string) {\n  return JWS_REGEX.test(string) && !!headerFromJWS(string);\n}\n\nfunction jwsVerify(jwsSig, algorithm, secretOrKey) {\n  if (!algorithm) {\n    var err = new Error(\"Missing algorithm parameter for jws.verify\");\n    err.code = \"MISSING_ALGORITHM\";\n    throw err;\n  }\n  jwsSig = toString(jwsSig);\n  var signature = signatureFromJWS(jwsSig);\n  var securedInput = securedInputFromJWS(jwsSig);\n  var algo = jwa(algorithm);\n  return algo.verify(securedInput, signature, secretOrKey);\n}\n\nfunction jwsDecode(jwsSig, opts) {\n  opts = opts || {};\n  jwsSig = toString(jwsSig);\n\n  if (!isValidJws(jwsSig))\n    return null;\n\n  var header = headerFromJWS(jwsSig);\n\n  if (!header)\n    return null;\n\n  var payload = payloadFromJWS(jwsSig);\n  if (header.typ === 'JWT' || opts.json)\n    payload = JSON.parse(payload, opts.encoding);\n\n  return {\n    header: header,\n    payload: payload,\n    signature: signatureFromJWS(jwsSig)\n  };\n}\n\nfunction VerifyStream(opts) {\n  opts = opts || {};\n  var secretOrKey = opts.secret||opts.publicKey||opts.key;\n  var secretStream = new DataStream(secretOrKey);\n  this.readable = true;\n  this.algorithm = opts.algorithm;\n  this.encoding = opts.encoding;\n  this.secret = this.publicKey = this.key = secretStream;\n  this.signature = new DataStream(opts.signature);\n  this.secret.once('close', function () {\n    if (!this.signature.writable && this.readable)\n      this.verify();\n  }.bind(this));\n\n  this.signature.once('close', function () {\n    if (!this.secret.writable && this.readable)\n      this.verify();\n  }.bind(this));\n}\nutil.inherits(VerifyStream, Stream);\nVerifyStream.prototype.verify = function verify() {\n  try {\n    var valid = jwsVerify(this.signature.buffer, this.algorithm, this.key.buffer);\n    var obj = jwsDecode(this.signature.buffer, this.encoding);\n    this.emit('done', valid, obj);\n    this.emit('data', valid);\n    this.emit('end');\n    this.readable = false;\n    return valid;\n  } catch (e) {\n    this.readable = false;\n    this.emit('error', e);\n    this.emit('close');\n  }\n};\n\nVerifyStream.decode = jwsDecode;\nVerifyStream.isValid = isValidJws;\nVerifyStream.verify = jwsVerify;\n\nmodule.exports = VerifyStream;\n", "/*global exports*/\nvar SignStream = require('./lib/sign-stream');\nvar VerifyStream = require('./lib/verify-stream');\n\nvar ALGORITHMS = [\n  'HS256', 'HS384', 'HS512',\n  'RS256', 'RS384', 'RS512',\n  'PS256', 'PS384', 'PS512',\n  'ES256', 'ES384', 'ES512'\n];\n\nexports.ALGORITHMS = ALGORITHMS;\nexports.sign = SignStream.sign;\nexports.verify = VerifyStream.verify;\nexports.decode = VerifyStream.decode;\nexports.isValid = VerifyStream.isValid;\nexports.createSign = function createSign(opts) {\n  return new SignStream(opts);\n};\nexports.createVerify = function createVerify(opts) {\n  return new VerifyStream(opts);\n};\n", "var jws = require('jws');\n\nmodule.exports = function (jwt, options) {\n  options = options || {};\n  var decoded = jws.decode(jwt, options);\n  if (!decoded) { return null; }\n  var payload = decoded.payload;\n\n  //try parse the payload\n  if(typeof payload === 'string') {\n    try {\n      var obj = JSON.parse(payload);\n      if(obj !== null && typeof obj === 'object') {\n        payload = obj;\n      }\n    } catch (e) { }\n  }\n\n  //return header if `complete` option is enabled.  header includes claims\n  //such as `kid` and `alg` used to select the key within a JWKS needed to\n  //verify the signature\n  if (options.complete === true) {\n    return {\n      header: decoded.header,\n      payload: payload,\n      signature: decoded.signature\n    };\n  }\n  return payload;\n};\n", "var JsonWebTokenError = function (message, error) {\n  Error.call(this, message);\n  if(Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor);\n  }\n  this.name = 'JsonWebTokenError';\n  this.message = message;\n  if (error) this.inner = error;\n};\n\nJsonWebTokenError.prototype = Object.create(Error.prototype);\nJsonWebTokenError.prototype.constructor = JsonWebTokenError;\n\nmodule.exports = JsonWebTokenError;\n", "var JsonWebTokenError = require('./JsonWebTokenError');\n\nvar NotBeforeError = function (message, date) {\n  JsonWebTokenError.call(this, message);\n  this.name = 'NotBeforeError';\n  this.date = date;\n};\n\nNotBeforeError.prototype = Object.create(JsonWebTokenError.prototype);\n\nNotBeforeError.prototype.constructor = NotBeforeError;\n\nmodule.exports = NotBeforeError;", "var JsonWebTokenError = require('./JsonWebTokenError');\n\nvar TokenExpiredError = function (message, expiredAt) {\n  JsonWebTokenError.call(this, message);\n  this.name = 'TokenExpiredError';\n  this.expiredAt = expiredAt;\n};\n\nTokenExpiredError.prototype = Object.create(JsonWebTokenError.prototype);\n\nTokenExpiredError.prototype.constructor = TokenExpiredError;\n\nmodule.exports = TokenExpiredError;", "/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n", "var ms = require('ms');\n\nmodule.exports = function (time, iat) {\n  var timestamp = iat || Math.floor(Date.now() / 1000);\n\n  if (typeof time === 'string') {\n    var milliseconds = ms(time);\n    if (typeof milliseconds === 'undefined') {\n      return;\n    }\n    return Math.floor(timestamp + milliseconds / 1000);\n  } else if (typeof time === 'number') {\n    return timestamp + time;\n  } else {\n    return;\n  }\n\n};", "'use strict'\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n", "'use strict'\n\nconst debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n", "'use strict'\n\nconst {\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_LENGTH,\n} = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst safeRe = exports.safeRe = []\nconst src = exports.src = []\nconst safeSrc = exports.safeSrc = []\nconst t = exports.t = {}\nlet R = 0\n\nconst LETTERDASHNUMBER = '[a-zA-Z0-9-]'\n\n// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n// used internally via the safeRe object since all inputs in this library get\n// normalized first to trim and collapse all extra whitespace. The original\n// regexes are exported for userland consumption and lower level usage. A\n// future breaking change could export the safer regex only with a note that\n// all input should have extra whitespace removed.\nconst safeRegexReplacements = [\n  ['\\\\s', 1],\n  ['\\\\d', MAX_LENGTH],\n  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n]\n\nconst makeSafeRegex = (value) => {\n  for (const [token, max] of safeRegexReplacements) {\n    value = value\n      .split(`${token}*`).join(`${token}{0,${max}}`)\n      .split(`${token}+`).join(`${token}{1,${max}}`)\n  }\n  return value\n}\n\nconst createToken = (name, value, isGlobal) => {\n  const safe = makeSafeRegex(value)\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  safeSrc[index] = safe\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '\\\\d+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`)\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n// Non-numberic identifiers include numberic identifiers but can be longer.\n// Therefore non-numberic identifiers must go first.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NONNUMERICIDENTIFIER]\n}|${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NONNUMERICIDENTIFIER]\n}|${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`)\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCEPLAIN', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`)\ncreateToken('COERCE', `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`)\ncreateToken('COERCEFULL', src[t.COERCEPLAIN] +\n              `(?:${src[t.PRERELEASE]})?` +\n              `(?:${src[t.BUILD]})?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\ncreateToken('COERCERTLFULL', src[t.COERCEFULL], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n", "'use strict'\n\n// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n", "'use strict'\n\nconst numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n", "'use strict'\n\nconst debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n        version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('build compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    if (release.startsWith('pre')) {\n      if (!identifier && identifierBase === false) {\n        throw new Error('invalid increment argument: identifier is empty')\n      }\n      // Avoid an invalid semver results\n      if (identifier) {\n        const match = `-${identifier}`.match(this.options.loose ? re[t.PRERELEASELOOSE] : re[t.PRERELEASE])\n        if (!match || match[1] !== identifier) {\n          throw new Error(`invalid identifier: ${identifier}`)\n        }\n      }\n    }\n\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'release':\n        if (this.prerelease.length === 0) {\n          throw new Error(`version ${this.raw} is not a prerelease`)\n        }\n        this.prerelease.length = 0\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base]\n          if (identifierBase === false) {\n            prerelease = [identifier]\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease\n            }\n          } else {\n            this.prerelease = prerelease\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format()\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`\n    }\n    return this\n  }\n}\n\nmodule.exports = SemVer\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst parse = (version, options, throwErrors = false) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    if (!throwErrors) {\n      return null\n    }\n    throw er\n  }\n}\n\nmodule.exports = parse\n", "'use strict'\n\nconst parse = require('./parse')\nconst valid = (version, options) => {\n  const v = parse(version, options)\n  return v ? v.version : null\n}\nmodule.exports = valid\n", "'use strict'\n\nconst parse = require('./parse')\nconst clean = (version, options) => {\n  const s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\nmodule.exports = clean\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\n\nconst inc = (version, release, options, identifier, identifierBase) => {\n  if (typeof (options) === 'string') {\n    identifierBase = identifier\n    identifier = options\n    options = undefined\n  }\n\n  try {\n    return new SemVer(\n      version instanceof SemVer ? version.version : version,\n      options\n    ).inc(release, identifier, identifierBase).version\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = inc\n", "'use strict'\n\nconst parse = require('./parse.js')\n\nconst diff = (version1, version2) => {\n  const v1 = parse(version1, null, true)\n  const v2 = parse(version2, null, true)\n  const comparison = v1.compare(v2)\n\n  if (comparison === 0) {\n    return null\n  }\n\n  const v1Higher = comparison > 0\n  const highVersion = v1Higher ? v1 : v2\n  const lowVersion = v1Higher ? v2 : v1\n  const highHasPre = !!highVersion.prerelease.length\n  const lowHasPre = !!lowVersion.prerelease.length\n\n  if (lowHasPre && !highHasPre) {\n    // Going from prerelease -> no prerelease requires some special casing\n\n    // If the low version has only a major, then it will always be a major\n    // Some examples:\n    // 1.0.0-1 -> 1.0.0\n    // 1.0.0-1 -> 1.1.1\n    // 1.0.0-1 -> 2.0.0\n    if (!lowVersion.patch && !lowVersion.minor) {\n      return 'major'\n    }\n\n    // If the main part has no difference\n    if (lowVersion.compareMain(highVersion) === 0) {\n      if (lowVersion.minor && !lowVersion.patch) {\n        return 'minor'\n      }\n      return 'patch'\n    }\n  }\n\n  // add the `pre` prefix if we are going to a prerelease version\n  const prefix = highHasPre ? 'pre' : ''\n\n  if (v1.major !== v2.major) {\n    return prefix + 'major'\n  }\n\n  if (v1.minor !== v2.minor) {\n    return prefix + 'minor'\n  }\n\n  if (v1.patch !== v2.patch) {\n    return prefix + 'patch'\n  }\n\n  // high and low are preleases\n  return 'prerelease'\n}\n\nmodule.exports = diff\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst major = (a, loose) => new SemVer(a, loose).major\nmodule.exports = major\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst minor = (a, loose) => new SemVer(a, loose).minor\nmodule.exports = minor\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst patch = (a, loose) => new SemVer(a, loose).patch\nmodule.exports = patch\n", "'use strict'\n\nconst parse = require('./parse')\nconst prerelease = (version, options) => {\n  const parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\nmodule.exports = prerelease\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n", "'use strict'\n\nconst compare = require('./compare')\nconst rcompare = (a, b, loose) => compare(b, a, loose)\nmodule.exports = rcompare\n", "'use strict'\n\nconst compare = require('./compare')\nconst compareLoose = (a, b) => compare(a, b, true)\nmodule.exports = compareLoose\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst compareBuild = (a, b, loose) => {\n  const versionA = new SemVer(a, loose)\n  const versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\nmodule.exports = compareBuild\n", "'use strict'\n\nconst compareBuild = require('./compare-build')\nconst sort = (list, loose) => list.sort((a, b) => compareBuild(a, b, loose))\nmodule.exports = sort\n", "'use strict'\n\nconst compareBuild = require('./compare-build')\nconst rsort = (list, loose) => list.sort((a, b) => compareBuild(b, a, loose))\nmodule.exports = rsort\n", "'use strict'\n\nconst compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n", "'use strict'\n\nconst compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n", "'use strict'\n\nconst compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n", "'use strict'\n\nconst compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n", "'use strict'\n\nconst compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n", "'use strict'\n\nconst compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n", "'use strict'\n\nconst eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst parse = require('./parse')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst coerce = (version, options) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  let match = null\n  if (!options.rtl) {\n    match = version.match(options.includePrerelease ? re[t.COERCEFULL] : re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    // With includePrerelease option set, '1.2.3.4-rc' wants to coerce '2.3.4-rc', not '2.3.4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    const coerceRtlRegex = options.includePrerelease ? re[t.COERCERTLFULL] : re[t.COERCERTL]\n    let next\n    while ((next = coerceRtlRegex.exec(version)) &&\n        (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n            next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      coerceRtlRegex.lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    coerceRtlRegex.lastIndex = -1\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  const major = match[2]\n  const minor = match[3] || '0'\n  const patch = match[4] || '0'\n  const prerelease = options.includePrerelease && match[5] ? `-${match[5]}` : ''\n  const build = options.includePrerelease && match[6] ? `+${match[6]}` : ''\n\n  return parse(`${major}.${minor}.${patch}${prerelease}${build}`, options)\n}\nmodule.exports = coerce\n", "'use strict'\n\nclass LRUCache {\n  constructor () {\n    this.max = 1000\n    this.map = new Map()\n  }\n\n  get (key) {\n    const value = this.map.get(key)\n    if (value === undefined) {\n      return undefined\n    } else {\n      // Remove the key from the map and add it to the end\n      this.map.delete(key)\n      this.map.set(key, value)\n      return value\n    }\n  }\n\n  delete (key) {\n    return this.map.delete(key)\n  }\n\n  set (key, value) {\n    const deleted = this.delete(key)\n\n    if (!deleted && value !== undefined) {\n      // If cache is full, delete the least recently used item\n      if (this.map.size >= this.max) {\n        const firstKey = this.map.keys().next().value\n        this.delete(firstKey)\n      }\n\n      this.map.set(key, value)\n    }\n\n    return this\n  }\n}\n\nmodule.exports = LRUCache\n", "'use strict'\n\nconst SPACE_CHARACTERS = /\\s+/g\n\n// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.formatted = undefined\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First reduce all whitespace as much as possible so we do not have to rely\n    // on potentially slow regexes like \\s*. This is then stored and used for\n    // future error messages as well.\n    this.raw = range.trim().replace(SPACE_CHARACTERS, ' ')\n\n    // First, split on ||\n    this.set = this.raw\n      .split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${this.raw}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0) {\n        this.set = [first]\n      } else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.formatted = undefined\n  }\n\n  get range () {\n    if (this.formatted === undefined) {\n      this.formatted = ''\n      for (let i = 0; i < this.set.length; i++) {\n        if (i > 0) {\n          this.formatted += '||'\n        }\n        const comps = this.set[i]\n        for (let k = 0; k < comps.length; k++) {\n          if (k > 0) {\n            this.formatted += ' '\n          }\n          this.formatted += comps[k].toString().trim()\n        }\n      }\n    }\n    return this.formatted\n  }\n\n  format () {\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts =\n      (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) |\n      (this.options.loose && FLAG_LOOSE)\n    const memoKey = memoOpts + ':' + range\n    const cached = cache.get(memoKey)\n    if (cached) {\n      return cached\n    }\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range)\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n    debug('tilde trim', range)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n    debug('caret trim', range)\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    let rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n\n    if (loose) {\n      // in loose mode, throw out any that are not valid comparators\n      rangeList = rangeList.filter(comp => {\n        debug('loose invalid filter', comp, this.options)\n        return !!comp.match(re[t.COMPARATORLOOSE])\n      })\n    }\n    debug('range list', rangeList)\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const rangeMap = new Map()\n    const comparators = rangeList.map(comp => new Comparator(comp, this.options))\n    for (const comp of comparators) {\n      if (isNullSet(comp)) {\n        return [comp]\n      }\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has('')) {\n      rangeMap.delete('')\n    }\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\n\nmodule.exports = Range\n\nconst LRU = require('../internal/lrucache')\nconst cache = new LRU()\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  safeRe: re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace,\n} = require('../internal/re')\nconst { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = require('../internal/constants')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n// ~0.0.1 --> >=0.0.1 <0.1.0-0\nconst replaceTildes = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceTilde(c, options))\n    .join(' ')\n}\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\n// ^0.0.1 --> >=0.0.1 <0.0.2-0\n// ^0.1.0 --> >=0.1.0 <0.2.0-0\nconst replaceCarets = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceCaret(c, options))\n    .join(' ')\n}\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp\n    .split(/\\s+/)\n    .map((c) => replaceXRange(c, options))\n    .join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<') {\n        pr = '-0'\n      }\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp\n    .trim()\n    .replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp\n    .trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\n// TODO build?\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return `${from} ${to}`.trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n", "'use strict'\n\nconst ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    comp = comp.trim().split(/\\s+/).join(' ')\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    options = parseOptions(options)\n\n    // Special cases where nothing can possibly be lower\n    if (options.includePrerelease &&\n      (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n      return false\n    }\n    if (!options.includePrerelease &&\n      (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n      return false\n    }\n\n    // Same direction increasing (> or >=)\n    if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n      return true\n    }\n    // Same direction decreasing (< or <=)\n    if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // same SemVer and both sides are inclusive (<= or >=)\n    if (\n      (this.semver.version === comp.semver.version) &&\n      this.operator.includes('=') && comp.operator.includes('=')) {\n      return true\n    }\n    // opposite directions less than\n    if (cmp(this.semver, '<', comp.semver, options) &&\n      this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // opposite directions greater than\n    if (cmp(this.semver, '>', comp.semver, options) &&\n      this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n      return true\n    }\n    return false\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst { safeRe: re, t } = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n", "'use strict'\n\nconst Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n", "'use strict'\n\nconst Range = require('../classes/range')\n\n// Mostly just for testing and legacy API reasons\nconst toComparators = (range, options) =>\n  new Range(range, options).set\n    .map(comp => comp.map(c => c.value).join(' ').trim().split(' '))\n\nmodule.exports = toComparators\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\n\nconst maxSatisfying = (versions, range, options) => {\n  let max = null\n  let maxSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\nmodule.exports = maxSatisfying\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst minSatisfying = (versions, range, options) => {\n  let min = null\n  let minSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\nmodule.exports = minSatisfying\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst gt = require('../functions/gt')\n\nconst minVersion = (range, loose) => {\n  range = new Range(range, loose)\n\n  let minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let setMin = null\n    comparators.forEach((comparator) => {\n      // Clone to avoid manipulating the comparator's semver object.\n      const compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!setMin || gt(compver, setMin)) {\n            setMin = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error(`Unexpected operation: ${comparator.operator}`)\n      }\n    })\n    if (setMin && (!minver || gt(minver, setMin))) {\n      minver = setMin\n    }\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\nmodule.exports = minVersion\n", "'use strict'\n\nconst Range = require('../classes/range')\nconst validRange = (range, options) => {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = validRange\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Comparator = require('../classes/comparator')\nconst { ANY } = Comparator\nconst Range = require('../classes/range')\nconst satisfies = require('../functions/satisfies')\nconst gt = require('../functions/gt')\nconst lt = require('../functions/lt')\nconst lte = require('../functions/lte')\nconst gte = require('../functions/gte')\n\nconst outside = (version, range, hilo, options) => {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  let gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisfies the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let high = null\n    let low = null\n\n    comparators.forEach((comparator) => {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nmodule.exports = outside\n", "'use strict'\n\n// Determine if version is greater than all the versions possible in the range.\nconst outside = require('./outside')\nconst gtr = (version, range, options) => outside(version, range, '>', options)\nmodule.exports = gtr\n", "'use strict'\n\nconst outside = require('./outside')\n// Determine if version is less than all the versions possible in the range\nconst ltr = (version, range, options) => outside(version, range, '<', options)\nmodule.exports = ltr\n", "'use strict'\n\nconst Range = require('../classes/range')\nconst intersects = (r1, r2, options) => {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2, options)\n}\nmodule.exports = intersects\n", "'use strict'\n\n// given a set of versions and a range, create a \"simplified\" range\n// that includes the same versions that the original range does\n// If the original range is shorter than the simplified one, return that.\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\nmodule.exports = (versions, range, options) => {\n  const set = []\n  let first = null\n  let prev = null\n  const v = versions.sort((a, b) => compare(a, b, options))\n  for (const version of v) {\n    const included = satisfies(version, range, options)\n    if (included) {\n      prev = version\n      if (!first) {\n        first = version\n      }\n    } else {\n      if (prev) {\n        set.push([first, prev])\n      }\n      prev = null\n      first = null\n    }\n  }\n  if (first) {\n    set.push([first, null])\n  }\n\n  const ranges = []\n  for (const [min, max] of set) {\n    if (min === max) {\n      ranges.push(min)\n    } else if (!max && min === v[0]) {\n      ranges.push('*')\n    } else if (!max) {\n      ranges.push(`>=${min}`)\n    } else if (min === v[0]) {\n      ranges.push(`<=${max}`)\n    } else {\n      ranges.push(`${min} - ${max}`)\n    }\n  }\n  const simplified = ranges.join(' || ')\n  const original = typeof range.raw === 'string' ? range.raw : String(range)\n  return simplified.length < original.length ? simplified : range\n}\n", "'use strict'\n\nconst Range = require('../classes/range.js')\nconst Comparator = require('../classes/comparator.js')\nconst { ANY } = Comparator\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\n\n// Complex range `r1 || r2 || ...` is a subset of `R1 || R2 || ...` iff:\n// - Every simple range `r1, r2, ...` is a null set, OR\n// - Every simple range `r1, r2, ...` which is not a null set is a subset of\n//   some `R1, R2, ...`\n//\n// Simple range `c1 c2 ...` is a subset of simple range `C1 C2 ...` iff:\n// - If c is only the ANY comparator\n//   - If C is only the ANY comparator, return true\n//   - Else if in prerelease mode, return false\n//   - else replace c with `[>=0.0.0]`\n// - If C is only the ANY comparator\n//   - if in prerelease mode, return true\n//   - else replace C with `[>=0.0.0]`\n// - Let EQ be the set of = comparators in c\n// - If EQ is more than one, return true (null set)\n// - Let GT be the highest > or >= comparator in c\n// - Let LT be the lowest < or <= comparator in c\n// - If GT and LT, and GT.semver > LT.semver, return true (null set)\n// - If any C is a = range, and GT or LT are set, return false\n// - If EQ\n//   - If GT, and EQ does not satisfy GT, return true (null set)\n//   - If LT, and EQ does not satisfy LT, return true (null set)\n//   - If EQ satisfies every C, return true\n//   - Else return false\n// - If GT\n//   - If GT.semver is lower than any > or >= comp in C, return false\n//   - If GT is >=, and GT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the GT.semver tuple, return false\n// - If LT\n//   - If LT.semver is greater than any < or <= comp in C, return false\n//   - If LT is <=, and LT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the LT.semver tuple, return false\n// - Else return true\n\nconst subset = (sub, dom, options = {}) => {\n  if (sub === dom) {\n    return true\n  }\n\n  sub = new Range(sub, options)\n  dom = new Range(dom, options)\n  let sawNonNull = false\n\n  OUTER: for (const simpleSub of sub.set) {\n    for (const simpleDom of dom.set) {\n      const isSub = simpleSubset(simpleSub, simpleDom, options)\n      sawNonNull = sawNonNull || isSub !== null\n      if (isSub) {\n        continue OUTER\n      }\n    }\n    // the null set is a subset of everything, but null simple ranges in\n    // a complex range should be ignored.  so if we saw a non-null range,\n    // then we know this isn't a subset, but if EVERY simple range was null,\n    // then it is a subset.\n    if (sawNonNull) {\n      return false\n    }\n  }\n  return true\n}\n\nconst minimumVersionWithPreRelease = [new Comparator('>=0.0.0-0')]\nconst minimumVersion = [new Comparator('>=0.0.0')]\n\nconst simpleSubset = (sub, dom, options) => {\n  if (sub === dom) {\n    return true\n  }\n\n  if (sub.length === 1 && sub[0].semver === ANY) {\n    if (dom.length === 1 && dom[0].semver === ANY) {\n      return true\n    } else if (options.includePrerelease) {\n      sub = minimumVersionWithPreRelease\n    } else {\n      sub = minimumVersion\n    }\n  }\n\n  if (dom.length === 1 && dom[0].semver === ANY) {\n    if (options.includePrerelease) {\n      return true\n    } else {\n      dom = minimumVersion\n    }\n  }\n\n  const eqSet = new Set()\n  let gt, lt\n  for (const c of sub) {\n    if (c.operator === '>' || c.operator === '>=') {\n      gt = higherGT(gt, c, options)\n    } else if (c.operator === '<' || c.operator === '<=') {\n      lt = lowerLT(lt, c, options)\n    } else {\n      eqSet.add(c.semver)\n    }\n  }\n\n  if (eqSet.size > 1) {\n    return null\n  }\n\n  let gtltComp\n  if (gt && lt) {\n    gtltComp = compare(gt.semver, lt.semver, options)\n    if (gtltComp > 0) {\n      return null\n    } else if (gtltComp === 0 && (gt.operator !== '>=' || lt.operator !== '<=')) {\n      return null\n    }\n  }\n\n  // will iterate one or zero times\n  for (const eq of eqSet) {\n    if (gt && !satisfies(eq, String(gt), options)) {\n      return null\n    }\n\n    if (lt && !satisfies(eq, String(lt), options)) {\n      return null\n    }\n\n    for (const c of dom) {\n      if (!satisfies(eq, String(c), options)) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  let higher, lower\n  let hasDomLT, hasDomGT\n  // if the subset has a prerelease, we need a comparator in the superset\n  // with the same tuple and a prerelease, or it's not a subset\n  let needDomLTPre = lt &&\n    !options.includePrerelease &&\n    lt.semver.prerelease.length ? lt.semver : false\n  let needDomGTPre = gt &&\n    !options.includePrerelease &&\n    gt.semver.prerelease.length ? gt.semver : false\n  // exception: <1.2.3-0 is the same as <1.2.3\n  if (needDomLTPre && needDomLTPre.prerelease.length === 1 &&\n      lt.operator === '<' && needDomLTPre.prerelease[0] === 0) {\n    needDomLTPre = false\n  }\n\n  for (const c of dom) {\n    hasDomGT = hasDomGT || c.operator === '>' || c.operator === '>='\n    hasDomLT = hasDomLT || c.operator === '<' || c.operator === '<='\n    if (gt) {\n      if (needDomGTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomGTPre.major &&\n            c.semver.minor === needDomGTPre.minor &&\n            c.semver.patch === needDomGTPre.patch) {\n          needDomGTPre = false\n        }\n      }\n      if (c.operator === '>' || c.operator === '>=') {\n        higher = higherGT(gt, c, options)\n        if (higher === c && higher !== gt) {\n          return false\n        }\n      } else if (gt.operator === '>=' && !satisfies(gt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (lt) {\n      if (needDomLTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomLTPre.major &&\n            c.semver.minor === needDomLTPre.minor &&\n            c.semver.patch === needDomLTPre.patch) {\n          needDomLTPre = false\n        }\n      }\n      if (c.operator === '<' || c.operator === '<=') {\n        lower = lowerLT(lt, c, options)\n        if (lower === c && lower !== lt) {\n          return false\n        }\n      } else if (lt.operator === '<=' && !satisfies(lt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (!c.operator && (lt || gt) && gtltComp !== 0) {\n      return false\n    }\n  }\n\n  // if there was a < or >, and nothing in the dom, then must be false\n  // UNLESS it was limited by another range in the other direction.\n  // Eg, >1.0.0 <1.0.1 is still a subset of <2.0.0\n  if (gt && hasDomLT && !lt && gtltComp !== 0) {\n    return false\n  }\n\n  if (lt && hasDomGT && !gt && gtltComp !== 0) {\n    return false\n  }\n\n  // we needed a prerelease range in a specific tuple, but didn't get one\n  // then this isn't a subset.  eg >=1.2.3-pre is not a subset of >=1.0.0,\n  // because it includes prereleases in the 1.2.3 tuple\n  if (needDomGTPre || needDomLTPre) {\n    return false\n  }\n\n  return true\n}\n\n// >=1.2.3 is lower than >1.2.3\nconst higherGT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp > 0 ? a\n    : comp < 0 ? b\n    : b.operator === '>' && a.operator === '>=' ? b\n    : a\n}\n\n// <=1.2.3 is higher than <1.2.3\nconst lowerLT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp < 0 ? a\n    : comp > 0 ? b\n    : b.operator === '<' && a.operator === '<=' ? b\n    : a\n}\n\nmodule.exports = subset\n", "'use strict'\n\n// just pre-load all the stuff that index.js lazily exports\nconst internalRe = require('./internal/re')\nconst constants = require('./internal/constants')\nconst SemVer = require('./classes/semver')\nconst identifiers = require('./internal/identifiers')\nconst parse = require('./functions/parse')\nconst valid = require('./functions/valid')\nconst clean = require('./functions/clean')\nconst inc = require('./functions/inc')\nconst diff = require('./functions/diff')\nconst major = require('./functions/major')\nconst minor = require('./functions/minor')\nconst patch = require('./functions/patch')\nconst prerelease = require('./functions/prerelease')\nconst compare = require('./functions/compare')\nconst rcompare = require('./functions/rcompare')\nconst compareLoose = require('./functions/compare-loose')\nconst compareBuild = require('./functions/compare-build')\nconst sort = require('./functions/sort')\nconst rsort = require('./functions/rsort')\nconst gt = require('./functions/gt')\nconst lt = require('./functions/lt')\nconst eq = require('./functions/eq')\nconst neq = require('./functions/neq')\nconst gte = require('./functions/gte')\nconst lte = require('./functions/lte')\nconst cmp = require('./functions/cmp')\nconst coerce = require('./functions/coerce')\nconst Comparator = require('./classes/comparator')\nconst Range = require('./classes/range')\nconst satisfies = require('./functions/satisfies')\nconst toComparators = require('./ranges/to-comparators')\nconst maxSatisfying = require('./ranges/max-satisfying')\nconst minSatisfying = require('./ranges/min-satisfying')\nconst minVersion = require('./ranges/min-version')\nconst validRange = require('./ranges/valid')\nconst outside = require('./ranges/outside')\nconst gtr = require('./ranges/gtr')\nconst ltr = require('./ranges/ltr')\nconst intersects = require('./ranges/intersects')\nconst simplifyRange = require('./ranges/simplify')\nconst subset = require('./ranges/subset')\nmodule.exports = {\n  parse,\n  valid,\n  clean,\n  inc,\n  diff,\n  major,\n  minor,\n  patch,\n  prerelease,\n  compare,\n  rcompare,\n  compareLoose,\n  compareBuild,\n  sort,\n  rsort,\n  gt,\n  lt,\n  eq,\n  neq,\n  gte,\n  lte,\n  cmp,\n  coerce,\n  Comparator,\n  Range,\n  satisfies,\n  toComparators,\n  maxSatisfying,\n  minSatisfying,\n  minVersion,\n  validRange,\n  outside,\n  gtr,\n  ltr,\n  intersects,\n  simplifyRange,\n  subset,\n  SemVer,\n  re: internalRe.re,\n  src: internalRe.src,\n  tokens: internalRe.t,\n  SEMVER_SPEC_VERSION: constants.SEMVER_SPEC_VERSION,\n  RELEASE_TYPES: constants.RELEASE_TYPES,\n  compareIdentifiers: identifiers.compareIdentifiers,\n  rcompareIdentifiers: identifiers.rcompareIdentifiers,\n}\n", "const semver = require('semver');\n\nmodule.exports = semver.satisfies(process.version, '>=15.7.0');\n", "const semver = require('semver');\n\nmodule.exports = semver.satisfies(process.version, '>=16.9.0');\n", "const ASYMMETRIC_KEY_DETAILS_SUPPORTED = require('./asymmetricKeyDetailsSupported');\nconst RSA_PSS_KEY_DETAILS_SUPPORTED = require('./rsaPssKeyDetailsSupported');\n\nconst allowedAlgorithmsForKeys = {\n  'ec': ['ES256', 'ES384', 'ES512'],\n  'rsa': ['RS256', 'PS256', 'RS384', 'PS384', 'RS512', 'PS512'],\n  'rsa-pss': ['PS256', 'PS384', 'PS512']\n};\n\nconst allowedCurves = {\n  ES256: 'prime256v1',\n  ES384: 'secp384r1',\n  ES512: 'secp521r1',\n};\n\nmodule.exports = function(algorithm, key) {\n  if (!algorithm || !key) return;\n\n  const keyType = key.asymmetricKeyType;\n  if (!keyType) return;\n\n  const allowedAlgorithms = allowedAlgorithmsForKeys[keyType];\n\n  if (!allowedAlgorithms) {\n    throw new Error(`Unknown key type \"${keyType}\".`);\n  }\n\n  if (!allowedAlgorithms.includes(algorithm)) {\n    throw new Error(`\"alg\" parameter for \"${keyType}\" key type must be one of: ${allowedAlgorithms.join(', ')}.`)\n  }\n\n  /*\n   * Ignore the next block from test coverage because it gets executed\n   * conditionally depending on the Node version. Not ignoring it would\n   * prevent us from reaching the target % of coverage for versions of\n   * Node under 15.7.0.\n   */\n  /* istanbul ignore next */\n  if (ASYMMETRIC_KEY_DETAILS_SUPPORTED) {\n    switch (keyType) {\n    case 'ec':\n      const keyCurve = key.asymmetricKeyDetails.namedCurve;\n      const allowedCurve = allowedCurves[algorithm];\n\n      if (keyCurve !== allowedCurve) {\n        throw new Error(`\"alg\" parameter \"${algorithm}\" requires curve \"${allowedCurve}\".`);\n      }\n      break;\n\n    case 'rsa-pss':\n      if (RSA_PSS_KEY_DETAILS_SUPPORTED) {\n        const length = parseInt(algorithm.slice(-3), 10);\n        const { hashAlgorithm, mgf1HashAlgorithm, saltLength } = key.asymmetricKeyDetails;\n\n        if (hashAlgorithm !== `sha${length}` || mgf1HashAlgorithm !== hashAlgorithm) {\n          throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of \"alg\" ${algorithm}.`);\n        }\n\n        if (saltLength !== undefined && saltLength > length >> 3) {\n          throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of \"alg\" ${algorithm}.`)\n        }\n      }\n      break;\n    }\n  }\n}\n", "var semver = require('semver');\n\nmodule.exports = semver.satisfies(process.version, '^6.12.0 || >=8.0.0');\n", "const JsonWebTokenError = require('./lib/JsonWebTokenError');\nconst NotBeforeError = require('./lib/NotBeforeError');\nconst TokenExpiredError = require('./lib/TokenExpiredError');\nconst decode = require('./decode');\nconst timespan = require('./lib/timespan');\nconst validateAsymmetricKey = require('./lib/validateAsymmetricKey');\nconst PS_SUPPORTED = require('./lib/psSupported');\nconst jws = require('jws');\nconst {KeyObject, createSecretKey, createPublicKey} = require(\"crypto\");\n\nconst PUB_KEY_ALGS = ['RS256', 'RS384', 'RS512'];\nconst EC_KEY_ALGS = ['ES256', 'ES384', 'ES512'];\nconst RSA_KEY_ALGS = ['RS256', 'RS384', 'RS512'];\nconst HS_ALGS = ['HS256', 'HS384', 'HS512'];\n\nif (PS_SUPPORTED) {\n  PUB_KEY_ALGS.splice(PUB_KEY_ALGS.length, 0, 'PS256', 'PS384', 'PS512');\n  RSA_KEY_ALGS.splice(RSA_KEY_ALGS.length, 0, 'PS256', 'PS384', 'PS512');\n}\n\nmodule.exports = function (jwtString, secretOrPublicKey, options, callback) {\n  if ((typeof options === 'function') && !callback) {\n    callback = options;\n    options = {};\n  }\n\n  if (!options) {\n    options = {};\n  }\n\n  //clone this object since we are going to mutate it.\n  options = Object.assign({}, options);\n\n  let done;\n\n  if (callback) {\n    done = callback;\n  } else {\n    done = function(err, data) {\n      if (err) throw err;\n      return data;\n    };\n  }\n\n  if (options.clockTimestamp && typeof options.clockTimestamp !== 'number') {\n    return done(new JsonWebTokenError('clockTimestamp must be a number'));\n  }\n\n  if (options.nonce !== undefined && (typeof options.nonce !== 'string' || options.nonce.trim() === '')) {\n    return done(new JsonWebTokenError('nonce must be a non-empty string'));\n  }\n\n  if (options.allowInvalidAsymmetricKeyTypes !== undefined && typeof options.allowInvalidAsymmetricKeyTypes !== 'boolean') {\n    return done(new JsonWebTokenError('allowInvalidAsymmetricKeyTypes must be a boolean'));\n  }\n\n  const clockTimestamp = options.clockTimestamp || Math.floor(Date.now() / 1000);\n\n  if (!jwtString){\n    return done(new JsonWebTokenError('jwt must be provided'));\n  }\n\n  if (typeof jwtString !== 'string') {\n    return done(new JsonWebTokenError('jwt must be a string'));\n  }\n\n  const parts = jwtString.split('.');\n\n  if (parts.length !== 3){\n    return done(new JsonWebTokenError('jwt malformed'));\n  }\n\n  let decodedToken;\n\n  try {\n    decodedToken = decode(jwtString, { complete: true });\n  } catch(err) {\n    return done(err);\n  }\n\n  if (!decodedToken) {\n    return done(new JsonWebTokenError('invalid token'));\n  }\n\n  const header = decodedToken.header;\n  let getSecret;\n\n  if(typeof secretOrPublicKey === 'function') {\n    if(!callback) {\n      return done(new JsonWebTokenError('verify must be called asynchronous if secret or public key is provided as a callback'));\n    }\n\n    getSecret = secretOrPublicKey;\n  }\n  else {\n    getSecret = function(header, secretCallback) {\n      return secretCallback(null, secretOrPublicKey);\n    };\n  }\n\n  return getSecret(header, function(err, secretOrPublicKey) {\n    if(err) {\n      return done(new JsonWebTokenError('error in secret or public key callback: ' + err.message));\n    }\n\n    const hasSignature = parts[2].trim() !== '';\n\n    if (!hasSignature && secretOrPublicKey){\n      return done(new JsonWebTokenError('jwt signature is required'));\n    }\n\n    if (hasSignature && !secretOrPublicKey) {\n      return done(new JsonWebTokenError('secret or public key must be provided'));\n    }\n\n    if (!hasSignature && !options.algorithms) {\n      return done(new JsonWebTokenError('please specify \"none\" in \"algorithms\" to verify unsigned tokens'));\n    }\n\n    if (secretOrPublicKey != null && !(secretOrPublicKey instanceof KeyObject)) {\n      try {\n        secretOrPublicKey = createPublicKey(secretOrPublicKey);\n      } catch (_) {\n        try {\n          secretOrPublicKey = createSecretKey(typeof secretOrPublicKey === 'string' ? Buffer.from(secretOrPublicKey) : secretOrPublicKey);\n        } catch (_) {\n          return done(new JsonWebTokenError('secretOrPublicKey is not valid key material'))\n        }\n      }\n    }\n\n    if (!options.algorithms) {\n      if (secretOrPublicKey.type === 'secret') {\n        options.algorithms = HS_ALGS;\n      } else if (['rsa', 'rsa-pss'].includes(secretOrPublicKey.asymmetricKeyType)) {\n        options.algorithms = RSA_KEY_ALGS\n      } else if (secretOrPublicKey.asymmetricKeyType === 'ec') {\n        options.algorithms = EC_KEY_ALGS\n      } else {\n        options.algorithms = PUB_KEY_ALGS\n      }\n    }\n\n    if (options.algorithms.indexOf(decodedToken.header.alg) === -1) {\n      return done(new JsonWebTokenError('invalid algorithm'));\n    }\n\n    if (header.alg.startsWith('HS') && secretOrPublicKey.type !== 'secret') {\n      return done(new JsonWebTokenError((`secretOrPublicKey must be a symmetric key when using ${header.alg}`)))\n    } else if (/^(?:RS|PS|ES)/.test(header.alg) && secretOrPublicKey.type !== 'public') {\n      return done(new JsonWebTokenError((`secretOrPublicKey must be an asymmetric key when using ${header.alg}`)))\n    }\n\n    if (!options.allowInvalidAsymmetricKeyTypes) {\n      try {\n        validateAsymmetricKey(header.alg, secretOrPublicKey);\n      } catch (e) {\n        return done(e);\n      }\n    }\n\n    let valid;\n\n    try {\n      valid = jws.verify(jwtString, decodedToken.header.alg, secretOrPublicKey);\n    } catch (e) {\n      return done(e);\n    }\n\n    if (!valid) {\n      return done(new JsonWebTokenError('invalid signature'));\n    }\n\n    const payload = decodedToken.payload;\n\n    if (typeof payload.nbf !== 'undefined' && !options.ignoreNotBefore) {\n      if (typeof payload.nbf !== 'number') {\n        return done(new JsonWebTokenError('invalid nbf value'));\n      }\n      if (payload.nbf > clockTimestamp + (options.clockTolerance || 0)) {\n        return done(new NotBeforeError('jwt not active', new Date(payload.nbf * 1000)));\n      }\n    }\n\n    if (typeof payload.exp !== 'undefined' && !options.ignoreExpiration) {\n      if (typeof payload.exp !== 'number') {\n        return done(new JsonWebTokenError('invalid exp value'));\n      }\n      if (clockTimestamp >= payload.exp + (options.clockTolerance || 0)) {\n        return done(new TokenExpiredError('jwt expired', new Date(payload.exp * 1000)));\n      }\n    }\n\n    if (options.audience) {\n      const audiences = Array.isArray(options.audience) ? options.audience : [options.audience];\n      const target = Array.isArray(payload.aud) ? payload.aud : [payload.aud];\n\n      const match = target.some(function (targetAudience) {\n        return audiences.some(function (audience) {\n          return audience instanceof RegExp ? audience.test(targetAudience) : audience === targetAudience;\n        });\n      });\n\n      if (!match) {\n        return done(new JsonWebTokenError('jwt audience invalid. expected: ' + audiences.join(' or ')));\n      }\n    }\n\n    if (options.issuer) {\n      const invalid_issuer =\n              (typeof options.issuer === 'string' && payload.iss !== options.issuer) ||\n              (Array.isArray(options.issuer) && options.issuer.indexOf(payload.iss) === -1);\n\n      if (invalid_issuer) {\n        return done(new JsonWebTokenError('jwt issuer invalid. expected: ' + options.issuer));\n      }\n    }\n\n    if (options.subject) {\n      if (payload.sub !== options.subject) {\n        return done(new JsonWebTokenError('jwt subject invalid. expected: ' + options.subject));\n      }\n    }\n\n    if (options.jwtid) {\n      if (payload.jti !== options.jwtid) {\n        return done(new JsonWebTokenError('jwt jwtid invalid. expected: ' + options.jwtid));\n      }\n    }\n\n    if (options.nonce) {\n      if (payload.nonce !== options.nonce) {\n        return done(new JsonWebTokenError('jwt nonce invalid. expected: ' + options.nonce));\n      }\n    }\n\n    if (options.maxAge) {\n      if (typeof payload.iat !== 'number') {\n        return done(new JsonWebTokenError('iat required when maxAge is specified'));\n      }\n\n      const maxAgeTimestamp = timespan(options.maxAge, payload.iat);\n      if (typeof maxAgeTimestamp === 'undefined') {\n        return done(new JsonWebTokenError('\"maxAge\" should be a number of seconds or string representing a timespan eg: \"1d\", \"20h\", 60'));\n      }\n      if (clockTimestamp >= maxAgeTimestamp + (options.clockTolerance || 0)) {\n        return done(new TokenExpiredError('maxAge exceeded', new Date(maxAgeTimestamp * 1000)));\n      }\n    }\n\n    if (options.complete === true) {\n      const signature = decodedToken.signature;\n\n      return done(null, {\n        header: header,\n        payload: payload,\n        signature: signature\n      });\n    }\n\n    return done(null, payload);\n  });\n};\n", "/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991,\n    MAX_INTEGER = 1.7976931348623157e+308,\n    NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  if (value !== value) {\n    return baseFindIndex(array, baseIsNaN, fromIndex);\n  }\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object),\n    nativeMax = Math.max;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Checks if `value` is in `collection`. If `collection` is a string, it's\n * checked for a substring of `value`, otherwise\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * is used for equality comparisons. If `fromIndex` is negative, it's used as\n * the offset from the end of `collection`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object|string} collection The collection to inspect.\n * @param {*} value The value to search for.\n * @param {number} [fromIndex=0] The index to search from.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n * @returns {boolean} Returns `true` if `value` is found, else `false`.\n * @example\n *\n * _.includes([1, 2, 3], 1);\n * // => true\n *\n * _.includes([1, 2, 3], 1, 2);\n * // => false\n *\n * _.includes({ 'a': 1, 'b': 2 }, 1);\n * // => true\n *\n * _.includes('abcd', 'bc');\n * // => true\n */\nfunction includes(collection, value, fromIndex, guard) {\n  collection = isArrayLike(collection) ? collection : values(collection);\n  fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;\n\n  var length = collection.length;\n  if (fromIndex < 0) {\n    fromIndex = nativeMax(length + fromIndex, 0);\n  }\n  return isString(collection)\n    ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)\n    : (!!length && baseIndexOf(collection, value, fromIndex) > -1);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && objectToString.call(value) == stringTag);\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * Creates an array of the own enumerable string keyed property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object ? baseValues(object, keys(object)) : [];\n}\n\nmodule.exports = includes;\n", "/**\n * lodash 3.0.3 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a boolean primitive or object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isBoolean(false);\n * // => true\n *\n * _.isBoolean(null);\n * // => false\n */\nfunction isBoolean(value) {\n  return value === true || value === false ||\n    (isObjectLike(value) && objectToString.call(value) == boolTag);\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\nmodule.exports = isBoolean;\n", "/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308,\n    NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is an integer.\n *\n * **Note:** This method is based on\n * [`Number.isInteger`](https://mdn.io/Number/isInteger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an integer, else `false`.\n * @example\n *\n * _.isInteger(3);\n * // => true\n *\n * _.isInteger(Number.MIN_VALUE);\n * // => false\n *\n * _.isInteger(Infinity);\n * // => false\n *\n * _.isInteger('3');\n * // => false\n */\nfunction isInteger(value) {\n  return typeof value == 'number' && value == toInteger(value);\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = isInteger;\n", "/**\n * lodash 3.0.3 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are classified\n * as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isNumber(3);\n * // => true\n *\n * _.isNumber(Number.MIN_VALUE);\n * // => true\n *\n * _.isNumber(Infinity);\n * // => true\n *\n * _.isNumber('3');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' ||\n    (isObjectLike(value) && objectToString.call(value) == numberTag);\n}\n\nmodule.exports = isNumber;\n", "/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) ||\n      objectToString.call(value) != objectTag || isHostObject(value)) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return (typeof Ctor == 'function' &&\n    Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString);\n}\n\nmodule.exports = isPlainObject;\n", "/**\n * lodash 4.0.1 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @type Function\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && objectToString.call(value) == stringTag);\n}\n\nmodule.exports = isString;\n", "/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308,\n    NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Creates a function that invokes `func`, with the `this` binding and arguments\n * of the created function, while it's called less than `n` times. Subsequent\n * calls to the created function return the result of the last `func` invocation.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {number} n The number of calls at which `func` is no longer invoked.\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new restricted function.\n * @example\n *\n * jQuery(element).on('click', _.before(5, addContactToList));\n * // => Allows adding up to 4 contacts to the list.\n */\nfunction before(n, func) {\n  var result;\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  n = toInteger(n);\n  return function() {\n    if (--n > 0) {\n      result = func.apply(this, arguments);\n    }\n    if (n <= 1) {\n      func = undefined;\n    }\n    return result;\n  };\n}\n\n/**\n * Creates a function that is restricted to invoking `func` once. Repeat calls\n * to the function return the value of the first invocation. The `func` is\n * invoked with the `this` binding and arguments of the created function.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new restricted function.\n * @example\n *\n * var initialize = _.once(createApplication);\n * initialize();\n * initialize();\n * // => `createApplication` is invoked once\n */\nfunction once(func) {\n  return before(2, func);\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = once;\n", "const timespan = require('./lib/timespan');\nconst PS_SUPPORTED = require('./lib/psSupported');\nconst validateAsymmetricKey = require('./lib/validateAsymmetricKey');\nconst jws = require('jws');\nconst includes = require('lodash.includes');\nconst isBoolean = require('lodash.isboolean');\nconst isInteger = require('lodash.isinteger');\nconst isNumber = require('lodash.isnumber');\nconst isPlainObject = require('lodash.isplainobject');\nconst isString = require('lodash.isstring');\nconst once = require('lodash.once');\nconst { KeyObject, createSecretKey, createPrivateKey } = require('crypto')\n\nconst SUPPORTED_ALGS = ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'none'];\nif (PS_SUPPORTED) {\n  SUPPORTED_ALGS.splice(3, 0, 'PS256', 'PS384', 'PS512');\n}\n\nconst sign_options_schema = {\n  expiresIn: { isValid: function(value) { return isInteger(value) || (isString(value) && value); }, message: '\"expiresIn\" should be a number of seconds or string representing a timespan' },\n  notBefore: { isValid: function(value) { return isInteger(value) || (isString(value) && value); }, message: '\"notBefore\" should be a number of seconds or string representing a timespan' },\n  audience: { isValid: function(value) { return isString(value) || Array.isArray(value); }, message: '\"audience\" must be a string or array' },\n  algorithm: { isValid: includes.bind(null, SUPPORTED_ALGS), message: '\"algorithm\" must be a valid string enum value' },\n  header: { isValid: isPlainObject, message: '\"header\" must be an object' },\n  encoding: { isValid: isString, message: '\"encoding\" must be a string' },\n  issuer: { isValid: isString, message: '\"issuer\" must be a string' },\n  subject: { isValid: isString, message: '\"subject\" must be a string' },\n  jwtid: { isValid: isString, message: '\"jwtid\" must be a string' },\n  noTimestamp: { isValid: isBoolean, message: '\"noTimestamp\" must be a boolean' },\n  keyid: { isValid: isString, message: '\"keyid\" must be a string' },\n  mutatePayload: { isValid: isBoolean, message: '\"mutatePayload\" must be a boolean' },\n  allowInsecureKeySizes: { isValid: isBoolean, message: '\"allowInsecureKeySizes\" must be a boolean'},\n  allowInvalidAsymmetricKeyTypes: { isValid: isBoolean, message: '\"allowInvalidAsymmetricKeyTypes\" must be a boolean'}\n};\n\nconst registered_claims_schema = {\n  iat: { isValid: isNumber, message: '\"iat\" should be a number of seconds' },\n  exp: { isValid: isNumber, message: '\"exp\" should be a number of seconds' },\n  nbf: { isValid: isNumber, message: '\"nbf\" should be a number of seconds' }\n};\n\nfunction validate(schema, allowUnknown, object, parameterName) {\n  if (!isPlainObject(object)) {\n    throw new Error('Expected \"' + parameterName + '\" to be a plain object.');\n  }\n  Object.keys(object)\n    .forEach(function(key) {\n      const validator = schema[key];\n      if (!validator) {\n        if (!allowUnknown) {\n          throw new Error('\"' + key + '\" is not allowed in \"' + parameterName + '\"');\n        }\n        return;\n      }\n      if (!validator.isValid(object[key])) {\n        throw new Error(validator.message);\n      }\n    });\n}\n\nfunction validateOptions(options) {\n  return validate(sign_options_schema, false, options, 'options');\n}\n\nfunction validatePayload(payload) {\n  return validate(registered_claims_schema, true, payload, 'payload');\n}\n\nconst options_to_payload = {\n  'audience': 'aud',\n  'issuer': 'iss',\n  'subject': 'sub',\n  'jwtid': 'jti'\n};\n\nconst options_for_objects = [\n  'expiresIn',\n  'notBefore',\n  'noTimestamp',\n  'audience',\n  'issuer',\n  'subject',\n  'jwtid',\n];\n\nmodule.exports = function (payload, secretOrPrivateKey, options, callback) {\n  if (typeof options === 'function') {\n    callback = options;\n    options = {};\n  } else {\n    options = options || {};\n  }\n\n  const isObjectPayload = typeof payload === 'object' &&\n                        !Buffer.isBuffer(payload);\n\n  const header = Object.assign({\n    alg: options.algorithm || 'HS256',\n    typ: isObjectPayload ? 'JWT' : undefined,\n    kid: options.keyid\n  }, options.header);\n\n  function failure(err) {\n    if (callback) {\n      return callback(err);\n    }\n    throw err;\n  }\n\n  if (!secretOrPrivateKey && options.algorithm !== 'none') {\n    return failure(new Error('secretOrPrivateKey must have a value'));\n  }\n\n  if (secretOrPrivateKey != null && !(secretOrPrivateKey instanceof KeyObject)) {\n    try {\n      secretOrPrivateKey = createPrivateKey(secretOrPrivateKey)\n    } catch (_) {\n      try {\n        secretOrPrivateKey = createSecretKey(typeof secretOrPrivateKey === 'string' ? Buffer.from(secretOrPrivateKey) : secretOrPrivateKey)\n      } catch (_) {\n        return failure(new Error('secretOrPrivateKey is not valid key material'));\n      }\n    }\n  }\n\n  if (header.alg.startsWith('HS') && secretOrPrivateKey.type !== 'secret') {\n    return failure(new Error((`secretOrPrivateKey must be a symmetric key when using ${header.alg}`)))\n  } else if (/^(?:RS|PS|ES)/.test(header.alg)) {\n    if (secretOrPrivateKey.type !== 'private') {\n      return failure(new Error((`secretOrPrivateKey must be an asymmetric key when using ${header.alg}`)))\n    }\n    if (!options.allowInsecureKeySizes &&\n      !header.alg.startsWith('ES') &&\n      secretOrPrivateKey.asymmetricKeyDetails !== undefined && //KeyObject.asymmetricKeyDetails is supported in Node 15+\n      secretOrPrivateKey.asymmetricKeyDetails.modulusLength < 2048) {\n      return failure(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${header.alg}`));\n    }\n  }\n\n  if (typeof payload === 'undefined') {\n    return failure(new Error('payload is required'));\n  } else if (isObjectPayload) {\n    try {\n      validatePayload(payload);\n    }\n    catch (error) {\n      return failure(error);\n    }\n    if (!options.mutatePayload) {\n      payload = Object.assign({},payload);\n    }\n  } else {\n    const invalid_options = options_for_objects.filter(function (opt) {\n      return typeof options[opt] !== 'undefined';\n    });\n\n    if (invalid_options.length > 0) {\n      return failure(new Error('invalid ' + invalid_options.join(',') + ' option for ' + (typeof payload ) + ' payload'));\n    }\n  }\n\n  if (typeof payload.exp !== 'undefined' && typeof options.expiresIn !== 'undefined') {\n    return failure(new Error('Bad \"options.expiresIn\" option the payload already has an \"exp\" property.'));\n  }\n\n  if (typeof payload.nbf !== 'undefined' && typeof options.notBefore !== 'undefined') {\n    return failure(new Error('Bad \"options.notBefore\" option the payload already has an \"nbf\" property.'));\n  }\n\n  try {\n    validateOptions(options);\n  }\n  catch (error) {\n    return failure(error);\n  }\n\n  if (!options.allowInvalidAsymmetricKeyTypes) {\n    try {\n      validateAsymmetricKey(header.alg, secretOrPrivateKey);\n    } catch (error) {\n      return failure(error);\n    }\n  }\n\n  const timestamp = payload.iat || Math.floor(Date.now() / 1000);\n\n  if (options.noTimestamp) {\n    delete payload.iat;\n  } else if (isObjectPayload) {\n    payload.iat = timestamp;\n  }\n\n  if (typeof options.notBefore !== 'undefined') {\n    try {\n      payload.nbf = timespan(options.notBefore, timestamp);\n    }\n    catch (err) {\n      return failure(err);\n    }\n    if (typeof payload.nbf === 'undefined') {\n      return failure(new Error('\"notBefore\" should be a number of seconds or string representing a timespan eg: \"1d\", \"20h\", 60'));\n    }\n  }\n\n  if (typeof options.expiresIn !== 'undefined' && typeof payload === 'object') {\n    try {\n      payload.exp = timespan(options.expiresIn, timestamp);\n    }\n    catch (err) {\n      return failure(err);\n    }\n    if (typeof payload.exp === 'undefined') {\n      return failure(new Error('\"expiresIn\" should be a number of seconds or string representing a timespan eg: \"1d\", \"20h\", 60'));\n    }\n  }\n\n  Object.keys(options_to_payload).forEach(function (key) {\n    const claim = options_to_payload[key];\n    if (typeof options[key] !== 'undefined') {\n      if (typeof payload[claim] !== 'undefined') {\n        return failure(new Error('Bad \"options.' + key + '\" option. The payload already has an \"' + claim + '\" property.'));\n      }\n      payload[claim] = options[key];\n    }\n  });\n\n  const encoding = options.encoding || 'utf8';\n\n  if (typeof callback === 'function') {\n    callback = callback && once(callback);\n\n    jws.createSign({\n      header: header,\n      privateKey: secretOrPrivateKey,\n      payload: payload,\n      encoding: encoding\n    }).once('error', callback)\n      .once('done', function (signature) {\n        // TODO: Remove in favor of the modulus length check before signing once node 15+ is the minimum supported version\n        if(!options.allowInsecureKeySizes && /^(?:RS|PS)/.test(header.alg) && signature.length < 256) {\n          return callback(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${header.alg}`))\n        }\n        callback(null, signature);\n      });\n  } else {\n    let signature = jws.sign({header: header, payload: payload, secret: secretOrPrivateKey, encoding: encoding});\n    // TODO: Remove in favor of the modulus length check before signing once node 15+ is the minimum supported version\n    if(!options.allowInsecureKeySizes && /^(?:RS|PS)/.test(header.alg) && signature.length < 256) {\n      throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${header.alg}`)\n    }\n    return signature\n  }\n};\n", "module.exports = {\n  decode: require('./decode'),\n  verify: require('./verify'),\n  sign: require('./sign'),\n  JsonWebTokenError: require('./lib/JsonWebTokenError'),\n  NotBeforeError: require('./lib/NotBeforeError'),\n  TokenExpiredError: require('./lib/TokenExpiredError'),\n};\n", "'use strict';\n\nconst internals = {};\n\n\nmodule.exports = function (...args) {\n\n    try {\n        return JSON.stringify(...args);\n    }\n    catch (err) {\n        return '[Cannot display object: ' + err.message + ']';\n    }\n};\n", "'use strict';\n\nconst Stringify = require('./stringify');\n\n\nconst internals = {};\n\n\nmodule.exports = class extends Error {\n\n    constructor(args) {\n\n        const msgs = args\n            .filter((arg) => arg !== '')\n            .map((arg) => {\n\n                return typeof arg === 'string' ? arg : arg instanceof Error ? arg.message : Stringify(arg);\n            });\n\n        super(msgs.join(' ') || 'Unknown error');\n\n        if (typeof Error.captureStackTrace === 'function') {            // $lab:coverage:ignore$\n            Error.captureStackTrace(this, exports.assert);\n        }\n    }\n};\n", "'use strict';\n\nconst AssertError = require('./error');\n\n\nconst internals = {};\n\n\nmodule.exports = function (condition, ...args) {\n\n    if (condition) {\n        return;\n    }\n\n    if (args.length === 1 &&\n        args[0] instanceof Error) {\n\n        throw args[0];\n    }\n\n    throw new AssertError(args);\n};\n", "'use strict';\n\nconst Assert = require('./assert');\n\n\nconst internals = {};\n\n\nmodule.exports = function (obj, chain, options) {\n\n    if (chain === false ||\n        chain === null ||\n        chain === undefined) {\n\n        return obj;\n    }\n\n    options = options || {};\n    if (typeof options === 'string') {\n        options = { separator: options };\n    }\n\n    const isChainArray = Array.isArray(chain);\n\n    Assert(!isChainArray || !options.separator, 'Separator option is not valid for array-based chain');\n\n    const path = isChainArray ? chain : chain.split(options.separator || '.');\n    let ref = obj;\n    for (let i = 0; i < path.length; ++i) {\n        let key = path[i];\n        const type = options.iterables && internals.iterables(ref);\n\n        if (Array.isArray(ref) ||\n            type === 'set') {\n\n            const number = Number(key);\n            if (Number.isInteger(number)) {\n                key = number < 0 ? ref.length + number : number;\n            }\n        }\n\n        if (!ref ||\n            typeof ref === 'function' && options.functions === false ||         // Defaults to true\n            !type && ref[key] === undefined) {\n\n            Assert(!options.strict || i + 1 === path.length, 'Missing segment', key, 'in reach path ', chain);\n            Assert(typeof ref === 'object' || options.functions === true || typeof ref !== 'function', 'Invalid segment', key, 'in reach path ', chain);\n            ref = options.default;\n            break;\n        }\n\n        if (!type) {\n            ref = ref[key];\n        }\n        else if (type === 'set') {\n            ref = [...ref][key];\n        }\n        else {  // type === 'map'\n            ref = ref.get(key);\n        }\n    }\n\n    return ref;\n};\n\n\ninternals.iterables = function (ref) {\n\n    if (ref instanceof Set) {\n        return 'set';\n    }\n\n    if (ref instanceof Map) {\n        return 'map';\n    }\n};\n", "'use strict';\n\nconst internals = {};\n\n\nexports = module.exports = {\n    array: Array.prototype,\n    buffer: Buffer && Buffer.prototype,             // $lab:coverage:ignore$\n    date: Date.prototype,\n    error: Error.prototype,\n    generic: Object.prototype,\n    map: Map.prototype,\n    promise: Promise.prototype,\n    regex: RegExp.prototype,\n    set: Set.prototype,\n    weakMap: WeakMap.prototype,\n    weakSet: WeakSet.prototype\n};\n\n\ninternals.typeMap = new Map([\n    ['[object Error]', exports.error],\n    ['[object Map]', exports.map],\n    ['[object Promise]', exports.promise],\n    ['[object Set]', exports.set],\n    ['[object WeakMap]', exports.weakMap],\n    ['[object WeakSet]', exports.weakSet]\n]);\n\n\nexports.getInternalProto = function (obj) {\n\n    if (Array.isArray(obj)) {\n        return exports.array;\n    }\n\n    if (Buffer && obj instanceof Buffer) {          // $lab:coverage:ignore$\n        return exports.buffer;\n    }\n\n    if (obj instanceof Date) {\n        return exports.date;\n    }\n\n    if (obj instanceof RegExp) {\n        return exports.regex;\n    }\n\n    if (obj instanceof Error) {\n        return exports.error;\n    }\n\n    const objName = Object.prototype.toString.call(obj);\n    return internals.typeMap.get(objName) || exports.generic;\n};\n", "'use strict';\n\nconst internals = {};\n\n\nexports.keys = function (obj, options = {}) {\n\n    return options.symbols !== false ? Reflect.ownKeys(obj) : Object.getOwnPropertyNames(obj);  // Defaults to true\n};\n", "'use strict';\n\nconst Reach = require('./reach');\nconst Types = require('./types');\nconst Utils = require('./utils');\n\n\nconst internals = {\n    needsProtoHack: new Set([Types.set, Types.map, Types.weakSet, Types.weakMap])\n};\n\n\nmodule.exports = internals.clone = function (obj, options = {}, _seen = null) {\n\n    if (typeof obj !== 'object' ||\n        obj === null) {\n\n        return obj;\n    }\n\n    let clone = internals.clone;\n    let seen = _seen;\n\n    if (options.shallow) {\n        if (options.shallow !== true) {\n            return internals.cloneWithShallow(obj, options);\n        }\n\n        clone = (value) => value;\n    }\n    else if (seen) {\n        const lookup = seen.get(obj);\n        if (lookup) {\n            return lookup;\n        }\n    }\n    else {\n        seen = new Map();\n    }\n\n    // Built-in object types\n\n    const baseProto = Types.getInternalProto(obj);\n    if (baseProto === Types.buffer) {\n        return Buffer && Buffer.from(obj);              // $lab:coverage:ignore$\n    }\n\n    if (baseProto === Types.date) {\n        return new Date(obj.getTime());\n    }\n\n    if (baseProto === Types.regex) {\n        return new RegExp(obj);\n    }\n\n    // Generic objects\n\n    const newObj = internals.base(obj, baseProto, options);\n    if (newObj === obj) {\n        return obj;\n    }\n\n    if (seen) {\n        seen.set(obj, newObj);                              // Set seen, since obj could recurse\n    }\n\n    if (baseProto === Types.set) {\n        for (const value of obj) {\n            newObj.add(clone(value, options, seen));\n        }\n    }\n    else if (baseProto === Types.map) {\n        for (const [key, value] of obj) {\n            newObj.set(key, clone(value, options, seen));\n        }\n    }\n\n    const keys = Utils.keys(obj, options);\n    for (const key of keys) {\n        if (key === '__proto__') {\n            continue;\n        }\n\n        if (baseProto === Types.array &&\n            key === 'length') {\n\n            newObj.length = obj.length;\n            continue;\n        }\n\n        const descriptor = Object.getOwnPropertyDescriptor(obj, key);\n        if (descriptor) {\n            if (descriptor.get ||\n                descriptor.set) {\n\n                Object.defineProperty(newObj, key, descriptor);\n            }\n            else if (descriptor.enumerable) {\n                newObj[key] = clone(obj[key], options, seen);\n            }\n            else {\n                Object.defineProperty(newObj, key, { enumerable: false, writable: true, configurable: true, value: clone(obj[key], options, seen) });\n            }\n        }\n        else {\n            Object.defineProperty(newObj, key, {\n                enumerable: true,\n                writable: true,\n                configurable: true,\n                value: clone(obj[key], options, seen)\n            });\n        }\n    }\n\n    return newObj;\n};\n\n\ninternals.cloneWithShallow = function (source, options) {\n\n    const keys = options.shallow;\n    options = Object.assign({}, options);\n    options.shallow = false;\n\n    const seen = new Map();\n\n    for (const key of keys) {\n        const ref = Reach(source, key);\n        if (typeof ref === 'object' ||\n            typeof ref === 'function') {\n\n            seen.set(ref, ref);\n        }\n    }\n\n    return internals.clone(source, options, seen);\n};\n\n\ninternals.base = function (obj, baseProto, options) {\n\n    if (options.prototype === false) {                  // Defaults to true\n        if (internals.needsProtoHack.has(baseProto)) {\n            return new baseProto.constructor();\n        }\n\n        return baseProto === Types.array ? [] : {};\n    }\n\n    const proto = Object.getPrototypeOf(obj);\n    if (proto &&\n        proto.isImmutable) {\n\n        return obj;\n    }\n\n    if (baseProto === Types.array) {\n        const newObj = [];\n        if (proto !== baseProto) {\n            Object.setPrototypeOf(newObj, proto);\n        }\n\n        return newObj;\n    }\n\n    if (internals.needsProtoHack.has(baseProto)) {\n        const newObj = new proto.constructor();\n        if (proto !== baseProto) {\n            Object.setPrototypeOf(newObj, proto);\n        }\n\n        return newObj;\n    }\n\n    return Object.create(proto);\n};\n", "{\n    \"name\": \"joi\",\n    \"description\": \"Object schema validation\",\n    \"version\": \"17.13.3\",\n    \"repository\": \"git://github.com/hapijs/joi\",\n    \"main\": \"lib/index.js\",\n    \"types\": \"lib/index.d.ts\",\n    \"browser\": \"dist/joi-browser.min.js\",\n    \"files\": [\n        \"lib/**/*\",\n        \"dist/*\"\n    ],\n    \"keywords\": [\n        \"schema\",\n        \"validation\"\n    ],\n    \"dependencies\": {\n        \"@hapi/hoek\": \"^9.3.0\",\n        \"@hapi/topo\": \"^5.1.0\",\n        \"@sideway/address\": \"^4.1.5\",\n        \"@sideway/formula\": \"^3.0.1\",\n        \"@sideway/pinpoint\": \"^2.0.0\"\n    },\n    \"devDependencies\": {\n        \"@hapi/bourne\": \"2.x.x\",\n        \"@hapi/code\": \"8.x.x\",\n        \"@hapi/joi-legacy-test\": \"npm:@hapi/joi@15.x.x\",\n        \"@hapi/lab\": \"^25.1.3\",\n        \"@types/node\": \"^14.18.63\",\n        \"typescript\": \"4.3.x\"\n    },\n    \"scripts\": {\n        \"prepublishOnly\": \"cd browser && npm install && npm run build\",\n        \"test\": \"lab -t 100 -a @hapi/code -L -Y\",\n        \"test-cov-html\": \"lab -r html -o coverage.html -a @hapi/code\"\n    },\n    \"license\": \"BSD-3-Clause\"\n}\n", "'use strict';\n\nconst Joi = require('./index');\n\n\nconst internals = {};\n\n\n// Preferences\n\ninternals.wrap = Joi.string()\n    .min(1)\n    .max(2)\n    .allow(false);\n\n\nexports.preferences = Joi.object({\n    allowUnknown: Joi.boolean(),\n    abortEarly: Joi.boolean(),\n    artifacts: Joi.boolean(),\n    cache: Joi.boolean(),\n    context: Joi.object(),\n    convert: Joi.boolean(),\n    dateFormat: Joi.valid('date', 'iso', 'string', 'time', 'utc'),\n    debug: Joi.boolean(),\n    errors: {\n        escapeHtml: Joi.boolean(),\n        label: Joi.valid('path', 'key', false),\n        language: [\n            Joi.string(),\n            Joi.object().ref()\n        ],\n        render: Joi.boolean(),\n        stack: Joi.boolean(),\n        wrap: {\n            label: internals.wrap,\n            array: internals.wrap,\n            string: internals.wrap\n        }\n    },\n    externals: Joi.boolean(),\n    messages: Joi.object(),\n    noDefaults: Joi.boolean(),\n    nonEnumerables: Joi.boolean(),\n    presence: Joi.valid('required', 'optional', 'forbidden'),\n    skipFunctions: Joi.boolean(),\n    stripUnknown: Joi.object({\n        arrays: Joi.boolean(),\n        objects: Joi.boolean()\n    })\n        .or('arrays', 'objects')\n        .allow(true, false),\n    warnings: Joi.boolean()\n})\n    .strict();\n\n\n// Extensions\n\ninternals.nameRx = /^[a-zA-Z0-9]\\w*$/;\n\n\ninternals.rule = Joi.object({\n    alias: Joi.array().items(Joi.string().pattern(internals.nameRx)).single(),\n    args: Joi.array().items(\n        Joi.string(),\n        Joi.object({\n            name: Joi.string().pattern(internals.nameRx).required(),\n            ref: Joi.boolean(),\n            assert: Joi.alternatives([\n                Joi.function(),\n                Joi.object().schema()\n            ])\n                .conditional('ref', { is: true, then: Joi.required() }),\n            normalize: Joi.function(),\n            message: Joi.string().when('assert', { is: Joi.function(), then: Joi.required() })\n        })\n    ),\n    convert: Joi.boolean(),\n    manifest: Joi.boolean(),\n    method: Joi.function().allow(false),\n    multi: Joi.boolean(),\n    validate: Joi.function()\n});\n\n\nexports.extension = Joi.object({\n    type: Joi.alternatives([\n        Joi.string(),\n        Joi.object().regex()\n    ])\n        .required(),\n    args: Joi.function(),\n    cast: Joi.object().pattern(internals.nameRx, Joi.object({\n        from: Joi.function().maxArity(1).required(),\n        to: Joi.function().minArity(1).maxArity(2).required()\n    })),\n    base: Joi.object().schema()\n        .when('type', { is: Joi.object().regex(), then: Joi.forbidden() }),\n    coerce: [\n        Joi.function().maxArity(3),\n        Joi.object({ method: Joi.function().maxArity(3).required(), from: Joi.array().items(Joi.string()).single() })\n    ],\n    flags: Joi.object().pattern(internals.nameRx, Joi.object({\n        setter: Joi.string(),\n        default: Joi.any()\n    })),\n    manifest: {\n        build: Joi.function().arity(2)\n    },\n    messages: [Joi.object(), Joi.string()],\n    modifiers: Joi.object().pattern(internals.nameRx, Joi.function().minArity(1).maxArity(2)),\n    overrides: Joi.object().pattern(internals.nameRx, Joi.function()),\n    prepare: Joi.function().maxArity(3),\n    rebuild: Joi.function().arity(1),\n    rules: Joi.object().pattern(internals.nameRx, internals.rule),\n    terms: Joi.object().pattern(internals.nameRx, Joi.object({\n        init: Joi.array().allow(null).required(),\n        manifest: Joi.object().pattern(/.+/, [\n            Joi.valid('schema', 'single'),\n            Joi.object({\n                mapped: Joi.object({\n                    from: Joi.string().required(),\n                    to: Joi.string().required()\n                })\n                    .required()\n            })\n        ])\n    })),\n    validate: Joi.function().maxArity(3)\n})\n    .strict();\n\n\nexports.extensions = Joi.array().items(Joi.object(), Joi.function().arity(1)).strict();\n\n\n// Manifest\n\ninternals.desc = {\n\n    buffer: Joi.object({\n        buffer: Joi.string()\n    }),\n\n    func: Joi.object({\n        function: Joi.function().required(),\n        options: {\n            literal: true\n        }\n    }),\n\n    override: Joi.object({\n        override: true\n    }),\n\n    ref: Joi.object({\n        ref: Joi.object({\n            type: Joi.valid('value', 'global', 'local'),\n            path: Joi.array().required(),\n            separator: Joi.string().length(1).allow(false),\n            ancestor: Joi.number().min(0).integer().allow('root'),\n            map: Joi.array().items(Joi.array().length(2)).min(1),\n            adjust: Joi.function(),\n            iterables: Joi.boolean(),\n            in: Joi.boolean(),\n            render: Joi.boolean()\n        })\n            .required()\n    }),\n\n    regex: Joi.object({\n        regex: Joi.string().min(3)\n    }),\n\n    special: Joi.object({\n        special: Joi.valid('deep').required()\n    }),\n\n    template: Joi.object({\n        template: Joi.string().required(),\n        options: Joi.object()\n    }),\n\n    value: Joi.object({\n        value: Joi.alternatives([Joi.object(), Joi.array()]).required()\n    })\n};\n\n\ninternals.desc.entity = Joi.alternatives([\n    Joi.array().items(Joi.link('...')),\n    Joi.boolean(),\n    Joi.function(),\n    Joi.number(),\n    Joi.string(),\n    internals.desc.buffer,\n    internals.desc.func,\n    internals.desc.ref,\n    internals.desc.regex,\n    internals.desc.special,\n    internals.desc.template,\n    internals.desc.value,\n    Joi.link('/')\n]);\n\n\ninternals.desc.values = Joi.array()\n    .items(\n        null,\n        Joi.boolean(),\n        Joi.function(),\n        Joi.number().allow(Infinity, -Infinity),\n        Joi.string().allow(''),\n        Joi.symbol(),\n        internals.desc.buffer,\n        internals.desc.func,\n        internals.desc.override,\n        internals.desc.ref,\n        internals.desc.regex,\n        internals.desc.template,\n        internals.desc.value\n    );\n\n\ninternals.desc.messages = Joi.object()\n    .pattern(/.+/, [\n        Joi.string(),\n        internals.desc.template,\n        Joi.object().pattern(/.+/, [Joi.string(), internals.desc.template])\n    ]);\n\n\nexports.description = Joi.object({\n    type: Joi.string().required(),\n    flags: Joi.object({\n        cast: Joi.string(),\n        default: Joi.any(),\n        description: Joi.string(),\n        empty: Joi.link('/'),\n        failover: internals.desc.entity,\n        id: Joi.string(),\n        label: Joi.string(),\n        only: true,\n        presence: ['optional', 'required', 'forbidden'],\n        result: ['raw', 'strip'],\n        strip: Joi.boolean(),\n        unit: Joi.string()\n    })\n        .unknown(),\n    preferences: {\n        allowUnknown: Joi.boolean(),\n        abortEarly: Joi.boolean(),\n        artifacts: Joi.boolean(),\n        cache: Joi.boolean(),\n        convert: Joi.boolean(),\n        dateFormat: ['date', 'iso', 'string', 'time', 'utc'],\n        errors: {\n            escapeHtml: Joi.boolean(),\n            label: ['path', 'key'],\n            language: [\n                Joi.string(),\n                internals.desc.ref\n            ],\n            wrap: {\n                label: internals.wrap,\n                array: internals.wrap\n            }\n        },\n        externals: Joi.boolean(),\n        messages: internals.desc.messages,\n        noDefaults: Joi.boolean(),\n        nonEnumerables: Joi.boolean(),\n        presence: ['required', 'optional', 'forbidden'],\n        skipFunctions: Joi.boolean(),\n        stripUnknown: Joi.object({\n            arrays: Joi.boolean(),\n            objects: Joi.boolean()\n        })\n            .or('arrays', 'objects')\n            .allow(true, false),\n        warnings: Joi.boolean()\n    },\n    allow: internals.desc.values,\n    invalid: internals.desc.values,\n    rules: Joi.array().min(1).items({\n        name: Joi.string().required(),\n        args: Joi.object().min(1),\n        keep: Joi.boolean(),\n        message: [\n            Joi.string(),\n            internals.desc.messages\n        ],\n        warn: Joi.boolean()\n    }),\n\n    // Terms\n\n    keys: Joi.object().pattern(/.*/, Joi.link('/')),\n    link: internals.desc.ref\n})\n    .pattern(/^[a-z]\\w*$/, Joi.any());\n", "'use strict';\n\nconst internals = {};\n\n\nmodule.exports = function (input) {\n\n    if (!input) {\n        return '';\n    }\n\n    let escaped = '';\n\n    for (let i = 0; i < input.length; ++i) {\n\n        const charCode = input.charCodeAt(i);\n\n        if (internals.isSafe(charCode)) {\n            escaped += input[i];\n        }\n        else {\n            escaped += internals.escapeHtmlChar(charCode);\n        }\n    }\n\n    return escaped;\n};\n\n\ninternals.escapeHtmlChar = function (charCode) {\n\n    const namedEscape = internals.namedHtml.get(charCode);\n    if (namedEscape) {\n        return namedEscape;\n    }\n\n    if (charCode >= 256) {\n        return '&#' + charCode + ';';\n    }\n\n    const hexValue = charCode.toString(16).padStart(2, '0');\n    return `&#x${hexValue};`;\n};\n\n\ninternals.isSafe = function (charCode) {\n\n    return internals.safeCharCodes.has(charCode);\n};\n\n\ninternals.namedHtml = new Map([\n    [38, '&amp;'],\n    [60, '&lt;'],\n    [62, '&gt;'],\n    [34, '&quot;'],\n    [160, '&nbsp;'],\n    [162, '&cent;'],\n    [163, '&pound;'],\n    [164, '&curren;'],\n    [169, '&copy;'],\n    [174, '&reg;']\n]);\n\n\ninternals.safeCharCodes = (function () {\n\n    const safe = new Set();\n\n    for (let i = 32; i < 123; ++i) {\n\n        if ((i >= 97) ||                    // a-z\n            (i >= 65 && i <= 90) ||         // A-Z\n            (i >= 48 && i <= 57) ||         // 0-9\n            i === 32 ||                     // space\n            i === 46 ||                     // .\n            i === 44 ||                     // ,\n            i === 45 ||                     // -\n            i === 58 ||                     // :\n            i === 95) {                     // _\n\n            safe.add(i);\n        }\n    }\n\n    return safe;\n}());\n", "'use strict';\n\nconst internals = {\n    operators: ['!', '^', '*', '/', '%', '+', '-', '<', '<=', '>', '>=', '==', '!=', '&&', '||', '??'],\n    operatorCharacters: ['!', '^', '*', '/', '%', '+', '-', '<', '=', '>', '&', '|', '?'],\n    operatorsOrder: [['^'], ['*', '/', '%'], ['+', '-'], ['<', '<=', '>', '>='], ['==', '!='], ['&&'], ['||', '??']],\n    operatorsPrefix: ['!', 'n'],\n\n    literals: {\n        '\"': '\"',\n        '`': '`',\n        '\\'': '\\'',\n        '[': ']'\n    },\n\n    numberRx: /^(?:[0-9]*(\\.[0-9]*)?){1}$/,\n    tokenRx: /^[\\w\\$\\#\\.\\@\\:\\{\\}]+$/,\n\n    symbol: Symbol('formula'),\n    settings: Symbol('settings')\n};\n\n\nexports.Parser = class {\n\n    constructor(string, options = {}) {\n\n        if (!options[internals.settings] &&\n            options.constants) {\n\n            for (const constant in options.constants) {\n                const value = options.constants[constant];\n                if (value !== null &&\n                    !['boolean', 'number', 'string'].includes(typeof value)) {\n\n                    throw new Error(`Formula constant ${constant} contains invalid ${typeof value} value type`);\n                }\n            }\n        }\n\n        this.settings = options[internals.settings] ? options : Object.assign({ [internals.settings]: true, constants: {}, functions: {} }, options);\n        this.single = null;\n\n        this._parts = null;\n        this._parse(string);\n    }\n\n    _parse(string) {\n\n        let parts = [];\n        let current = '';\n        let parenthesis = 0;\n        let literal = false;\n\n        const flush = (inner) => {\n\n            if (parenthesis) {\n                throw new Error('Formula missing closing parenthesis');\n            }\n\n            const last = parts.length ? parts[parts.length - 1] : null;\n\n            if (!literal &&\n                !current &&\n                !inner) {\n\n                return;\n            }\n\n            if (last &&\n                last.type === 'reference' &&\n                inner === ')') {                                                                // Function\n\n                last.type = 'function';\n                last.value = this._subFormula(current, last.value);\n                current = '';\n                return;\n            }\n\n            if (inner === ')') {                                                                // Segment\n                const sub = new exports.Parser(current, this.settings);\n                parts.push({ type: 'segment', value: sub });\n            }\n            else if (literal) {\n                if (literal === ']') {                                                          // Reference\n                    parts.push({ type: 'reference', value: current });\n                    current = '';\n                    return;\n                }\n\n                parts.push({ type: 'literal', value: current });                                // Literal\n            }\n            else if (internals.operatorCharacters.includes(current)) {                          // Operator\n                if (last &&\n                    last.type === 'operator' &&\n                    internals.operators.includes(last.value + current)) {                       // 2 characters operator\n\n                    last.value += current;\n                }\n                else {\n                    parts.push({ type: 'operator', value: current });\n                }\n            }\n            else if (current.match(internals.numberRx)) {                                       // Number\n                parts.push({ type: 'constant', value: parseFloat(current) });\n            }\n            else if (this.settings.constants[current] !== undefined) {                          // Constant\n                parts.push({ type: 'constant', value: this.settings.constants[current] });\n            }\n            else {                                                                              // Reference\n                if (!current.match(internals.tokenRx)) {\n                    throw new Error(`Formula contains invalid token: ${current}`);\n                }\n\n                parts.push({ type: 'reference', value: current });\n            }\n\n            current = '';\n        };\n\n        for (const c of string) {\n            if (literal) {\n                if (c === literal) {\n                    flush();\n                    literal = false;\n                }\n                else {\n                    current += c;\n                }\n            }\n            else if (parenthesis) {\n                if (c === '(') {\n                    current += c;\n                    ++parenthesis;\n                }\n                else if (c === ')') {\n                    --parenthesis;\n                    if (!parenthesis) {\n                        flush(c);\n                    }\n                    else {\n                        current += c;\n                    }\n                }\n                else {\n                    current += c;\n                }\n            }\n            else if (c in internals.literals) {\n                literal = internals.literals[c];\n            }\n            else if (c === '(') {\n                flush();\n                ++parenthesis;\n            }\n            else if (internals.operatorCharacters.includes(c)) {\n                flush();\n                current = c;\n                flush();\n            }\n            else if (c !== ' ') {\n                current += c;\n            }\n            else {\n                flush();\n            }\n        }\n\n        flush();\n\n        // Replace prefix - to internal negative operator\n\n        parts = parts.map((part, i) => {\n\n            if (part.type !== 'operator' ||\n                part.value !== '-' ||\n                i && parts[i - 1].type !== 'operator') {\n\n                return part;\n            }\n\n            return { type: 'operator', value: 'n' };\n        });\n\n        // Validate tokens order\n\n        let operator = false;\n        for (const part of parts) {\n            if (part.type === 'operator') {\n                if (internals.operatorsPrefix.includes(part.value)) {\n                    continue;\n                }\n\n                if (!operator) {\n                    throw new Error('Formula contains an operator in invalid position');\n                }\n\n                if (!internals.operators.includes(part.value)) {\n                    throw new Error(`Formula contains an unknown operator ${part.value}`);\n                }\n            }\n            else if (operator) {\n                throw new Error('Formula missing expected operator');\n            }\n\n            operator = !operator;\n        }\n\n        if (!operator) {\n            throw new Error('Formula contains invalid trailing operator');\n        }\n\n        // Identify single part\n\n        if (parts.length === 1 &&\n            ['reference', 'literal', 'constant'].includes(parts[0].type)) {\n\n            this.single = { type: parts[0].type === 'reference' ? 'reference' : 'value', value: parts[0].value };\n        }\n\n        // Process parts\n\n        this._parts = parts.map((part) => {\n\n            // Operators\n\n            if (part.type === 'operator') {\n                return internals.operatorsPrefix.includes(part.value) ? part : part.value;\n            }\n\n            // Literals, constants, segments\n\n            if (part.type !== 'reference') {\n                return part.value;\n            }\n\n            // References\n\n            if (this.settings.tokenRx &&\n                !this.settings.tokenRx.test(part.value)) {\n\n                throw new Error(`Formula contains invalid reference ${part.value}`);\n            }\n\n            if (this.settings.reference) {\n                return this.settings.reference(part.value);\n            }\n\n            return internals.reference(part.value);\n        });\n    }\n\n    _subFormula(string, name) {\n\n        const method = this.settings.functions[name];\n        if (typeof method !== 'function') {\n            throw new Error(`Formula contains unknown function ${name}`);\n        }\n\n        let args = [];\n        if (string) {\n            let current = '';\n            let parenthesis = 0;\n            let literal = false;\n\n            const flush = () => {\n\n                if (!current) {\n                    throw new Error(`Formula contains function ${name} with invalid arguments ${string}`);\n                }\n\n                args.push(current);\n                current = '';\n            };\n\n            for (let i = 0; i < string.length; ++i) {\n                const c = string[i];\n                if (literal) {\n                    current += c;\n                    if (c === literal) {\n                        literal = false;\n                    }\n                }\n                else if (c in internals.literals &&\n                    !parenthesis) {\n\n                    current += c;\n                    literal = internals.literals[c];\n                }\n                else if (c === ',' &&\n                    !parenthesis) {\n\n                    flush();\n                }\n                else {\n                    current += c;\n                    if (c === '(') {\n                        ++parenthesis;\n                    }\n                    else if (c === ')') {\n                        --parenthesis;\n                    }\n                }\n            }\n\n            flush();\n        }\n\n        args = args.map((arg) => new exports.Parser(arg, this.settings));\n\n        return function (context) {\n\n            const innerValues = [];\n            for (const arg of args) {\n                innerValues.push(arg.evaluate(context));\n            }\n\n            return method.call(context, ...innerValues);\n        };\n    }\n\n    evaluate(context) {\n\n        const parts = this._parts.slice();\n\n        // Prefix operators\n\n        for (let i = parts.length - 2; i >= 0; --i) {\n            const part = parts[i];\n            if (part &&\n                part.type === 'operator') {\n\n                const current = parts[i + 1];\n                parts.splice(i + 1, 1);\n                const value = internals.evaluate(current, context);\n                parts[i] = internals.single(part.value, value);\n            }\n        }\n\n        // Left-right operators\n\n        internals.operatorsOrder.forEach((set) => {\n\n            for (let i = 1; i < parts.length - 1;) {\n                if (set.includes(parts[i])) {\n                    const operator = parts[i];\n                    const left = internals.evaluate(parts[i - 1], context);\n                    const right = internals.evaluate(parts[i + 1], context);\n\n                    parts.splice(i, 2);\n                    const result = internals.calculate(operator, left, right);\n                    parts[i - 1] = result === 0 ? 0 : result;                               // Convert -0\n                }\n                else {\n                    i += 2;\n                }\n            }\n        });\n\n        return internals.evaluate(parts[0], context);\n    }\n};\n\n\nexports.Parser.prototype[internals.symbol] = true;\n\n\ninternals.reference = function (name) {\n\n    return function (context) {\n\n        return context && context[name] !== undefined ? context[name] : null;\n    };\n};\n\n\ninternals.evaluate = function (part, context) {\n\n    if (part === null) {\n        return null;\n    }\n\n    if (typeof part === 'function') {\n        return part(context);\n    }\n\n    if (part[internals.symbol]) {\n        return part.evaluate(context);\n    }\n\n    return part;\n};\n\n\ninternals.single = function (operator, value) {\n\n    if (operator === '!') {\n        return value ? false : true;\n    }\n\n    // operator === 'n'\n\n    const negative = -value;\n    if (negative === 0) {       // Override -0\n        return 0;\n    }\n\n    return negative;\n};\n\n\ninternals.calculate = function (operator, left, right) {\n\n    if (operator === '??') {\n        return internals.exists(left) ? left : right;\n    }\n\n    if (typeof left === 'string' ||\n        typeof right === 'string') {\n\n        if (operator === '+') {\n            left = internals.exists(left) ? left : '';\n            right = internals.exists(right) ? right : '';\n            return left + right;\n        }\n    }\n    else {\n        switch (operator) {\n            case '^': return Math.pow(left, right);\n            case '*': return left * right;\n            case '/': return left / right;\n            case '%': return left % right;\n            case '+': return left + right;\n            case '-': return left - right;\n        }\n    }\n\n    switch (operator) {\n        case '<': return left < right;\n        case '<=': return left <= right;\n        case '>': return left > right;\n        case '>=': return left >= right;\n        case '==': return left === right;\n        case '!=': return left !== right;\n        case '&&': return left && right;\n        case '||': return left || right;\n    }\n\n    return null;\n};\n\n\ninternals.exists = function (value) {\n\n    return value !== null && value !== undefined;\n};\n", "'use strict';\n\nconst Clone = require('@hapi/hoek/lib/clone');\n\nconst Common = require('./common');\n\n\nconst internals = {\n    annotations: Symbol('annotations')\n};\n\n\nexports.error = function (stripColorCodes) {\n\n    if (!this._original ||\n        typeof this._original !== 'object') {\n\n        return this.details[0].message;\n    }\n\n    const redFgEscape = stripColorCodes ? '' : '\\u001b[31m';\n    const redBgEscape = stripColorCodes ? '' : '\\u001b[41m';\n    const endColor = stripColorCodes ? '' : '\\u001b[0m';\n\n    const obj = Clone(this._original);\n\n    for (let i = this.details.length - 1; i >= 0; --i) {        // Reverse order to process deepest child first\n        const pos = i + 1;\n        const error = this.details[i];\n        const path = error.path;\n        let node = obj;\n        for (let j = 0; ; ++j) {\n            const seg = path[j];\n\n            if (Common.isSchema(node)) {\n                node = node.clone();                              // joi schemas are not cloned by hoek, we have to take this extra step\n            }\n\n            if (j + 1 < path.length &&\n                typeof node[seg] !== 'string') {\n\n                node = node[seg];\n            }\n            else {\n                const refAnnotations = node[internals.annotations] || { errors: {}, missing: {} };\n                node[internals.annotations] = refAnnotations;\n\n                const cacheKey = seg || error.context.key;\n\n                if (node[seg] !== undefined) {\n                    refAnnotations.errors[cacheKey] = refAnnotations.errors[cacheKey] || [];\n                    refAnnotations.errors[cacheKey].push(pos);\n                }\n                else {\n                    refAnnotations.missing[cacheKey] = pos;\n                }\n\n                break;\n            }\n        }\n    }\n\n    const replacers = {\n        key: /_\\$key\\$_([, \\d]+)_\\$end\\$_\"/g,\n        missing: /\"_\\$miss\\$_([^|]+)\\|(\\d+)_\\$end\\$_\": \"__missing__\"/g,\n        arrayIndex: /\\s*\"_\\$idx\\$_([, \\d]+)_\\$end\\$_\",?\\n(.*)/g,\n        specials: /\"\\[(NaN|Symbol.*|-?Infinity|function.*|\\(.*)]\"/g\n    };\n\n    let message = internals.safeStringify(obj, 2)\n        .replace(replacers.key, ($0, $1) => `\" ${redFgEscape}[${$1}]${endColor}`)\n        .replace(replacers.missing, ($0, $1, $2) => `${redBgEscape}\"${$1}\"${endColor}${redFgEscape} [${$2}]: -- missing --${endColor}`)\n        .replace(replacers.arrayIndex, ($0, $1, $2) => `\\n${$2} ${redFgEscape}[${$1}]${endColor}`)\n        .replace(replacers.specials, ($0, $1) => $1);\n\n    message = `${message}\\n${redFgEscape}`;\n\n    for (let i = 0; i < this.details.length; ++i) {\n        const pos = i + 1;\n        message = `${message}\\n[${pos}] ${this.details[i].message}`;\n    }\n\n    message = message + endColor;\n\n    return message;\n};\n\n\n// Inspired by json-stringify-safe\n\ninternals.safeStringify = function (obj, spaces) {\n\n    return JSON.stringify(obj, internals.serializer(), spaces);\n};\n\n\ninternals.serializer = function () {\n\n    const keys = [];\n    const stack = [];\n\n    const cycleReplacer = (key, value) => {\n\n        if (stack[0] === value) {\n            return '[Circular ~]';\n        }\n\n        return '[Circular ~.' + keys.slice(0, stack.indexOf(value)).join('.') + ']';\n    };\n\n    return function (key, value) {\n\n        if (stack.length > 0) {\n            const thisPos = stack.indexOf(this);\n            if (~thisPos) {\n                stack.length = thisPos + 1;\n                keys.length = thisPos + 1;\n                keys[thisPos] = key;\n            }\n            else {\n                stack.push(this);\n                keys.push(key);\n            }\n\n            if (~stack.indexOf(value)) {\n                value = cycleReplacer.call(this, key, value);\n            }\n        }\n        else {\n            stack.push(value);\n        }\n\n        if (value) {\n            const annotations = value[internals.annotations];\n            if (annotations) {\n                if (Array.isArray(value)) {\n                    const annotated = [];\n\n                    for (let i = 0; i < value.length; ++i) {\n                        if (annotations.errors[i]) {\n                            annotated.push(`_$idx$_${annotations.errors[i].sort().join(', ')}_$end$_`);\n                        }\n\n                        annotated.push(value[i]);\n                    }\n\n                    value = annotated;\n                }\n                else {\n                    for (const errorKey in annotations.errors) {\n                        value[`${errorKey}_$key$_${annotations.errors[errorKey].sort().join(', ')}_$end$_`] = value[errorKey];\n                        value[errorKey] = undefined;\n                    }\n\n                    for (const missingKey in annotations.missing) {\n                        value[`_$miss$_${missingKey}|${annotations.missing[missingKey]}_$end$_`] = '__missing__';\n                    }\n                }\n\n                return value;\n            }\n        }\n\n        if (value === Infinity ||\n            value === -Infinity ||\n            Number.isNaN(value) ||\n            typeof value === 'function' ||\n            typeof value === 'symbol') {\n\n            return '[' + value.toString() + ']';\n        }\n\n        return value;\n    };\n};\n", "'use strict';\n\nconst Annotate = require('./annotate');\nconst Common = require('./common');\nconst Template = require('./template');\n\n\nconst internals = {};\n\n\nexports.Report = class {\n\n    constructor(code, value, local, flags, messages, state, prefs) {\n\n        this.code = code;\n        this.flags = flags;\n        this.messages = messages;\n        this.path = state.path;\n        this.prefs = prefs;\n        this.state = state;\n        this.value = value;\n\n        this.message = null;\n        this.template = null;\n\n        this.local = local || {};\n        this.local.label = exports.label(this.flags, this.state, this.prefs, this.messages);\n\n        if (this.value !== undefined &&\n            !this.local.hasOwnProperty('value')) {\n\n            this.local.value = this.value;\n        }\n\n        if (this.path.length) {\n            const key = this.path[this.path.length - 1];\n            if (typeof key !== 'object') {\n                this.local.key = key;\n            }\n        }\n    }\n\n    _setTemplate(template) {\n\n        this.template = template;\n\n        if (!this.flags.label &&\n            this.path.length === 0) {\n\n            const localized = this._template(this.template, 'root');\n            if (localized) {\n                this.local.label = localized;\n            }\n        }\n    }\n\n    toString() {\n\n        if (this.message) {\n            return this.message;\n        }\n\n        const code = this.code;\n\n        if (!this.prefs.errors.render) {\n            return this.code;\n        }\n\n        const template = this._template(this.template) ||\n            this._template(this.prefs.messages) ||\n            this._template(this.messages);\n\n        if (template === undefined) {\n            return `Error code \"${code}\" is not defined, your custom type is missing the correct messages definition`;\n        }\n\n        // Render and cache result\n\n        this.message = template.render(this.value, this.state, this.prefs, this.local, { errors: this.prefs.errors, messages: [this.prefs.messages, this.messages] });\n        if (!this.prefs.errors.label) {\n            this.message = this.message.replace(/^\"\" /, '').trim();\n        }\n\n        return this.message;\n    }\n\n    _template(messages, code) {\n\n        return exports.template(this.value, messages, code || this.code, this.state, this.prefs);\n    }\n};\n\n\nexports.path = function (path) {\n\n    let label = '';\n    for (const segment of path) {\n        if (typeof segment === 'object') {          // Exclude array single path segment\n            continue;\n        }\n\n        if (typeof segment === 'string') {\n            if (label) {\n                label += '.';\n            }\n\n            label += segment;\n        }\n        else {\n            label += `[${segment}]`;\n        }\n    }\n\n    return label;\n};\n\n\nexports.template = function (value, messages, code, state, prefs) {\n\n    if (!messages) {\n        return;\n    }\n\n    if (Template.isTemplate(messages)) {\n        return code !== 'root' ? messages : null;\n    }\n\n    let lang = prefs.errors.language;\n    if (Common.isResolvable(lang)) {\n        lang = lang.resolve(value, state, prefs);\n    }\n\n    if (lang &&\n        messages[lang]) {\n\n        if (messages[lang][code] !== undefined) {\n            return messages[lang][code];\n        }\n\n        if (messages[lang]['*'] !== undefined) {\n            return messages[lang]['*'];\n        }\n    }\n\n    if (!messages[code]) {\n        return messages['*'];\n    }\n\n    return messages[code];\n};\n\n\nexports.label = function (flags, state, prefs, messages) {\n\n    if (!prefs.errors.label) {\n        return '';\n    }\n\n    if (flags.label) {\n        return flags.label;\n    }\n\n    let path = state.path;\n    if (prefs.errors.label === 'key' &&\n        state.path.length > 1) {\n\n        path = state.path.slice(-1);\n    }\n\n    const normalized = exports.path(path);\n    if (normalized) {\n        return normalized;\n    }\n\n    return exports.template(null, prefs.messages, 'root', state, prefs) ||\n        messages && exports.template(null, messages, 'root', state, prefs) ||\n        'value';\n};\n\n\nexports.process = function (errors, original, prefs) {\n\n    if (!errors) {\n        return null;\n    }\n\n    const { override, message, details } = exports.details(errors);\n    if (override) {\n        return override;\n    }\n\n    if (prefs.errors.stack) {\n        return new exports.ValidationError(message, details, original);\n    }\n\n    const limit = Error.stackTraceLimit;\n    Error.stackTraceLimit = 0;\n    const validationError = new exports.ValidationError(message, details, original);\n    Error.stackTraceLimit = limit;\n    return validationError;\n};\n\n\nexports.details = function (errors, options = {}) {\n\n    let messages = [];\n    const details = [];\n\n    for (const item of errors) {\n\n        // Override\n\n        if (item instanceof Error) {\n            if (options.override !== false) {\n                return { override: item };\n            }\n\n            const message = item.toString();\n            messages.push(message);\n\n            details.push({\n                message,\n                type: 'override',\n                context: { error: item }\n            });\n\n            continue;\n        }\n\n        // Report\n\n        const message = item.toString();\n        messages.push(message);\n\n        details.push({\n            message,\n            path: item.path.filter((v) => typeof v !== 'object'),\n            type: item.code,\n            context: item.local\n        });\n    }\n\n    if (messages.length > 1) {\n        messages = [...new Set(messages)];\n    }\n\n    return { message: messages.join('. '), details };\n};\n\n\nexports.ValidationError = class extends Error {\n\n    constructor(message, details, original) {\n\n        super(message);\n        this._original = original;\n        this.details = details;\n    }\n\n    static isError(err) {\n\n        return err instanceof exports.ValidationError;\n    }\n};\n\n\nexports.ValidationError.prototype.isJoi = true;\n\nexports.ValidationError.prototype.name = 'ValidationError';\n\nexports.ValidationError.prototype.annotate = Annotate.error;\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\nconst Clone = require('@hapi/hoek/lib/clone');\nconst Reach = require('@hapi/hoek/lib/reach');\n\nconst Common = require('./common');\n\nlet Template;\n\n\nconst internals = {\n    symbol: Symbol('ref'),      // Used to internally identify references (shared with other joi versions)\n    defaults: {\n        adjust: null,\n        in: false,\n        iterables: null,\n        map: null,\n        separator: '.',\n        type: 'value'\n    }\n};\n\n\nexports.create = function (key, options = {}) {\n\n    Assert(typeof key === 'string', 'Invalid reference key:', key);\n    Common.assertOptions(options, ['adjust', 'ancestor', 'in', 'iterables', 'map', 'prefix', 'render', 'separator']);\n    Assert(!options.prefix || typeof options.prefix === 'object', 'options.prefix must be of type object');\n\n    const ref = Object.assign({}, internals.defaults, options);\n    delete ref.prefix;\n\n    const separator = ref.separator;\n    const context = internals.context(key, separator, options.prefix);\n    ref.type = context.type;\n    key = context.key;\n\n    if (ref.type === 'value') {\n        if (context.root) {\n            Assert(!separator || key[0] !== separator, 'Cannot specify relative path with root prefix');\n            ref.ancestor = 'root';\n            if (!key) {\n                key = null;\n            }\n        }\n\n        if (separator &&\n            separator === key) {\n\n            key = null;\n            ref.ancestor = 0;\n        }\n        else {\n            if (ref.ancestor !== undefined) {\n                Assert(!separator || !key || key[0] !== separator, 'Cannot combine prefix with ancestor option');\n            }\n            else {\n                const [ancestor, slice] = internals.ancestor(key, separator);\n                if (slice) {\n                    key = key.slice(slice);\n                    if (key === '') {\n                        key = null;\n                    }\n                }\n\n                ref.ancestor = ancestor;\n            }\n        }\n    }\n\n    ref.path = separator ? (key === null ? [] : key.split(separator)) : [key];\n\n    return new internals.Ref(ref);\n};\n\n\nexports.in = function (key, options = {}) {\n\n    return exports.create(key, { ...options, in: true });\n};\n\n\nexports.isRef = function (ref) {\n\n    return ref ? !!ref[Common.symbols.ref] : false;\n};\n\n\ninternals.Ref = class {\n\n    constructor(options) {\n\n        Assert(typeof options === 'object', 'Invalid reference construction');\n        Common.assertOptions(options, [\n            'adjust', 'ancestor', 'in', 'iterables', 'map', 'path', 'render', 'separator', 'type',  // Copied\n            'depth', 'key', 'root', 'display'                                                       // Overridden\n        ]);\n\n        Assert([false, undefined].includes(options.separator) || typeof options.separator === 'string' && options.separator.length === 1, 'Invalid separator');\n        Assert(!options.adjust || typeof options.adjust === 'function', 'options.adjust must be a function');\n        Assert(!options.map || Array.isArray(options.map), 'options.map must be an array');\n        Assert(!options.map || !options.adjust, 'Cannot set both map and adjust options');\n\n        Object.assign(this, internals.defaults, options);\n\n        Assert(this.type === 'value' || this.ancestor === undefined, 'Non-value references cannot reference ancestors');\n\n        if (Array.isArray(this.map)) {\n            this.map = new Map(this.map);\n        }\n\n        this.depth = this.path.length;\n        this.key = this.path.length ? this.path.join(this.separator) : null;\n        this.root = this.path[0];\n\n        this.updateDisplay();\n    }\n\n    resolve(value, state, prefs, local, options = {}) {\n\n        Assert(!this.in || options.in, 'Invalid in() reference usage');\n\n        if (this.type === 'global') {\n            return this._resolve(prefs.context, state, options);\n        }\n\n        if (this.type === 'local') {\n            return this._resolve(local, state, options);\n        }\n\n        if (!this.ancestor) {\n            return this._resolve(value, state, options);\n        }\n\n        if (this.ancestor === 'root') {\n            return this._resolve(state.ancestors[state.ancestors.length - 1], state, options);\n        }\n\n        Assert(this.ancestor <= state.ancestors.length, 'Invalid reference exceeds the schema root:', this.display);\n        return this._resolve(state.ancestors[this.ancestor - 1], state, options);\n    }\n\n    _resolve(target, state, options) {\n\n        let resolved;\n\n        if (this.type === 'value' &&\n            state.mainstay.shadow &&\n            options.shadow !== false) {\n\n            resolved = state.mainstay.shadow.get(this.absolute(state));\n        }\n\n        if (resolved === undefined) {\n            resolved = Reach(target, this.path, { iterables: this.iterables, functions: true });\n        }\n\n        if (this.adjust) {\n            resolved = this.adjust(resolved);\n        }\n\n        if (this.map) {\n            const mapped = this.map.get(resolved);\n            if (mapped !== undefined) {\n                resolved = mapped;\n            }\n        }\n\n        if (state.mainstay) {\n            state.mainstay.tracer.resolve(state, this, resolved);\n        }\n\n        return resolved;\n    }\n\n    toString() {\n\n        return this.display;\n    }\n\n    absolute(state) {\n\n        return [...state.path.slice(0, -this.ancestor), ...this.path];\n    }\n\n    clone() {\n\n        return new internals.Ref(this);\n    }\n\n    describe() {\n\n        const ref = { path: this.path };\n\n        if (this.type !== 'value') {\n            ref.type = this.type;\n        }\n\n        if (this.separator !== '.') {\n            ref.separator = this.separator;\n        }\n\n        if (this.type === 'value' &&\n            this.ancestor !== 1) {\n\n            ref.ancestor = this.ancestor;\n        }\n\n        if (this.map) {\n            ref.map = [...this.map];\n        }\n\n        for (const key of ['adjust', 'iterables', 'render']) {\n            if (this[key] !== null &&\n                this[key] !== undefined) {\n\n                ref[key] = this[key];\n            }\n        }\n\n        if (this.in !== false) {\n            ref.in = true;\n        }\n\n        return { ref };\n    }\n\n    updateDisplay() {\n\n        const key = this.key !== null ? this.key : '';\n        if (this.type !== 'value') {\n            this.display = `ref:${this.type}:${key}`;\n            return;\n        }\n\n        if (!this.separator) {\n            this.display = `ref:${key}`;\n            return;\n        }\n\n        if (!this.ancestor) {\n            this.display = `ref:${this.separator}${key}`;\n            return;\n        }\n\n        if (this.ancestor === 'root') {\n            this.display = `ref:root:${key}`;\n            return;\n        }\n\n        if (this.ancestor === 1) {\n            this.display = `ref:${key || '..'}`;\n            return;\n        }\n\n        const lead = new Array(this.ancestor + 1).fill(this.separator).join('');\n        this.display = `ref:${lead}${key || ''}`;\n    }\n};\n\n\ninternals.Ref.prototype[Common.symbols.ref] = true;\n\n\nexports.build = function (desc) {\n\n    desc = Object.assign({}, internals.defaults, desc);\n    if (desc.type === 'value' &&\n        desc.ancestor === undefined) {\n\n        desc.ancestor = 1;\n    }\n\n    return new internals.Ref(desc);\n};\n\n\ninternals.context = function (key, separator, prefix = {}) {\n\n    key = key.trim();\n\n    if (prefix) {\n        const globalp = prefix.global === undefined ? '$' : prefix.global;\n        if (globalp !== separator &&\n            key.startsWith(globalp)) {\n\n            return { key: key.slice(globalp.length), type: 'global' };\n        }\n\n        const local = prefix.local === undefined ? '#' : prefix.local;\n        if (local !== separator &&\n            key.startsWith(local)) {\n\n            return { key: key.slice(local.length), type: 'local' };\n        }\n\n        const root = prefix.root === undefined ? '/' : prefix.root;\n        if (root !== separator &&\n            key.startsWith(root)) {\n\n            return { key: key.slice(root.length), type: 'value', root: true };\n        }\n    }\n\n    return { key, type: 'value' };\n};\n\n\ninternals.ancestor = function (key, separator) {\n\n    if (!separator) {\n        return [1, 0];              // 'a_b' -> 1 (parent)\n    }\n\n    if (key[0] !== separator) {     // 'a.b' -> 1 (parent)\n        return [1, 0];\n    }\n\n    if (key[1] !== separator) {     // '.a.b' -> 0 (self)\n        return [0, 1];\n    }\n\n    let i = 2;\n    while (key[i] === separator) {\n        ++i;\n    }\n\n    return [i - 1, i];              // '...a.b.' -> 2 (grandparent)\n};\n\n\nexports.toSibling = 0;\n\nexports.toParent = 1;\n\n\nexports.Manager = class {\n\n    constructor() {\n\n        this.refs = [];                     // 0: [self refs], 1: [parent refs], 2: [grandparent refs], ...\n    }\n\n    register(source, target) {\n\n        if (!source) {\n            return;\n        }\n\n        target = target === undefined ? exports.toParent : target;\n\n        // Array\n\n        if (Array.isArray(source)) {\n            for (const ref of source) {\n                this.register(ref, target);\n            }\n\n            return;\n        }\n\n        // Schema\n\n        if (Common.isSchema(source)) {\n            for (const item of source._refs.refs) {\n                if (item.ancestor - target >= 0) {\n                    this.refs.push({ ancestor: item.ancestor - target, root: item.root });\n                }\n            }\n\n            return;\n        }\n\n        // Reference\n\n        if (exports.isRef(source) &&\n            source.type === 'value' &&\n            source.ancestor - target >= 0) {\n\n            this.refs.push({ ancestor: source.ancestor - target, root: source.root });\n        }\n\n        // Template\n\n        Template = Template || require('./template');\n\n        if (Template.isTemplate(source)) {\n            this.register(source.refs(), target);\n        }\n    }\n\n    get length() {\n\n        return this.refs.length;\n    }\n\n    clone() {\n\n        const copy = new exports.Manager();\n        copy.refs = Clone(this.refs);\n        return copy;\n    }\n\n    reset() {\n\n        this.refs = [];\n    }\n\n    roots() {\n\n        return this.refs.filter((ref) => !ref.ancestor).map((ref) => ref.root);\n    }\n};\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\nconst Clone = require('@hapi/hoek/lib/clone');\nconst EscapeHtml = require('@hapi/hoek/lib/escapeHtml');\nconst Formula = require('@sideway/formula');\n\nconst Common = require('./common');\nconst Errors = require('./errors');\nconst Ref = require('./ref');\n\n\nconst internals = {\n    symbol: Symbol('template'),\n\n    opens: new Array(1000).join('\\u0000'),\n    closes: new Array(1000).join('\\u0001'),\n\n    dateFormat: {\n        date: Date.prototype.toDateString,\n        iso: Date.prototype.toISOString,\n        string: Date.prototype.toString,\n        time: Date.prototype.toTimeString,\n        utc: Date.prototype.toUTCString\n    }\n};\n\n\nmodule.exports = exports = internals.Template = class {\n\n    constructor(source, options) {\n\n        Assert(typeof source === 'string', 'Template source must be a string');\n        Assert(!source.includes('\\u0000') && !source.includes('\\u0001'), 'Template source cannot contain reserved control characters');\n\n        this.source = source;\n        this.rendered = source;\n\n        this._template = null;\n\n        if (options) {\n            const { functions, ...opts } = options;\n            this._settings = Object.keys(opts).length ? Clone(opts) : undefined;\n            this._functions = functions;\n            if (this._functions) {\n                Assert(Object.keys(this._functions).every((key) => typeof key === 'string'), 'Functions keys must be strings');\n                Assert(Object.values(this._functions).every((key) => typeof key === 'function'), 'Functions values must be functions');\n            }\n        }\n        else {\n            this._settings = undefined;\n            this._functions = undefined;\n        }\n\n        this._parse();\n    }\n\n    _parse() {\n\n        // 'text {raw} {{ref}} \\\\{{ignore}} {{ignore\\\\}} {{ignore {{ignore}'\n\n        if (!this.source.includes('{')) {\n            return;\n        }\n\n        // Encode escaped \\\\{{{{{\n\n        const encoded = internals.encode(this.source);\n\n        // Split on first { in each set\n\n        const parts = internals.split(encoded);\n\n        // Process parts\n\n        let refs = false;\n        const processed = [];\n        const head = parts.shift();\n        if (head) {\n            processed.push(head);\n        }\n\n        for (const part of parts) {\n            const raw = part[0] !== '{';\n            const ender = raw ? '}' : '}}';\n            const end = part.indexOf(ender);\n            if (end === -1 ||                               // Ignore non-matching closing\n                part[1] === '{') {                          // Ignore more than two {\n\n                processed.push(`{${internals.decode(part)}`);\n                continue;\n            }\n\n            let variable = part.slice(raw ? 0 : 1, end);\n            const wrapped = variable[0] === ':';\n            if (wrapped) {\n                variable = variable.slice(1);\n            }\n\n            const dynamic = this._ref(internals.decode(variable), { raw, wrapped });\n            processed.push(dynamic);\n            if (typeof dynamic !== 'string') {\n                refs = true;\n            }\n\n            const rest = part.slice(end + ender.length);\n            if (rest) {\n                processed.push(internals.decode(rest));\n            }\n        }\n\n        if (!refs) {\n            this.rendered = processed.join('');\n            return;\n        }\n\n        this._template = processed;\n    }\n\n    static date(date, prefs) {\n\n        return internals.dateFormat[prefs.dateFormat].call(date);\n    }\n\n    describe(options = {}) {\n\n        if (!this._settings &&\n            options.compact) {\n\n            return this.source;\n        }\n\n        const desc = { template: this.source };\n        if (this._settings) {\n            desc.options = this._settings;\n        }\n\n        if (this._functions) {\n            desc.functions = this._functions;\n        }\n\n        return desc;\n    }\n\n    static build(desc) {\n\n        return new internals.Template(desc.template, desc.options || desc.functions ? { ...desc.options, functions: desc.functions } : undefined);\n    }\n\n    isDynamic() {\n\n        return !!this._template;\n    }\n\n    static isTemplate(template) {\n\n        return template ? !!template[Common.symbols.template] : false;\n    }\n\n    refs() {\n\n        if (!this._template) {\n            return;\n        }\n\n        const refs = [];\n        for (const part of this._template) {\n            if (typeof part !== 'string') {\n                refs.push(...part.refs);\n            }\n        }\n\n        return refs;\n    }\n\n    resolve(value, state, prefs, local) {\n\n        if (this._template &&\n            this._template.length === 1) {\n\n            return this._part(this._template[0], /* context -> [*/ value, state, prefs, local, {} /*] */);\n        }\n\n        return this.render(value, state, prefs, local);\n    }\n\n    _part(part, ...args) {\n\n        if (part.ref) {\n            return part.ref.resolve(...args);\n        }\n\n        return part.formula.evaluate(args);\n    }\n\n    render(value, state, prefs, local, options = {}) {\n\n        if (!this.isDynamic()) {\n            return this.rendered;\n        }\n\n        const parts = [];\n        for (const part of this._template) {\n            if (typeof part === 'string') {\n                parts.push(part);\n            }\n            else {\n                const rendered = this._part(part, /* context -> [*/ value, state, prefs, local, options /*] */);\n                const string = internals.stringify(rendered, value, state, prefs, local, options);\n                if (string !== undefined) {\n                    const result = part.raw || (options.errors && options.errors.escapeHtml) === false ? string : EscapeHtml(string);\n                    parts.push(internals.wrap(result, part.wrapped && prefs.errors.wrap.label));\n                }\n            }\n        }\n\n        return parts.join('');\n    }\n\n    _ref(content, { raw, wrapped }) {\n\n        const refs = [];\n        const reference = (variable) => {\n\n            const ref = Ref.create(variable, this._settings);\n            refs.push(ref);\n            return (context) => {\n\n                const resolved = ref.resolve(...context);\n                return resolved !== undefined ? resolved : null;\n            };\n        };\n\n        try {\n            const functions = this._functions ? { ...internals.functions, ...this._functions } : internals.functions;\n            var formula = new Formula.Parser(content, { reference, functions, constants: internals.constants });\n        }\n        catch (err) {\n            err.message = `Invalid template variable \"${content}\" fails due to: ${err.message}`;\n            throw err;\n        }\n\n        if (formula.single) {\n            if (formula.single.type === 'reference') {\n                const ref = refs[0];\n                return { ref, raw, refs, wrapped: wrapped || ref.type === 'local' && ref.key === 'label' };\n            }\n\n            return internals.stringify(formula.single.value);\n        }\n\n        return { formula, raw, refs };\n    }\n\n    toString() {\n\n        return this.source;\n    }\n};\n\n\ninternals.Template.prototype[Common.symbols.template] = true;\ninternals.Template.prototype.isImmutable = true;                // Prevents Hoek from deep cloning schema objects\n\n\ninternals.encode = function (string) {\n\n    return string\n        .replace(/\\\\(\\{+)/g, ($0, $1) => {\n\n            return internals.opens.slice(0, $1.length);\n        })\n        .replace(/\\\\(\\}+)/g, ($0, $1) => {\n\n            return internals.closes.slice(0, $1.length);\n        });\n};\n\n\ninternals.decode = function (string) {\n\n    return string\n        .replace(/\\u0000/g, '{')\n        .replace(/\\u0001/g, '}');\n};\n\n\ninternals.split = function (string) {\n\n    const parts = [];\n    let current = '';\n\n    for (let i = 0; i < string.length; ++i) {\n        const char = string[i];\n\n        if (char === '{') {\n            let next = '';\n            while (i + 1 < string.length &&\n                string[i + 1] === '{') {\n\n                next += '{';\n                ++i;\n            }\n\n            parts.push(current);\n            current = next;\n        }\n        else {\n            current += char;\n        }\n    }\n\n    parts.push(current);\n    return parts;\n};\n\n\ninternals.wrap = function (value, ends) {\n\n    if (!ends) {\n        return value;\n    }\n\n    if (ends.length === 1) {\n        return `${ends}${value}${ends}`;\n    }\n\n    return `${ends[0]}${value}${ends[1]}`;\n};\n\n\ninternals.stringify = function (value, original, state, prefs, local, options = {}) {\n\n    const type = typeof value;\n    const wrap = prefs && prefs.errors && prefs.errors.wrap || {};\n\n    let skipWrap = false;\n    if (Ref.isRef(value) &&\n        value.render) {\n\n        skipWrap = value.in;\n        value = value.resolve(original, state, prefs, local, { in: value.in, ...options });\n    }\n\n    if (value === null) {\n        return 'null';\n    }\n\n    if (type === 'string') {\n        return internals.wrap(value, options.arrayItems && wrap.string);\n    }\n\n    if (type === 'number' ||\n        type === 'function' ||\n        type === 'symbol') {\n\n        return value.toString();\n    }\n\n    if (type !== 'object') {\n        return JSON.stringify(value);\n    }\n\n    if (value instanceof Date) {\n        return internals.Template.date(value, prefs);\n    }\n\n    if (value instanceof Map) {\n        const pairs = [];\n        for (const [key, sym] of value.entries()) {\n            pairs.push(`${key.toString()} -> ${sym.toString()}`);\n        }\n\n        value = pairs;\n    }\n\n    if (!Array.isArray(value)) {\n        return value.toString();\n    }\n\n    const values = [];\n    for (const item of value) {\n        values.push(internals.stringify(item, original, state, prefs, local, { arrayItems: true, ...options }));\n    }\n\n    return internals.wrap(values.join(', '), !skipWrap && wrap.array);\n};\n\n\ninternals.constants = {\n\n    true: true,\n    false: false,\n    null: null,\n\n    second: 1000,\n    minute: 60 * 1000,\n    hour: 60 * 60 * 1000,\n    day: 24 * 60 * 60 * 1000\n};\n\n\ninternals.functions = {\n\n    if(condition, then, otherwise) {\n\n        return condition ? then : otherwise;\n    },\n\n    length(item) {\n\n        if (typeof item === 'string') {\n            return item.length;\n        }\n\n        if (!item || typeof item !== 'object') {\n            return null;\n        }\n\n        if (Array.isArray(item)) {\n            return item.length;\n        }\n\n        return Object.keys(item).length;\n    },\n\n    msg(code) {\n\n        const [value, state, prefs, local, options] = this;\n        const messages = options.messages;\n        if (!messages) {\n            return '';\n        }\n\n        const template = Errors.template(value, messages[0], code, state, prefs) || Errors.template(value, messages[1], code, state, prefs);\n        if (!template) {\n            return '';\n        }\n\n        return template.render(value, state, prefs, local, options);\n    },\n\n    number(value) {\n\n        if (typeof value === 'number') {\n            return value;\n        }\n\n        if (typeof value === 'string') {\n            return parseFloat(value);\n        }\n\n        if (typeof value === 'boolean') {\n            return value ? 1 : 0;\n        }\n\n        if (value instanceof Date) {\n            return value.getTime();\n        }\n\n        return null;\n    }\n};\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\nconst Clone = require('@hapi/hoek/lib/clone');\n\nconst Template = require('./template');\n\n\nconst internals = {};\n\n\nexports.compile = function (messages, target) {\n\n    // Single value string ('plain error message', 'template {error} message')\n\n    if (typeof messages === 'string') {\n        Assert(!target, 'Cannot set single message string');\n        return new Template(messages);\n    }\n\n    // Single value template\n\n    if (Template.isTemplate(messages)) {\n        Assert(!target, 'Cannot set single message template');\n        return messages;\n    }\n\n    // By error code { 'number.min': <string | template> }\n\n    Assert(typeof messages === 'object' && !Array.isArray(messages), 'Invalid message options');\n\n    target = target ? Clone(target) : {};\n\n    for (let code in messages) {\n        const message = messages[code];\n\n        if (code === 'root' ||\n            Template.isTemplate(message)) {\n\n            target[code] = message;\n            continue;\n        }\n\n        if (typeof message === 'string') {\n            target[code] = new Template(message);\n            continue;\n        }\n\n        // By language { english: { 'number.min': <string | template> } }\n\n        Assert(typeof message === 'object' && !Array.isArray(message), 'Invalid message for', code);\n\n        const language = code;\n        target[language] = target[language] || {};\n\n        for (code in message) {\n            const localized = message[code];\n\n            if (code === 'root' ||\n                Template.isTemplate(localized)) {\n\n                target[language][code] = localized;\n                continue;\n            }\n\n            Assert(typeof localized === 'string', 'Invalid message for', code, 'in', language);\n            target[language][code] = new Template(localized);\n        }\n    }\n\n    return target;\n};\n\n\nexports.decompile = function (messages) {\n\n    // By error code { 'number.min': <string | template> }\n\n    const target = {};\n    for (let code in messages) {\n        const message = messages[code];\n\n        if (code === 'root') {\n            target.root = message;\n            continue;\n        }\n\n        if (Template.isTemplate(message)) {\n            target[code] = message.describe({ compact: true });\n            continue;\n        }\n\n        // By language { english: { 'number.min': <string | template> } }\n\n        const language = code;\n        target[language] = {};\n\n        for (code in message) {\n            const localized = message[code];\n\n            if (code === 'root') {\n                target[language].root = localized;\n                continue;\n            }\n\n            target[language][code] = localized.describe({ compact: true });\n        }\n    }\n\n    return target;\n};\n\n\nexports.merge = function (base, extended) {\n\n    if (!base) {\n        return exports.compile(extended);\n    }\n\n    if (!extended) {\n        return base;\n    }\n\n    // Single value string\n\n    if (typeof extended === 'string') {\n        return new Template(extended);\n    }\n\n    // Single value template\n\n    if (Template.isTemplate(extended)) {\n        return extended;\n    }\n\n    // By error code { 'number.min': <string | template> }\n\n    const target = Clone(base);\n\n    for (let code in extended) {\n        const message = extended[code];\n\n        if (code === 'root' ||\n            Template.isTemplate(message)) {\n\n            target[code] = message;\n            continue;\n        }\n\n        if (typeof message === 'string') {\n            target[code] = new Template(message);\n            continue;\n        }\n\n        // By language { english: { 'number.min': <string | template> } }\n\n        Assert(typeof message === 'object' && !Array.isArray(message), 'Invalid message for', code);\n\n        const language = code;\n        target[language] = target[language] || {};\n\n        for (code in message) {\n            const localized = message[code];\n\n            if (code === 'root' ||\n                Template.isTemplate(localized)) {\n\n                target[language][code] = localized;\n                continue;\n            }\n\n            Assert(typeof localized === 'string', 'Invalid message for', code, 'in', language);\n            target[language][code] = new Template(localized);\n        }\n    }\n\n    return target;\n};\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\nconst AssertError = require('@hapi/hoek/lib/error');\n\nconst Pkg = require('../package.json');\n\nlet Messages;\nlet Schemas;\n\n\nconst internals = {\n    isoDate: /^(?:[-+]\\d{2})?(?:\\d{4}(?!\\d{2}\\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\\1(?:[12]\\d|0[1-9]|3[01]))?|W(?:[0-4]\\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\\d|[12]\\d{2}|3(?:[0-5]\\d|6[1-6])))(?![T]$|[T][\\d]+Z$)(?:[T\\s](?:(?:(?:[01]\\d|2[0-3])(?:(:?)[0-5]\\d)?|24\\:?00)(?:[.,]\\d+(?!:))?)(?:\\2[0-5]\\d(?:[.,]\\d+)?)?(?:[Z]|(?:[+-])(?:[01]\\d|2[0-3])(?::?[0-5]\\d)?)?)?)?$/\n};\n\n\nexports.version = Pkg.version;\n\n\nexports.defaults = {\n    abortEarly: true,\n    allowUnknown: false,\n    artifacts: false,\n    cache: true,\n    context: null,\n    convert: true,\n    dateFormat: 'iso',\n    errors: {\n        escapeHtml: false,\n        label: 'path',\n        language: null,\n        render: true,\n        stack: false,\n        wrap: {\n            label: '\"',\n            array: '[]'\n        }\n    },\n    externals: true,\n    messages: {},\n    nonEnumerables: false,\n    noDefaults: false,\n    presence: 'optional',\n    skipFunctions: false,\n    stripUnknown: false,\n    warnings: false\n};\n\n\nexports.symbols = {\n    any: Symbol.for('@hapi/joi/schema'),            // Used to internally identify any-based types (shared with other joi versions)\n    arraySingle: Symbol('arraySingle'),\n    deepDefault: Symbol('deepDefault'),\n    errors: Symbol('errors'),\n    literal: Symbol('literal'),\n    override: Symbol('override'),\n    parent: Symbol('parent'),\n    prefs: Symbol('prefs'),\n    ref: Symbol('ref'),\n    template: Symbol('template'),\n    values: Symbol('values')\n};\n\n\nexports.assertOptions = function (options, keys, name = 'Options') {\n\n    Assert(options && typeof options === 'object' && !Array.isArray(options), 'Options must be of type object');\n    const unknownKeys = Object.keys(options).filter((k) => !keys.includes(k));\n    Assert(unknownKeys.length === 0, `${name} contain unknown keys: ${unknownKeys}`);\n};\n\n\nexports.checkPreferences = function (prefs) {\n\n    Schemas = Schemas || require('./schemas');\n\n    const result = Schemas.preferences.validate(prefs);\n\n    if (result.error) {\n        throw new AssertError([result.error.details[0].message]);\n    }\n};\n\n\nexports.compare = function (a, b, operator) {\n\n    switch (operator) {\n        case '=': return a === b;\n        case '>': return a > b;\n        case '<': return a < b;\n        case '>=': return a >= b;\n        case '<=': return a <= b;\n    }\n};\n\n\nexports.default = function (value, defaultValue) {\n\n    return value === undefined ? defaultValue : value;\n};\n\n\nexports.isIsoDate = function (date) {\n\n    return internals.isoDate.test(date);\n};\n\n\nexports.isNumber = function (value) {\n\n    return typeof value === 'number' && !isNaN(value);\n};\n\n\nexports.isResolvable = function (obj) {\n\n    if (!obj) {\n        return false;\n    }\n\n    return obj[exports.symbols.ref] || obj[exports.symbols.template];\n};\n\n\nexports.isSchema = function (schema, options = {}) {\n\n    const any = schema && schema[exports.symbols.any];\n    if (!any) {\n        return false;\n    }\n\n    Assert(options.legacy || any.version === exports.version, 'Cannot mix different versions of joi schemas');\n    return true;\n};\n\n\nexports.isValues = function (obj) {\n\n    return obj[exports.symbols.values];\n};\n\n\nexports.limit = function (value) {\n\n    return Number.isSafeInteger(value) && value >= 0;\n};\n\n\nexports.preferences = function (target, source) {\n\n    Messages = Messages || require('./messages');\n\n    target = target || {};\n    source = source || {};\n\n    const merged = Object.assign({}, target, source);\n    if (source.errors &&\n        target.errors) {\n\n        merged.errors = Object.assign({}, target.errors, source.errors);\n        merged.errors.wrap = Object.assign({}, target.errors.wrap, source.errors.wrap);\n    }\n\n    if (source.messages) {\n        merged.messages = Messages.compile(source.messages, target.messages);\n    }\n\n    delete merged[exports.symbols.prefs];\n    return merged;\n};\n\n\nexports.tryWithPath = function (fn, key, options = {}) {\n\n    try {\n        return fn();\n    }\n    catch (err) {\n        if (err.path !== undefined) {\n            err.path = key + '.' + err.path;\n        }\n        else {\n            err.path = key;\n        }\n\n        if (options.append) {\n            err.message = `${err.message} (${err.path})`;\n        }\n\n        throw err;\n    }\n};\n\n\nexports.validateArg = function (value, label, { assert, message }) {\n\n    if (exports.isSchema(assert)) {\n        const result = assert.validate(value);\n        if (!result.error) {\n            return;\n        }\n\n        return result.error.message;\n    }\n    else if (!assert(value)) {\n        return label ? `${label} ${message}` : message;\n    }\n};\n\n\nexports.verifyFlat = function (args, method) {\n\n    for (const arg of args) {\n        Assert(!Array.isArray(arg), 'Method no longer accepts array arguments:', method);\n    }\n};\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\nconst Clone = require('@hapi/hoek/lib/clone');\n\nconst Common = require('./common');\n\n\nconst internals = {\n    max: 1000,\n    supported: new Set(['undefined', 'boolean', 'number', 'string'])\n};\n\n\nexports.provider = {\n\n    provision(options) {\n\n        return new internals.Cache(options);\n    }\n};\n\n\n// Least Recently Used (LRU) Cache\n\ninternals.Cache = class {\n\n    constructor(options = {}) {\n\n        Common.assertOptions(options, ['max']);\n        Assert(options.max === undefined || options.max && options.max > 0 && isFinite(options.max), 'Invalid max cache size');\n\n        this._max = options.max || internals.max;\n\n        this._map = new Map();                          // Map of nodes by key\n        this._list = new internals.List();              // List of nodes (most recently used in head)\n    }\n\n    get length() {\n\n        return this._map.size;\n    }\n\n    set(key, value) {\n\n        if (key !== null &&\n            !internals.supported.has(typeof key)) {\n\n            return;\n        }\n\n        let node = this._map.get(key);\n        if (node) {\n            node.value = value;\n            this._list.first(node);\n            return;\n        }\n\n        node = this._list.unshift({ key, value });\n        this._map.set(key, node);\n        this._compact();\n    }\n\n    get(key) {\n\n        const node = this._map.get(key);\n        if (node) {\n            this._list.first(node);\n            return Clone(node.value);\n        }\n    }\n\n    _compact() {\n\n        if (this._map.size > this._max) {\n            const node = this._list.pop();\n            this._map.delete(node.key);\n        }\n    }\n};\n\n\ninternals.List = class {\n\n    constructor() {\n\n        this.tail = null;\n        this.head = null;\n    }\n\n    unshift(node) {\n\n        node.next = null;\n        node.prev = this.head;\n\n        if (this.head) {\n            this.head.next = node;\n        }\n\n        this.head = node;\n\n        if (!this.tail) {\n            this.tail = node;\n        }\n\n        return node;\n    }\n\n    first(node) {\n\n        if (node === this.head) {\n            return;\n        }\n\n        this._remove(node);\n        this.unshift(node);\n    }\n\n    pop() {\n\n        return this._remove(this.tail);\n    }\n\n    _remove(node) {\n\n        const { next, prev } = node;\n\n        next.prev = prev;\n\n        if (prev) {\n            prev.next = next;\n        }\n\n        if (node === this.tail) {\n            this.tail = next;\n        }\n\n        node.prev = null;\n        node.next = null;\n\n        return node;\n    }\n};\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\n\nconst Common = require('./common');\nconst Ref = require('./ref');\n\n\nconst internals = {};\n\n\nexports.schema = function (Joi, config, options = {}) {\n\n    Common.assertOptions(options, ['appendPath', 'override']);\n\n    try {\n        return internals.schema(Joi, config, options);\n    }\n    catch (err) {\n        if (options.appendPath &&\n            err.path !== undefined) {\n\n            err.message = `${err.message} (${err.path})`;\n        }\n\n        throw err;\n    }\n};\n\n\ninternals.schema = function (Joi, config, options) {\n\n    Assert(config !== undefined, 'Invalid undefined schema');\n\n    if (Array.isArray(config)) {\n        Assert(config.length, 'Invalid empty array schema');\n\n        if (config.length === 1) {\n            config = config[0];\n        }\n    }\n\n    const valid = (base, ...values) => {\n\n        if (options.override !== false) {\n            return base.valid(Joi.override, ...values);\n        }\n\n        return base.valid(...values);\n    };\n\n    if (internals.simple(config)) {\n        return valid(Joi, config);\n    }\n\n    if (typeof config === 'function') {\n        return Joi.custom(config);\n    }\n\n    Assert(typeof config === 'object', 'Invalid schema content:', typeof config);\n\n    if (Common.isResolvable(config)) {\n        return valid(Joi, config);\n    }\n\n    if (Common.isSchema(config)) {\n        return config;\n    }\n\n    if (Array.isArray(config)) {\n        for (const item of config) {\n            if (!internals.simple(item)) {\n                return Joi.alternatives().try(...config);\n            }\n        }\n\n        return valid(Joi, ...config);\n    }\n\n    if (config instanceof RegExp) {\n        return Joi.string().regex(config);\n    }\n\n    if (config instanceof Date) {\n        return valid(Joi.date(), config);\n    }\n\n    Assert(Object.getPrototypeOf(config) === Object.getPrototypeOf({}), 'Schema can only contain plain objects');\n\n    return Joi.object().keys(config);\n};\n\n\nexports.ref = function (id, options) {\n\n    return Ref.isRef(id) ? id : Ref.create(id, options);\n};\n\n\nexports.compile = function (root, schema, options = {}) {\n\n    Common.assertOptions(options, ['legacy']);\n\n    // Compiled by any supported version\n\n    const any = schema && schema[Common.symbols.any];\n    if (any) {\n        Assert(options.legacy || any.version === Common.version, 'Cannot mix different versions of joi schemas:', any.version, Common.version);\n        return schema;\n    }\n\n    // Uncompiled root\n\n    if (typeof schema !== 'object' ||\n        !options.legacy) {\n\n        return exports.schema(root, schema, { appendPath: true });          // Will error if schema contains other versions\n    }\n\n    // Scan schema for compiled parts\n\n    const compiler = internals.walk(schema);\n    if (!compiler) {\n        return exports.schema(root, schema, { appendPath: true });\n    }\n\n    return compiler.compile(compiler.root, schema);\n};\n\n\ninternals.walk = function (schema) {\n\n    if (typeof schema !== 'object') {\n        return null;\n    }\n\n    if (Array.isArray(schema)) {\n        for (const item of schema) {\n            const compiler = internals.walk(item);\n            if (compiler) {\n                return compiler;\n            }\n        }\n\n        return null;\n    }\n\n    const any = schema[Common.symbols.any];\n    if (any) {\n        return { root: schema[any.root], compile: any.compile };\n    }\n\n    Assert(Object.getPrototypeOf(schema) === Object.getPrototypeOf({}), 'Schema can only contain plain objects');\n\n    for (const key in schema) {\n        const compiler = internals.walk(schema[key]);\n        if (compiler) {\n            return compiler;\n        }\n    }\n\n    return null;\n};\n\n\ninternals.simple = function (value) {\n\n    return value === null || ['boolean', 'string', 'number'].includes(typeof value);\n};\n\n\nexports.when = function (schema, condition, options) {\n\n    if (options === undefined) {\n        Assert(condition && typeof condition === 'object', 'Missing options');\n\n        options = condition;\n        condition = Ref.create('.');\n    }\n\n    if (Array.isArray(options)) {\n        options = { switch: options };\n    }\n\n    Common.assertOptions(options, ['is', 'not', 'then', 'otherwise', 'switch', 'break']);\n\n    // Schema condition\n\n    if (Common.isSchema(condition)) {\n        Assert(options.is === undefined, '\"is\" can not be used with a schema condition');\n        Assert(options.not === undefined, '\"not\" can not be used with a schema condition');\n        Assert(options.switch === undefined, '\"switch\" can not be used with a schema condition');\n\n        return internals.condition(schema, { is: condition, then: options.then, otherwise: options.otherwise, break: options.break });\n    }\n\n    // Single condition\n\n    Assert(Ref.isRef(condition) || typeof condition === 'string', 'Invalid condition:', condition);\n    Assert(options.not === undefined || options.is === undefined, 'Cannot combine \"is\" with \"not\"');\n\n    if (options.switch === undefined) {\n        let rule = options;\n        if (options.not !== undefined) {\n            rule = { is: options.not, then: options.otherwise, otherwise: options.then, break: options.break };\n        }\n\n        let is = rule.is !== undefined ? schema.$_compile(rule.is) : schema.$_root.invalid(null, false, 0, '').required();\n        Assert(rule.then !== undefined || rule.otherwise !== undefined, 'options must have at least one of \"then\", \"otherwise\", or \"switch\"');\n        Assert(rule.break === undefined || rule.then === undefined || rule.otherwise === undefined, 'Cannot specify then, otherwise, and break all together');\n\n        if (options.is !== undefined &&\n            !Ref.isRef(options.is) &&\n            !Common.isSchema(options.is)) {\n\n            is = is.required();                     // Only apply required if this wasn't already a schema or a ref\n        }\n\n        return internals.condition(schema, { ref: exports.ref(condition), is, then: rule.then, otherwise: rule.otherwise, break: rule.break });\n    }\n\n    // Switch statement\n\n    Assert(Array.isArray(options.switch), '\"switch\" must be an array');\n    Assert(options.is === undefined, 'Cannot combine \"switch\" with \"is\"');\n    Assert(options.not === undefined, 'Cannot combine \"switch\" with \"not\"');\n    Assert(options.then === undefined, 'Cannot combine \"switch\" with \"then\"');\n\n    const rule = {\n        ref: exports.ref(condition),\n        switch: [],\n        break: options.break\n    };\n\n    for (let i = 0; i < options.switch.length; ++i) {\n        const test = options.switch[i];\n        const last = i === options.switch.length - 1;\n\n        Common.assertOptions(test, last ? ['is', 'then', 'otherwise'] : ['is', 'then']);\n\n        Assert(test.is !== undefined, 'Switch statement missing \"is\"');\n        Assert(test.then !== undefined, 'Switch statement missing \"then\"');\n\n        const item = {\n            is: schema.$_compile(test.is),\n            then: schema.$_compile(test.then)\n        };\n\n        if (!Ref.isRef(test.is) &&\n            !Common.isSchema(test.is)) {\n\n            item.is = item.is.required();           // Only apply required if this wasn't already a schema or a ref\n        }\n\n        if (last) {\n            Assert(options.otherwise === undefined || test.otherwise === undefined, 'Cannot specify \"otherwise\" inside and outside a \"switch\"');\n            const otherwise = options.otherwise !== undefined ? options.otherwise : test.otherwise;\n            if (otherwise !== undefined) {\n                Assert(rule.break === undefined, 'Cannot specify both otherwise and break');\n                item.otherwise = schema.$_compile(otherwise);\n            }\n        }\n\n        rule.switch.push(item);\n    }\n\n    return rule;\n};\n\n\ninternals.condition = function (schema, condition) {\n\n    for (const key of ['then', 'otherwise']) {\n        if (condition[key] === undefined) {\n            delete condition[key];\n        }\n        else {\n            condition[key] = schema.$_compile(condition[key]);\n        }\n    }\n\n    return condition;\n};\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\nconst Clone = require('@hapi/hoek/lib/clone');\n\nconst Common = require('./common');\nconst Messages = require('./messages');\n\n\nconst internals = {};\n\n\nexports.type = function (from, options) {\n\n    const base = Object.getPrototypeOf(from);\n    const prototype = Clone(base);\n    const schema = from._assign(Object.create(prototype));\n    const def = Object.assign({}, options);                                 // Shallow cloned\n    delete def.base;\n\n    prototype._definition = def;\n\n    const parent = base._definition || {};\n    def.messages = Messages.merge(parent.messages, def.messages);\n    def.properties = Object.assign({}, parent.properties, def.properties);\n\n    // Type\n\n    schema.type = def.type;\n\n    // Flags\n\n    def.flags = Object.assign({}, parent.flags, def.flags);\n\n    // Terms\n\n    const terms = Object.assign({}, parent.terms);\n    if (def.terms) {\n        for (const name in def.terms) {                                     // Only apply own terms\n            const term = def.terms[name];\n            Assert(schema.$_terms[name] === undefined, 'Invalid term override for', def.type, name);\n            schema.$_terms[name] = term.init;\n            terms[name] = term;\n        }\n    }\n\n    def.terms = terms;\n\n    // Constructor arguments\n\n    if (!def.args) {\n        def.args = parent.args;\n    }\n\n    // Prepare\n\n    def.prepare = internals.prepare(def.prepare, parent.prepare);\n\n    // Coerce\n\n    if (def.coerce) {\n        if (typeof def.coerce === 'function') {\n            def.coerce = { method: def.coerce };\n        }\n\n        if (def.coerce.from &&\n            !Array.isArray(def.coerce.from)) {\n\n            def.coerce = { method: def.coerce.method, from: [].concat(def.coerce.from) };\n        }\n    }\n\n    def.coerce = internals.coerce(def.coerce, parent.coerce);\n\n    // Validate\n\n    def.validate = internals.validate(def.validate, parent.validate);\n\n    // Rules\n\n    const rules = Object.assign({}, parent.rules);\n    if (def.rules) {\n        for (const name in def.rules) {\n            const rule = def.rules[name];\n            Assert(typeof rule === 'object', 'Invalid rule definition for', def.type, name);\n\n            let method = rule.method;\n            if (method === undefined) {\n                method = function () {\n\n                    return this.$_addRule(name);\n                };\n            }\n\n            if (method) {\n                Assert(!prototype[name], 'Rule conflict in', def.type, name);\n                prototype[name] = method;\n            }\n\n            Assert(!rules[name], 'Rule conflict in', def.type, name);\n            rules[name] = rule;\n\n            if (rule.alias) {\n                const aliases = [].concat(rule.alias);\n                for (const alias of aliases) {\n                    prototype[alias] = rule.method;\n                }\n            }\n\n            if (rule.args) {\n                rule.argsByName = new Map();\n                rule.args = rule.args.map((arg) => {\n\n                    if (typeof arg === 'string') {\n                        arg = { name: arg };\n                    }\n\n                    Assert(!rule.argsByName.has(arg.name), 'Duplicated argument name', arg.name);\n\n                    if (Common.isSchema(arg.assert)) {\n                        arg.assert = arg.assert.strict().label(arg.name);\n                    }\n\n                    rule.argsByName.set(arg.name, arg);\n                    return arg;\n                });\n            }\n        }\n    }\n\n    def.rules = rules;\n\n    // Modifiers\n\n    const modifiers = Object.assign({}, parent.modifiers);\n    if (def.modifiers) {\n        for (const name in def.modifiers) {\n            Assert(!prototype[name], 'Rule conflict in', def.type, name);\n\n            const modifier = def.modifiers[name];\n            Assert(typeof modifier === 'function', 'Invalid modifier definition for', def.type, name);\n\n            const method = function (arg) {\n\n                return this.rule({ [name]: arg });\n            };\n\n            prototype[name] = method;\n            modifiers[name] = modifier;\n        }\n    }\n\n    def.modifiers = modifiers;\n\n    // Overrides\n\n    if (def.overrides) {\n        prototype._super = base;\n        schema.$_super = {};                                                            // Backwards compatibility\n        for (const override in def.overrides) {\n            Assert(base[override], 'Cannot override missing', override);\n            def.overrides[override][Common.symbols.parent] = base[override];\n            schema.$_super[override] = base[override].bind(schema);                     // Backwards compatibility\n        }\n\n        Object.assign(prototype, def.overrides);\n    }\n\n    // Casts\n\n    def.cast = Object.assign({}, parent.cast, def.cast);\n\n    // Manifest\n\n    const manifest = Object.assign({}, parent.manifest, def.manifest);\n    manifest.build = internals.build(def.manifest && def.manifest.build, parent.manifest && parent.manifest.build);\n    def.manifest = manifest;\n\n    // Rebuild\n\n    def.rebuild = internals.rebuild(def.rebuild, parent.rebuild);\n\n    return schema;\n};\n\n\n// Helpers\n\ninternals.build = function (child, parent) {\n\n    if (!child ||\n        !parent) {\n\n        return child || parent;\n    }\n\n    return function (obj, desc) {\n\n        return parent(child(obj, desc), desc);\n    };\n};\n\n\ninternals.coerce = function (child, parent) {\n\n    if (!child ||\n        !parent) {\n\n        return child || parent;\n    }\n\n    return {\n        from: child.from && parent.from ? [...new Set([...child.from, ...parent.from])] : null,\n        method(value, helpers) {\n\n            let coerced;\n            if (!parent.from ||\n                parent.from.includes(typeof value)) {\n\n                coerced = parent.method(value, helpers);\n                if (coerced) {\n                    if (coerced.errors ||\n                        coerced.value === undefined) {\n\n                        return coerced;\n                    }\n\n                    value = coerced.value;\n                }\n            }\n\n            if (!child.from ||\n                child.from.includes(typeof value)) {\n\n                const own = child.method(value, helpers);\n                if (own) {\n                    return own;\n                }\n            }\n\n            return coerced;\n        }\n    };\n};\n\n\ninternals.prepare = function (child, parent) {\n\n    if (!child ||\n        !parent) {\n\n        return child || parent;\n    }\n\n    return function (value, helpers) {\n\n        const prepared = child(value, helpers);\n        if (prepared) {\n            if (prepared.errors ||\n                prepared.value === undefined) {\n\n                return prepared;\n            }\n\n            value = prepared.value;\n        }\n\n        return parent(value, helpers) || prepared;\n    };\n};\n\n\ninternals.rebuild = function (child, parent) {\n\n    if (!child ||\n        !parent) {\n\n        return child || parent;\n    }\n\n    return function (schema) {\n\n        parent(schema);\n        child(schema);\n    };\n};\n\n\ninternals.validate = function (child, parent) {\n\n    if (!child ||\n        !parent) {\n\n        return child || parent;\n    }\n\n    return function (value, helpers) {\n\n        const result = parent(value, helpers);\n        if (result) {\n            if (result.errors &&\n                (!Array.isArray(result.errors) || result.errors.length)) {\n\n                return result;\n            }\n\n            value = result.value;\n        }\n\n        return child(value, helpers) || result;\n    };\n};\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\nconst Clone = require('@hapi/hoek/lib/clone');\n\nconst Common = require('./common');\nconst Messages = require('./messages');\nconst Ref = require('./ref');\nconst Template = require('./template');\n\nlet Schemas;\n\n\nconst internals = {};\n\n\nexports.describe = function (schema) {\n\n    const def = schema._definition;\n\n    // Type\n\n    const desc = {\n        type: schema.type,\n        flags: {},\n        rules: []\n    };\n\n    // Flags\n\n    for (const flag in schema._flags) {\n        if (flag[0] !== '_') {\n            desc.flags[flag] = internals.describe(schema._flags[flag]);\n        }\n    }\n\n    if (!Object.keys(desc.flags).length) {\n        delete desc.flags;\n    }\n\n    // Preferences\n\n    if (schema._preferences) {\n        desc.preferences = Clone(schema._preferences, { shallow: ['messages'] });\n        delete desc.preferences[Common.symbols.prefs];\n        if (desc.preferences.messages) {\n            desc.preferences.messages = Messages.decompile(desc.preferences.messages);\n        }\n    }\n\n    // Allow / Invalid\n\n    if (schema._valids) {\n        desc.allow = schema._valids.describe();\n    }\n\n    if (schema._invalids) {\n        desc.invalid = schema._invalids.describe();\n    }\n\n    // Rules\n\n    for (const rule of schema._rules) {\n        const ruleDef = def.rules[rule.name];\n        if (ruleDef.manifest === false) {                           // Defaults to true\n            continue;\n        }\n\n        const item = { name: rule.name };\n\n        for (const custom in def.modifiers) {\n            if (rule[custom] !== undefined) {\n                item[custom] = internals.describe(rule[custom]);\n            }\n        }\n\n        if (rule.args) {\n            item.args = {};\n            for (const key in rule.args) {\n                const arg = rule.args[key];\n                if (key === 'options' &&\n                    !Object.keys(arg).length) {\n\n                    continue;\n                }\n\n                item.args[key] = internals.describe(arg, { assign: key });\n            }\n\n            if (!Object.keys(item.args).length) {\n                delete item.args;\n            }\n        }\n\n        desc.rules.push(item);\n    }\n\n    if (!desc.rules.length) {\n        delete desc.rules;\n    }\n\n    // Terms (must be last to verify no name conflicts)\n\n    for (const term in schema.$_terms) {\n        if (term[0] === '_') {\n            continue;\n        }\n\n        Assert(!desc[term], 'Cannot describe schema due to internal name conflict with', term);\n\n        const items = schema.$_terms[term];\n        if (!items) {\n            continue;\n        }\n\n        if (items instanceof Map) {\n            if (items.size) {\n                desc[term] = [...items.entries()];\n            }\n\n            continue;\n        }\n\n        if (Common.isValues(items)) {\n            desc[term] = items.describe();\n            continue;\n        }\n\n        Assert(def.terms[term], 'Term', term, 'missing configuration');\n        const manifest = def.terms[term].manifest;\n        const mapped = typeof manifest === 'object';\n        if (!items.length &&\n            !mapped) {\n\n            continue;\n        }\n\n        const normalized = [];\n        for (const item of items) {\n            normalized.push(internals.describe(item));\n        }\n\n        // Mapped\n\n        if (mapped) {\n            const { from, to } = manifest.mapped;\n            desc[term] = {};\n            for (const item of normalized) {\n                desc[term][item[to]] = item[from];\n            }\n\n            continue;\n        }\n\n        // Single\n\n        if (manifest === 'single') {\n            Assert(normalized.length === 1, 'Term', term, 'contains more than one item');\n            desc[term] = normalized[0];\n            continue;\n        }\n\n        // Array\n\n        desc[term] = normalized;\n    }\n\n    internals.validate(schema.$_root, desc);\n    return desc;\n};\n\n\ninternals.describe = function (item, options = {}) {\n\n    if (Array.isArray(item)) {\n        return item.map(internals.describe);\n    }\n\n    if (item === Common.symbols.deepDefault) {\n        return { special: 'deep' };\n    }\n\n    if (typeof item !== 'object' ||\n        item === null) {\n\n        return item;\n    }\n\n    if (options.assign === 'options') {\n        return Clone(item);\n    }\n\n    if (Buffer && Buffer.isBuffer(item)) {                          // $lab:coverage:ignore$\n        return { buffer: item.toString('binary') };\n    }\n\n    if (item instanceof Date) {\n        return item.toISOString();\n    }\n\n    if (item instanceof Error) {\n        return item;\n    }\n\n    if (item instanceof RegExp) {\n        if (options.assign === 'regex') {\n            return item.toString();\n        }\n\n        return { regex: item.toString() };\n    }\n\n    if (item[Common.symbols.literal]) {\n        return { function: item.literal };\n    }\n\n    if (typeof item.describe === 'function') {\n        if (options.assign === 'ref') {\n            return item.describe().ref;\n        }\n\n        return item.describe();\n    }\n\n    const normalized = {};\n    for (const key in item) {\n        const value = item[key];\n        if (value === undefined) {\n            continue;\n        }\n\n        normalized[key] = internals.describe(value, { assign: key });\n    }\n\n    return normalized;\n};\n\n\nexports.build = function (joi, desc) {\n\n    const builder = new internals.Builder(joi);\n    return builder.parse(desc);\n};\n\n\ninternals.Builder = class {\n\n    constructor(joi) {\n\n        this.joi = joi;\n    }\n\n    parse(desc) {\n\n        internals.validate(this.joi, desc);\n\n        // Type\n\n        let schema = this.joi[desc.type]()._bare();\n        const def = schema._definition;\n\n        // Flags\n\n        if (desc.flags) {\n            for (const flag in desc.flags) {\n                const setter = def.flags[flag] && def.flags[flag].setter || flag;\n                Assert(typeof schema[setter] === 'function', 'Invalid flag', flag, 'for type', desc.type);\n                schema = schema[setter](this.build(desc.flags[flag]));\n            }\n        }\n\n        // Preferences\n\n        if (desc.preferences) {\n            schema = schema.preferences(this.build(desc.preferences));\n        }\n\n        // Allow / Invalid\n\n        if (desc.allow) {\n            schema = schema.allow(...this.build(desc.allow));\n        }\n\n        if (desc.invalid) {\n            schema = schema.invalid(...this.build(desc.invalid));\n        }\n\n        // Rules\n\n        if (desc.rules) {\n            for (const rule of desc.rules) {\n                Assert(typeof schema[rule.name] === 'function', 'Invalid rule', rule.name, 'for type', desc.type);\n\n                const args = [];\n                if (rule.args) {\n                    const built = {};\n                    for (const key in rule.args) {\n                        built[key] = this.build(rule.args[key], { assign: key });\n                    }\n\n                    const keys = Object.keys(built);\n                    const definition = def.rules[rule.name].args;\n                    if (definition) {\n                        Assert(keys.length <= definition.length, 'Invalid number of arguments for', desc.type, rule.name, '(expected up to', definition.length, ', found', keys.length, ')');\n                        for (const { name } of definition) {\n                            args.push(built[name]);\n                        }\n                    }\n                    else {\n                        Assert(keys.length === 1, 'Invalid number of arguments for', desc.type, rule.name, '(expected up to 1, found', keys.length, ')');\n                        args.push(built[keys[0]]);\n                    }\n                }\n\n                // Apply\n\n                schema = schema[rule.name](...args);\n\n                // Ruleset\n\n                const options = {};\n                for (const custom in def.modifiers) {\n                    if (rule[custom] !== undefined) {\n                        options[custom] = this.build(rule[custom]);\n                    }\n                }\n\n                if (Object.keys(options).length) {\n                    schema = schema.rule(options);\n                }\n            }\n        }\n\n        // Terms\n\n        const terms = {};\n        for (const key in desc) {\n            if (['allow', 'flags', 'invalid', 'whens', 'preferences', 'rules', 'type'].includes(key)) {\n                continue;\n            }\n\n            Assert(def.terms[key], 'Term', key, 'missing configuration');\n            const manifest = def.terms[key].manifest;\n\n            if (manifest === 'schema') {\n                terms[key] = desc[key].map((item) => this.parse(item));\n                continue;\n            }\n\n            if (manifest === 'values') {\n                terms[key] = desc[key].map((item) => this.build(item));\n                continue;\n            }\n\n            if (manifest === 'single') {\n                terms[key] = this.build(desc[key]);\n                continue;\n            }\n\n            if (typeof manifest === 'object') {\n                terms[key] = {};\n                for (const name in desc[key]) {\n                    const value = desc[key][name];\n                    terms[key][name] = this.parse(value);\n                }\n\n                continue;\n            }\n\n            terms[key] = this.build(desc[key]);\n        }\n\n        if (desc.whens) {\n            terms.whens = desc.whens.map((when) => this.build(when));\n        }\n\n        schema = def.manifest.build(schema, terms);\n        schema.$_temp.ruleset = false;\n        return schema;\n    }\n\n    build(desc, options = {}) {\n\n        if (desc === null) {\n            return null;\n        }\n\n        if (Array.isArray(desc)) {\n            return desc.map((item) => this.build(item));\n        }\n\n        if (desc instanceof Error) {\n            return desc;\n        }\n\n        if (options.assign === 'options') {\n            return Clone(desc);\n        }\n\n        if (options.assign === 'regex') {\n            return internals.regex(desc);\n        }\n\n        if (options.assign === 'ref') {\n            return Ref.build(desc);\n        }\n\n        if (typeof desc !== 'object') {\n            return desc;\n        }\n\n        if (Object.keys(desc).length === 1) {\n            if (desc.buffer) {\n                Assert(Buffer, 'Buffers are not supported');\n                return Buffer && Buffer.from(desc.buffer, 'binary');                    // $lab:coverage:ignore$\n            }\n\n            if (desc.function) {\n                return { [Common.symbols.literal]: true, literal: desc.function };\n            }\n\n            if (desc.override) {\n                return Common.symbols.override;\n            }\n\n            if (desc.ref) {\n                return Ref.build(desc.ref);\n            }\n\n            if (desc.regex) {\n                return internals.regex(desc.regex);\n            }\n\n            if (desc.special) {\n                Assert(['deep'].includes(desc.special), 'Unknown special value', desc.special);\n                return Common.symbols.deepDefault;\n            }\n\n            if (desc.value) {\n                return Clone(desc.value);\n            }\n        }\n\n        if (desc.type) {\n            return this.parse(desc);\n        }\n\n        if (desc.template) {\n            return Template.build(desc);\n        }\n\n        const normalized = {};\n        for (const key in desc) {\n            normalized[key] = this.build(desc[key], { assign: key });\n        }\n\n        return normalized;\n    }\n};\n\n\ninternals.regex = function (string) {\n\n    const end = string.lastIndexOf('/');\n    const exp = string.slice(1, end);\n    const flags = string.slice(end + 1);\n    return new RegExp(exp, flags);\n};\n\n\ninternals.validate = function (joi, desc) {\n\n    Schemas = Schemas || require('./schemas');\n\n    joi.assert(desc, Schemas.description);\n};\n", "'use strict';\n\nconst Types = require('./types');\n\n\nconst internals = {\n    mismatched: null\n};\n\n\nmodule.exports = function (obj, ref, options) {\n\n    options = Object.assign({ prototype: true }, options);\n\n    return !!internals.isDeepEqual(obj, ref, options, []);\n};\n\n\ninternals.isDeepEqual = function (obj, ref, options, seen) {\n\n    if (obj === ref) {                                                      // Copied from Deep-eql, copyright(c) 2013 Jake Luer, jake@alogicalparadox.com, MIT Licensed, https://github.com/chaijs/deep-eql\n        return obj !== 0 || 1 / obj === 1 / ref;\n    }\n\n    const type = typeof obj;\n\n    if (type !== typeof ref) {\n        return false;\n    }\n\n    if (obj === null ||\n        ref === null) {\n\n        return false;\n    }\n\n    if (type === 'function') {\n        if (!options.deepFunction ||\n            obj.toString() !== ref.toString()) {\n\n            return false;\n        }\n\n        // Continue as object\n    }\n    else if (type !== 'object') {\n        return obj !== obj && ref !== ref;                                  // NaN\n    }\n\n    const instanceType = internals.getSharedType(obj, ref, !!options.prototype);\n    switch (instanceType) {\n        case Types.buffer:\n            return Buffer && Buffer.prototype.equals.call(obj, ref);        // $lab:coverage:ignore$\n        case Types.promise:\n            return obj === ref;\n        case Types.regex:\n            return obj.toString() === ref.toString();\n        case internals.mismatched:\n            return false;\n    }\n\n    for (let i = seen.length - 1; i >= 0; --i) {\n        if (seen[i].isSame(obj, ref)) {\n            return true;                                                    // If previous comparison failed, it would have stopped execution\n        }\n    }\n\n    seen.push(new internals.SeenEntry(obj, ref));\n\n    try {\n        return !!internals.isDeepEqualObj(instanceType, obj, ref, options, seen);\n    }\n    finally {\n        seen.pop();\n    }\n};\n\n\ninternals.getSharedType = function (obj, ref, checkPrototype) {\n\n    if (checkPrototype) {\n        if (Object.getPrototypeOf(obj) !== Object.getPrototypeOf(ref)) {\n            return internals.mismatched;\n        }\n\n        return Types.getInternalProto(obj);\n    }\n\n    const type = Types.getInternalProto(obj);\n    if (type !== Types.getInternalProto(ref)) {\n        return internals.mismatched;\n    }\n\n    return type;\n};\n\n\ninternals.valueOf = function (obj) {\n\n    const objValueOf = obj.valueOf;\n    if (objValueOf === undefined) {\n        return obj;\n    }\n\n    try {\n        return objValueOf.call(obj);\n    }\n    catch (err) {\n        return err;\n    }\n};\n\n\ninternals.hasOwnEnumerableProperty = function (obj, key) {\n\n    return Object.prototype.propertyIsEnumerable.call(obj, key);\n};\n\n\ninternals.isSetSimpleEqual = function (obj, ref) {\n\n    for (const entry of Set.prototype.values.call(obj)) {\n        if (!Set.prototype.has.call(ref, entry)) {\n            return false;\n        }\n    }\n\n    return true;\n};\n\n\ninternals.isDeepEqualObj = function (instanceType, obj, ref, options, seen) {\n\n    const { isDeepEqual, valueOf, hasOwnEnumerableProperty } = internals;\n    const { keys, getOwnPropertySymbols } = Object;\n\n    if (instanceType === Types.array) {\n        if (options.part) {\n\n            // Check if any index match any other index\n\n            for (const objValue of obj) {\n                for (const refValue of ref) {\n                    if (isDeepEqual(objValue, refValue, options, seen)) {\n                        return true;\n                    }\n                }\n            }\n        }\n        else {\n            if (obj.length !== ref.length) {\n                return false;\n            }\n\n            for (let i = 0; i < obj.length; ++i) {\n                if (!isDeepEqual(obj[i], ref[i], options, seen)) {\n                    return false;\n                }\n            }\n\n            return true;\n        }\n    }\n    else if (instanceType === Types.set) {\n        if (obj.size !== ref.size) {\n            return false;\n        }\n\n        if (!internals.isSetSimpleEqual(obj, ref)) {\n\n            // Check for deep equality\n\n            const ref2 = new Set(Set.prototype.values.call(ref));\n            for (const objEntry of Set.prototype.values.call(obj)) {\n                if (ref2.delete(objEntry)) {\n                    continue;\n                }\n\n                let found = false;\n                for (const refEntry of ref2) {\n                    if (isDeepEqual(objEntry, refEntry, options, seen)) {\n                        ref2.delete(refEntry);\n                        found = true;\n                        break;\n                    }\n                }\n\n                if (!found) {\n                    return false;\n                }\n            }\n        }\n    }\n    else if (instanceType === Types.map) {\n        if (obj.size !== ref.size) {\n            return false;\n        }\n\n        for (const [key, value] of Map.prototype.entries.call(obj)) {\n            if (value === undefined && !Map.prototype.has.call(ref, key)) {\n                return false;\n            }\n\n            if (!isDeepEqual(value, Map.prototype.get.call(ref, key), options, seen)) {\n                return false;\n            }\n        }\n    }\n    else if (instanceType === Types.error) {\n\n        // Always check name and message\n\n        if (obj.name !== ref.name ||\n            obj.message !== ref.message) {\n\n            return false;\n        }\n    }\n\n    // Check .valueOf()\n\n    const valueOfObj = valueOf(obj);\n    const valueOfRef = valueOf(ref);\n    if ((obj !== valueOfObj || ref !== valueOfRef) &&\n        !isDeepEqual(valueOfObj, valueOfRef, options, seen)) {\n\n        return false;\n    }\n\n    // Check properties\n\n    const objKeys = keys(obj);\n    if (!options.part &&\n        objKeys.length !== keys(ref).length &&\n        !options.skip) {\n\n        return false;\n    }\n\n    let skipped = 0;\n    for (const key of objKeys) {\n        if (options.skip &&\n            options.skip.includes(key)) {\n\n            if (ref[key] === undefined) {\n                ++skipped;\n            }\n\n            continue;\n        }\n\n        if (!hasOwnEnumerableProperty(ref, key)) {\n            return false;\n        }\n\n        if (!isDeepEqual(obj[key], ref[key], options, seen)) {\n            return false;\n        }\n    }\n\n    if (!options.part &&\n        objKeys.length - skipped !== keys(ref).length) {\n\n        return false;\n    }\n\n    // Check symbols\n\n    if (options.symbols !== false) {                                // Defaults to true\n        const objSymbols = getOwnPropertySymbols(obj);\n        const refSymbols = new Set(getOwnPropertySymbols(ref));\n\n        for (const key of objSymbols) {\n            if (!options.skip ||\n                !options.skip.includes(key)) {\n\n                if (hasOwnEnumerableProperty(obj, key)) {\n                    if (!hasOwnEnumerableProperty(ref, key)) {\n                        return false;\n                    }\n\n                    if (!isDeepEqual(obj[key], ref[key], options, seen)) {\n                        return false;\n                    }\n                }\n                else if (hasOwnEnumerableProperty(ref, key)) {\n                    return false;\n                }\n            }\n\n            refSymbols.delete(key);\n        }\n\n        for (const key of refSymbols) {\n            if (hasOwnEnumerableProperty(ref, key)) {\n                return false;\n            }\n        }\n    }\n\n    return true;\n};\n\n\ninternals.SeenEntry = class {\n\n    constructor(obj, ref) {\n\n        this.obj = obj;\n        this.ref = ref;\n    }\n\n    isSame(obj, ref) {\n\n        return this.obj === obj && this.ref === ref;\n    }\n};\n", "'use strict';\n\nconst internals = {};\n\n\nexports.location = function (depth = 0) {\n\n    const orig = Error.prepareStackTrace;\n    Error.prepareStackTrace = (ignore, stack) => stack;\n\n    const capture = {};\n    Error.captureStackTrace(capture, this);\n    const line = capture.stack[depth + 1];\n\n    Error.prepareStackTrace = orig;\n\n    return {\n        filename: line.getFileName(),\n        line: line.getLineNumber()\n    };\n};\n", "'use strict';\n\nconst DeepEqual = require('@hapi/hoek/lib/deepEqual');\nconst Pinpoint = require('@sideway/pinpoint');\n\nconst Errors = require('./errors');\n\n\nconst internals = {\n    codes: {\n        error: 1,\n        pass: 2,\n        full: 3\n    },\n    labels: {\n        0: 'never used',\n        1: 'always error',\n        2: 'always pass'\n    }\n};\n\n\nexports.setup = function (root) {\n\n    const trace = function () {\n\n        root._tracer = root._tracer || new internals.Tracer();\n        return root._tracer;\n    };\n\n    root.trace = trace;\n    root[Symbol.for('@hapi/lab/coverage/initialize')] = trace;\n\n    root.untrace = () => {\n\n        root._tracer = null;\n    };\n};\n\n\nexports.location = function (schema) {\n\n    return schema.$_setFlag('_tracerLocation', Pinpoint.location(2));                       // base.tracer(), caller\n};\n\n\ninternals.Tracer = class {\n\n    constructor() {\n\n        this.name = 'Joi';\n        this._schemas = new Map();\n    }\n\n    _register(schema) {\n\n        const existing = this._schemas.get(schema);\n        if (existing) {\n            return existing.store;\n        }\n\n        const store = new internals.Store(schema);\n        const { filename, line } = schema._flags._tracerLocation || Pinpoint.location(5);   // internals.tracer(), internals.entry(), exports.entry(), validate(), caller\n        this._schemas.set(schema, { filename, line, store });\n        return store;\n    }\n\n    _combine(merged, sources) {\n\n        for (const { store } of this._schemas.values()) {\n            store._combine(merged, sources);\n        }\n    }\n\n    report(file) {\n\n        const coverage = [];\n\n        // Process each registered schema\n\n        for (const { filename, line, store } of this._schemas.values()) {\n            if (file &&\n                file !== filename) {\n\n                continue;\n            }\n\n            // Process sub schemas of the registered root\n\n            const missing = [];\n            const skipped = [];\n\n            for (const [schema, log] of store._sources.entries()) {\n\n                // Check if sub schema parent skipped\n\n                if (internals.sub(log.paths, skipped)) {\n                    continue;\n                }\n\n                // Check if sub schema reached\n\n                if (!log.entry) {\n                    missing.push({\n                        status: 'never reached',\n                        paths: [...log.paths]\n                    });\n\n                    skipped.push(...log.paths);\n                    continue;\n                }\n\n                // Check values\n\n                for (const type of ['valid', 'invalid']) {\n                    const set = schema[`_${type}s`];\n                    if (!set) {\n                        continue;\n                    }\n\n                    const values = new Set(set._values);\n                    const refs = new Set(set._refs);\n                    for (const { value, ref } of log[type]) {\n                        values.delete(value);\n                        refs.delete(ref);\n                    }\n\n                    if (values.size ||\n                        refs.size) {\n\n                        missing.push({\n                            status: [...values, ...[...refs].map((ref) => ref.display)],\n                            rule: `${type}s`\n                        });\n                    }\n                }\n\n                // Check rules status\n\n                const rules = schema._rules.map((rule) => rule.name);\n                for (const type of ['default', 'failover']) {\n                    if (schema._flags[type] !== undefined) {\n                        rules.push(type);\n                    }\n                }\n\n                for (const name of rules) {\n                    const status = internals.labels[log.rule[name] || 0];\n                    if (status) {\n                        const report = { rule: name, status };\n                        if (log.paths.size) {\n                            report.paths = [...log.paths];\n                        }\n\n                        missing.push(report);\n                    }\n                }\n            }\n\n            if (missing.length) {\n                coverage.push({\n                    filename,\n                    line,\n                    missing,\n                    severity: 'error',\n                    message: `Schema missing tests for ${missing.map(internals.message).join(', ')}`\n                });\n            }\n        }\n\n        return coverage.length ? coverage : null;\n    }\n};\n\n\ninternals.Store = class {\n\n    constructor(schema) {\n\n        this.active = true;\n        this._sources = new Map();          // schema -> { paths, entry, rule, valid, invalid }\n        this._combos = new Map();           // merged -> [sources]\n        this._scan(schema);\n    }\n\n    debug(state, source, name, result) {\n\n        state.mainstay.debug && state.mainstay.debug.push({ type: source, name, result, path: state.path });\n    }\n\n    entry(schema, state) {\n\n        internals.debug(state, { type: 'entry' });\n\n        this._record(schema, (log) => {\n\n            log.entry = true;\n        });\n    }\n\n    filter(schema, state, source, value) {\n\n        internals.debug(state, { type: source, ...value });\n\n        this._record(schema, (log) => {\n\n            log[source].add(value);\n        });\n    }\n\n    log(schema, state, source, name, result) {\n\n        internals.debug(state, { type: source, name, result: result === 'full' ? 'pass' : result });\n\n        this._record(schema, (log) => {\n\n            log[source][name] = log[source][name] || 0;\n            log[source][name] |= internals.codes[result];\n        });\n    }\n\n    resolve(state, ref, to) {\n\n        if (!state.mainstay.debug) {\n            return;\n        }\n\n        const log = { type: 'resolve', ref: ref.display, to, path: state.path };\n        state.mainstay.debug.push(log);\n    }\n\n    value(state, by, from, to, name) {\n\n        if (!state.mainstay.debug ||\n            DeepEqual(from, to)) {\n\n            return;\n        }\n\n        const log = { type: 'value', by, from, to, path: state.path };\n        if (name) {\n            log.name = name;\n        }\n\n        state.mainstay.debug.push(log);\n    }\n\n    _record(schema, each) {\n\n        const log = this._sources.get(schema);\n        if (log) {\n            each(log);\n            return;\n        }\n\n        const sources = this._combos.get(schema);\n        for (const source of sources) {\n            this._record(source, each);\n        }\n    }\n\n    _scan(schema, _path) {\n\n        const path = _path || [];\n\n        let log = this._sources.get(schema);\n        if (!log) {\n            log = {\n                paths: new Set(),\n                entry: false,\n                rule: {},\n                valid: new Set(),\n                invalid: new Set()\n            };\n\n            this._sources.set(schema, log);\n        }\n\n        if (path.length) {\n            log.paths.add(path);\n        }\n\n        const each = (sub, source) => {\n\n            const subId = internals.id(sub, source);\n            this._scan(sub, path.concat(subId));\n        };\n\n        schema.$_modify({ each, ref: false });\n    }\n\n    _combine(merged, sources) {\n\n        this._combos.set(merged, sources);\n    }\n};\n\n\ninternals.message = function (item) {\n\n    const path = item.paths ? Errors.path(item.paths[0]) + (item.rule ? ':' : '') : '';\n    return `${path}${item.rule || ''} (${item.status})`;\n};\n\n\ninternals.id = function (schema, { source, name, path, key }) {\n\n    if (schema._flags.id) {\n        return schema._flags.id;\n    }\n\n    if (key) {\n        return key;\n    }\n\n    name = `@${name}`;\n\n    if (source === 'terms') {\n        return [name, path[Math.min(path.length - 1, 1)]];\n    }\n\n    return name;\n};\n\n\ninternals.sub = function (paths, skipped) {\n\n    for (const path of paths) {\n        for (const skip of skipped) {\n            if (DeepEqual(path.slice(0, skip.length), skip)) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n};\n\n\ninternals.debug = function (state, event) {\n\n    if (state.mainstay.debug) {\n        event.path = state.debug ? [...state.path, state.debug] : state.path;\n        state.mainstay.debug.push(event);\n    }\n};\n", "'use strict';\n\nconst Assert = require('./assert');\nconst Clone = require('./clone');\nconst Utils = require('./utils');\n\n\nconst internals = {};\n\n\nmodule.exports = internals.merge = function (target, source, options) {\n\n    Assert(target && typeof target === 'object', 'Invalid target value: must be an object');\n    Assert(source === null || source === undefined || typeof source === 'object', 'Invalid source value: must be null, undefined, or an object');\n\n    if (!source) {\n        return target;\n    }\n\n    options = Object.assign({ nullOverride: true, mergeArrays: true }, options);\n\n    if (Array.isArray(source)) {\n        Assert(Array.isArray(target), 'Cannot merge array onto an object');\n        if (!options.mergeArrays) {\n            target.length = 0;                                                          // Must not change target assignment\n        }\n\n        for (let i = 0; i < source.length; ++i) {\n            target.push(Clone(source[i], { symbols: options.symbols }));\n        }\n\n        return target;\n    }\n\n    const keys = Utils.keys(source, options);\n    for (let i = 0; i < keys.length; ++i) {\n        const key = keys[i];\n        if (key === '__proto__' ||\n            !Object.prototype.propertyIsEnumerable.call(source, key)) {\n\n            continue;\n        }\n\n        const value = source[key];\n        if (value &&\n            typeof value === 'object') {\n\n            if (target[key] === value) {\n                continue;                                           // Can occur for shallow merges\n            }\n\n            if (!target[key] ||\n                typeof target[key] !== 'object' ||\n                (Array.isArray(target[key]) !== Array.isArray(value)) ||\n                value instanceof Date ||\n                (Buffer && Buffer.isBuffer(value)) ||               // $lab:coverage:ignore$\n                value instanceof RegExp) {\n\n                target[key] = Clone(value, { symbols: options.symbols });\n            }\n            else {\n                internals.merge(target[key], value, options);\n            }\n        }\n        else {\n            if (value !== null &&\n                value !== undefined) {                              // Explicit to preserve empty strings\n\n                target[key] = value;\n            }\n            else if (options.nullOverride) {\n                target[key] = value;\n            }\n        }\n    }\n\n    return target;\n};\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\n\nconst Common = require('./common');\nconst Ref = require('./ref');\n\n\nconst internals = {};\n\n\n\nexports.Ids = internals.Ids = class {\n\n    constructor() {\n\n        this._byId = new Map();\n        this._byKey = new Map();\n        this._schemaChain = false;\n    }\n\n    clone() {\n\n        const clone = new internals.Ids();\n        clone._byId = new Map(this._byId);\n        clone._byKey = new Map(this._byKey);\n        clone._schemaChain = this._schemaChain;\n        return clone;\n    }\n\n    concat(source) {\n\n        if (source._schemaChain) {\n            this._schemaChain = true;\n        }\n\n        for (const [id, value] of source._byId.entries()) {\n            Assert(!this._byKey.has(id), 'Schema id conflicts with existing key:', id);\n            this._byId.set(id, value);\n        }\n\n        for (const [key, value] of source._byKey.entries()) {\n            Assert(!this._byId.has(key), 'Schema key conflicts with existing id:', key);\n            this._byKey.set(key, value);\n        }\n    }\n\n    fork(path, adjuster, root) {\n\n        const chain = this._collect(path);\n        chain.push({ schema: root });\n        const tail = chain.shift();\n        let adjusted = { id: tail.id, schema: adjuster(tail.schema) };\n\n        Assert(Common.isSchema(adjusted.schema), 'adjuster function failed to return a joi schema type');\n\n        for (const node of chain) {\n            adjusted = { id: node.id, schema: internals.fork(node.schema, adjusted.id, adjusted.schema) };\n        }\n\n        return adjusted.schema;\n    }\n\n    labels(path, behind = []) {\n\n        const current = path[0];\n        const node = this._get(current);\n        if (!node) {\n            return [...behind, ...path].join('.');\n        }\n\n        const forward = path.slice(1);\n        behind = [...behind, node.schema._flags.label || current];\n        if (!forward.length) {\n            return behind.join('.');\n        }\n\n        return node.schema._ids.labels(forward, behind);\n    }\n\n    reach(path, behind = []) {\n\n        const current = path[0];\n        const node = this._get(current);\n        Assert(node, 'Schema does not contain path', [...behind, ...path].join('.'));\n\n        const forward = path.slice(1);\n        if (!forward.length) {\n            return node.schema;\n        }\n\n        return node.schema._ids.reach(forward, [...behind, current]);\n    }\n\n    register(schema, { key } = {}) {\n\n        if (!schema ||\n            !Common.isSchema(schema)) {\n\n            return;\n        }\n\n        if (schema.$_property('schemaChain') ||\n            schema._ids._schemaChain) {\n\n            this._schemaChain = true;\n        }\n\n        const id = schema._flags.id;\n        if (id) {\n            const existing = this._byId.get(id);\n            Assert(!existing || existing.schema === schema, 'Cannot add different schemas with the same id:', id);\n            Assert(!this._byKey.has(id), 'Schema id conflicts with existing key:', id);\n\n            this._byId.set(id, { schema, id });\n        }\n\n        if (key) {\n            Assert(!this._byKey.has(key), 'Schema already contains key:', key);\n            Assert(!this._byId.has(key), 'Schema key conflicts with existing id:', key);\n\n            this._byKey.set(key, { schema, id: key });\n        }\n    }\n\n    reset() {\n\n        this._byId = new Map();\n        this._byKey = new Map();\n        this._schemaChain = false;\n    }\n\n    _collect(path, behind = [], nodes = []) {\n\n        const current = path[0];\n        const node = this._get(current);\n        Assert(node, 'Schema does not contain path', [...behind, ...path].join('.'));\n\n        nodes = [node, ...nodes];\n\n        const forward = path.slice(1);\n        if (!forward.length) {\n            return nodes;\n        }\n\n        return node.schema._ids._collect(forward, [...behind, current], nodes);\n    }\n\n    _get(id) {\n\n        return this._byId.get(id) || this._byKey.get(id);\n    }\n};\n\n\ninternals.fork = function (schema, id, replacement) {\n\n    const each = (item, { key }) => {\n\n        if (id === (item._flags.id || key)) {\n            return replacement;\n        }\n    };\n\n    const obj = exports.schema(schema, { each, ref: false });\n    return obj ? obj.$_mutateRebuild() : schema;\n};\n\n\nexports.schema = function (schema, options) {\n\n    let obj;\n\n    for (const name in schema._flags) {\n        if (name[0] === '_') {\n            continue;\n        }\n\n        const result = internals.scan(schema._flags[name], { source: 'flags', name }, options);\n        if (result !== undefined) {\n            obj = obj || schema.clone();\n            obj._flags[name] = result;\n        }\n    }\n\n    for (let i = 0; i < schema._rules.length; ++i) {\n        const rule = schema._rules[i];\n        const result = internals.scan(rule.args, { source: 'rules', name: rule.name }, options);\n        if (result !== undefined) {\n            obj = obj || schema.clone();\n            const clone = Object.assign({}, rule);\n            clone.args = result;\n            obj._rules[i] = clone;\n\n            const existingUnique = obj._singleRules.get(rule.name);\n            if (existingUnique === rule) {\n                obj._singleRules.set(rule.name, clone);\n            }\n        }\n    }\n\n    for (const name in schema.$_terms) {\n        if (name[0] === '_') {\n            continue;\n        }\n\n        const result = internals.scan(schema.$_terms[name], { source: 'terms', name }, options);\n        if (result !== undefined) {\n            obj = obj || schema.clone();\n            obj.$_terms[name] = result;\n        }\n    }\n\n    return obj;\n};\n\n\ninternals.scan = function (item, source, options, _path, _key) {\n\n    const path = _path || [];\n\n    if (item === null ||\n        typeof item !== 'object') {\n\n        return;\n    }\n\n    let clone;\n\n    if (Array.isArray(item)) {\n        for (let i = 0; i < item.length; ++i) {\n            const key = source.source === 'terms' && source.name === 'keys' && item[i].key;\n            const result = internals.scan(item[i], source, options, [i, ...path], key);\n            if (result !== undefined) {\n                clone = clone || item.slice();\n                clone[i] = result;\n            }\n        }\n\n        return clone;\n    }\n\n    if (options.schema !== false && Common.isSchema(item) ||\n        options.ref !== false && Ref.isRef(item)) {\n\n        const result = options.each(item, { ...source, path, key: _key });\n        if (result === item) {\n            return;\n        }\n\n        return result;\n    }\n\n    for (const key in item) {\n        if (key[0] === '_') {\n            continue;\n        }\n\n        const result = internals.scan(item[key], source, options, [key, ...path], _key);\n        if (result !== undefined) {\n            clone = clone || Object.assign({}, item);\n            clone[key] = result;\n        }\n    }\n\n    return clone;\n};\n", "'use strict';\n\nconst internals = {};\n\n\nmodule.exports = function () { };\n", "'use strict';\n\nconst Clone = require('@hapi/hoek/lib/clone');\nconst Reach = require('@hapi/hoek/lib/reach');\n\nconst Common = require('./common');\n\n\nconst internals = {\n    value: Symbol('value')\n};\n\n\nmodule.exports = internals.State = class {\n\n    constructor(path, ancestors, state) {\n\n        this.path = path;\n        this.ancestors = ancestors;                 // [parent, ..., root]\n\n        this.mainstay = state.mainstay;\n        this.schemas = state.schemas;               // [current, ..., root]\n        this.debug = null;\n    }\n\n    localize(path, ancestors = null, schema = null) {\n\n        const state = new internals.State(path, ancestors, this);\n\n        if (schema &&\n            state.schemas) {\n\n            state.schemas = [internals.schemas(schema), ...state.schemas];\n        }\n\n        return state;\n    }\n\n    nest(schema, debug) {\n\n        const state = new internals.State(this.path, this.ancestors, this);\n        state.schemas = state.schemas && [internals.schemas(schema), ...state.schemas];\n        state.debug = debug;\n        return state;\n    }\n\n    shadow(value, reason) {\n\n        this.mainstay.shadow = this.mainstay.shadow || new internals.Shadow();\n        this.mainstay.shadow.set(this.path, value, reason);\n    }\n\n    snapshot() {\n\n        if (this.mainstay.shadow) {\n            this._snapshot = Clone(this.mainstay.shadow.node(this.path));\n        }\n\n        this.mainstay.snapshot();\n    }\n\n    restore() {\n\n        if (this.mainstay.shadow) {\n            this.mainstay.shadow.override(this.path, this._snapshot);\n            this._snapshot = undefined;\n        }\n\n        this.mainstay.restore();\n    }\n\n    commit() {\n\n        if (this.mainstay.shadow) {\n            this.mainstay.shadow.override(this.path, this._snapshot);\n            this._snapshot = undefined;\n        }\n\n        this.mainstay.commit();\n    }\n};\n\n\ninternals.schemas = function (schema) {\n\n    if (Common.isSchema(schema)) {\n        return { schema };\n    }\n\n    return schema;\n};\n\n\ninternals.Shadow = class {\n\n    constructor() {\n\n        this._values = null;\n    }\n\n    set(path, value, reason) {\n\n        if (!path.length) {                                     // No need to store root value\n            return;\n        }\n\n        if (reason === 'strip' &&\n            typeof path[path.length - 1] === 'number') {        // Cannot store stripped array values (due to shift)\n\n            return;\n        }\n\n        this._values = this._values || new Map();\n\n        let node = this._values;\n        for (let i = 0; i < path.length; ++i) {\n            const segment = path[i];\n            let next = node.get(segment);\n            if (!next) {\n                next = new Map();\n                node.set(segment, next);\n            }\n\n            node = next;\n        }\n\n        node[internals.value] = value;\n    }\n\n    get(path) {\n\n        const node = this.node(path);\n        if (node) {\n            return node[internals.value];\n        }\n    }\n\n    node(path) {\n\n        if (!this._values) {\n            return;\n        }\n\n        return Reach(this._values, path, { iterables: true });\n    }\n\n    override(path, node) {\n\n        if (!this._values) {\n            return;\n        }\n\n        const parents = path.slice(0, -1);\n        const own = path[path.length - 1];\n        const parent = Reach(this._values, parents, { iterables: true });\n\n        if (node) {\n            parent.set(own, node);\n            return;\n        }\n\n        if (parent) {\n            parent.delete(own);\n        }\n    }\n};\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\nconst Clone = require('@hapi/hoek/lib/clone');\nconst Ignore = require('@hapi/hoek/lib/ignore');\nconst Reach = require('@hapi/hoek/lib/reach');\n\nconst Common = require('./common');\nconst Errors = require('./errors');\nconst State = require('./state');\n\n\nconst internals = {\n    result: Symbol('result')\n};\n\n\nexports.entry = function (value, schema, prefs) {\n\n    let settings = Common.defaults;\n    if (prefs) {\n        Assert(prefs.warnings === undefined, 'Cannot override warnings preference in synchronous validation');\n        Assert(prefs.artifacts === undefined, 'Cannot override artifacts preference in synchronous validation');\n        settings = Common.preferences(Common.defaults, prefs);\n    }\n\n    const result = internals.entry(value, schema, settings);\n    Assert(!result.mainstay.externals.length, 'Schema with external rules must use validateAsync()');\n    const outcome = { value: result.value };\n\n    if (result.error) {\n        outcome.error = result.error;\n    }\n\n    if (result.mainstay.warnings.length) {\n        outcome.warning = Errors.details(result.mainstay.warnings);\n    }\n\n    if (result.mainstay.debug) {\n        outcome.debug = result.mainstay.debug;\n    }\n\n    if (result.mainstay.artifacts) {\n        outcome.artifacts = result.mainstay.artifacts;\n    }\n\n    return outcome;\n};\n\n\nexports.entryAsync = async function (value, schema, prefs) {\n\n    let settings = Common.defaults;\n    if (prefs) {\n        settings = Common.preferences(Common.defaults, prefs);\n    }\n\n    const result = internals.entry(value, schema, settings);\n    const mainstay = result.mainstay;\n    if (result.error) {\n        if (mainstay.debug) {\n            result.error.debug = mainstay.debug;\n        }\n\n        throw result.error;\n    }\n\n    if (mainstay.externals.length) {\n        let root = result.value;\n        const errors = [];\n        for (const external of mainstay.externals) {\n            const path = external.state.path;\n            const linked = external.schema.type === 'link' ? mainstay.links.get(external.schema) : null;\n            let node = root;\n            let key;\n            let parent;\n\n            const ancestors = path.length ? [root] : [];\n            const original = path.length ? Reach(value, path) : value;\n\n            if (path.length) {\n                key = path[path.length - 1];\n\n                let current = root;\n                for (const segment of path.slice(0, -1)) {\n                    current = current[segment];\n                    ancestors.unshift(current);\n                }\n\n                parent = ancestors[0];\n                node = parent[key];\n            }\n\n            try {\n                const createError = (code, local) => (linked || external.schema).$_createError(code, node, local, external.state, settings);\n                const output = await external.method(node, {\n                    schema: external.schema,\n                    linked,\n                    state: external.state,\n                    prefs,\n                    original,\n                    error: createError,\n                    errorsArray: internals.errorsArray,\n                    warn: (code, local) => mainstay.warnings.push((linked || external.schema).$_createError(code, node, local, external.state, settings)),\n                    message: (messages, local) => (linked || external.schema).$_createError('external', node, local, external.state, settings, { messages })\n                });\n\n                if (output === undefined ||\n                    output === node) {\n\n                    continue;\n                }\n\n                if (output instanceof Errors.Report) {\n                    mainstay.tracer.log(external.schema, external.state, 'rule', 'external', 'error');\n                    errors.push(output);\n\n                    if (settings.abortEarly) {\n                        break;\n                    }\n\n                    continue;\n                }\n\n                if (Array.isArray(output) &&\n                    output[Common.symbols.errors]) {\n                    mainstay.tracer.log(external.schema, external.state, 'rule', 'external', 'error');\n                    errors.push(...output);\n\n                    if (settings.abortEarly) {\n                        break;\n                    }\n\n                    continue;\n                }\n\n                if (parent) {\n                    mainstay.tracer.value(external.state, 'rule', node, output, 'external');\n                    parent[key] = output;\n                }\n                else {\n                    mainstay.tracer.value(external.state, 'rule', root, output, 'external');\n                    root = output;\n                }\n            }\n            catch (err) {\n                if (settings.errors.label) {\n                    err.message += ` (${(external.label)})`;       // Change message to include path\n                }\n\n                throw err;\n            }\n        }\n\n        result.value = root;\n\n        if (errors.length) {\n            result.error = Errors.process(errors, value, settings);\n\n            if (mainstay.debug) {\n                result.error.debug = mainstay.debug;\n            }\n\n            throw result.error;\n        }\n    }\n\n    if (!settings.warnings &&\n        !settings.debug &&\n        !settings.artifacts) {\n\n        return result.value;\n    }\n\n    const outcome = { value: result.value };\n    if (mainstay.warnings.length) {\n        outcome.warning = Errors.details(mainstay.warnings);\n    }\n\n    if (mainstay.debug) {\n        outcome.debug = mainstay.debug;\n    }\n\n    if (mainstay.artifacts) {\n        outcome.artifacts = mainstay.artifacts;\n    }\n\n    return outcome;\n};\n\n\ninternals.Mainstay = class {\n\n    constructor(tracer, debug, links) {\n\n        this.externals = [];\n        this.warnings = [];\n        this.tracer = tracer;\n        this.debug = debug;\n        this.links = links;\n        this.shadow = null;\n        this.artifacts = null;\n\n        this._snapshots = [];\n    }\n\n    snapshot() {\n\n        this._snapshots.push({\n            externals: this.externals.slice(),\n            warnings: this.warnings.slice()\n        });\n    }\n\n    restore() {\n\n        const snapshot = this._snapshots.pop();\n        this.externals = snapshot.externals;\n        this.warnings = snapshot.warnings;\n    }\n\n    commit() {\n\n        this._snapshots.pop();\n    }\n};\n\n\ninternals.entry = function (value, schema, prefs) {\n\n    // Prepare state\n\n    const { tracer, cleanup } = internals.tracer(schema, prefs);\n    const debug = prefs.debug ? [] : null;\n    const links = schema._ids._schemaChain ? new Map() : null;\n    const mainstay = new internals.Mainstay(tracer, debug, links);\n    const schemas = schema._ids._schemaChain ? [{ schema }] : null;\n    const state = new State([], [], { mainstay, schemas });\n\n    // Validate value\n\n    const result = exports.validate(value, schema, state, prefs);\n\n    // Process value and errors\n\n    if (cleanup) {\n        schema.$_root.untrace();\n    }\n\n    const error = Errors.process(result.errors, value, prefs);\n    return { value: result.value, error, mainstay };\n};\n\n\ninternals.tracer = function (schema, prefs) {\n\n    if (schema.$_root._tracer) {\n        return { tracer: schema.$_root._tracer._register(schema) };\n    }\n\n    if (prefs.debug) {\n        Assert(schema.$_root.trace, 'Debug mode not supported');\n        return { tracer: schema.$_root.trace()._register(schema), cleanup: true };\n    }\n\n    return { tracer: internals.ignore };\n};\n\n\nexports.validate = function (value, schema, state, prefs, overrides = {}) {\n\n    if (schema.$_terms.whens) {\n        schema = schema._generate(value, state, prefs).schema;\n    }\n\n    // Setup state and settings\n\n    if (schema._preferences) {\n        prefs = internals.prefs(schema, prefs);\n    }\n\n    // Cache\n\n    if (schema._cache &&\n        prefs.cache) {\n\n        const result = schema._cache.get(value);\n        state.mainstay.tracer.debug(state, 'validate', 'cached', !!result);\n        if (result) {\n            return result;\n        }\n    }\n\n    // Helpers\n\n    const createError = (code, local, localState) => schema.$_createError(code, value, local, localState || state, prefs);\n    const helpers = {\n        original: value,\n        prefs,\n        schema,\n        state,\n        error: createError,\n        errorsArray: internals.errorsArray,\n        warn: (code, local, localState) => state.mainstay.warnings.push(createError(code, local, localState)),\n        message: (messages, local) => schema.$_createError('custom', value, local, state, prefs, { messages })\n    };\n\n    // Prepare\n\n    state.mainstay.tracer.entry(schema, state);\n\n    const def = schema._definition;\n    if (def.prepare &&\n        value !== undefined &&\n        prefs.convert) {\n\n        const prepared = def.prepare(value, helpers);\n        if (prepared) {\n            state.mainstay.tracer.value(state, 'prepare', value, prepared.value);\n            if (prepared.errors) {\n                return internals.finalize(prepared.value, [].concat(prepared.errors), helpers);         // Prepare error always aborts early\n            }\n\n            value = prepared.value;\n        }\n    }\n\n    // Type coercion\n\n    if (def.coerce &&\n        value !== undefined &&\n        prefs.convert &&\n        (!def.coerce.from || def.coerce.from.includes(typeof value))) {\n\n        const coerced = def.coerce.method(value, helpers);\n        if (coerced) {\n            state.mainstay.tracer.value(state, 'coerced', value, coerced.value);\n            if (coerced.errors) {\n                return internals.finalize(coerced.value, [].concat(coerced.errors), helpers);           // Coerce error always aborts early\n            }\n\n            value = coerced.value;\n        }\n    }\n\n    // Empty value\n\n    const empty = schema._flags.empty;\n    if (empty &&\n        empty.$_match(internals.trim(value, schema), state.nest(empty), Common.defaults)) {\n\n        state.mainstay.tracer.value(state, 'empty', value, undefined);\n        value = undefined;\n    }\n\n    // Presence requirements (required, optional, forbidden)\n\n    const presence = overrides.presence || schema._flags.presence || (schema._flags._endedSwitch ? null : prefs.presence);\n    if (value === undefined) {\n        if (presence === 'forbidden') {\n            return internals.finalize(value, null, helpers);\n        }\n\n        if (presence === 'required') {\n            return internals.finalize(value, [schema.$_createError('any.required', value, null, state, prefs)], helpers);\n        }\n\n        if (presence === 'optional') {\n            if (schema._flags.default !== Common.symbols.deepDefault) {\n                return internals.finalize(value, null, helpers);\n            }\n\n            state.mainstay.tracer.value(state, 'default', value, {});\n            value = {};\n        }\n    }\n    else if (presence === 'forbidden') {\n        return internals.finalize(value, [schema.$_createError('any.unknown', value, null, state, prefs)], helpers);\n    }\n\n    // Allowed values\n\n    const errors = [];\n\n    if (schema._valids) {\n        const match = schema._valids.get(value, state, prefs, schema._flags.insensitive);\n        if (match) {\n            if (prefs.convert) {\n                state.mainstay.tracer.value(state, 'valids', value, match.value);\n                value = match.value;\n            }\n\n            state.mainstay.tracer.filter(schema, state, 'valid', match);\n            return internals.finalize(value, null, helpers);\n        }\n\n        if (schema._flags.only) {\n            const report = schema.$_createError('any.only', value, { valids: schema._valids.values({ display: true }) }, state, prefs);\n            if (prefs.abortEarly) {\n                return internals.finalize(value, [report], helpers);\n            }\n\n            errors.push(report);\n        }\n    }\n\n    // Denied values\n\n    if (schema._invalids) {\n        const match = schema._invalids.get(value, state, prefs, schema._flags.insensitive);\n        if (match) {\n            state.mainstay.tracer.filter(schema, state, 'invalid', match);\n            const report = schema.$_createError('any.invalid', value, { invalids: schema._invalids.values({ display: true }) }, state, prefs);\n            if (prefs.abortEarly) {\n                return internals.finalize(value, [report], helpers);\n            }\n\n            errors.push(report);\n        }\n    }\n\n    // Base type\n\n    if (def.validate) {\n        const base = def.validate(value, helpers);\n        if (base) {\n            state.mainstay.tracer.value(state, 'base', value, base.value);\n            value = base.value;\n\n            if (base.errors) {\n                if (!Array.isArray(base.errors)) {\n                    errors.push(base.errors);\n                    return internals.finalize(value, errors, helpers);          // Base error always aborts early\n                }\n\n                if (base.errors.length) {\n                    errors.push(...base.errors);\n                    return internals.finalize(value, errors, helpers);          // Base error always aborts early\n                }\n            }\n        }\n    }\n\n    // Validate tests\n\n    if (!schema._rules.length) {\n        return internals.finalize(value, errors, helpers);\n    }\n\n    return internals.rules(value, errors, helpers);\n};\n\n\ninternals.rules = function (value, errors, helpers) {\n\n    const { schema, state, prefs } = helpers;\n\n    for (const rule of schema._rules) {\n        const definition = schema._definition.rules[rule.method];\n\n        // Skip rules that are also applied in coerce step\n\n        if (definition.convert &&\n            prefs.convert) {\n\n            state.mainstay.tracer.log(schema, state, 'rule', rule.name, 'full');\n            continue;\n        }\n\n        // Resolve references\n\n        let ret;\n        let args = rule.args;\n        if (rule._resolve.length) {\n            args = Object.assign({}, args);                                     // Shallow copy\n            for (const key of rule._resolve) {\n                const resolver = definition.argsByName.get(key);\n\n                const resolved = args[key].resolve(value, state, prefs);\n                const normalized = resolver.normalize ? resolver.normalize(resolved) : resolved;\n\n                const invalid = Common.validateArg(normalized, null, resolver);\n                if (invalid) {\n                    ret = schema.$_createError('any.ref', resolved, { arg: key, ref: args[key], reason: invalid }, state, prefs);\n                    break;\n                }\n\n                args[key] = normalized;\n            }\n        }\n\n        // Test rule\n\n        ret = ret || definition.validate(value, helpers, args, rule);           // Use ret if already set to reference error\n\n        const result = internals.rule(ret, rule);\n        if (result.errors) {\n            state.mainstay.tracer.log(schema, state, 'rule', rule.name, 'error');\n\n            if (rule.warn) {\n                state.mainstay.warnings.push(...result.errors);\n                continue;\n            }\n\n            if (prefs.abortEarly) {\n                return internals.finalize(value, result.errors, helpers);\n            }\n\n            errors.push(...result.errors);\n        }\n        else {\n            state.mainstay.tracer.log(schema, state, 'rule', rule.name, 'pass');\n            state.mainstay.tracer.value(state, 'rule', value, result.value, rule.name);\n            value = result.value;\n        }\n    }\n\n    return internals.finalize(value, errors, helpers);\n};\n\n\ninternals.rule = function (ret, rule) {\n\n    if (ret instanceof Errors.Report) {\n        internals.error(ret, rule);\n        return { errors: [ret], value: null };\n    }\n\n    if (Array.isArray(ret) &&\n        ret[Common.symbols.errors]) {\n\n        ret.forEach((report) => internals.error(report, rule));\n        return { errors: ret, value: null };\n    }\n\n    return { errors: null, value: ret };\n};\n\n\ninternals.error = function (report, rule) {\n\n    if (rule.message) {\n        report._setTemplate(rule.message);\n    }\n\n    return report;\n};\n\n\ninternals.finalize = function (value, errors, helpers) {\n\n    errors = errors || [];\n    const { schema, state, prefs } = helpers;\n\n    // Failover value\n\n    if (errors.length) {\n        const failover = internals.default('failover', undefined, errors, helpers);\n        if (failover !== undefined) {\n            state.mainstay.tracer.value(state, 'failover', value, failover);\n            value = failover;\n            errors = [];\n        }\n    }\n\n    // Error override\n\n    if (errors.length &&\n        schema._flags.error) {\n\n        if (typeof schema._flags.error === 'function') {\n            errors = schema._flags.error(errors);\n            if (!Array.isArray(errors)) {\n                errors = [errors];\n            }\n\n            for (const error of errors) {\n                Assert(error instanceof Error || error instanceof Errors.Report, 'error() must return an Error object');\n            }\n        }\n        else {\n            errors = [schema._flags.error];\n        }\n    }\n\n    // Default\n\n    if (value === undefined) {\n        const defaulted = internals.default('default', value, errors, helpers);\n        state.mainstay.tracer.value(state, 'default', value, defaulted);\n        value = defaulted;\n    }\n\n    // Cast\n\n    if (schema._flags.cast &&\n        value !== undefined) {\n\n        const caster = schema._definition.cast[schema._flags.cast];\n        if (caster.from(value)) {\n            const casted = caster.to(value, helpers);\n            state.mainstay.tracer.value(state, 'cast', value, casted, schema._flags.cast);\n            value = casted;\n        }\n    }\n\n    // Externals\n\n    if (schema.$_terms.externals &&\n        prefs.externals &&\n        prefs._externals !== false) {                       // Disabled for matching\n\n        for (const { method } of schema.$_terms.externals) {\n            state.mainstay.externals.push({ method, schema, state, label: Errors.label(schema._flags, state, prefs) });\n        }\n    }\n\n    // Result\n\n    const result = { value, errors: errors.length ? errors : null };\n\n    if (schema._flags.result) {\n        result.value = schema._flags.result === 'strip' ? undefined : /* raw */ helpers.original;\n        state.mainstay.tracer.value(state, schema._flags.result, value, result.value);\n        state.shadow(value, schema._flags.result);\n    }\n\n    // Cache\n\n    if (schema._cache &&\n        prefs.cache !== false &&\n        !schema._refs.length) {\n\n        schema._cache.set(helpers.original, result);\n    }\n\n    // Artifacts\n\n    if (value !== undefined &&\n        !result.errors &&\n        schema._flags.artifact !== undefined) {\n\n        state.mainstay.artifacts = state.mainstay.artifacts || new Map();\n        if (!state.mainstay.artifacts.has(schema._flags.artifact)) {\n            state.mainstay.artifacts.set(schema._flags.artifact, []);\n        }\n\n        state.mainstay.artifacts.get(schema._flags.artifact).push(state.path);\n    }\n\n    return result;\n};\n\n\ninternals.prefs = function (schema, prefs) {\n\n    const isDefaultOptions = prefs === Common.defaults;\n    if (isDefaultOptions &&\n        schema._preferences[Common.symbols.prefs]) {\n\n        return schema._preferences[Common.symbols.prefs];\n    }\n\n    prefs = Common.preferences(prefs, schema._preferences);\n    if (isDefaultOptions) {\n        schema._preferences[Common.symbols.prefs] = prefs;\n    }\n\n    return prefs;\n};\n\n\ninternals.default = function (flag, value, errors, helpers) {\n\n    const { schema, state, prefs } = helpers;\n    const source = schema._flags[flag];\n    if (prefs.noDefaults ||\n        source === undefined) {\n\n        return value;\n    }\n\n    state.mainstay.tracer.log(schema, state, 'rule', flag, 'full');\n\n    if (!source) {\n        return source;\n    }\n\n    if (typeof source === 'function') {\n        const args = source.length ? [Clone(state.ancestors[0]), helpers] : [];\n\n        try {\n            return source(...args);\n        }\n        catch (err) {\n            errors.push(schema.$_createError(`any.${flag}`, null, { error: err }, state, prefs));\n            return;\n        }\n    }\n\n    if (typeof source !== 'object') {\n        return source;\n    }\n\n    if (source[Common.symbols.literal]) {\n        return source.literal;\n    }\n\n    if (Common.isResolvable(source)) {\n        return source.resolve(value, state, prefs);\n    }\n\n    return Clone(source);\n};\n\n\ninternals.trim = function (value, schema) {\n\n    if (typeof value !== 'string') {\n        return value;\n    }\n\n    const trim = schema.$_getRule('trim');\n    if (!trim ||\n        !trim.args.enabled) {\n\n        return value;\n    }\n\n    return value.trim();\n};\n\n\ninternals.ignore = {\n    active: false,\n    debug: Ignore,\n    entry: Ignore,\n    filter: Ignore,\n    log: Ignore,\n    resolve: Ignore,\n    value: Ignore\n};\n\n\ninternals.errorsArray = function () {\n\n    const errors = [];\n    errors[Common.symbols.errors] = true;\n    return errors;\n};\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\nconst DeepEqual = require('@hapi/hoek/lib/deepEqual');\n\nconst Common = require('./common');\n\n\nconst internals = {};\n\n\nmodule.exports = internals.Values = class {\n\n    constructor(values, refs) {\n\n        this._values = new Set(values);\n        this._refs = new Set(refs);\n        this._lowercase = internals.lowercases(values);\n\n        this._override = false;\n    }\n\n    get length() {\n\n        return this._values.size + this._refs.size;\n    }\n\n    add(value, refs) {\n\n        // Reference\n\n        if (Common.isResolvable(value)) {\n            if (!this._refs.has(value)) {\n                this._refs.add(value);\n\n                if (refs) {                     // Skipped in a merge\n                    refs.register(value);\n                }\n            }\n\n            return;\n        }\n\n        // Value\n\n        if (!this.has(value, null, null, false)) {\n            this._values.add(value);\n\n            if (typeof value === 'string') {\n                this._lowercase.set(value.toLowerCase(), value);\n            }\n        }\n    }\n\n    static merge(target, source, remove) {\n\n        target = target || new internals.Values();\n\n        if (source) {\n            if (source._override) {\n                return source.clone();\n            }\n\n            for (const item of [...source._values, ...source._refs]) {\n                target.add(item);\n            }\n        }\n\n        if (remove) {\n            for (const item of [...remove._values, ...remove._refs]) {\n                target.remove(item);\n            }\n        }\n\n        return target.length ? target : null;\n    }\n\n    remove(value) {\n\n        // Reference\n\n        if (Common.isResolvable(value)) {\n            this._refs.delete(value);\n            return;\n        }\n\n        // Value\n\n        this._values.delete(value);\n\n        if (typeof value === 'string') {\n            this._lowercase.delete(value.toLowerCase());\n        }\n    }\n\n    has(value, state, prefs, insensitive) {\n\n        return !!this.get(value, state, prefs, insensitive);\n    }\n\n    get(value, state, prefs, insensitive) {\n\n        if (!this.length) {\n            return false;\n        }\n\n        // Simple match\n\n        if (this._values.has(value)) {\n            return { value };\n        }\n\n        // Case insensitive string match\n\n        if (typeof value === 'string' &&\n            value &&\n            insensitive) {\n\n            const found = this._lowercase.get(value.toLowerCase());\n            if (found) {\n                return { value: found };\n            }\n        }\n\n        if (!this._refs.size &&\n            typeof value !== 'object') {\n\n            return false;\n        }\n\n        // Objects\n\n        if (typeof value === 'object') {\n            for (const item of this._values) {\n                if (DeepEqual(item, value)) {\n                    return { value: item };\n                }\n            }\n        }\n\n        // References\n\n        if (state) {\n            for (const ref of this._refs) {\n                const resolved = ref.resolve(value, state, prefs, null, { in: true });\n                if (resolved === undefined) {\n                    continue;\n                }\n\n                const items = !ref.in || typeof resolved !== 'object'\n                    ? [resolved]\n                    : Array.isArray(resolved) ? resolved : Object.keys(resolved);\n\n                for (const item of items) {\n                    if (typeof item !== typeof value) {\n                        continue;\n                    }\n\n                    if (insensitive &&\n                        value &&\n                        typeof value === 'string') {\n\n                        if (item.toLowerCase() === value.toLowerCase()) {\n                            return { value: item, ref };\n                        }\n                    }\n                    else {\n                        if (DeepEqual(item, value)) {\n                            return { value: item, ref };\n                        }\n                    }\n                }\n            }\n        }\n\n        return false;\n    }\n\n    override() {\n\n        this._override = true;\n    }\n\n    values(options) {\n\n        if (options &&\n            options.display) {\n\n            const values = [];\n\n            for (const item of [...this._values, ...this._refs]) {\n                if (item !== undefined) {\n                    values.push(item);\n                }\n            }\n\n            return values;\n        }\n\n        return Array.from([...this._values, ...this._refs]);\n    }\n\n    clone() {\n\n        const set = new internals.Values(this._values, this._refs);\n        set._override = this._override;\n        return set;\n    }\n\n    concat(source) {\n\n        Assert(!source._override, 'Cannot concat override set of values');\n\n        const set = new internals.Values([...this._values, ...source._values], [...this._refs, ...source._refs]);\n        set._override = this._override;\n        return set;\n    }\n\n    describe() {\n\n        const normalized = [];\n\n        if (this._override) {\n            normalized.push({ override: true });\n        }\n\n        for (const value of this._values.values()) {\n            normalized.push(value && typeof value === 'object' ? { value } : value);\n        }\n\n        for (const value of this._refs.values()) {\n            normalized.push(value.describe());\n        }\n\n        return normalized;\n    }\n};\n\n\ninternals.Values.prototype[Common.symbols.values] = true;\n\n\n// Aliases\n\ninternals.Values.prototype.slice = internals.Values.prototype.clone;\n\n\n// Helpers\n\ninternals.lowercases = function (from) {\n\n    const map = new Map();\n\n    if (from) {\n        for (const value of from) {\n            if (typeof value === 'string') {\n                map.set(value.toLowerCase(), value);\n            }\n        }\n    }\n\n    return map;\n};\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\nconst Clone = require('@hapi/hoek/lib/clone');\nconst DeepEqual = require('@hapi/hoek/lib/deepEqual');\nconst Merge = require('@hapi/hoek/lib/merge');\n\nconst Cache = require('./cache');\nconst Common = require('./common');\nconst Compile = require('./compile');\nconst Errors = require('./errors');\nconst Extend = require('./extend');\nconst Manifest = require('./manifest');\nconst Messages = require('./messages');\nconst Modify = require('./modify');\nconst Ref = require('./ref');\nconst Trace = require('./trace');\nconst Validator = require('./validator');\nconst Values = require('./values');\n\n\nconst internals = {};\n\n\ninternals.Base = class {\n\n    constructor(type) {\n\n        // Naming: public, _private, $_extension, $_mutate{action}\n\n        this.type = type;\n\n        this.$_root = null;\n        this._definition = {};\n        this._reset();\n    }\n\n    _reset() {\n\n        this._ids = new Modify.Ids();\n        this._preferences = null;\n        this._refs = new Ref.Manager();\n        this._cache = null;\n\n        this._valids = null;\n        this._invalids = null;\n\n        this._flags = {};\n        this._rules = [];\n        this._singleRules = new Map();              // The rule options passed for non-multi rules\n\n        this.$_terms = {};                          // Hash of arrays of immutable objects (extended by other types)\n\n        this.$_temp = {                             // Runtime state (not cloned)\n            ruleset: null,                          // null: use last, false: error, number: start position\n            whens: {}                               // Runtime cache of generated whens\n        };\n    }\n\n    // Manifest\n\n    describe() {\n\n        Assert(typeof Manifest.describe === 'function', 'Manifest functionality disabled');\n        return Manifest.describe(this);\n    }\n\n    // Rules\n\n    allow(...values) {\n\n        Common.verifyFlat(values, 'allow');\n        return this._values(values, '_valids');\n    }\n\n    alter(targets) {\n\n        Assert(targets && typeof targets === 'object' && !Array.isArray(targets), 'Invalid targets argument');\n        Assert(!this._inRuleset(), 'Cannot set alterations inside a ruleset');\n\n        const obj = this.clone();\n        obj.$_terms.alterations = obj.$_terms.alterations || [];\n        for (const target in targets) {\n            const adjuster = targets[target];\n            Assert(typeof adjuster === 'function', 'Alteration adjuster for', target, 'must be a function');\n            obj.$_terms.alterations.push({ target, adjuster });\n        }\n\n        obj.$_temp.ruleset = false;\n        return obj;\n    }\n\n    artifact(id) {\n\n        Assert(id !== undefined, 'Artifact cannot be undefined');\n        Assert(!this._cache, 'Cannot set an artifact with a rule cache');\n\n        return this.$_setFlag('artifact', id);\n    }\n\n    cast(to) {\n\n        Assert(to === false || typeof to === 'string', 'Invalid to value');\n        Assert(to === false || this._definition.cast[to], 'Type', this.type, 'does not support casting to', to);\n\n        return this.$_setFlag('cast', to === false ? undefined : to);\n    }\n\n    default(value, options) {\n\n        return this._default('default', value, options);\n    }\n\n    description(desc) {\n\n        Assert(desc && typeof desc === 'string', 'Description must be a non-empty string');\n\n        return this.$_setFlag('description', desc);\n    }\n\n    empty(schema) {\n\n        const obj = this.clone();\n\n        if (schema !== undefined) {\n            schema = obj.$_compile(schema, { override: false });\n        }\n\n        return obj.$_setFlag('empty', schema, { clone: false });\n    }\n\n    error(err) {\n\n        Assert(err, 'Missing error');\n        Assert(err instanceof Error || typeof err === 'function', 'Must provide a valid Error object or a function');\n\n        return this.$_setFlag('error', err);\n    }\n\n    example(example, options = {}) {\n\n        Assert(example !== undefined, 'Missing example');\n        Common.assertOptions(options, ['override']);\n\n        return this._inner('examples', example, { single: true, override: options.override });\n    }\n\n    external(method, description) {\n\n        if (typeof method === 'object') {\n            Assert(!description, 'Cannot combine options with description');\n            description = method.description;\n            method = method.method;\n        }\n\n        Assert(typeof method === 'function', 'Method must be a function');\n        Assert(description === undefined || description && typeof description === 'string', 'Description must be a non-empty string');\n\n        return this._inner('externals', { method, description }, { single: true });\n    }\n\n    failover(value, options) {\n\n        return this._default('failover', value, options);\n    }\n\n    forbidden() {\n\n        return this.presence('forbidden');\n    }\n\n    id(id) {\n\n        if (!id) {\n            return this.$_setFlag('id', undefined);\n        }\n\n        Assert(typeof id === 'string', 'id must be a non-empty string');\n        Assert(/^[^\\.]+$/.test(id), 'id cannot contain period character');\n\n        return this.$_setFlag('id', id);\n    }\n\n    invalid(...values) {\n\n        return this._values(values, '_invalids');\n    }\n\n    label(name) {\n\n        Assert(name && typeof name === 'string', 'Label name must be a non-empty string');\n\n        return this.$_setFlag('label', name);\n    }\n\n    meta(meta) {\n\n        Assert(meta !== undefined, 'Meta cannot be undefined');\n\n        return this._inner('metas', meta, { single: true });\n    }\n\n    note(...notes) {\n\n        Assert(notes.length, 'Missing notes');\n        for (const note of notes) {\n            Assert(note && typeof note === 'string', 'Notes must be non-empty strings');\n        }\n\n        return this._inner('notes', notes);\n    }\n\n    only(mode = true) {\n\n        Assert(typeof mode === 'boolean', 'Invalid mode:', mode);\n\n        return this.$_setFlag('only', mode);\n    }\n\n    optional() {\n\n        return this.presence('optional');\n    }\n\n    prefs(prefs) {\n\n        Assert(prefs, 'Missing preferences');\n        Assert(prefs.context === undefined, 'Cannot override context');\n        Assert(prefs.externals === undefined, 'Cannot override externals');\n        Assert(prefs.warnings === undefined, 'Cannot override warnings');\n        Assert(prefs.debug === undefined, 'Cannot override debug');\n\n        Common.checkPreferences(prefs);\n\n        const obj = this.clone();\n        obj._preferences = Common.preferences(obj._preferences, prefs);\n        return obj;\n    }\n\n    presence(mode) {\n\n        Assert(['optional', 'required', 'forbidden'].includes(mode), 'Unknown presence mode', mode);\n\n        return this.$_setFlag('presence', mode);\n    }\n\n    raw(enabled = true) {\n\n        return this.$_setFlag('result', enabled ? 'raw' : undefined);\n    }\n\n    result(mode) {\n\n        Assert(['raw', 'strip'].includes(mode), 'Unknown result mode', mode);\n\n        return this.$_setFlag('result', mode);\n    }\n\n    required() {\n\n        return this.presence('required');\n    }\n\n    strict(enabled) {\n\n        const obj = this.clone();\n\n        const convert = enabled === undefined ? false : !enabled;\n        obj._preferences = Common.preferences(obj._preferences, { convert });\n        return obj;\n    }\n\n    strip(enabled = true) {\n\n        return this.$_setFlag('result', enabled ? 'strip' : undefined);\n    }\n\n    tag(...tags) {\n\n        Assert(tags.length, 'Missing tags');\n        for (const tag of tags) {\n            Assert(tag && typeof tag === 'string', 'Tags must be non-empty strings');\n        }\n\n        return this._inner('tags', tags);\n    }\n\n    unit(name) {\n\n        Assert(name && typeof name === 'string', 'Unit name must be a non-empty string');\n\n        return this.$_setFlag('unit', name);\n    }\n\n    valid(...values) {\n\n        Common.verifyFlat(values, 'valid');\n\n        const obj = this.allow(...values);\n        obj.$_setFlag('only', !!obj._valids, { clone: false });\n        return obj;\n    }\n\n    when(condition, options) {\n\n        const obj = this.clone();\n\n        if (!obj.$_terms.whens) {\n            obj.$_terms.whens = [];\n        }\n\n        const when = Compile.when(obj, condition, options);\n        if (!['any', 'link'].includes(obj.type)) {\n            const conditions = when.is ? [when] : when.switch;\n            for (const item of conditions) {\n                Assert(!item.then || item.then.type === 'any' || item.then.type === obj.type, 'Cannot combine', obj.type, 'with', item.then && item.then.type);\n                Assert(!item.otherwise || item.otherwise.type === 'any' || item.otherwise.type === obj.type, 'Cannot combine', obj.type, 'with', item.otherwise && item.otherwise.type);\n\n            }\n        }\n\n        obj.$_terms.whens.push(when);\n        return obj.$_mutateRebuild();\n    }\n\n    // Helpers\n\n    cache(cache) {\n\n        Assert(!this._inRuleset(), 'Cannot set caching inside a ruleset');\n        Assert(!this._cache, 'Cannot override schema cache');\n        Assert(this._flags.artifact === undefined, 'Cannot cache a rule with an artifact');\n\n        const obj = this.clone();\n        obj._cache = cache || Cache.provider.provision();\n        obj.$_temp.ruleset = false;\n        return obj;\n    }\n\n    clone() {\n\n        const obj = Object.create(Object.getPrototypeOf(this));\n        return this._assign(obj);\n    }\n\n    concat(source) {\n\n        Assert(Common.isSchema(source), 'Invalid schema object');\n        Assert(this.type === 'any' || source.type === 'any' || source.type === this.type, 'Cannot merge type', this.type, 'with another type:', source.type);\n        Assert(!this._inRuleset(), 'Cannot concatenate onto a schema with open ruleset');\n        Assert(!source._inRuleset(), 'Cannot concatenate a schema with open ruleset');\n\n        let obj = this.clone();\n\n        if (this.type === 'any' &&\n            source.type !== 'any') {\n\n            // Change obj to match source type\n\n            const tmpObj = source.clone();\n            for (const key of Object.keys(obj)) {\n                if (key !== 'type') {\n                    tmpObj[key] = obj[key];\n                }\n            }\n\n            obj = tmpObj;\n        }\n\n        obj._ids.concat(source._ids);\n        obj._refs.register(source, Ref.toSibling);\n\n        obj._preferences = obj._preferences ? Common.preferences(obj._preferences, source._preferences) : source._preferences;\n        obj._valids = Values.merge(obj._valids, source._valids, source._invalids);\n        obj._invalids = Values.merge(obj._invalids, source._invalids, source._valids);\n\n        // Remove unique rules present in source\n\n        for (const name of source._singleRules.keys()) {\n            if (obj._singleRules.has(name)) {\n                obj._rules = obj._rules.filter((target) => target.keep || target.name !== name);\n                obj._singleRules.delete(name);\n            }\n        }\n\n        // Rules\n\n        for (const test of source._rules) {\n            if (!source._definition.rules[test.method].multi) {\n                obj._singleRules.set(test.name, test);\n            }\n\n            obj._rules.push(test);\n        }\n\n        // Flags\n\n        if (obj._flags.empty &&\n            source._flags.empty) {\n\n            obj._flags.empty = obj._flags.empty.concat(source._flags.empty);\n            const flags = Object.assign({}, source._flags);\n            delete flags.empty;\n            Merge(obj._flags, flags);\n        }\n        else if (source._flags.empty) {\n            obj._flags.empty = source._flags.empty;\n            const flags = Object.assign({}, source._flags);\n            delete flags.empty;\n            Merge(obj._flags, flags);\n        }\n        else {\n            Merge(obj._flags, source._flags);\n        }\n\n        // Terms\n\n        for (const key in source.$_terms) {\n            const terms = source.$_terms[key];\n            if (!terms) {\n                if (!obj.$_terms[key]) {\n                    obj.$_terms[key] = terms;\n                }\n\n                continue;\n            }\n\n            if (!obj.$_terms[key]) {\n                obj.$_terms[key] = terms.slice();\n                continue;\n            }\n\n            obj.$_terms[key] = obj.$_terms[key].concat(terms);\n        }\n\n        // Tracing\n\n        if (this.$_root._tracer) {\n            this.$_root._tracer._combine(obj, [this, source]);\n        }\n\n        // Rebuild\n\n        return obj.$_mutateRebuild();\n    }\n\n    extend(options) {\n\n        Assert(!options.base, 'Cannot extend type with another base');\n\n        return Extend.type(this, options);\n    }\n\n    extract(path) {\n\n        path = Array.isArray(path) ? path : path.split('.');\n        return this._ids.reach(path);\n    }\n\n    fork(paths, adjuster) {\n\n        Assert(!this._inRuleset(), 'Cannot fork inside a ruleset');\n\n        let obj = this;                                             // eslint-disable-line consistent-this\n        for (let path of [].concat(paths)) {\n            path = Array.isArray(path) ? path : path.split('.');\n            obj = obj._ids.fork(path, adjuster, obj);\n        }\n\n        obj.$_temp.ruleset = false;\n        return obj;\n    }\n\n    rule(options) {\n\n        const def = this._definition;\n        Common.assertOptions(options, Object.keys(def.modifiers));\n\n        Assert(this.$_temp.ruleset !== false, 'Cannot apply rules to empty ruleset or the last rule added does not support rule properties');\n        const start = this.$_temp.ruleset === null ? this._rules.length - 1 : this.$_temp.ruleset;\n        Assert(start >= 0 && start < this._rules.length, 'Cannot apply rules to empty ruleset');\n\n        const obj = this.clone();\n\n        for (let i = start; i < obj._rules.length; ++i) {\n            const original = obj._rules[i];\n            const rule = Clone(original);\n\n            for (const name in options) {\n                def.modifiers[name](rule, options[name]);\n                Assert(rule.name === original.name, 'Cannot change rule name');\n            }\n\n            obj._rules[i] = rule;\n\n            if (obj._singleRules.get(rule.name) === original) {\n                obj._singleRules.set(rule.name, rule);\n            }\n        }\n\n        obj.$_temp.ruleset = false;\n        return obj.$_mutateRebuild();\n    }\n\n    get ruleset() {\n\n        Assert(!this._inRuleset(), 'Cannot start a new ruleset without closing the previous one');\n\n        const obj = this.clone();\n        obj.$_temp.ruleset = obj._rules.length;\n        return obj;\n    }\n\n    get $() {\n\n        return this.ruleset;\n    }\n\n    tailor(targets) {\n\n        targets = [].concat(targets);\n\n        Assert(!this._inRuleset(), 'Cannot tailor inside a ruleset');\n\n        let obj = this;                                                     // eslint-disable-line consistent-this\n\n        if (this.$_terms.alterations) {\n            for (const { target, adjuster } of this.$_terms.alterations) {\n                if (targets.includes(target)) {\n                    obj = adjuster(obj);\n                    Assert(Common.isSchema(obj), 'Alteration adjuster for', target, 'failed to return a schema object');\n                }\n            }\n        }\n\n        obj = obj.$_modify({ each: (item) => item.tailor(targets), ref: false });\n        obj.$_temp.ruleset = false;\n        return obj.$_mutateRebuild();\n    }\n\n    tracer() {\n\n        return Trace.location ? Trace.location(this) : this;                // $lab:coverage:ignore$\n    }\n\n    validate(value, options) {\n\n        return Validator.entry(value, this, options);\n    }\n\n    validateAsync(value, options) {\n\n        return Validator.entryAsync(value, this, options);\n    }\n\n    // Extensions\n\n    $_addRule(options) {\n\n        // Normalize rule\n\n        if (typeof options === 'string') {\n            options = { name: options };\n        }\n\n        Assert(options && typeof options === 'object', 'Invalid options');\n        Assert(options.name && typeof options.name === 'string', 'Invalid rule name');\n\n        for (const key in options) {\n            Assert(key[0] !== '_', 'Cannot set private rule properties');\n        }\n\n        const rule = Object.assign({}, options);        // Shallow cloned\n        rule._resolve = [];\n        rule.method = rule.method || rule.name;\n\n        const definition = this._definition.rules[rule.method];\n        const args = rule.args;\n\n        Assert(definition, 'Unknown rule', rule.method);\n\n        // Args\n\n        const obj = this.clone();\n\n        if (args) {\n            Assert(Object.keys(args).length === 1 || Object.keys(args).length === this._definition.rules[rule.name].args.length, 'Invalid rule definition for', this.type, rule.name);\n\n            for (const key in args) {\n                let arg = args[key];\n\n                if (definition.argsByName) {\n                    const resolver = definition.argsByName.get(key);\n\n                    if (resolver.ref &&\n                        Common.isResolvable(arg)) {\n\n                        rule._resolve.push(key);\n                        obj.$_mutateRegister(arg);\n                    }\n                    else {\n                        if (resolver.normalize) {\n                            arg = resolver.normalize(arg);\n                            args[key] = arg;\n                        }\n\n                        if (resolver.assert) {\n                            const error = Common.validateArg(arg, key, resolver);\n                            Assert(!error, error, 'or reference');\n                        }\n                    }\n                }\n\n                if (arg === undefined) {\n                    delete args[key];\n                    continue;\n                }\n\n                args[key] = arg;\n            }\n        }\n\n        // Unique rules\n\n        if (!definition.multi) {\n            obj._ruleRemove(rule.name, { clone: false });\n            obj._singleRules.set(rule.name, rule);\n        }\n\n        if (obj.$_temp.ruleset === false) {\n            obj.$_temp.ruleset = null;\n        }\n\n        if (definition.priority) {\n            obj._rules.unshift(rule);\n        }\n        else {\n            obj._rules.push(rule);\n        }\n\n        return obj;\n    }\n\n    $_compile(schema, options) {\n\n        return Compile.schema(this.$_root, schema, options);\n    }\n\n    $_createError(code, value, local, state, prefs, options = {}) {\n\n        const flags = options.flags !== false ? this._flags : {};\n        const messages = options.messages ? Messages.merge(this._definition.messages, options.messages) : this._definition.messages;\n        return new Errors.Report(code, value, local, flags, messages, state, prefs);\n    }\n\n    $_getFlag(name) {\n\n        return this._flags[name];\n    }\n\n    $_getRule(name) {\n\n        return this._singleRules.get(name);\n    }\n\n    $_mapLabels(path) {\n\n        path = Array.isArray(path) ? path : path.split('.');\n        return this._ids.labels(path);\n    }\n\n    $_match(value, state, prefs, overrides) {\n\n        prefs = Object.assign({}, prefs);       // Shallow cloned\n        prefs.abortEarly = true;\n        prefs._externals = false;\n\n        state.snapshot();\n        const result = !Validator.validate(value, this, state, prefs, overrides).errors;\n        state.restore();\n\n        return result;\n    }\n\n    $_modify(options) {\n\n        Common.assertOptions(options, ['each', 'once', 'ref', 'schema']);\n        return Modify.schema(this, options) || this;\n    }\n\n    $_mutateRebuild() {\n\n        Assert(!this._inRuleset(), 'Cannot add this rule inside a ruleset');\n\n        this._refs.reset();\n        this._ids.reset();\n\n        const each = (item, { source, name, path, key }) => {\n\n            const family = this._definition[source][name] && this._definition[source][name].register;\n            if (family !== false) {\n                this.$_mutateRegister(item, { family, key });\n            }\n        };\n\n        this.$_modify({ each });\n\n        if (this._definition.rebuild) {\n            this._definition.rebuild(this);\n        }\n\n        this.$_temp.ruleset = false;\n        return this;\n    }\n\n    $_mutateRegister(schema, { family, key } = {}) {\n\n        this._refs.register(schema, family);\n        this._ids.register(schema, { key });\n    }\n\n    $_property(name) {\n\n        return this._definition.properties[name];\n    }\n\n    $_reach(path) {\n\n        return this._ids.reach(path);\n    }\n\n    $_rootReferences() {\n\n        return this._refs.roots();\n    }\n\n    $_setFlag(name, value, options = {}) {\n\n        Assert(name[0] === '_' || !this._inRuleset(), 'Cannot set flag inside a ruleset');\n\n        const flag = this._definition.flags[name] || {};\n        if (DeepEqual(value, flag.default)) {\n            value = undefined;\n        }\n\n        if (DeepEqual(value, this._flags[name])) {\n            return this;\n        }\n\n        const obj = options.clone !== false ? this.clone() : this;\n\n        if (value !== undefined) {\n            obj._flags[name] = value;\n            obj.$_mutateRegister(value);\n        }\n        else {\n            delete obj._flags[name];\n        }\n\n        if (name[0] !== '_') {\n            obj.$_temp.ruleset = false;\n        }\n\n        return obj;\n    }\n\n    $_parent(method, ...args) {\n\n        return this[method][Common.symbols.parent].call(this, ...args);\n    }\n\n    $_validate(value, state, prefs) {\n\n        return Validator.validate(value, this, state, prefs);\n    }\n\n    // Internals\n\n    _assign(target) {\n\n        target.type = this.type;\n\n        target.$_root = this.$_root;\n\n        target.$_temp = Object.assign({}, this.$_temp);\n        target.$_temp.whens = {};\n\n        target._ids = this._ids.clone();\n        target._preferences = this._preferences;\n        target._valids = this._valids && this._valids.clone();\n        target._invalids = this._invalids && this._invalids.clone();\n        target._rules = this._rules.slice();\n        target._singleRules = Clone(this._singleRules, { shallow: true });\n        target._refs = this._refs.clone();\n        target._flags = Object.assign({}, this._flags);\n        target._cache = null;\n\n        target.$_terms = {};\n        for (const key in this.$_terms) {\n            target.$_terms[key] = this.$_terms[key] ? this.$_terms[key].slice() : null;\n        }\n\n        // Backwards compatibility\n\n        target.$_super = {};\n        for (const override in this.$_super) {\n            target.$_super[override] = this._super[override].bind(target);\n        }\n\n        return target;\n    }\n\n    _bare() {\n\n        const obj = this.clone();\n        obj._reset();\n\n        const terms = obj._definition.terms;\n        for (const name in terms) {\n            const term = terms[name];\n            obj.$_terms[name] = term.init;\n        }\n\n        return obj.$_mutateRebuild();\n    }\n\n    _default(flag, value, options = {}) {\n\n        Common.assertOptions(options, 'literal');\n\n        Assert(value !== undefined, 'Missing', flag, 'value');\n        Assert(typeof value === 'function' || !options.literal, 'Only function value supports literal option');\n\n        if (typeof value === 'function' &&\n            options.literal) {\n\n            value = {\n                [Common.symbols.literal]: true,\n                literal: value\n            };\n        }\n\n        const obj = this.$_setFlag(flag, value);\n        return obj;\n    }\n\n    _generate(value, state, prefs) {\n\n        if (!this.$_terms.whens) {\n            return { schema: this };\n        }\n\n        // Collect matching whens\n\n        const whens = [];\n        const ids = [];\n        for (let i = 0; i < this.$_terms.whens.length; ++i) {\n            const when = this.$_terms.whens[i];\n\n            if (when.concat) {\n                whens.push(when.concat);\n                ids.push(`${i}.concat`);\n                continue;\n            }\n\n            const input = when.ref ? when.ref.resolve(value, state, prefs) : value;\n            const tests = when.is ? [when] : when.switch;\n            const before = ids.length;\n\n            for (let j = 0; j < tests.length; ++j) {\n                const { is, then, otherwise } = tests[j];\n\n                const baseId = `${i}${when.switch ? '.' + j : ''}`;\n                if (is.$_match(input, state.nest(is, `${baseId}.is`), prefs)) {\n                    if (then) {\n                        const localState = state.localize([...state.path, `${baseId}.then`], state.ancestors, state.schemas);\n                        const { schema: generated, id } = then._generate(value, localState, prefs);\n                        whens.push(generated);\n                        ids.push(`${baseId}.then${id ? `(${id})` : ''}`);\n                        break;\n                    }\n                }\n                else if (otherwise) {\n                    const localState = state.localize([...state.path, `${baseId}.otherwise`], state.ancestors, state.schemas);\n                    const { schema: generated, id } = otherwise._generate(value, localState, prefs);\n                    whens.push(generated);\n                    ids.push(`${baseId}.otherwise${id ? `(${id})` : ''}`);\n                    break;\n                }\n            }\n\n            if (when.break &&\n                ids.length > before) {          // Something matched\n\n                break;\n            }\n        }\n\n        // Check cache\n\n        const id = ids.join(', ');\n        state.mainstay.tracer.debug(state, 'rule', 'when', id);\n\n        if (!id) {\n            return { schema: this };\n        }\n\n        if (!state.mainstay.tracer.active &&\n            this.$_temp.whens[id]) {\n\n            return { schema: this.$_temp.whens[id], id };\n        }\n\n        // Generate dynamic schema\n\n        let obj = this;                                             // eslint-disable-line consistent-this\n        if (this._definition.generate) {\n            obj = this._definition.generate(this, value, state, prefs);\n        }\n\n        // Apply whens\n\n        for (const when of whens) {\n            obj = obj.concat(when);\n        }\n\n        // Tracing\n\n        if (this.$_root._tracer) {\n            this.$_root._tracer._combine(obj, [this, ...whens]);\n        }\n\n        // Cache result\n\n        this.$_temp.whens[id] = obj;\n        return { schema: obj, id };\n    }\n\n    _inner(type, values, options = {}) {\n\n        Assert(!this._inRuleset(), `Cannot set ${type} inside a ruleset`);\n\n        const obj = this.clone();\n        if (!obj.$_terms[type] ||\n            options.override) {\n\n            obj.$_terms[type] = [];\n        }\n\n        if (options.single) {\n            obj.$_terms[type].push(values);\n        }\n        else {\n            obj.$_terms[type].push(...values);\n        }\n\n        obj.$_temp.ruleset = false;\n        return obj;\n    }\n\n    _inRuleset() {\n\n        return this.$_temp.ruleset !== null && this.$_temp.ruleset !== false;\n    }\n\n    _ruleRemove(name, options = {}) {\n\n        if (!this._singleRules.has(name)) {\n            return this;\n        }\n\n        const obj = options.clone !== false ? this.clone() : this;\n\n        obj._singleRules.delete(name);\n\n        const filtered = [];\n        for (let i = 0; i < obj._rules.length; ++i) {\n            const test = obj._rules[i];\n            if (test.name === name &&\n                !test.keep) {\n\n                if (obj._inRuleset() &&\n                    i < obj.$_temp.ruleset) {\n\n                    --obj.$_temp.ruleset;\n                }\n\n                continue;\n            }\n\n            filtered.push(test);\n        }\n\n        obj._rules = filtered;\n        return obj;\n    }\n\n    _values(values, key) {\n\n        Common.verifyFlat(values, key.slice(1, -1));\n\n        const obj = this.clone();\n\n        const override = values[0] === Common.symbols.override;\n        if (override) {\n            values = values.slice(1);\n        }\n\n        if (!obj[key] &&\n            values.length) {\n\n            obj[key] = new Values();\n        }\n        else if (override) {\n            obj[key] = values.length ? new Values() : null;\n            obj.$_mutateRebuild();\n        }\n\n        if (!obj[key]) {\n            return obj;\n        }\n\n        if (override) {\n            obj[key].override();\n        }\n\n        for (const value of values) {\n            Assert(value !== undefined, 'Cannot call allow/valid/invalid with undefined');\n            Assert(value !== Common.symbols.override, 'Override must be the first value');\n\n            const other = key === '_invalids' ? '_valids' : '_invalids';\n            if (obj[other]) {\n                obj[other].remove(value);\n                if (!obj[other].length) {\n                    Assert(key === '_valids' || !obj._flags.only, 'Setting invalid value', value, 'leaves schema rejecting all values due to previous valid rule');\n                    obj[other] = null;\n                }\n            }\n\n            obj[key].add(value, obj._refs);\n        }\n\n        return obj;\n    }\n};\n\n\ninternals.Base.prototype[Common.symbols.any] = {\n    version: Common.version,\n    compile: Compile.compile,\n    root: '$_root'\n};\n\n\ninternals.Base.prototype.isImmutable = true;                // Prevents Hoek from deep cloning schema objects (must be on prototype)\n\n\n// Aliases\n\ninternals.Base.prototype.deny = internals.Base.prototype.invalid;\ninternals.Base.prototype.disallow = internals.Base.prototype.invalid;\ninternals.Base.prototype.equal = internals.Base.prototype.valid;\ninternals.Base.prototype.exist = internals.Base.prototype.required;\ninternals.Base.prototype.not = internals.Base.prototype.invalid;\ninternals.Base.prototype.options = internals.Base.prototype.prefs;\ninternals.Base.prototype.preferences = internals.Base.prototype.prefs;\n\n\nmodule.exports = new internals.Base();\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\n\nconst Base = require('../base');\nconst Common = require('../common');\nconst Messages = require('../messages');\n\n\nconst internals = {};\n\n\nmodule.exports = Base.extend({\n\n    type: 'any',\n\n    flags: {\n\n        only: { default: false }\n    },\n\n    terms: {\n\n        alterations: { init: null },\n        examples: { init: null },\n        externals: { init: null },\n        metas: { init: [] },\n        notes: { init: [] },\n        shared: { init: null },\n        tags: { init: [] },\n        whens: { init: null }\n    },\n\n    rules: {\n\n        custom: {\n            method(method, description) {\n\n                Assert(typeof method === 'function', 'Method must be a function');\n                Assert(description === undefined || description && typeof description === 'string', 'Description must be a non-empty string');\n\n                return this.$_addRule({ name: 'custom', args: { method, description } });\n            },\n            validate(value, helpers, { method }) {\n\n                try {\n                    return method(value, helpers);\n                }\n                catch (err) {\n                    return helpers.error('any.custom', { error: err });\n                }\n            },\n            args: ['method', 'description'],\n            multi: true\n        },\n\n        messages: {\n            method(messages) {\n\n                return this.prefs({ messages });\n            }\n        },\n\n        shared: {\n            method(schema) {\n\n                Assert(Common.isSchema(schema) && schema._flags.id, 'Schema must be a schema with an id');\n\n                const obj = this.clone();\n                obj.$_terms.shared = obj.$_terms.shared || [];\n                obj.$_terms.shared.push(schema);\n                obj.$_mutateRegister(schema);\n                return obj;\n            }\n        },\n\n        warning: {\n            method(code, local) {\n\n                Assert(code && typeof code === 'string', 'Invalid warning code');\n\n                return this.$_addRule({ name: 'warning', args: { code, local }, warn: true });\n            },\n            validate(value, helpers, { code, local }) {\n\n                return helpers.error(code, local);\n            },\n            args: ['code', 'local'],\n            multi: true\n        }\n    },\n\n    modifiers: {\n\n        keep(rule, enabled = true) {\n\n            rule.keep = enabled;\n        },\n\n        message(rule, message) {\n\n            rule.message = Messages.compile(message);\n        },\n\n        warn(rule, enabled = true) {\n\n            rule.warn = enabled;\n        }\n    },\n\n    manifest: {\n\n        build(obj, desc) {\n\n            for (const key in desc) {\n                const values = desc[key];\n\n                if (['examples', 'externals', 'metas', 'notes', 'tags'].includes(key)) {\n                    for (const value of values) {\n                        obj = obj[key.slice(0, -1)](value);\n                    }\n\n                    continue;\n                }\n\n                if (key === 'alterations') {\n                    const alter = {};\n                    for (const { target, adjuster } of values) {\n                        alter[target] = adjuster;\n                    }\n\n                    obj = obj.alter(alter);\n                    continue;\n                }\n\n                if (key === 'whens') {\n                    for (const value of values) {\n                        const { ref, is, not, then, otherwise, concat } = value;\n                        if (concat) {\n                            obj = obj.concat(concat);\n                        }\n                        else if (ref) {\n                            obj = obj.when(ref, { is, not, then, otherwise, switch: value.switch, break: value.break });\n                        }\n                        else {\n                            obj = obj.when(is, { then, otherwise, break: value.break });\n                        }\n                    }\n\n                    continue;\n                }\n\n                if (key === 'shared') {\n                    for (const value of values) {\n                        obj = obj.shared(value);\n                    }\n                }\n            }\n\n            return obj;\n        }\n    },\n\n    messages: {\n        'any.custom': '{{#label}} failed custom validation because {{#error.message}}',\n        'any.default': '{{#label}} threw an error when running default method',\n        'any.failover': '{{#label}} threw an error when running failover method',\n        'any.invalid': '{{#label}} contains an invalid value',\n        'any.only': '{{#label}} must be {if(#valids.length == 1, \"\", \"one of \")}{{#valids}}',\n        'any.ref': '{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}',\n        'any.required': '{{#label}} is required',\n        'any.unknown': '{{#label}} is not allowed'\n    }\n});\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\nconst Merge = require('@hapi/hoek/lib/merge');\n\nconst Any = require('./any');\nconst Common = require('../common');\nconst Compile = require('../compile');\nconst Errors = require('../errors');\nconst Ref = require('../ref');\n\n\nconst internals = {};\n\n\nmodule.exports = Any.extend({\n\n    type: 'alternatives',\n\n    flags: {\n\n        match: { default: 'any' }                 // 'any', 'one', 'all'\n    },\n\n    terms: {\n\n        matches: { init: [], register: Ref.toSibling }\n    },\n\n    args(schema, ...schemas) {\n\n        if (schemas.length === 1) {\n            if (Array.isArray(schemas[0])) {\n                return schema.try(...schemas[0]);\n            }\n        }\n\n        return schema.try(...schemas);\n    },\n\n    validate(value, helpers) {\n\n        const { schema, error, state, prefs } = helpers;\n\n        // Match all or one\n\n        if (schema._flags.match) {\n            const matched = [];\n            const failed = [];\n\n            for (let i = 0; i < schema.$_terms.matches.length; ++i) {\n                const item = schema.$_terms.matches[i];\n                const localState = state.nest(item.schema, `match.${i}`);\n                localState.snapshot();\n\n                const result = item.schema.$_validate(value, localState, prefs);\n                if (!result.errors) {\n                    matched.push(result.value);\n                    localState.commit();\n                }\n                else {\n                    failed.push(result.errors);\n                    localState.restore();\n                }\n            }\n\n            if (matched.length === 0) {\n                const context = {\n                    details: failed.map((f) => Errors.details(f, { override: false }))\n                };\n\n                return { errors: error('alternatives.any', context) };\n            }\n\n            // Match one\n\n            if (schema._flags.match === 'one') {\n                return matched.length === 1 ? { value: matched[0] } : { errors: error('alternatives.one') };\n            }\n\n            // Match all\n\n            if (matched.length !== schema.$_terms.matches.length) {\n                const context = {\n                    details: failed.map((f) => Errors.details(f, { override: false }))\n                };\n\n                return { errors: error('alternatives.all', context) };\n            }\n\n            const isAnyObj = (alternative) => {\n\n                return alternative.$_terms.matches.some((v) => {\n\n                    return v.schema.type === 'object' ||\n                        (v.schema.type === 'alternatives' && isAnyObj(v.schema));\n                });\n            };\n\n            return isAnyObj(schema) ? { value: matched.reduce((acc, v) => Merge(acc, v, { mergeArrays: false })) } : { value: matched[matched.length - 1] };\n        }\n\n        // Match any\n\n        const errors = [];\n        for (let i = 0; i < schema.$_terms.matches.length; ++i) {\n            const item = schema.$_terms.matches[i];\n\n            // Try\n\n            if (item.schema) {\n                const localState = state.nest(item.schema, `match.${i}`);\n                localState.snapshot();\n\n                const result = item.schema.$_validate(value, localState, prefs);\n                if (!result.errors) {\n                    localState.commit();\n                    return result;\n                }\n\n                localState.restore();\n                errors.push({ schema: item.schema, reports: result.errors });\n                continue;\n            }\n\n            // Conditional\n\n            const input = item.ref ? item.ref.resolve(value, state, prefs) : value;\n            const tests = item.is ? [item] : item.switch;\n\n            for (let j = 0; j < tests.length; ++j) {\n                const test = tests[j];\n                const { is, then, otherwise } = test;\n\n                const id = `match.${i}${item.switch ? '.' + j : ''}`;\n                if (!is.$_match(input, state.nest(is, `${id}.is`), prefs)) {\n                    if (otherwise) {\n                        return otherwise.$_validate(value, state.nest(otherwise, `${id}.otherwise`), prefs);\n                    }\n                }\n                else if (then) {\n                    return then.$_validate(value, state.nest(then, `${id}.then`), prefs);\n                }\n            }\n        }\n\n        return internals.errors(errors, helpers);\n    },\n\n    rules: {\n\n        conditional: {\n            method(condition, options) {\n\n                Assert(!this._flags._endedSwitch, 'Unreachable condition');\n                Assert(!this._flags.match, 'Cannot combine match mode', this._flags.match, 'with conditional rule');\n                Assert(options.break === undefined, 'Cannot use break option with alternatives conditional');\n\n                const obj = this.clone();\n\n                const match = Compile.when(obj, condition, options);\n                const conditions = match.is ? [match] : match.switch;\n                for (const item of conditions) {\n                    if (item.then &&\n                        item.otherwise) {\n\n                        obj.$_setFlag('_endedSwitch', true, { clone: false });\n                        break;\n                    }\n                }\n\n                obj.$_terms.matches.push(match);\n                return obj.$_mutateRebuild();\n            }\n        },\n\n        match: {\n            method(mode) {\n\n                Assert(['any', 'one', 'all'].includes(mode), 'Invalid alternatives match mode', mode);\n\n                if (mode !== 'any') {\n                    for (const match of this.$_terms.matches) {\n                        Assert(match.schema, 'Cannot combine match mode', mode, 'with conditional rules');\n                    }\n                }\n\n                return this.$_setFlag('match', mode);\n            }\n        },\n\n        try: {\n            method(...schemas) {\n\n                Assert(schemas.length, 'Missing alternative schemas');\n                Common.verifyFlat(schemas, 'try');\n\n                Assert(!this._flags._endedSwitch, 'Unreachable condition');\n\n                const obj = this.clone();\n                for (const schema of schemas) {\n                    obj.$_terms.matches.push({ schema: obj.$_compile(schema) });\n                }\n\n                return obj.$_mutateRebuild();\n            }\n        }\n    },\n\n    overrides: {\n\n        label(name) {\n\n            const obj = this.$_parent('label', name);\n            const each = (item, source) => {\n\n                return source.path[0] !== 'is' && typeof item._flags.label !== 'string' ? item.label(name) : undefined;\n            };\n\n            return obj.$_modify({ each, ref: false });\n        }\n    },\n\n    rebuild(schema) {\n\n        // Flag when an alternative type is an array\n\n        const each = (item) => {\n\n            if (Common.isSchema(item) &&\n                item.type === 'array') {\n\n                schema.$_setFlag('_arrayItems', true, { clone: false });\n            }\n        };\n\n        schema.$_modify({ each });\n    },\n\n    manifest: {\n\n        build(obj, desc) {\n\n            if (desc.matches) {\n                for (const match of desc.matches) {\n                    const { schema, ref, is, not, then, otherwise } = match;\n                    if (schema) {\n                        obj = obj.try(schema);\n                    }\n                    else if (ref) {\n                        obj = obj.conditional(ref, { is, then, not, otherwise, switch: match.switch });\n                    }\n                    else {\n                        obj = obj.conditional(is, { then, otherwise });\n                    }\n                }\n            }\n\n            return obj;\n        }\n    },\n\n    messages: {\n        'alternatives.all': '{{#label}} does not match all of the required types',\n        'alternatives.any': '{{#label}} does not match any of the allowed types',\n        'alternatives.match': '{{#label}} does not match any of the allowed types',\n        'alternatives.one': '{{#label}} matches more than one allowed type',\n        'alternatives.types': '{{#label}} must be one of {{#types}}'\n    }\n});\n\n\n// Helpers\n\ninternals.errors = function (failures, { error, state }) {\n\n    // Nothing matched due to type criteria rules\n\n    if (!failures.length) {\n        return { errors: error('alternatives.any') };\n    }\n\n    // Single error\n\n    if (failures.length === 1) {\n        return { errors: failures[0].reports };\n    }\n\n    // Analyze reasons\n\n    const valids = new Set();\n    const complex = [];\n\n    for (const { reports, schema } of failures) {\n\n        // Multiple errors (!abortEarly)\n\n        if (reports.length > 1) {\n            return internals.unmatched(failures, error);\n        }\n\n        // Custom error\n\n        const report = reports[0];\n        if (report instanceof Errors.Report === false) {\n            return internals.unmatched(failures, error);\n        }\n\n        // Internal object or array error\n\n        if (report.state.path.length !== state.path.length) {\n            complex.push({ type: schema.type, report });\n            continue;\n        }\n\n        // Valids\n\n        if (report.code === 'any.only') {\n            for (const valid of report.local.valids) {\n                valids.add(valid);\n            }\n\n            continue;\n        }\n\n        // Base type\n\n        const [type, code] = report.code.split('.');\n        if (code !== 'base') {\n            complex.push({ type: schema.type, report });\n        }\n        else if (report.code === 'object.base') {\n            valids.add(report.local.type);\n        }\n        else {\n            valids.add(type);\n        }\n    }\n\n    // All errors are base types or valids\n\n    if (!complex.length) {\n        return { errors: error('alternatives.types', { types: [...valids] }) };\n    }\n\n    // Single complex error\n\n    if (complex.length === 1) {\n        return { errors: complex[0].report };\n    }\n\n    return internals.unmatched(failures, error);\n};\n\n\ninternals.unmatched = function (failures, error) {\n\n    const errors = [];\n    for (const failure of failures) {\n        errors.push(...failure.reports);\n    }\n\n    return { errors: error('alternatives.match', Errors.details(errors, { override: false })) };\n};\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\nconst DeepEqual = require('@hapi/hoek/lib/deepEqual');\nconst Reach = require('@hapi/hoek/lib/reach');\n\nconst Any = require('./any');\nconst Common = require('../common');\nconst Compile = require('../compile');\n\n\nconst internals = {};\n\n\nmodule.exports = Any.extend({\n\n    type: 'array',\n\n    flags: {\n\n        single: { default: false },\n        sparse: { default: false }\n    },\n\n    terms: {\n\n        items: { init: [], manifest: 'schema' },\n        ordered: { init: [], manifest: 'schema' },\n\n        _exclusions: { init: [] },\n        _inclusions: { init: [] },\n        _requireds: { init: [] }\n    },\n\n    coerce: {\n        from: 'object',\n        method(value, { schema, state, prefs }) {\n\n            if (!Array.isArray(value)) {\n                return;\n            }\n\n            const sort = schema.$_getRule('sort');\n            if (!sort) {\n                return;\n            }\n\n            return internals.sort(schema, value, sort.args.options, state, prefs);\n        }\n    },\n\n    validate(value, { schema, error }) {\n\n        if (!Array.isArray(value)) {\n            if (schema._flags.single) {\n                const single = [value];\n                single[Common.symbols.arraySingle] = true;\n                return { value: single };\n            }\n\n            return { errors: error('array.base') };\n        }\n\n        if (!schema.$_getRule('items') &&\n            !schema.$_terms.externals) {\n\n            return;\n        }\n\n        return { value: value.slice() };        // Clone the array so that we don't modify the original\n    },\n\n    rules: {\n\n        has: {\n            method(schema) {\n\n                schema = this.$_compile(schema, { appendPath: true });\n                const obj = this.$_addRule({ name: 'has', args: { schema } });\n                obj.$_mutateRegister(schema);\n                return obj;\n            },\n            validate(value, { state, prefs, error }, { schema: has }) {\n\n                const ancestors = [value, ...state.ancestors];\n                for (let i = 0; i < value.length; ++i) {\n                    const localState = state.localize([...state.path, i], ancestors, has);\n                    if (has.$_match(value[i], localState, prefs)) {\n                        return value;\n                    }\n                }\n\n                const patternLabel = has._flags.label;\n                if (patternLabel) {\n                    return error('array.hasKnown', { patternLabel });\n                }\n\n                return error('array.hasUnknown', null);\n            },\n            multi: true\n        },\n\n        items: {\n            method(...schemas) {\n\n                Common.verifyFlat(schemas, 'items');\n\n                const obj = this.$_addRule('items');\n\n                for (let i = 0; i < schemas.length; ++i) {\n                    const type = Common.tryWithPath(() => this.$_compile(schemas[i]), i, { append: true });\n                    obj.$_terms.items.push(type);\n                }\n\n                return obj.$_mutateRebuild();\n            },\n            validate(value, { schema, error, state, prefs, errorsArray }) {\n\n                const requireds = schema.$_terms._requireds.slice();\n                const ordereds = schema.$_terms.ordered.slice();\n                const inclusions = [...schema.$_terms._inclusions, ...requireds];\n\n                const wasArray = !value[Common.symbols.arraySingle];\n                delete value[Common.symbols.arraySingle];\n\n                const errors = errorsArray();\n\n                let il = value.length;\n                for (let i = 0; i < il; ++i) {\n                    const item = value[i];\n\n                    let errored = false;\n                    let isValid = false;\n\n                    const key = wasArray ? i : new Number(i);       // eslint-disable-line no-new-wrappers\n                    const path = [...state.path, key];\n\n                    // Sparse\n\n                    if (!schema._flags.sparse &&\n                        item === undefined) {\n\n                        errors.push(error('array.sparse', { key, path, pos: i, value: undefined }, state.localize(path)));\n                        if (prefs.abortEarly) {\n                            return errors;\n                        }\n\n                        ordereds.shift();\n                        continue;\n                    }\n\n                    // Exclusions\n\n                    const ancestors = [value, ...state.ancestors];\n\n                    for (const exclusion of schema.$_terms._exclusions) {\n                        if (!exclusion.$_match(item, state.localize(path, ancestors, exclusion), prefs, { presence: 'ignore' })) {\n                            continue;\n                        }\n\n                        errors.push(error('array.excludes', { pos: i, value: item }, state.localize(path)));\n                        if (prefs.abortEarly) {\n                            return errors;\n                        }\n\n                        errored = true;\n                        ordereds.shift();\n                        break;\n                    }\n\n                    if (errored) {\n                        continue;\n                    }\n\n                    // Ordered\n\n                    if (schema.$_terms.ordered.length) {\n                        if (ordereds.length) {\n                            const ordered = ordereds.shift();\n                            const res = ordered.$_validate(item, state.localize(path, ancestors, ordered), prefs);\n                            if (!res.errors) {\n                                if (ordered._flags.result === 'strip') {\n                                    internals.fastSplice(value, i);\n                                    --i;\n                                    --il;\n                                }\n                                else if (!schema._flags.sparse && res.value === undefined) {\n                                    errors.push(error('array.sparse', { key, path, pos: i, value: undefined }, state.localize(path)));\n                                    if (prefs.abortEarly) {\n                                        return errors;\n                                    }\n\n                                    continue;\n                                }\n                                else {\n                                    value[i] = res.value;\n                                }\n                            }\n                            else {\n                                errors.push(...res.errors);\n                                if (prefs.abortEarly) {\n                                    return errors;\n                                }\n                            }\n\n                            continue;\n                        }\n                        else if (!schema.$_terms.items.length) {\n                            errors.push(error('array.orderedLength', { pos: i, limit: schema.$_terms.ordered.length }));\n                            if (prefs.abortEarly) {\n                                return errors;\n                            }\n\n                            break;      // No reason to continue since there are no other rules to validate other than array.orderedLength\n                        }\n                    }\n\n                    // Requireds\n\n                    const requiredChecks = [];\n                    let jl = requireds.length;\n                    for (let j = 0; j < jl; ++j) {\n                        const localState = state.localize(path, ancestors, requireds[j]);\n                        localState.snapshot();\n\n                        const res = requireds[j].$_validate(item, localState, prefs);\n                        requiredChecks[j] = res;\n\n                        if (!res.errors) {\n                            localState.commit();\n                            value[i] = res.value;\n                            isValid = true;\n                            internals.fastSplice(requireds, j);\n                            --j;\n                            --jl;\n\n                            if (!schema._flags.sparse &&\n                                res.value === undefined) {\n\n                                errors.push(error('array.sparse', { key, path, pos: i, value: undefined }, state.localize(path)));\n                                if (prefs.abortEarly) {\n                                    return errors;\n                                }\n                            }\n\n                            break;\n                        }\n\n                        localState.restore();\n                    }\n\n                    if (isValid) {\n                        continue;\n                    }\n\n                    // Inclusions\n\n                    const stripUnknown = prefs.stripUnknown && !!prefs.stripUnknown.arrays || false;\n\n                    jl = inclusions.length;\n                    for (const inclusion of inclusions) {\n\n                        // Avoid re-running requireds that already didn't match in the previous loop\n\n                        let res;\n                        const previousCheck = requireds.indexOf(inclusion);\n                        if (previousCheck !== -1) {\n                            res = requiredChecks[previousCheck];\n                        }\n                        else {\n                            const localState = state.localize(path, ancestors, inclusion);\n                            localState.snapshot();\n\n                            res = inclusion.$_validate(item, localState, prefs);\n                            if (!res.errors) {\n                                localState.commit();\n                                if (inclusion._flags.result === 'strip') {\n                                    internals.fastSplice(value, i);\n                                    --i;\n                                    --il;\n                                }\n                                else if (!schema._flags.sparse &&\n                                    res.value === undefined) {\n\n                                    errors.push(error('array.sparse', { key, path, pos: i, value: undefined }, state.localize(path)));\n                                    errored = true;\n                                }\n                                else {\n                                    value[i] = res.value;\n                                }\n\n                                isValid = true;\n                                break;\n                            }\n\n                            localState.restore();\n                        }\n\n                        // Return the actual error if only one inclusion defined\n\n                        if (jl === 1) {\n                            if (stripUnknown) {\n                                internals.fastSplice(value, i);\n                                --i;\n                                --il;\n                                isValid = true;\n                                break;\n                            }\n\n                            errors.push(...res.errors);\n                            if (prefs.abortEarly) {\n                                return errors;\n                            }\n\n                            errored = true;\n                            break;\n                        }\n                    }\n\n                    if (errored) {\n                        continue;\n                    }\n\n                    if ((schema.$_terms._inclusions.length || schema.$_terms._requireds.length) &&\n                        !isValid) {\n\n                        if (stripUnknown) {\n                            internals.fastSplice(value, i);\n                            --i;\n                            --il;\n                            continue;\n                        }\n\n                        errors.push(error('array.includes', { pos: i, value: item }, state.localize(path)));\n                        if (prefs.abortEarly) {\n                            return errors;\n                        }\n                    }\n                }\n\n                if (requireds.length) {\n                    internals.fillMissedErrors(schema, errors, requireds, value, state, prefs);\n                }\n\n                if (ordereds.length) {\n                    internals.fillOrderedErrors(schema, errors, ordereds, value, state, prefs);\n\n                    if (!errors.length) {\n                        internals.fillDefault(ordereds, value, state, prefs);\n                    }\n                }\n\n                return errors.length ? errors : value;\n            },\n\n            priority: true,\n            manifest: false\n        },\n\n        length: {\n            method(limit) {\n\n                return this.$_addRule({ name: 'length', args: { limit }, operator: '=' });\n            },\n            validate(value, helpers, { limit }, { name, operator, args }) {\n\n                if (Common.compare(value.length, limit, operator)) {\n                    return value;\n                }\n\n                return helpers.error('array.' + name, { limit: args.limit, value });\n            },\n            args: [\n                {\n                    name: 'limit',\n                    ref: true,\n                    assert: Common.limit,\n                    message: 'must be a positive integer'\n                }\n            ]\n        },\n\n        max: {\n            method(limit) {\n\n                return this.$_addRule({ name: 'max', method: 'length', args: { limit }, operator: '<=' });\n            }\n        },\n\n        min: {\n            method(limit) {\n\n                return this.$_addRule({ name: 'min', method: 'length', args: { limit }, operator: '>=' });\n            }\n        },\n\n        ordered: {\n            method(...schemas) {\n\n                Common.verifyFlat(schemas, 'ordered');\n\n                const obj = this.$_addRule('items');\n\n                for (let i = 0; i < schemas.length; ++i) {\n                    const type = Common.tryWithPath(() => this.$_compile(schemas[i]), i, { append: true });\n                    internals.validateSingle(type, obj);\n\n                    obj.$_mutateRegister(type);\n                    obj.$_terms.ordered.push(type);\n                }\n\n                return obj.$_mutateRebuild();\n            }\n        },\n\n        single: {\n            method(enabled) {\n\n                const value = enabled === undefined ? true : !!enabled;\n                Assert(!value || !this._flags._arrayItems, 'Cannot specify single rule when array has array items');\n\n                return this.$_setFlag('single', value);\n            }\n        },\n\n        sort: {\n            method(options = {}) {\n\n                Common.assertOptions(options, ['by', 'order']);\n\n                const settings = {\n                    order: options.order || 'ascending'\n                };\n\n                if (options.by) {\n                    settings.by = Compile.ref(options.by, { ancestor: 0 });\n                    Assert(!settings.by.ancestor, 'Cannot sort by ancestor');\n                }\n\n                return this.$_addRule({ name: 'sort', args: { options: settings } });\n            },\n            validate(value, { error, state, prefs, schema }, { options }) {\n\n                const { value: sorted, errors } = internals.sort(schema, value, options, state, prefs);\n                if (errors) {\n                    return errors;\n                }\n\n                for (let i = 0; i < value.length; ++i) {\n                    if (value[i] !== sorted[i]) {\n                        return error('array.sort', { order: options.order, by: options.by ? options.by.key : 'value' });\n                    }\n                }\n\n                return value;\n            },\n            convert: true\n        },\n\n        sparse: {\n            method(enabled) {\n\n                const value = enabled === undefined ? true : !!enabled;\n\n                if (this._flags.sparse === value) {\n                    return this;\n                }\n\n                const obj = value ? this.clone() : this.$_addRule('items');\n                return obj.$_setFlag('sparse', value, { clone: false });\n            }\n        },\n\n        unique: {\n            method(comparator, options = {}) {\n\n                Assert(!comparator || typeof comparator === 'function' || typeof comparator === 'string', 'comparator must be a function or a string');\n                Common.assertOptions(options, ['ignoreUndefined', 'separator']);\n\n                const rule = { name: 'unique', args: { options, comparator } };\n\n                if (comparator) {\n                    if (typeof comparator === 'string') {\n                        const separator = Common.default(options.separator, '.');\n                        rule.path = separator ? comparator.split(separator) : [comparator];\n                    }\n                    else {\n                        rule.comparator = comparator;\n                    }\n                }\n\n                return this.$_addRule(rule);\n            },\n            validate(value, { state, error, schema }, { comparator: raw, options }, { comparator, path }) {\n\n                const found = {\n                    string: Object.create(null),\n                    number: Object.create(null),\n                    undefined: Object.create(null),\n                    boolean: Object.create(null),\n                    bigint: Object.create(null),\n                    object: new Map(),\n                    function: new Map(),\n                    custom: new Map()\n                };\n\n                const compare = comparator || DeepEqual;\n                const ignoreUndefined = options.ignoreUndefined;\n\n                for (let i = 0; i < value.length; ++i) {\n                    const item = path ? Reach(value[i], path) : value[i];\n                    const records = comparator ? found.custom : found[typeof item];\n                    Assert(records, 'Failed to find unique map container for type', typeof item);\n\n                    if (records instanceof Map) {\n                        const entries = records.entries();\n                        let current;\n                        while (!(current = entries.next()).done) {\n                            if (compare(current.value[0], item)) {\n                                const localState = state.localize([...state.path, i], [value, ...state.ancestors]);\n                                const context = {\n                                    pos: i,\n                                    value: value[i],\n                                    dupePos: current.value[1],\n                                    dupeValue: value[current.value[1]]\n                                };\n\n                                if (path) {\n                                    context.path = raw;\n                                }\n\n                                return error('array.unique', context, localState);\n                            }\n                        }\n\n                        records.set(item, i);\n                    }\n                    else {\n                        if ((!ignoreUndefined || item !== undefined) &&\n                            records[item] !== undefined) {\n\n                            const context = {\n                                pos: i,\n                                value: value[i],\n                                dupePos: records[item],\n                                dupeValue: value[records[item]]\n                            };\n\n                            if (path) {\n                                context.path = raw;\n                            }\n\n                            const localState = state.localize([...state.path, i], [value, ...state.ancestors]);\n                            return error('array.unique', context, localState);\n                        }\n\n                        records[item] = i;\n                    }\n                }\n\n                return value;\n            },\n            args: ['comparator', 'options'],\n            multi: true\n        }\n    },\n\n    cast: {\n        set: {\n            from: Array.isArray,\n            to(value, helpers) {\n\n                return new Set(value);\n            }\n        }\n    },\n\n    rebuild(schema) {\n\n        schema.$_terms._inclusions = [];\n        schema.$_terms._exclusions = [];\n        schema.$_terms._requireds = [];\n\n        for (const type of schema.$_terms.items) {\n            internals.validateSingle(type, schema);\n\n            if (type._flags.presence === 'required') {\n                schema.$_terms._requireds.push(type);\n            }\n            else if (type._flags.presence === 'forbidden') {\n                schema.$_terms._exclusions.push(type);\n            }\n            else {\n                schema.$_terms._inclusions.push(type);\n            }\n        }\n\n        for (const type of schema.$_terms.ordered) {\n            internals.validateSingle(type, schema);\n        }\n    },\n\n    manifest: {\n\n        build(obj, desc) {\n\n            if (desc.items) {\n                obj = obj.items(...desc.items);\n            }\n\n            if (desc.ordered) {\n                obj = obj.ordered(...desc.ordered);\n            }\n\n            return obj;\n        }\n    },\n\n    messages: {\n        'array.base': '{{#label}} must be an array',\n        'array.excludes': '{{#label}} contains an excluded value',\n        'array.hasKnown': '{{#label}} does not contain at least one required match for type {:#patternLabel}',\n        'array.hasUnknown': '{{#label}} does not contain at least one required match',\n        'array.includes': '{{#label}} does not match any of the allowed types',\n        'array.includesRequiredBoth': '{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)',\n        'array.includesRequiredKnowns': '{{#label}} does not contain {{#knownMisses}}',\n        'array.includesRequiredUnknowns': '{{#label}} does not contain {{#unknownMisses}} required value(s)',\n        'array.length': '{{#label}} must contain {{#limit}} items',\n        'array.max': '{{#label}} must contain less than or equal to {{#limit}} items',\n        'array.min': '{{#label}} must contain at least {{#limit}} items',\n        'array.orderedLength': '{{#label}} must contain at most {{#limit}} items',\n        'array.sort': '{{#label}} must be sorted in {#order} order by {{#by}}',\n        'array.sort.mismatching': '{{#label}} cannot be sorted due to mismatching types',\n        'array.sort.unsupported': '{{#label}} cannot be sorted due to unsupported type {#type}',\n        'array.sparse': '{{#label}} must not be a sparse array item',\n        'array.unique': '{{#label}} contains a duplicate value'\n    }\n});\n\n\n// Helpers\n\ninternals.fillMissedErrors = function (schema, errors, requireds, value, state, prefs) {\n\n    const knownMisses = [];\n    let unknownMisses = 0;\n    for (const required of requireds) {\n        const label = required._flags.label;\n        if (label) {\n            knownMisses.push(label);\n        }\n        else {\n            ++unknownMisses;\n        }\n    }\n\n    if (knownMisses.length) {\n        if (unknownMisses) {\n            errors.push(schema.$_createError('array.includesRequiredBoth', value, { knownMisses, unknownMisses }, state, prefs));\n        }\n        else {\n            errors.push(schema.$_createError('array.includesRequiredKnowns', value, { knownMisses }, state, prefs));\n        }\n    }\n    else {\n        errors.push(schema.$_createError('array.includesRequiredUnknowns', value, { unknownMisses }, state, prefs));\n    }\n};\n\n\ninternals.fillOrderedErrors = function (schema, errors, ordereds, value, state, prefs) {\n\n    const requiredOrdereds = [];\n\n    for (const ordered of ordereds) {\n        if (ordered._flags.presence === 'required') {\n            requiredOrdereds.push(ordered);\n        }\n    }\n\n    if (requiredOrdereds.length) {\n        internals.fillMissedErrors(schema, errors, requiredOrdereds, value, state, prefs);\n    }\n};\n\n\ninternals.fillDefault = function (ordereds, value, state, prefs) {\n\n    const overrides = [];\n    let trailingUndefined = true;\n\n    for (let i = ordereds.length - 1; i >= 0; --i) {\n        const ordered = ordereds[i];\n        const ancestors = [value, ...state.ancestors];\n        const override = ordered.$_validate(undefined, state.localize(state.path, ancestors, ordered), prefs).value;\n\n        if (trailingUndefined) {\n            if (override === undefined) {\n                continue;\n            }\n\n            trailingUndefined = false;\n        }\n\n        overrides.unshift(override);\n    }\n\n    if (overrides.length) {\n        value.push(...overrides);\n    }\n};\n\n\ninternals.fastSplice = function (arr, i) {\n\n    let pos = i;\n    while (pos < arr.length) {\n        arr[pos++] = arr[pos];\n    }\n\n    --arr.length;\n};\n\n\ninternals.validateSingle = function (type, obj) {\n\n    if (type.type === 'array' ||\n        type._flags._arrayItems) {\n\n        Assert(!obj._flags.single, 'Cannot specify array item with single rule enabled');\n        obj.$_setFlag('_arrayItems', true, { clone: false });\n    }\n};\n\n\ninternals.sort = function (schema, value, settings, state, prefs) {\n\n    const order = settings.order === 'ascending' ? 1 : -1;\n    const aFirst = -1 * order;\n    const bFirst = order;\n\n    const sort = (a, b) => {\n\n        let compare = internals.compare(a, b, aFirst, bFirst);\n        if (compare !== null) {\n            return compare;\n        }\n\n        if (settings.by) {\n            a = settings.by.resolve(a, state, prefs);\n            b = settings.by.resolve(b, state, prefs);\n        }\n\n        compare = internals.compare(a, b, aFirst, bFirst);\n        if (compare !== null) {\n            return compare;\n        }\n\n        const type = typeof a;\n        if (type !== typeof b) {\n            throw schema.$_createError('array.sort.mismatching', value, null, state, prefs);\n        }\n\n        if (type !== 'number' &&\n            type !== 'string') {\n\n            throw schema.$_createError('array.sort.unsupported', value, { type }, state, prefs);\n        }\n\n        if (type === 'number') {\n            return (a - b) * order;\n        }\n\n        return a < b ? aFirst : bFirst;\n    };\n\n    try {\n        return { value: value.slice().sort(sort) };\n    }\n    catch (err) {\n        return { errors: err };\n    }\n};\n\n\ninternals.compare = function (a, b, aFirst, bFirst) {\n\n    if (a === b) {\n        return 0;\n    }\n\n    if (a === undefined) {\n        return 1;           // Always last regardless of sort order\n    }\n\n    if (b === undefined) {\n        return -1;           // Always last regardless of sort order\n    }\n\n    if (a === null) {\n        return bFirst;\n    }\n\n    if (b === null) {\n        return aFirst;\n    }\n\n    return null;\n};\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\n\nconst Any = require('./any');\nconst Common = require('../common');\nconst Values = require('../values');\n\n\nconst internals = {};\n\n\ninternals.isBool = function (value) {\n\n    return typeof value === 'boolean';\n};\n\n\nmodule.exports = Any.extend({\n\n    type: 'boolean',\n\n    flags: {\n\n        sensitive: { default: false }\n    },\n\n    terms: {\n\n        falsy: {\n            init: null,\n            manifest: 'values'\n        },\n\n        truthy: {\n            init: null,\n            manifest: 'values'\n        }\n    },\n\n    coerce(value, { schema }) {\n\n        if (typeof value === 'boolean') {\n            return;\n        }\n\n        if (typeof value === 'string') {\n            const normalized = schema._flags.sensitive ? value : value.toLowerCase();\n            value = normalized === 'true' ? true : (normalized === 'false' ? false : value);\n        }\n\n        if (typeof value !== 'boolean') {\n            value = schema.$_terms.truthy && schema.$_terms.truthy.has(value, null, null, !schema._flags.sensitive) ||\n                (schema.$_terms.falsy && schema.$_terms.falsy.has(value, null, null, !schema._flags.sensitive) ? false : value);\n        }\n\n        return { value };\n    },\n\n    validate(value, { error }) {\n\n        if (typeof value !== 'boolean') {\n            return { value, errors: error('boolean.base') };\n        }\n    },\n\n    rules: {\n        truthy: {\n            method(...values) {\n\n                Common.verifyFlat(values, 'truthy');\n\n                const obj = this.clone();\n                obj.$_terms.truthy = obj.$_terms.truthy || new Values();\n\n                for (let i = 0; i < values.length; ++i) {\n                    const value = values[i];\n\n                    Assert(value !== undefined, 'Cannot call truthy with undefined');\n                    obj.$_terms.truthy.add(value);\n                }\n\n                return obj;\n            }\n        },\n\n        falsy: {\n            method(...values) {\n\n                Common.verifyFlat(values, 'falsy');\n\n                const obj = this.clone();\n                obj.$_terms.falsy = obj.$_terms.falsy || new Values();\n\n                for (let i = 0; i < values.length; ++i) {\n                    const value = values[i];\n\n                    Assert(value !== undefined, 'Cannot call falsy with undefined');\n                    obj.$_terms.falsy.add(value);\n                }\n\n                return obj;\n            }\n        },\n\n        sensitive: {\n            method(enabled = true) {\n\n                return this.$_setFlag('sensitive', enabled);\n            }\n        }\n    },\n\n    cast: {\n        number: {\n            from: internals.isBool,\n            to(value, helpers) {\n\n                return value ? 1 : 0;\n            }\n        },\n        string: {\n            from: internals.isBool,\n            to(value, helpers) {\n\n                return value ? 'true' : 'false';\n            }\n        }\n    },\n\n    manifest: {\n\n        build(obj, desc) {\n\n            if (desc.truthy) {\n                obj = obj.truthy(...desc.truthy);\n            }\n\n            if (desc.falsy) {\n                obj = obj.falsy(...desc.falsy);\n            }\n\n            return obj;\n        }\n    },\n\n    messages: {\n        'boolean.base': '{{#label}} must be a boolean'\n    }\n});\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\n\nconst Any = require('./any');\nconst Common = require('../common');\nconst Template = require('../template');\n\n\nconst internals = {};\n\n\ninternals.isDate = function (value) {\n\n    return value instanceof Date;\n};\n\n\nmodule.exports = Any.extend({\n\n    type: 'date',\n\n    coerce: {\n        from: ['number', 'string'],\n        method(value, { schema }) {\n\n            return { value: internals.parse(value, schema._flags.format) || value };\n        }\n    },\n\n    validate(value, { schema, error, prefs }) {\n\n        if (value instanceof Date &&\n            !isNaN(value.getTime())) {\n\n            return;\n        }\n\n        const format = schema._flags.format;\n\n        if (!prefs.convert ||\n            !format ||\n            typeof value !== 'string') {\n\n            return { value, errors: error('date.base') };\n        }\n\n        return { value, errors: error('date.format', { format }) };\n    },\n\n    rules: {\n\n        compare: {\n            method: false,\n            validate(value, helpers, { date }, { name, operator, args }) {\n\n                const to = date === 'now' ? Date.now() : date.getTime();\n                if (Common.compare(value.getTime(), to, operator)) {\n                    return value;\n                }\n\n                return helpers.error('date.' + name, { limit: args.date, value });\n            },\n            args: [\n                {\n                    name: 'date',\n                    ref: true,\n                    normalize: (date) => {\n\n                        return date === 'now' ? date : internals.parse(date);\n                    },\n                    assert: (date) => date !== null,\n                    message: 'must have a valid date format'\n                }\n            ]\n        },\n\n        format: {\n            method(format) {\n\n                Assert(['iso', 'javascript', 'unix'].includes(format), 'Unknown date format', format);\n\n                return this.$_setFlag('format', format);\n            }\n        },\n\n        greater: {\n            method(date) {\n\n                return this.$_addRule({ name: 'greater', method: 'compare', args: { date }, operator: '>' });\n            }\n        },\n\n        iso: {\n            method() {\n\n                return this.format('iso');\n            }\n        },\n\n        less: {\n            method(date) {\n\n                return this.$_addRule({ name: 'less', method: 'compare', args: { date }, operator: '<' });\n            }\n        },\n\n        max: {\n            method(date) {\n\n                return this.$_addRule({ name: 'max', method: 'compare', args: { date }, operator: '<=' });\n            }\n        },\n\n        min: {\n            method(date) {\n\n                return this.$_addRule({ name: 'min', method: 'compare', args: { date }, operator: '>=' });\n            }\n        },\n\n        timestamp: {\n            method(type = 'javascript') {\n\n                Assert(['javascript', 'unix'].includes(type), '\"type\" must be one of \"javascript, unix\"');\n\n                return this.format(type);\n            }\n        }\n    },\n\n    cast: {\n        number: {\n            from: internals.isDate,\n            to(value, helpers) {\n\n                return value.getTime();\n            }\n        },\n        string: {\n            from: internals.isDate,\n            to(value, { prefs }) {\n\n                return Template.date(value, prefs);\n            }\n        }\n    },\n\n    messages: {\n        'date.base': '{{#label}} must be a valid date',\n        'date.format': '{{#label}} must be in {msg(\"date.format.\" + #format) || #format} format',\n        'date.greater': '{{#label}} must be greater than {{:#limit}}',\n        'date.less': '{{#label}} must be less than {{:#limit}}',\n        'date.max': '{{#label}} must be less than or equal to {{:#limit}}',\n        'date.min': '{{#label}} must be greater than or equal to {{:#limit}}',\n\n        // Messages used in date.format\n\n        'date.format.iso': 'ISO 8601 date',\n        'date.format.javascript': 'timestamp or number of milliseconds',\n        'date.format.unix': 'timestamp or number of seconds'\n    }\n});\n\n\n// Helpers\n\ninternals.parse = function (value, format) {\n\n    if (value instanceof Date) {\n        return value;\n    }\n\n    if (typeof value !== 'string' &&\n        (isNaN(value) || !isFinite(value))) {\n\n        return null;\n    }\n\n    if (/^\\s*$/.test(value)) {\n        return null;\n    }\n\n    // ISO\n\n    if (format === 'iso') {\n        if (!Common.isIsoDate(value)) {\n            return null;\n        }\n\n        return internals.date(value.toString());\n    }\n\n    // Normalize number string\n\n    const original = value;\n    if (typeof value === 'string' &&\n        /^[+-]?\\d+(\\.\\d+)?$/.test(value)) {\n\n        value = parseFloat(value);\n    }\n\n    // Timestamp\n\n    if (format) {\n        if (format === 'javascript') {\n            return internals.date(1 * value);        // Casting to number\n        }\n\n        if (format === 'unix') {\n            return internals.date(1000 * value);\n        }\n\n        if (typeof original === 'string') {\n            return null;\n        }\n    }\n\n    // Plain\n\n    return internals.date(value);\n};\n\n\ninternals.date = function (value) {\n\n    const date = new Date(value);\n    if (!isNaN(date.getTime())) {\n        return date;\n    }\n\n    return null;\n};\n", "'use strict';\n\nconst Assert = require('./assert');\nconst Clone = require('./clone');\nconst Merge = require('./merge');\nconst Reach = require('./reach');\n\n\nconst internals = {};\n\n\nmodule.exports = function (defaults, source, options = {}) {\n\n    Assert(defaults && typeof defaults === 'object', 'Invalid defaults value: must be an object');\n    Assert(!source || source === true || typeof source === 'object', 'Invalid source value: must be true, falsy or an object');\n    Assert(typeof options === 'object', 'Invalid options: must be an object');\n\n    if (!source) {                                                  // If no source, return null\n        return null;\n    }\n\n    if (options.shallow) {\n        return internals.applyToDefaultsWithShallow(defaults, source, options);\n    }\n\n    const copy = Clone(defaults);\n\n    if (source === true) {                                          // If source is set to true, use defaults\n        return copy;\n    }\n\n    const nullOverride = options.nullOverride !== undefined ? options.nullOverride : false;\n    return Merge(copy, source, { nullOverride, mergeArrays: false });\n};\n\n\ninternals.applyToDefaultsWithShallow = function (defaults, source, options) {\n\n    const keys = options.shallow;\n    Assert(Array.isArray(keys), 'Invalid keys');\n\n    const seen = new Map();\n    const merge = source === true ? null : new Set();\n\n    for (let key of keys) {\n        key = Array.isArray(key) ? key : key.split('.');            // Pre-split optimization\n\n        const ref = Reach(defaults, key);\n        if (ref &&\n            typeof ref === 'object') {\n\n            seen.set(ref, merge && Reach(source, key) || ref);\n        }\n        else if (merge) {\n            merge.add(key);\n        }\n    }\n\n    const copy = Clone(defaults, {}, seen);\n\n    if (!merge) {\n        return copy;\n    }\n\n    for (const key of merge) {\n        internals.reachCopy(copy, source, key);\n    }\n\n    const nullOverride = options.nullOverride !== undefined ? options.nullOverride : false;\n    return Merge(copy, source, { nullOverride, mergeArrays: false });\n};\n\n\ninternals.reachCopy = function (dst, src, path) {\n\n    for (const segment of path) {\n        if (!(segment in src)) {\n            return;\n        }\n\n        const val = src[segment];\n\n        if (typeof val !== 'object' || val === null) {\n            return;\n        }\n\n        src = val;\n    }\n\n    const value = src;\n    let ref = dst;\n    for (let i = 0; i < path.length - 1; ++i) {\n        const segment = path[i];\n        if (typeof ref[segment] !== 'object') {\n            ref[segment] = {};\n        }\n\n        ref = ref[segment];\n    }\n\n    ref[path[path.length - 1]] = value;\n};\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\n\n\nconst internals = {};\n\n\nexports.Sorter = class {\n\n    constructor() {\n\n        this._items = [];\n        this.nodes = [];\n    }\n\n    add(nodes, options) {\n\n        options = options || {};\n\n        // Validate rules\n\n        const before = [].concat(options.before || []);\n        const after = [].concat(options.after || []);\n        const group = options.group || '?';\n        const sort = options.sort || 0;                   // Used for merging only\n\n        Assert(!before.includes(group), `Item cannot come before itself: ${group}`);\n        Assert(!before.includes('?'), 'Item cannot come before unassociated items');\n        Assert(!after.includes(group), `Item cannot come after itself: ${group}`);\n        Assert(!after.includes('?'), 'Item cannot come after unassociated items');\n\n        if (!Array.isArray(nodes)) {\n            nodes = [nodes];\n        }\n\n        for (const node of nodes) {\n            const item = {\n                seq: this._items.length,\n                sort,\n                before,\n                after,\n                group,\n                node\n            };\n\n            this._items.push(item);\n        }\n\n        // Insert event\n\n        if (!options.manual) {\n            const valid = this._sort();\n            Assert(valid, 'item', group !== '?' ? `added into group ${group}` : '', 'created a dependencies error');\n        }\n\n        return this.nodes;\n    }\n\n    merge(others) {\n\n        if (!Array.isArray(others)) {\n            others = [others];\n        }\n\n        for (const other of others) {\n            if (other) {\n                for (const item of other._items) {\n                    this._items.push(Object.assign({}, item));      // Shallow cloned\n                }\n            }\n        }\n\n        // Sort items\n\n        this._items.sort(internals.mergeSort);\n        for (let i = 0; i < this._items.length; ++i) {\n            this._items[i].seq = i;\n        }\n\n        const valid = this._sort();\n        Assert(valid, 'merge created a dependencies error');\n\n        return this.nodes;\n    }\n\n    sort() {\n\n        const valid = this._sort();\n        Assert(valid, 'sort created a dependencies error');\n\n        return this.nodes;\n    }\n\n    _sort() {\n\n        // Construct graph\n\n        const graph = {};\n        const graphAfters = Object.create(null);            // A prototype can bungle lookups w/ false positives\n        const groups = Object.create(null);\n\n        for (const item of this._items) {\n            const seq = item.seq;                           // Unique across all items\n            const group = item.group;\n\n            // Determine Groups\n\n            groups[group] = groups[group] || [];\n            groups[group].push(seq);\n\n            // Build intermediary graph using 'before'\n\n            graph[seq] = item.before;\n\n            // Build second intermediary graph with 'after'\n\n            for (const after of item.after) {\n                graphAfters[after] = graphAfters[after] || [];\n                graphAfters[after].push(seq);\n            }\n        }\n\n        // Expand intermediary graph\n\n        for (const node in graph) {\n            const expandedGroups = [];\n\n            for (const graphNodeItem in graph[node]) {\n                const group = graph[node][graphNodeItem];\n                groups[group] = groups[group] || [];\n                expandedGroups.push(...groups[group]);\n            }\n\n            graph[node] = expandedGroups;\n        }\n\n        // Merge intermediary graph using graphAfters into final graph\n\n        for (const group in graphAfters) {\n            if (groups[group]) {\n                for (const node of groups[group]) {\n                    graph[node].push(...graphAfters[group]);\n                }\n            }\n        }\n\n        // Compile ancestors\n\n        const ancestors = {};\n        for (const node in graph) {\n            const children = graph[node];\n            for (const child of children) {\n                ancestors[child] = ancestors[child] || [];\n                ancestors[child].push(node);\n            }\n        }\n\n        // Topo sort\n\n        const visited = {};\n        const sorted = [];\n\n        for (let i = 0; i < this._items.length; ++i) {          // Looping through item.seq values out of order\n            let next = i;\n\n            if (ancestors[i]) {\n                next = null;\n                for (let j = 0; j < this._items.length; ++j) {  // As above, these are item.seq values\n                    if (visited[j] === true) {\n                        continue;\n                    }\n\n                    if (!ancestors[j]) {\n                        ancestors[j] = [];\n                    }\n\n                    const shouldSeeCount = ancestors[j].length;\n                    let seenCount = 0;\n                    for (let k = 0; k < shouldSeeCount; ++k) {\n                        if (visited[ancestors[j][k]]) {\n                            ++seenCount;\n                        }\n                    }\n\n                    if (seenCount === shouldSeeCount) {\n                        next = j;\n                        break;\n                    }\n                }\n            }\n\n            if (next !== null) {\n                visited[next] = true;\n                sorted.push(next);\n            }\n        }\n\n        if (sorted.length !== this._items.length) {\n            return false;\n        }\n\n        const seqIndex = {};\n        for (const item of this._items) {\n            seqIndex[item.seq] = item;\n        }\n\n        this._items = [];\n        this.nodes = [];\n\n        for (const value of sorted) {\n            const sortedItem = seqIndex[value];\n            this.nodes.push(sortedItem.node);\n            this._items.push(sortedItem);\n        }\n\n        return true;\n    }\n};\n\n\ninternals.mergeSort = (a, b) => {\n\n    return a.sort === b.sort ? 0 : (a.sort < b.sort ? -1 : 1);\n};\n", "'use strict';\n\nconst ApplyToDefaults = require('@hapi/hoek/lib/applyToDefaults');\nconst Assert = require('@hapi/hoek/lib/assert');\nconst Clone = require('@hapi/hoek/lib/clone');\nconst Topo = require('@hapi/topo');\n\nconst Any = require('./any');\nconst Common = require('../common');\nconst Compile = require('../compile');\nconst Errors = require('../errors');\nconst Ref = require('../ref');\nconst Template = require('../template');\n\n\nconst internals = {\n    renameDefaults: {\n        alias: false,                   // Keep old value in place\n        multiple: false,                // Allow renaming multiple keys into the same target\n        override: false                 // Overrides an existing key\n    }\n};\n\n\nmodule.exports = Any.extend({\n\n    type: '_keys',\n\n    properties: {\n\n        typeof: 'object'\n    },\n\n    flags: {\n\n        unknown: { default: undefined }\n    },\n\n    terms: {\n\n        dependencies: { init: null },\n        keys: { init: null, manifest: { mapped: { from: 'schema', to: 'key' } } },\n        patterns: { init: null },\n        renames: { init: null }\n    },\n\n    args(schema, keys) {\n\n        return schema.keys(keys);\n    },\n\n    validate(value, { schema, error, state, prefs }) {\n\n        if (!value ||\n            typeof value !== schema.$_property('typeof') ||\n            Array.isArray(value)) {\n\n            return { value, errors: error('object.base', { type: schema.$_property('typeof') }) };\n        }\n\n        // Skip if there are no other rules to test\n\n        if (!schema.$_terms.renames &&\n            !schema.$_terms.dependencies &&\n            !schema.$_terms.keys &&                       // null allows any keys\n            !schema.$_terms.patterns &&\n            !schema.$_terms.externals) {\n\n            return;\n        }\n\n        // Shallow clone value\n\n        value = internals.clone(value, prefs);\n        const errors = [];\n\n        // Rename keys\n\n        if (schema.$_terms.renames &&\n            !internals.rename(schema, value, state, prefs, errors)) {\n\n            return { value, errors };\n        }\n\n        // Anything allowed\n\n        if (!schema.$_terms.keys &&                       // null allows any keys\n            !schema.$_terms.patterns &&\n            !schema.$_terms.dependencies) {\n\n            return { value, errors };\n        }\n\n        // Defined keys\n\n        const unprocessed = new Set(Object.keys(value));\n\n        if (schema.$_terms.keys) {\n            const ancestors = [value, ...state.ancestors];\n\n            for (const child of schema.$_terms.keys) {\n                const key = child.key;\n                const item = value[key];\n\n                unprocessed.delete(key);\n\n                const localState = state.localize([...state.path, key], ancestors, child);\n                const result = child.schema.$_validate(item, localState, prefs);\n\n                if (result.errors) {\n                    if (prefs.abortEarly) {\n                        return { value, errors: result.errors };\n                    }\n\n                    if (result.value !== undefined) {\n                        value[key] = result.value;\n                    }\n\n                    errors.push(...result.errors);\n                }\n                else if (child.schema._flags.result === 'strip' ||\n                    result.value === undefined && item !== undefined) {\n\n                    delete value[key];\n                }\n                else if (result.value !== undefined) {\n                    value[key] = result.value;\n                }\n            }\n        }\n\n        // Unknown keys\n\n        if (unprocessed.size ||\n            schema._flags._hasPatternMatch) {\n\n            const early = internals.unknown(schema, value, unprocessed, errors, state, prefs);\n            if (early) {\n                return early;\n            }\n        }\n\n        // Validate dependencies\n\n        if (schema.$_terms.dependencies) {\n            for (const dep of schema.$_terms.dependencies) {\n                if (\n                    dep.key !== null &&\n                    internals.isPresent(dep.options)(dep.key.resolve(value, state, prefs, null, { shadow: false })) === false\n                ) {\n\n                    continue;\n                }\n\n                const failed = internals.dependencies[dep.rel](schema, dep, value, state, prefs);\n                if (failed) {\n                    const report = schema.$_createError(failed.code, value, failed.context, state, prefs);\n                    if (prefs.abortEarly) {\n                        return { value, errors: report };\n                    }\n\n                    errors.push(report);\n                }\n            }\n        }\n\n        return { value, errors };\n    },\n\n    rules: {\n\n        and: {\n            method(...peers /*, [options] */) {\n\n                Common.verifyFlat(peers, 'and');\n\n                return internals.dependency(this, 'and', null, peers);\n            }\n        },\n\n        append: {\n            method(schema) {\n\n                if (schema === null ||\n                    schema === undefined ||\n                    Object.keys(schema).length === 0) {\n\n                    return this;\n                }\n\n                return this.keys(schema);\n            }\n        },\n\n        assert: {\n            method(subject, schema, message) {\n\n                if (!Template.isTemplate(subject)) {\n                    subject = Compile.ref(subject);\n                }\n\n                Assert(message === undefined || typeof message === 'string', 'Message must be a string');\n\n                schema = this.$_compile(schema, { appendPath: true });\n\n                const obj = this.$_addRule({ name: 'assert', args: { subject, schema, message } });\n                obj.$_mutateRegister(subject);\n                obj.$_mutateRegister(schema);\n                return obj;\n            },\n            validate(value, { error, prefs, state }, { subject, schema, message }) {\n\n                const about = subject.resolve(value, state, prefs);\n                const path = Ref.isRef(subject) ? subject.absolute(state) : [];\n                if (schema.$_match(about, state.localize(path, [value, ...state.ancestors], schema), prefs)) {\n                    return value;\n                }\n\n                return error('object.assert', { subject, message });\n            },\n            args: ['subject', 'schema', 'message'],\n            multi: true\n        },\n\n        instance: {\n            method(constructor, name) {\n\n                Assert(typeof constructor === 'function', 'constructor must be a function');\n\n                name = name || constructor.name;\n\n                return this.$_addRule({ name: 'instance', args: { constructor, name } });\n            },\n            validate(value, helpers, { constructor, name }) {\n\n                if (value instanceof constructor) {\n                    return value;\n                }\n\n                return helpers.error('object.instance', { type: name, value });\n            },\n            args: ['constructor', 'name']\n        },\n\n        keys: {\n            method(schema) {\n\n                Assert(schema === undefined || typeof schema === 'object', 'Object schema must be a valid object');\n                Assert(!Common.isSchema(schema), 'Object schema cannot be a joi schema');\n\n                const obj = this.clone();\n\n                if (!schema) {                                      // Allow all\n                    obj.$_terms.keys = null;\n                }\n                else if (!Object.keys(schema).length) {             // Allow none\n                    obj.$_terms.keys = new internals.Keys();\n                }\n                else {\n                    obj.$_terms.keys = obj.$_terms.keys ? obj.$_terms.keys.filter((child) => !schema.hasOwnProperty(child.key)) : new internals.Keys();\n                    for (const key in schema) {\n                        Common.tryWithPath(() => obj.$_terms.keys.push({ key, schema: this.$_compile(schema[key]) }), key);\n                    }\n                }\n\n                return obj.$_mutateRebuild();\n            }\n        },\n\n        length: {\n            method(limit) {\n\n                return this.$_addRule({ name: 'length', args: { limit }, operator: '=' });\n            },\n            validate(value, helpers, { limit }, { name, operator, args }) {\n\n                if (Common.compare(Object.keys(value).length, limit, operator)) {\n                    return value;\n                }\n\n                return helpers.error('object.' + name, { limit: args.limit, value });\n            },\n            args: [\n                {\n                    name: 'limit',\n                    ref: true,\n                    assert: Common.limit,\n                    message: 'must be a positive integer'\n                }\n            ]\n        },\n\n        max: {\n            method(limit) {\n\n                return this.$_addRule({ name: 'max', method: 'length', args: { limit }, operator: '<=' });\n            }\n        },\n\n        min: {\n            method(limit) {\n\n                return this.$_addRule({ name: 'min', method: 'length', args: { limit }, operator: '>=' });\n            }\n        },\n\n        nand: {\n            method(...peers /*, [options] */) {\n\n                Common.verifyFlat(peers, 'nand');\n\n                return internals.dependency(this, 'nand', null, peers);\n            }\n        },\n\n        or: {\n            method(...peers /*, [options] */) {\n\n                Common.verifyFlat(peers, 'or');\n\n                return internals.dependency(this, 'or', null, peers);\n            }\n        },\n\n        oxor: {\n            method(...peers /*, [options] */) {\n\n                return internals.dependency(this, 'oxor', null, peers);\n            }\n        },\n\n        pattern: {\n            method(pattern, schema, options = {}) {\n\n                const isRegExp = pattern instanceof RegExp;\n                if (!isRegExp) {\n                    pattern = this.$_compile(pattern, { appendPath: true });\n                }\n\n                Assert(schema !== undefined, 'Invalid rule');\n                Common.assertOptions(options, ['fallthrough', 'matches']);\n\n                if (isRegExp) {\n                    Assert(!pattern.flags.includes('g') && !pattern.flags.includes('y'), 'pattern should not use global or sticky mode');\n                }\n\n                schema = this.$_compile(schema, { appendPath: true });\n\n                const obj = this.clone();\n                obj.$_terms.patterns = obj.$_terms.patterns || [];\n                const config = { [isRegExp ? 'regex' : 'schema']: pattern, rule: schema };\n                if (options.matches) {\n                    config.matches = this.$_compile(options.matches);\n                    if (config.matches.type !== 'array') {\n                        config.matches = config.matches.$_root.array().items(config.matches);\n                    }\n\n                    obj.$_mutateRegister(config.matches);\n                    obj.$_setFlag('_hasPatternMatch', true, { clone: false });\n                }\n\n                if (options.fallthrough) {\n                    config.fallthrough = true;\n                }\n\n                obj.$_terms.patterns.push(config);\n                obj.$_mutateRegister(schema);\n                return obj;\n            }\n        },\n\n        ref: {\n            method() {\n\n                return this.$_addRule('ref');\n            },\n            validate(value, helpers) {\n\n                if (Ref.isRef(value)) {\n                    return value;\n                }\n\n                return helpers.error('object.refType', { value });\n            }\n        },\n\n        regex: {\n            method() {\n\n                return this.$_addRule('regex');\n            },\n            validate(value, helpers) {\n\n                if (value instanceof RegExp) {\n                    return value;\n                }\n\n                return helpers.error('object.regex', { value });\n            }\n        },\n\n        rename: {\n            method(from, to, options = {}) {\n\n                Assert(typeof from === 'string' || from instanceof RegExp, 'Rename missing the from argument');\n                Assert(typeof to === 'string' || to instanceof Template, 'Invalid rename to argument');\n                Assert(to !== from, 'Cannot rename key to same name:', from);\n\n                Common.assertOptions(options, ['alias', 'ignoreUndefined', 'override', 'multiple']);\n\n                const obj = this.clone();\n\n                obj.$_terms.renames = obj.$_terms.renames || [];\n                for (const rename of obj.$_terms.renames) {\n                    Assert(rename.from !== from, 'Cannot rename the same key multiple times');\n                }\n\n                if (to instanceof Template) {\n                    obj.$_mutateRegister(to);\n                }\n\n                obj.$_terms.renames.push({\n                    from,\n                    to,\n                    options: ApplyToDefaults(internals.renameDefaults, options)\n                });\n\n                return obj;\n            }\n        },\n\n        schema: {\n            method(type = 'any') {\n\n                return this.$_addRule({ name: 'schema', args: { type } });\n            },\n            validate(value, helpers, { type }) {\n\n                if (Common.isSchema(value) &&\n                    (type === 'any' || value.type === type)) {\n\n                    return value;\n                }\n\n                return helpers.error('object.schema', { type });\n            }\n        },\n\n        unknown: {\n            method(allow) {\n\n                return this.$_setFlag('unknown', allow !== false);\n            }\n        },\n\n        with: {\n            method(key, peers, options = {}) {\n\n                return internals.dependency(this, 'with', key, peers, options);\n            }\n        },\n\n        without: {\n            method(key, peers, options = {}) {\n\n                return internals.dependency(this, 'without', key, peers, options);\n            }\n        },\n\n        xor: {\n            method(...peers /*, [options] */) {\n\n                Common.verifyFlat(peers, 'xor');\n\n                return internals.dependency(this, 'xor', null, peers);\n            }\n        }\n    },\n\n    overrides: {\n\n        default(value, options) {\n\n            if (value === undefined) {\n                value = Common.symbols.deepDefault;\n            }\n\n            return this.$_parent('default', value, options);\n        }\n    },\n\n    rebuild(schema) {\n\n        if (schema.$_terms.keys) {\n            const topo = new Topo.Sorter();\n            for (const child of schema.$_terms.keys) {\n                Common.tryWithPath(() => topo.add(child, { after: child.schema.$_rootReferences(), group: child.key }), child.key);\n            }\n\n            schema.$_terms.keys = new internals.Keys(...topo.nodes);\n        }\n    },\n\n    manifest: {\n\n        build(obj, desc) {\n\n            if (desc.keys) {\n                obj = obj.keys(desc.keys);\n            }\n\n            if (desc.dependencies) {\n                for (const { rel, key = null, peers, options } of desc.dependencies) {\n                    obj = internals.dependency(obj, rel, key, peers, options);\n                }\n            }\n\n            if (desc.patterns) {\n                for (const { regex, schema, rule, fallthrough, matches } of desc.patterns) {\n                    obj = obj.pattern(regex || schema, rule, { fallthrough, matches });\n                }\n            }\n\n            if (desc.renames) {\n                for (const { from, to, options } of desc.renames) {\n                    obj = obj.rename(from, to, options);\n                }\n            }\n\n            return obj;\n        }\n    },\n\n    messages: {\n        'object.and': '{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}',\n        'object.assert': '{{#label}} is invalid because {if(#subject.key, `\"` + #subject.key + `\" failed to ` + (#message || \"pass the assertion test\"), #message || \"the assertion failed\")}',\n        'object.base': '{{#label}} must be of type {{#type}}',\n        'object.instance': '{{#label}} must be an instance of {{:#type}}',\n        'object.length': '{{#label}} must have {{#limit}} key{if(#limit == 1, \"\", \"s\")}',\n        'object.max': '{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, \"\", \"s\")}',\n        'object.min': '{{#label}} must have at least {{#limit}} key{if(#limit == 1, \"\", \"s\")}',\n        'object.missing': '{{#label}} must contain at least one of {{#peersWithLabels}}',\n        'object.nand': '{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}',\n        'object.oxor': '{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}',\n        'object.pattern.match': '{{#label}} keys failed to match pattern requirements',\n        'object.refType': '{{#label}} must be a Joi reference',\n        'object.regex': '{{#label}} must be a RegExp object',\n        'object.rename.multiple': '{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}',\n        'object.rename.override': '{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists',\n        'object.schema': '{{#label}} must be a Joi schema of {{#type}} type',\n        'object.unknown': '{{#label}} is not allowed',\n        'object.with': '{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}',\n        'object.without': '{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}',\n        'object.xor': '{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}'\n    }\n});\n\n\n// Helpers\n\ninternals.clone = function (value, prefs) {\n\n    // Object\n\n    if (typeof value === 'object') {\n        if (prefs.nonEnumerables) {\n            return Clone(value, { shallow: true });\n        }\n\n        const clone = Object.create(Object.getPrototypeOf(value));\n        Object.assign(clone, value);\n        return clone;\n    }\n\n    // Function\n\n    const clone = function (...args) {\n\n        return value.apply(this, args);\n    };\n\n    clone.prototype = Clone(value.prototype);\n    Object.defineProperty(clone, 'name', { value: value.name, writable: false });\n    Object.defineProperty(clone, 'length', { value: value.length, writable: false });\n    Object.assign(clone, value);\n    return clone;\n};\n\n\ninternals.dependency = function (schema, rel, key, peers, options) {\n\n    Assert(key === null || typeof key === 'string', rel, 'key must be a strings');\n\n    // Extract options from peers array\n\n    if (!options) {\n        options = peers.length > 1 && typeof peers[peers.length - 1] === 'object' ? peers.pop() : {};\n    }\n\n    Common.assertOptions(options, ['separator', 'isPresent']);\n\n    peers = [].concat(peers);\n\n    // Cast peer paths\n\n    const separator = Common.default(options.separator, '.');\n    const paths = [];\n    for (const peer of peers) {\n        Assert(typeof peer === 'string', rel, 'peers must be strings');\n        paths.push(Compile.ref(peer, { separator, ancestor: 0, prefix: false }));\n    }\n\n    // Cast key\n\n    if (key !== null) {\n        key = Compile.ref(key, { separator, ancestor: 0, prefix: false });\n    }\n\n    // Add rule\n\n    const obj = schema.clone();\n    obj.$_terms.dependencies = obj.$_terms.dependencies || [];\n    obj.$_terms.dependencies.push(new internals.Dependency(rel, key, paths, peers, options));\n    return obj;\n};\n\n\ninternals.dependencies = {\n\n    and(schema, dep, value, state, prefs) {\n\n        const missing = [];\n        const present = [];\n        const count = dep.peers.length;\n        const isPresent = internals.isPresent(dep.options);\n        for (const peer of dep.peers) {\n            if (isPresent(peer.resolve(value, state, prefs, null, { shadow: false })) === false) {\n                missing.push(peer.key);\n            }\n            else {\n                present.push(peer.key);\n            }\n        }\n\n        if (missing.length !== count &&\n            present.length !== count) {\n\n            return {\n                code: 'object.and',\n                context: {\n                    present,\n                    presentWithLabels: internals.keysToLabels(schema, present),\n                    missing,\n                    missingWithLabels: internals.keysToLabels(schema, missing)\n                }\n            };\n        }\n    },\n\n    nand(schema, dep, value, state, prefs) {\n\n        const present = [];\n        const isPresent = internals.isPresent(dep.options);\n        for (const peer of dep.peers) {\n            if (isPresent(peer.resolve(value, state, prefs, null, { shadow: false }))) {\n                present.push(peer.key);\n            }\n        }\n\n        if (present.length !== dep.peers.length) {\n            return;\n        }\n\n        const main = dep.paths[0];\n        const values = dep.paths.slice(1);\n        return {\n            code: 'object.nand',\n            context: {\n                main,\n                mainWithLabel: internals.keysToLabels(schema, main),\n                peers: values,\n                peersWithLabels: internals.keysToLabels(schema, values)\n            }\n        };\n    },\n\n    or(schema, dep, value, state, prefs) {\n\n        const isPresent = internals.isPresent(dep.options);\n        for (const peer of dep.peers) {\n            if (isPresent(peer.resolve(value, state, prefs, null, { shadow: false }))) {\n                return;\n            }\n        }\n\n        return {\n            code: 'object.missing',\n            context: {\n                peers: dep.paths,\n                peersWithLabels: internals.keysToLabels(schema, dep.paths)\n            }\n        };\n    },\n\n    oxor(schema, dep, value, state, prefs) {\n\n        const present = [];\n        const isPresent = internals.isPresent(dep.options);\n        for (const peer of dep.peers) {\n            if (isPresent(peer.resolve(value, state, prefs, null, { shadow: false }))) {\n                present.push(peer.key);\n            }\n        }\n\n        if (!present.length ||\n            present.length === 1) {\n\n            return;\n        }\n\n        const context = { peers: dep.paths, peersWithLabels: internals.keysToLabels(schema, dep.paths) };\n        context.present = present;\n        context.presentWithLabels = internals.keysToLabels(schema, present);\n        return { code: 'object.oxor', context };\n    },\n\n    with(schema, dep, value, state, prefs) {\n\n        const isPresent = internals.isPresent(dep.options);\n        for (const peer of dep.peers) {\n            if (isPresent(peer.resolve(value, state, prefs, null, { shadow: false })) === false) {\n                return {\n                    code: 'object.with',\n                    context: {\n                        main: dep.key.key,\n                        mainWithLabel: internals.keysToLabels(schema, dep.key.key),\n                        peer: peer.key,\n                        peerWithLabel: internals.keysToLabels(schema, peer.key)\n                    }\n                };\n            }\n        }\n    },\n\n    without(schema, dep, value, state, prefs) {\n\n        const isPresent = internals.isPresent(dep.options);\n        for (const peer of dep.peers) {\n            if (isPresent(peer.resolve(value, state, prefs, null, { shadow: false }))) {\n                return {\n                    code: 'object.without',\n                    context: {\n                        main: dep.key.key,\n                        mainWithLabel: internals.keysToLabels(schema, dep.key.key),\n                        peer: peer.key,\n                        peerWithLabel: internals.keysToLabels(schema, peer.key)\n                    }\n                };\n            }\n        }\n    },\n\n    xor(schema, dep, value, state, prefs) {\n\n        const present = [];\n        const isPresent = internals.isPresent(dep.options);\n        for (const peer of dep.peers) {\n            if (isPresent(peer.resolve(value, state, prefs, null, { shadow: false }))) {\n                present.push(peer.key);\n            }\n        }\n\n        if (present.length === 1) {\n            return;\n        }\n\n        const context = { peers: dep.paths, peersWithLabels: internals.keysToLabels(schema, dep.paths) };\n        if (present.length === 0) {\n            return { code: 'object.missing', context };\n        }\n\n        context.present = present;\n        context.presentWithLabels = internals.keysToLabels(schema, present);\n        return { code: 'object.xor', context };\n    }\n};\n\n\ninternals.keysToLabels = function (schema, keys) {\n\n    if (Array.isArray(keys)) {\n        return keys.map((key) => schema.$_mapLabels(key));\n    }\n\n    return schema.$_mapLabels(keys);\n};\n\n\ninternals.isPresent = function (options) {\n\n    return typeof options.isPresent === 'function' ? options.isPresent : (resolved) => resolved !== undefined;\n};\n\n\ninternals.rename = function (schema, value, state, prefs, errors) {\n\n    const renamed = {};\n    for (const rename of schema.$_terms.renames) {\n        const matches = [];\n        const pattern = typeof rename.from !== 'string';\n\n        if (!pattern) {\n            if (Object.prototype.hasOwnProperty.call(value, rename.from) &&\n                (value[rename.from] !== undefined || !rename.options.ignoreUndefined)) {\n\n                matches.push(rename);\n            }\n        }\n        else {\n            for (const from in value) {\n                if (value[from] === undefined &&\n                    rename.options.ignoreUndefined) {\n\n                    continue;\n                }\n\n                if (from === rename.to) {\n                    continue;\n                }\n\n                const match = rename.from.exec(from);\n                if (!match) {\n                    continue;\n                }\n\n                matches.push({ from, to: rename.to, match });\n            }\n        }\n\n        for (const match of matches) {\n            const from = match.from;\n            let to = match.to;\n            if (to instanceof Template) {\n                to = to.render(value, state, prefs, match.match);\n            }\n\n            if (from === to) {\n                continue;\n            }\n\n            if (!rename.options.multiple &&\n                renamed[to]) {\n\n                errors.push(schema.$_createError('object.rename.multiple', value, { from, to, pattern }, state, prefs));\n                if (prefs.abortEarly) {\n                    return false;\n                }\n            }\n\n            if (Object.prototype.hasOwnProperty.call(value, to) &&\n                !rename.options.override &&\n                !renamed[to]) {\n\n                errors.push(schema.$_createError('object.rename.override', value, { from, to, pattern }, state, prefs));\n                if (prefs.abortEarly) {\n                    return false;\n                }\n            }\n\n            if (value[from] === undefined) {\n                delete value[to];\n            }\n            else {\n                value[to] = value[from];\n            }\n\n            renamed[to] = true;\n\n            if (!rename.options.alias) {\n                delete value[from];\n            }\n        }\n    }\n\n    return true;\n};\n\n\ninternals.unknown = function (schema, value, unprocessed, errors, state, prefs) {\n\n    if (schema.$_terms.patterns) {\n        let hasMatches = false;\n        const matches = schema.$_terms.patterns.map((pattern) => {\n\n            if (pattern.matches) {\n                hasMatches = true;\n                return [];\n            }\n        });\n\n        const ancestors = [value, ...state.ancestors];\n\n        for (const key of unprocessed) {\n            const item = value[key];\n            const path = [...state.path, key];\n\n            for (let i = 0; i < schema.$_terms.patterns.length; ++i) {\n                const pattern = schema.$_terms.patterns[i];\n                if (pattern.regex) {\n                    const match = pattern.regex.test(key);\n                    state.mainstay.tracer.debug(state, 'rule', `pattern.${i}`, match ? 'pass' : 'error');\n                    if (!match) {\n                        continue;\n                    }\n                }\n                else {\n                    if (!pattern.schema.$_match(key, state.nest(pattern.schema, `pattern.${i}`), prefs)) {\n                        continue;\n                    }\n                }\n\n                unprocessed.delete(key);\n\n                const localState = state.localize(path, ancestors, { schema: pattern.rule, key });\n                const result = pattern.rule.$_validate(item, localState, prefs);\n                if (result.errors) {\n                    if (prefs.abortEarly) {\n                        return { value, errors: result.errors };\n                    }\n\n                    errors.push(...result.errors);\n                }\n\n                if (pattern.matches) {\n                    matches[i].push(key);\n                }\n\n                value[key] = result.value;\n                if (!pattern.fallthrough) {\n                    break;\n                }\n            }\n        }\n\n        // Validate pattern matches rules\n\n        if (hasMatches) {\n            for (let i = 0; i < matches.length; ++i) {\n                const match = matches[i];\n                if (!match) {\n                    continue;\n                }\n\n                const stpm = schema.$_terms.patterns[i].matches;\n                const localState = state.localize(state.path, ancestors, stpm);\n                const result = stpm.$_validate(match, localState, prefs);\n                if (result.errors) {\n                    const details = Errors.details(result.errors, { override: false });\n                    details.matches = match;\n                    const report = schema.$_createError('object.pattern.match', value, details, state, prefs);\n                    if (prefs.abortEarly) {\n                        return { value, errors: report };\n                    }\n\n                    errors.push(report);\n                }\n            }\n        }\n    }\n\n    if (!unprocessed.size ||\n        !schema.$_terms.keys && !schema.$_terms.patterns) {     // If no keys or patterns specified, unknown keys allowed\n\n        return;\n    }\n\n    if (prefs.stripUnknown && typeof schema._flags.unknown === 'undefined' ||\n        prefs.skipFunctions) {\n\n        const stripUnknown = prefs.stripUnknown ? (prefs.stripUnknown === true ? true : !!prefs.stripUnknown.objects) : false;\n\n        for (const key of unprocessed) {\n            if (stripUnknown) {\n                delete value[key];\n                unprocessed.delete(key);\n            }\n            else if (typeof value[key] === 'function') {\n                unprocessed.delete(key);\n            }\n        }\n    }\n\n    const forbidUnknown = !Common.default(schema._flags.unknown, prefs.allowUnknown);\n    if (forbidUnknown) {\n        for (const unprocessedKey of unprocessed) {\n            const localState = state.localize([...state.path, unprocessedKey], []);\n            const report = schema.$_createError('object.unknown', value[unprocessedKey], { child: unprocessedKey }, localState, prefs, { flags: false });\n            if (prefs.abortEarly) {\n                return { value, errors: report };\n            }\n\n            errors.push(report);\n        }\n    }\n};\n\n\ninternals.Dependency = class {\n\n    constructor(rel, key, peers, paths, options) {\n\n        this.rel = rel;\n        this.key = key;\n        this.peers = peers;\n        this.paths = paths;\n        this.options = options;\n    }\n\n    describe() {\n\n        const desc = {\n            rel: this.rel,\n            peers: this.paths\n        };\n\n        if (this.key !== null) {\n            desc.key = this.key.key;\n        }\n\n        if (this.peers[0].separator !== '.') {\n            desc.options = { ...desc.options, separator: this.peers[0].separator };\n        }\n\n        if (this.options.isPresent) {\n            desc.options = { ...desc.options, isPresent: this.options.isPresent };\n        }\n\n        return desc;\n    }\n};\n\n\ninternals.Keys = class extends Array {\n\n    concat(source) {\n\n        const result = this.slice();\n\n        const keys = new Map();\n        for (let i = 0; i < result.length; ++i) {\n            keys.set(result[i].key, i);\n        }\n\n        for (const item of source) {\n            const key = item.key;\n            const pos = keys.get(key);\n            if (pos !== undefined) {\n                result[pos] = { key, schema: result[pos].schema.concat(item.schema) };\n            }\n            else {\n                result.push(item);\n            }\n        }\n\n        return result;\n    }\n};\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\n\nconst Keys = require('./keys');\n\n\nconst internals = {};\n\n\nmodule.exports = Keys.extend({\n\n    type: 'function',\n\n    properties: {\n        typeof: 'function'\n    },\n\n    rules: {\n        arity: {\n            method(n) {\n\n                Assert(Number.isSafeInteger(n) && n >= 0, 'n must be a positive integer');\n\n                return this.$_addRule({ name: 'arity', args: { n } });\n            },\n            validate(value, helpers, { n }) {\n\n                if (value.length === n) {\n                    return value;\n                }\n\n                return helpers.error('function.arity', { n });\n            }\n        },\n\n        class: {\n            method() {\n\n                return this.$_addRule('class');\n            },\n            validate(value, helpers) {\n\n                if ((/^\\s*class\\s/).test(value.toString())) {\n                    return value;\n                }\n\n                return helpers.error('function.class', { value });\n            }\n        },\n\n        minArity: {\n            method(n) {\n\n                Assert(Number.isSafeInteger(n) && n > 0, 'n must be a strict positive integer');\n\n                return this.$_addRule({ name: 'minArity', args: { n } });\n            },\n            validate(value, helpers, { n }) {\n\n                if (value.length >= n) {\n                    return value;\n                }\n\n                return helpers.error('function.minArity', { n });\n            }\n        },\n\n        maxArity: {\n            method(n) {\n\n                Assert(Number.isSafeInteger(n) && n >= 0, 'n must be a positive integer');\n\n                return this.$_addRule({ name: 'maxArity', args: { n } });\n            },\n            validate(value, helpers, { n }) {\n\n                if (value.length <= n) {\n                    return value;\n                }\n\n                return helpers.error('function.maxArity', { n });\n            }\n        }\n    },\n\n    messages: {\n        'function.arity': '{{#label}} must have an arity of {{#n}}',\n        'function.class': '{{#label}} must be a class',\n        'function.maxArity': '{{#label}} must have an arity lesser or equal to {{#n}}',\n        'function.minArity': '{{#label}} must have an arity greater or equal to {{#n}}'\n    }\n});\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\n\nconst Any = require('./any');\nconst Common = require('../common');\nconst Compile = require('../compile');\nconst Errors = require('../errors');\n\n\nconst internals = {};\n\n\nmodule.exports = Any.extend({\n\n    type: 'link',\n\n    properties: {\n        schemaChain: true\n    },\n\n    terms: {\n\n        link: { init: null, manifest: 'single', register: false }\n    },\n\n    args(schema, ref) {\n\n        return schema.ref(ref);\n    },\n\n    validate(value, { schema, state, prefs }) {\n\n        Assert(schema.$_terms.link, 'Uninitialized link schema');\n\n        const linked = internals.generate(schema, value, state, prefs);\n        const ref = schema.$_terms.link[0].ref;\n        return linked.$_validate(value, state.nest(linked, `link:${ref.display}:${linked.type}`), prefs);\n    },\n\n    generate(schema, value, state, prefs) {\n\n        return internals.generate(schema, value, state, prefs);\n    },\n\n    rules: {\n\n        ref: {\n            method(ref) {\n\n                Assert(!this.$_terms.link, 'Cannot reinitialize schema');\n\n                ref = Compile.ref(ref);\n\n                Assert(ref.type === 'value' || ref.type === 'local', 'Invalid reference type:', ref.type);\n                Assert(ref.type === 'local' || ref.ancestor === 'root' || ref.ancestor > 0, 'Link cannot reference itself');\n\n                const obj = this.clone();\n                obj.$_terms.link = [{ ref }];\n                return obj;\n            }\n        },\n\n        relative: {\n            method(enabled = true) {\n\n                return this.$_setFlag('relative', enabled);\n            }\n        }\n    },\n\n    overrides: {\n\n        concat(source) {\n\n            Assert(this.$_terms.link, 'Uninitialized link schema');\n            Assert(Common.isSchema(source), 'Invalid schema object');\n            Assert(source.type !== 'link', 'Cannot merge type link with another link');\n\n            const obj = this.clone();\n\n            if (!obj.$_terms.whens) {\n                obj.$_terms.whens = [];\n            }\n\n            obj.$_terms.whens.push({ concat: source });\n            return obj.$_mutateRebuild();\n        }\n    },\n\n    manifest: {\n\n        build(obj, desc) {\n\n            Assert(desc.link, 'Invalid link description missing link');\n            return obj.ref(desc.link);\n        }\n    }\n});\n\n\n// Helpers\n\ninternals.generate = function (schema, value, state, prefs) {\n\n    let linked = state.mainstay.links.get(schema);\n    if (linked) {\n        return linked._generate(value, state, prefs).schema;\n    }\n\n    const ref = schema.$_terms.link[0].ref;\n    const { perspective, path } = internals.perspective(ref, state);\n    internals.assert(perspective, 'which is outside of schema boundaries', ref, schema, state, prefs);\n\n    try {\n        linked = path.length ? perspective.$_reach(path) : perspective;\n    }\n    catch (ignoreErr) {\n        internals.assert(false, 'to non-existing schema', ref, schema, state, prefs);\n    }\n\n    internals.assert(linked.type !== 'link', 'which is another link', ref, schema, state, prefs);\n\n    if (!schema._flags.relative) {\n        state.mainstay.links.set(schema, linked);\n    }\n\n    return linked._generate(value, state, prefs).schema;\n};\n\n\ninternals.perspective = function (ref, state) {\n\n    if (ref.type === 'local') {\n        for (const { schema, key } of state.schemas) {                              // From parent to root\n            const id = schema._flags.id || key;\n            if (id === ref.path[0]) {\n                return { perspective: schema, path: ref.path.slice(1) };\n            }\n\n            if (schema.$_terms.shared) {\n                for (const shared of schema.$_terms.shared) {\n                    if (shared._flags.id === ref.path[0]) {\n                        return { perspective: shared, path: ref.path.slice(1) };\n                    }\n                }\n            }\n        }\n\n        return { perspective: null, path: null };\n    }\n\n    if (ref.ancestor === 'root') {\n        return { perspective: state.schemas[state.schemas.length - 1].schema, path: ref.path };\n    }\n\n    return { perspective: state.schemas[ref.ancestor] && state.schemas[ref.ancestor].schema, path: ref.path };\n};\n\n\ninternals.assert = function (condition, message, ref, schema, state, prefs) {\n\n    if (condition) {                // Manual check to avoid generating error message on success\n        return;\n    }\n\n    Assert(false, `\"${Errors.label(schema._flags, state, prefs)}\" contains link reference \"${ref.display}\" ${message}`);\n};\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\n\nconst Any = require('./any');\nconst Common = require('../common');\n\n\nconst internals = {\n    numberRx: /^\\s*[+-]?(?:(?:\\d+(?:\\.\\d*)?)|(?:\\.\\d+))(?:e([+-]?\\d+))?\\s*$/i,\n    precisionRx: /(?:\\.(\\d+))?(?:[eE]([+-]?\\d+))?$/,\n    exponentialPartRegex: /[eE][+-]?\\d+$/,\n    leadingSignAndZerosRegex: /^[+-]?(0*)?/,\n    dotRegex: /\\./,\n    trailingZerosRegex: /0+$/,\n    decimalPlaces(value) {\n\n        const str = value.toString();\n        const dindex = str.indexOf('.');\n        const eindex = str.indexOf('e');\n        return (\n            (dindex < 0 ? 0 : (eindex < 0 ? str.length : eindex) - dindex - 1) +\n            (eindex < 0 ? 0 : Math.max(0, -parseInt(str.slice(eindex + 1))))\n        );\n    }\n};\n\n\nmodule.exports = Any.extend({\n\n    type: 'number',\n\n    flags: {\n\n        unsafe: { default: false }\n    },\n\n    coerce: {\n        from: 'string',\n        method(value, { schema, error }) {\n\n            const matches = value.match(internals.numberRx);\n            if (!matches) {\n                return;\n            }\n\n            value = value.trim();\n            const result = { value: parseFloat(value) };\n\n            if (result.value === 0) {\n                result.value = 0;           // -0\n            }\n\n            if (!schema._flags.unsafe) {\n                if (value.match(/e/i)) {\n                    if (internals.extractSignificantDigits(value) !== internals.extractSignificantDigits(String(result.value))) {\n                        result.errors = error('number.unsafe');\n                        return result;\n                    }\n                }\n                else {\n                    const string = result.value.toString();\n                    if (string.match(/e/i)) {\n                        return result;\n                    }\n\n                    if (string !== internals.normalizeDecimal(value)) {\n                        result.errors = error('number.unsafe');\n                        return result;\n                    }\n                }\n            }\n\n            return result;\n        }\n    },\n\n    validate(value, { schema, error, prefs }) {\n\n        if (value === Infinity ||\n            value === -Infinity) {\n\n            return { value, errors: error('number.infinity') };\n        }\n\n        if (!Common.isNumber(value)) {\n            return { value, errors: error('number.base') };\n        }\n\n        const result = { value };\n\n        if (prefs.convert) {\n            const rule = schema.$_getRule('precision');\n            if (rule) {\n                const precision = Math.pow(10, rule.args.limit);                    // This is conceptually equivalent to using toFixed but it should be much faster\n                result.value = Math.round(result.value * precision) / precision;\n            }\n        }\n\n        if (result.value === 0) {\n            result.value = 0;           // -0\n        }\n\n        if (!schema._flags.unsafe &&\n            (value > Number.MAX_SAFE_INTEGER || value < Number.MIN_SAFE_INTEGER)) {\n\n            result.errors = error('number.unsafe');\n        }\n\n        return result;\n    },\n\n    rules: {\n\n        compare: {\n            method: false,\n            validate(value, helpers, { limit }, { name, operator, args }) {\n\n                if (Common.compare(value, limit, operator)) {\n                    return value;\n                }\n\n                return helpers.error('number.' + name, { limit: args.limit, value });\n            },\n            args: [\n                {\n                    name: 'limit',\n                    ref: true,\n                    assert: Common.isNumber,\n                    message: 'must be a number'\n                }\n            ]\n        },\n\n        greater: {\n            method(limit) {\n\n                return this.$_addRule({ name: 'greater', method: 'compare', args: { limit }, operator: '>' });\n            }\n        },\n\n        integer: {\n            method() {\n\n                return this.$_addRule('integer');\n            },\n            validate(value, helpers) {\n\n                if (Math.trunc(value) - value === 0) {\n                    return value;\n                }\n\n                return helpers.error('number.integer');\n            }\n        },\n\n        less: {\n            method(limit) {\n\n                return this.$_addRule({ name: 'less', method: 'compare', args: { limit }, operator: '<' });\n            }\n        },\n\n        max: {\n            method(limit) {\n\n                return this.$_addRule({ name: 'max', method: 'compare', args: { limit }, operator: '<=' });\n            }\n        },\n\n        min: {\n            method(limit) {\n\n                return this.$_addRule({ name: 'min', method: 'compare', args: { limit }, operator: '>=' });\n            }\n        },\n\n        multiple: {\n            method(base) {\n\n                const baseDecimalPlace = typeof base === 'number' ? internals.decimalPlaces(base) : null;\n                const pfactor = Math.pow(10, baseDecimalPlace);\n\n                return this.$_addRule({\n                    name: 'multiple',\n                    args: {\n                        base,\n                        baseDecimalPlace,\n                        pfactor\n                    }\n                });\n            },\n            validate(value, helpers, { base, baseDecimalPlace, pfactor }, options) {\n\n                const valueDecimalPlace = internals.decimalPlaces(value);\n\n                if (valueDecimalPlace > baseDecimalPlace) {\n                    // Value with higher precision than base can never be a multiple\n                    return helpers.error('number.multiple', { multiple: options.args.base, value });\n                }\n\n                return Math.round(pfactor * value) % Math.round(pfactor * base) === 0 ?\n                    value :\n                    helpers.error('number.multiple', { multiple: options.args.base, value });\n            },\n            args: [\n                {\n                    name: 'base',\n                    ref: true,\n                    assert: (value) => typeof value === 'number' && isFinite(value) && value > 0,\n                    message: 'must be a positive number'\n                },\n                'baseDecimalPlace',\n                'pfactor'\n            ],\n            multi: true\n        },\n\n        negative: {\n            method() {\n\n                return this.sign('negative');\n            }\n        },\n\n        port: {\n            method() {\n\n                return this.$_addRule('port');\n            },\n            validate(value, helpers) {\n\n                if (Number.isSafeInteger(value) &&\n                    value >= 0 &&\n                    value <= 65535) {\n\n                    return value;\n                }\n\n                return helpers.error('number.port');\n            }\n        },\n\n        positive: {\n            method() {\n\n                return this.sign('positive');\n            }\n        },\n\n        precision: {\n            method(limit) {\n\n                Assert(Number.isSafeInteger(limit), 'limit must be an integer');\n\n                return this.$_addRule({ name: 'precision', args: { limit } });\n            },\n            validate(value, helpers, { limit }) {\n\n                const places = value.toString().match(internals.precisionRx);\n                const decimals = Math.max((places[1] ? places[1].length : 0) - (places[2] ? parseInt(places[2], 10) : 0), 0);\n                if (decimals <= limit) {\n                    return value;\n                }\n\n                return helpers.error('number.precision', { limit, value });\n            },\n            convert: true\n        },\n\n        sign: {\n            method(sign) {\n\n                Assert(['negative', 'positive'].includes(sign), 'Invalid sign', sign);\n\n                return this.$_addRule({ name: 'sign', args: { sign } });\n            },\n            validate(value, helpers, { sign }) {\n\n                if (sign === 'negative' && value < 0 ||\n                    sign === 'positive' && value > 0) {\n\n                    return value;\n                }\n\n                return helpers.error(`number.${sign}`);\n            }\n        },\n\n        unsafe: {\n            method(enabled = true) {\n\n                Assert(typeof enabled === 'boolean', 'enabled must be a boolean');\n\n                return this.$_setFlag('unsafe', enabled);\n            }\n        }\n    },\n\n    cast: {\n        string: {\n            from: (value) => typeof value === 'number',\n            to(value, helpers) {\n\n                return value.toString();\n            }\n        }\n    },\n\n    messages: {\n        'number.base': '{{#label}} must be a number',\n        'number.greater': '{{#label}} must be greater than {{#limit}}',\n        'number.infinity': '{{#label}} cannot be infinity',\n        'number.integer': '{{#label}} must be an integer',\n        'number.less': '{{#label}} must be less than {{#limit}}',\n        'number.max': '{{#label}} must be less than or equal to {{#limit}}',\n        'number.min': '{{#label}} must be greater than or equal to {{#limit}}',\n        'number.multiple': '{{#label}} must be a multiple of {{#multiple}}',\n        'number.negative': '{{#label}} must be a negative number',\n        'number.port': '{{#label}} must be a valid port',\n        'number.positive': '{{#label}} must be a positive number',\n        'number.precision': '{{#label}} must have no more than {{#limit}} decimal places',\n        'number.unsafe': '{{#label}} must be a safe number'\n    }\n});\n\n\n// Helpers\n\ninternals.extractSignificantDigits = function (value) {\n\n    return value\n        .replace(internals.exponentialPartRegex, '')\n        .replace(internals.dotRegex, '')\n        .replace(internals.trailingZerosRegex, '')\n        .replace(internals.leadingSignAndZerosRegex, '');\n};\n\n\ninternals.normalizeDecimal = function (str) {\n\n    str = str\n        // Remove leading plus signs\n        .replace(/^\\+/, '')\n        // Remove trailing zeros if there is a decimal point and unecessary decimal points\n        .replace(/\\.0*$/, '')\n        // Add a integer 0 if the numbers starts with a decimal point\n        .replace(/^(-?)\\.([^\\.]*)$/, '$10.$2')\n        // Remove leading zeros\n        .replace(/^(-?)0+([0-9])/, '$1$2');\n\n    if (str.includes('.') &&\n        str.endsWith('0')) {\n\n        str = str.replace(/0+$/, '');\n    }\n\n    if (str === '-0') {\n        return '0';\n    }\n\n    return str;\n};\n", "'use strict';\n\nconst Keys = require('./keys');\n\n\nconst internals = {};\n\n\nmodule.exports = Keys.extend({\n\n    type: 'object',\n\n    cast: {\n        map: {\n            from: (value) => value && typeof value === 'object',\n            to(value, helpers) {\n\n                return new Map(Object.entries(value));\n            }\n        }\n    }\n});\n", "'use strict';\n\nexports.codes = {\n    EMPTY_STRING: 'Address must be a non-empty string',\n    FORBIDDEN_UNICODE: 'Address contains forbidden Unicode characters',\n    MULTIPLE_AT_CHAR: 'Address cannot contain more than one @ character',\n    MISSING_AT_CHAR: 'Address must contain one @ character',\n    EMPTY_LOCAL: 'Address local part cannot be empty',\n    ADDRESS_TOO_LONG: 'Address too long',\n    LOCAL_TOO_LONG: 'Address local part too long',\n    EMPTY_LOCAL_SEGMENT: 'Address local part contains empty dot-separated segment',\n    INVALID_LOCAL_CHARS: 'Address local part contains invalid character',\n    DOMAIN_NON_EMPTY_STRING: 'Domain must be a non-empty string',\n    DOMAIN_TOO_LONG: 'Domain too long',\n    DOMAIN_INVALID_UNICODE_CHARS: 'Domain contains forbidden Unicode characters',\n    DOMAIN_INVALID_CHARS: 'Domain contains invalid character',\n    DOMAIN_INVALID_TLDS_CHARS: 'Domain contains invalid tld character',\n    DOMAIN_SEGMENTS_COUNT: 'Domain lacks the minimum required number of segments',\n    DOMAIN_SEGMENTS_COUNT_MAX: 'Domain contains too many segments',\n    DOMAIN_FORBIDDEN_TLDS: 'Domain uses forbidden TLD',\n    DOMAIN_EMPTY_SEGMENT: 'Domain contains empty dot-separated segment',\n    DOMAIN_LONG_SEGMENT: 'Domain contains dot-separated segment that is too long'\n};\n\n\nexports.code = function (code) {\n\n    return { code, error: exports.codes[code] };\n};\n", "'use strict';\n\nconst Url = require('url');\n\nconst Errors = require('./errors');\n\n\nconst internals = {\n    minDomainSegments: 2,\n    nonAsciiRx: /[^\\x00-\\x7f]/,\n    domainControlRx: /[\\x00-\\x20@\\:\\/\\\\#!\\$&\\'\\(\\)\\*\\+,;=\\?]/,                          // Control + space + separators\n    tldSegmentRx: /^[a-zA-Z](?:[a-zA-Z0-9\\-]*[a-zA-Z0-9])?$/,\n    domainSegmentRx: /^[a-zA-Z0-9](?:[a-zA-Z0-9\\-]*[a-zA-Z0-9])?$/,\n    URL: Url.URL || URL                                                                 // $lab:coverage:ignore$\n};\n\n\nexports.analyze = function (domain, options = {}) {\n\n    if (!domain) {                                                                      // Catch null / undefined\n        return Errors.code('DOMAIN_NON_EMPTY_STRING');\n    }\n\n    if (typeof domain !== 'string') {\n        throw new Error('Invalid input: domain must be a string');\n    }\n\n    if (domain.length > 256) {\n        return Errors.code('DOMAIN_TOO_LONG');\n    }\n\n    const ascii = !internals.nonAsciiRx.test(domain);\n    if (!ascii) {\n        if (options.allowUnicode === false) {                                           // Defaults to true\n            return Errors.code('DOMAIN_INVALID_UNICODE_CHARS');\n        }\n\n        domain = domain.normalize('NFC');\n    }\n\n    if (internals.domainControlRx.test(domain)) {\n        return Errors.code('DOMAIN_INVALID_CHARS');\n    }\n\n    domain = internals.punycode(domain);\n\n    // https://tools.ietf.org/html/rfc1035 section 2.3.1\n\n    if (options.allowFullyQualified &&\n        domain[domain.length - 1] === '.') {\n\n        domain = domain.slice(0, -1);\n    }\n\n    const minDomainSegments = options.minDomainSegments || internals.minDomainSegments;\n\n    const segments = domain.split('.');\n    if (segments.length < minDomainSegments) {\n        return Errors.code('DOMAIN_SEGMENTS_COUNT');\n    }\n\n    if (options.maxDomainSegments) {\n        if (segments.length > options.maxDomainSegments) {\n            return Errors.code('DOMAIN_SEGMENTS_COUNT_MAX');\n        }\n    }\n\n    const tlds = options.tlds;\n    if (tlds) {\n        const tld = segments[segments.length - 1].toLowerCase();\n        if (tlds.deny && tlds.deny.has(tld) ||\n            tlds.allow && !tlds.allow.has(tld)) {\n\n            return Errors.code('DOMAIN_FORBIDDEN_TLDS');\n        }\n    }\n\n    for (let i = 0; i < segments.length; ++i) {\n        const segment = segments[i];\n\n        if (!segment.length) {\n            return Errors.code('DOMAIN_EMPTY_SEGMENT');\n        }\n\n        if (segment.length > 63) {\n            return Errors.code('DOMAIN_LONG_SEGMENT');\n        }\n\n        if (i < segments.length - 1) {\n            if (!internals.domainSegmentRx.test(segment)) {\n                return Errors.code('DOMAIN_INVALID_CHARS');\n            }\n        }\n        else {\n            if (!internals.tldSegmentRx.test(segment)) {\n                return Errors.code('DOMAIN_INVALID_TLDS_CHARS');\n            }\n        }\n    }\n\n    return null;\n};\n\n\nexports.isValid = function (domain, options) {\n\n    return !exports.analyze(domain, options);\n};\n\n\ninternals.punycode = function (domain) {\n\n    if (domain.includes('%')) {\n        domain = domain.replace(/%/g, '%25');\n    }\n\n    try {\n        return new internals.URL(`http://${domain}`).host;\n    }\n    catch (err) {\n        return domain;\n    }\n};\n", "'use strict';\n\nconst Util = require('util');\n\nconst Domain = require('./domain');\nconst Errors = require('./errors');\n\n\nconst internals = {\n    nonAsciiRx: /[^\\x00-\\x7f]/,\n    encoder: new (Util.TextEncoder || TextEncoder)()                                            // $lab:coverage:ignore$\n};\n\n\nexports.analyze = function (email, options) {\n\n    return internals.email(email, options);\n};\n\n\nexports.isValid = function (email, options) {\n\n    return !internals.email(email, options);\n};\n\n\ninternals.email = function (email, options = {}) {\n\n    if (typeof email !== 'string') {\n        throw new Error('Invalid input: email must be a string');\n    }\n\n    if (!email) {\n        return Errors.code('EMPTY_STRING');\n    }\n\n    // Unicode\n\n    const ascii = !internals.nonAsciiRx.test(email);\n    if (!ascii) {\n        if (options.allowUnicode === false) {                                                   // Defaults to true\n            return Errors.code('FORBIDDEN_UNICODE');\n        }\n\n        email = email.normalize('NFC');\n    }\n\n    // Basic structure\n\n    const parts = email.split('@');\n    if (parts.length !== 2) {\n        return parts.length > 2 ? Errors.code('MULTIPLE_AT_CHAR') : Errors.code('MISSING_AT_CHAR');\n    }\n\n    const [local, domain] = parts;\n\n    if (!local) {\n        return Errors.code('EMPTY_LOCAL');\n    }\n\n    if (!options.ignoreLength) {\n        if (email.length > 254) {                                           // http://tools.ietf.org/html/rfc5321#section-4.5.3.1.3\n            return Errors.code('ADDRESS_TOO_LONG');\n        }\n\n        if (internals.encoder.encode(local).length > 64) {                  // http://tools.ietf.org/html/rfc5321#section-4.5.3.1.1\n            return Errors.code('LOCAL_TOO_LONG');\n        }\n    }\n\n    // Validate parts\n\n    return internals.local(local, ascii) || Domain.analyze(domain, options);\n};\n\n\ninternals.local = function (local, ascii) {\n\n    const segments = local.split('.');\n    for (const segment of segments) {\n        if (!segment.length) {\n            return Errors.code('EMPTY_LOCAL_SEGMENT');\n        }\n\n        if (ascii) {\n            if (!internals.atextRx.test(segment)) {\n                return Errors.code('INVALID_LOCAL_CHARS');\n            }\n\n            continue;\n        }\n\n        for (const char of segment) {\n            if (internals.atextRx.test(char)) {\n                continue;\n            }\n\n            const binary = internals.binary(char);\n            if (!internals.atomRx.test(binary)) {\n                return Errors.code('INVALID_LOCAL_CHARS');\n            }\n        }\n    }\n};\n\n\ninternals.binary = function (char) {\n\n    return Array.from(internals.encoder.encode(char)).map((v) => String.fromCharCode(v)).join('');\n};\n\n\n/*\n    From RFC 5321:\n\n        Mailbox         =   Local-part \"@\" ( Domain / address-literal )\n\n        Local-part      =   Dot-string / Quoted-string\n        Dot-string      =   Atom *(\".\"  Atom)\n        Atom            =   1*atext\n        atext           =   ALPHA / DIGIT / \"!\" / \"#\" / \"$\" / \"%\" / \"&\" / \"'\" / \"*\" / \"+\" / \"-\" / \"/\" / \"=\" / \"?\" / \"^\" / \"_\" / \"`\" / \"{\" / \"|\" / \"}\" / \"~\"\n\n        Domain          =   sub-domain *(\".\" sub-domain)\n        sub-domain      =   Let-dig [Ldh-str]\n        Let-dig         =   ALPHA / DIGIT\n        Ldh-str         =   *( ALPHA / DIGIT / \"-\" ) Let-dig\n\n        ALPHA           =   %x41-5A / %x61-7A        ; a-z, A-Z\n        DIGIT           =   %x30-39                  ; 0-9\n\n    From RFC 6531:\n\n        sub-domain      =/  U-label\n        atext           =/  UTF8-non-ascii\n\n        UTF8-non-ascii  =   UTF8-2 / UTF8-3 / UTF8-4\n\n        UTF8-2          =   %xC2-DF UTF8-tail\n        UTF8-3          =   %xE0 %xA0-BF UTF8-tail /\n                            %xE1-EC 2( UTF8-tail ) /\n                            %xED %x80-9F UTF8-tail /\n                            %xEE-EF 2( UTF8-tail )\n        UTF8-4          =   %xF0 %x90-BF 2( UTF8-tail ) /\n                            %xF1-F3 3( UTF8-tail ) /\n                            %xF4 %x80-8F 2( UTF8-tail )\n\n        UTF8-tail       =   %x80-BF\n\n    Note: The following are not supported:\n\n        RFC 5321: address-literal, Quoted-string\n        RFC 5322: obs-*, CFWS\n*/\n\n\ninternals.atextRx = /^[\\w!#\\$%&'\\*\\+\\-/=\\?\\^`\\{\\|\\}~]+$/;               // _ included in \\w\n\n\ninternals.atomRx = new RegExp([\n\n    //  %xC2-DF UTF8-tail\n    '(?:[\\\\xc2-\\\\xdf][\\\\x80-\\\\xbf])',\n\n    //  %xE0 %xA0-BF UTF8-tail              %xE1-EC 2( UTF8-tail )            %xED %x80-9F UTF8-tail              %xEE-EF 2( UTF8-tail )\n    '(?:\\\\xe0[\\\\xa0-\\\\xbf][\\\\x80-\\\\xbf])|(?:[\\\\xe1-\\\\xec][\\\\x80-\\\\xbf]{2})|(?:\\\\xed[\\\\x80-\\\\x9f][\\\\x80-\\\\xbf])|(?:[\\\\xee-\\\\xef][\\\\x80-\\\\xbf]{2})',\n\n    //  %xF0 %x90-BF 2( UTF8-tail )            %xF1-F3 3( UTF8-tail )            %xF4 %x80-8F 2( UTF8-tail )\n    '(?:\\\\xf0[\\\\x90-\\\\xbf][\\\\x80-\\\\xbf]{2})|(?:[\\\\xf1-\\\\xf3][\\\\x80-\\\\xbf]{3})|(?:\\\\xf4[\\\\x80-\\\\x8f][\\\\x80-\\\\xbf]{2})'\n\n].join('|'));\n", "'use strict';\n\nconst internals = {};\n\n\nmodule.exports = function (string) {\n\n    // Escape ^$.*+-?=!:|\\/()[]{},\n\n    return string.replace(/[\\^\\$\\.\\*\\+\\-\\?\\=\\!\\:\\|\\\\\\/\\(\\)\\[\\]\\{\\}\\,]/g, '\\\\$&');\n};\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\nconst EscapeRegex = require('@hapi/hoek/lib/escapeRegex');\n\n\nconst internals = {};\n\n\ninternals.generate = function () {\n\n    const rfc3986 = {};\n\n    const hexDigit = '\\\\dA-Fa-f';                                               // HEXDIG = DIGIT / \"A\" / \"B\" / \"C\" / \"D\" / \"E\" / \"F\"\n    const hexDigitOnly = '[' + hexDigit + ']';\n\n    const unreserved = '\\\\w-\\\\.~';                                              // unreserved = ALPHA / DIGIT / \"-\" / \".\" / \"_\" / \"~\"\n    const subDelims = '!\\\\$&\\'\\\\(\\\\)\\\\*\\\\+,;=';                                 // sub-delims = \"!\" / \"$\" / \"&\" / \"'\" / \"(\" / \")\" / \"*\" / \"+\" / \",\" / \";\" / \"=\"\n    const pctEncoded = '%' + hexDigit;                                          // pct-encoded = \"%\" HEXDIG HEXDIG\n    const pchar = unreserved + pctEncoded + subDelims + ':@';                   // pchar = unreserved / pct-encoded / sub-delims / \":\" / \"@\"\n    const pcharOnly = '[' + pchar + ']';\n    const decOctect = '(?:0{0,2}\\\\d|0?[1-9]\\\\d|1\\\\d\\\\d|2[0-4]\\\\d|25[0-5])';     // dec-octet = DIGIT / %x31-39 DIGIT / \"1\" 2DIGIT / \"2\" %x30-34 DIGIT / \"25\" %x30-35  ; 0-9 / 10-99 / 100-199 / 200-249 / 250-255\n\n    rfc3986.ipv4address = '(?:' + decOctect + '\\\\.){3}' + decOctect;            // IPv4address = dec-octet \".\" dec-octet \".\" dec-octet \".\" dec-octet\n\n    /*\n        h16 = 1*4HEXDIG ; 16 bits of address represented in hexadecimal\n        ls32 = ( h16 \":\" h16 ) / IPv4address ; least-significant 32 bits of address\n        IPv6address =                            6( h16 \":\" ) ls32\n                    /                       \"::\" 5( h16 \":\" ) ls32\n                    / [               h16 ] \"::\" 4( h16 \":\" ) ls32\n                    / [ *1( h16 \":\" ) h16 ] \"::\" 3( h16 \":\" ) ls32\n                    / [ *2( h16 \":\" ) h16 ] \"::\" 2( h16 \":\" ) ls32\n                    / [ *3( h16 \":\" ) h16 ] \"::\"    h16 \":\"   ls32\n                    / [ *4( h16 \":\" ) h16 ] \"::\"              ls32\n                    / [ *5( h16 \":\" ) h16 ] \"::\"              h16\n                    / [ *6( h16 \":\" ) h16 ] \"::\"\n    */\n\n    const h16 = hexDigitOnly + '{1,4}';\n    const ls32 = '(?:' + h16 + ':' + h16 + '|' + rfc3986.ipv4address + ')';\n    const IPv6SixHex = '(?:' + h16 + ':){6}' + ls32;\n    const IPv6FiveHex = '::(?:' + h16 + ':){5}' + ls32;\n    const IPv6FourHex = '(?:' + h16 + ')?::(?:' + h16 + ':){4}' + ls32;\n    const IPv6ThreeHex = '(?:(?:' + h16 + ':){0,1}' + h16 + ')?::(?:' + h16 + ':){3}' + ls32;\n    const IPv6TwoHex = '(?:(?:' + h16 + ':){0,2}' + h16 + ')?::(?:' + h16 + ':){2}' + ls32;\n    const IPv6OneHex = '(?:(?:' + h16 + ':){0,3}' + h16 + ')?::' + h16 + ':' + ls32;\n    const IPv6NoneHex = '(?:(?:' + h16 + ':){0,4}' + h16 + ')?::' + ls32;\n    const IPv6NoneHex2 = '(?:(?:' + h16 + ':){0,5}' + h16 + ')?::' + h16;\n    const IPv6NoneHex3 = '(?:(?:' + h16 + ':){0,6}' + h16 + ')?::';\n\n    rfc3986.ipv4Cidr = '(?:\\\\d|[1-2]\\\\d|3[0-2])';                                           // IPv4 cidr = DIGIT / %x31-32 DIGIT / \"3\" %x30-32  ; 0-9 / 10-29 / 30-32\n    rfc3986.ipv6Cidr = '(?:0{0,2}\\\\d|0?[1-9]\\\\d|1[01]\\\\d|12[0-8])';                         // IPv6 cidr = DIGIT / %x31-39 DIGIT / \"1\" %x0-1 DIGIT / \"12\" %x0-8;   0-9 / 10-99 / 100-119 / 120-128\n    rfc3986.ipv6address = '(?:' + IPv6SixHex + '|' + IPv6FiveHex + '|' + IPv6FourHex + '|' + IPv6ThreeHex + '|' + IPv6TwoHex + '|' + IPv6OneHex + '|' + IPv6NoneHex + '|' + IPv6NoneHex2 + '|' + IPv6NoneHex3 + ')';\n    rfc3986.ipvFuture = 'v' + hexDigitOnly + '+\\\\.[' + unreserved + subDelims + ':]+';      // IPvFuture = \"v\" 1*HEXDIG \".\" 1*( unreserved / sub-delims / \":\" )\n\n    rfc3986.scheme = '[a-zA-Z][a-zA-Z\\\\d+-\\\\.]*';                                           // scheme = ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n    rfc3986.schemeRegex = new RegExp(rfc3986.scheme);\n\n    const userinfo = '[' + unreserved + pctEncoded + subDelims + ':]*';                     // userinfo = *( unreserved / pct-encoded / sub-delims / \":\" )\n    const IPLiteral = '\\\\[(?:' + rfc3986.ipv6address + '|' + rfc3986.ipvFuture + ')\\\\]';    // IP-literal = \"[\" ( IPv6address / IPvFuture  ) \"]\"\n    const regName = '[' + unreserved + pctEncoded + subDelims + ']{1,255}';                 // reg-name = *( unreserved / pct-encoded / sub-delims )\n    const host = '(?:' + IPLiteral + '|' + rfc3986.ipv4address + '|' + regName + ')';       // host = IP-literal / IPv4address / reg-name\n    const port = '\\\\d*';                                                                    // port = *DIGIT\n    const authority = '(?:' + userinfo + '@)?' + host + '(?::' + port + ')?';               // authority   = [ userinfo \"@\" ] host [ \":\" port ]\n    const authorityCapture = '(?:' + userinfo + '@)?(' + host + ')(?::' + port + ')?';\n\n    /*\n        segment       = *pchar\n        segment-nz    = 1*pchar\n        path          = path-abempty    ; begins with \"/\" '|' is empty\n                    / path-absolute   ; begins with \"/\" but not \"//\"\n                    / path-noscheme   ; begins with a non-colon segment\n                    / path-rootless   ; begins with a segment\n                    / path-empty      ; zero characters\n        path-abempty  = *( \"/\" segment )\n        path-absolute = \"/\" [ segment-nz *( \"/\" segment ) ]\n        path-rootless = segment-nz *( \"/\" segment )\n    */\n\n    const segment = pcharOnly + '*';\n    const segmentNz = pcharOnly + '+';\n    const segmentNzNc = '[' + unreserved + pctEncoded + subDelims + '@' + ']+';\n    const pathEmpty = '';\n    const pathAbEmpty = '(?:\\\\/' + segment + ')*';\n    const pathAbsolute = '\\\\/(?:' + segmentNz + pathAbEmpty + ')?';\n    const pathRootless = segmentNz + pathAbEmpty;\n    const pathNoScheme = segmentNzNc + pathAbEmpty;\n    const pathAbNoAuthority = '(?:\\\\/\\\\/\\\\/' + segment + pathAbEmpty + ')';     // Used by file:///\n\n    // hier-part = \"//\" authority path\n\n    rfc3986.hierPart = '(?:' + '(?:\\\\/\\\\/' + authority + pathAbEmpty + ')' + '|' + pathAbsolute + '|' + pathRootless + '|' + pathAbNoAuthority + ')';\n    rfc3986.hierPartCapture = '(?:' + '(?:\\\\/\\\\/' + authorityCapture + pathAbEmpty + ')' + '|' + pathAbsolute + '|' + pathRootless + ')';\n\n    // relative-part = \"//\" authority path-abempty / path-absolute / path-noscheme / path-empty\n\n    rfc3986.relativeRef = '(?:' + '(?:\\\\/\\\\/' + authority + pathAbEmpty + ')' + '|' + pathAbsolute + '|' + pathNoScheme + '|' + pathEmpty + ')';\n    rfc3986.relativeRefCapture = '(?:' + '(?:\\\\/\\\\/' + authorityCapture + pathAbEmpty + ')' + '|' + pathAbsolute + '|' + pathNoScheme + '|' + pathEmpty + ')';\n\n    // query = *( pchar / \"/\" / \"?\" )\n    // query = *( pchar / \"[\" / \"]\" / \"/\" / \"?\" )\n\n    rfc3986.query = '[' + pchar + '\\\\/\\\\?]*(?=#|$)';                            //Finish matching either at the fragment part '|' end of the line.\n    rfc3986.queryWithSquareBrackets = '[' + pchar + '\\\\[\\\\]\\\\/\\\\?]*(?=#|$)';\n\n    // fragment = *( pchar / \"/\" / \"?\" )\n\n    rfc3986.fragment = '[' + pchar + '\\\\/\\\\?]*';\n\n    return rfc3986;\n};\n\ninternals.rfc3986 = internals.generate();\n\n\nexports.ip = {\n    v4Cidr: internals.rfc3986.ipv4Cidr,\n    v6Cidr: internals.rfc3986.ipv6Cidr,\n    ipv4: internals.rfc3986.ipv4address,\n    ipv6: internals.rfc3986.ipv6address,\n    ipvfuture: internals.rfc3986.ipvFuture\n};\n\n\ninternals.createRegex = function (options) {\n\n    const rfc = internals.rfc3986;\n\n    // Construct expression\n\n    const query = options.allowQuerySquareBrackets ? rfc.queryWithSquareBrackets : rfc.query;\n    const suffix = '(?:\\\\?' + query + ')?' + '(?:#' + rfc.fragment + ')?';\n\n    // relative-ref = relative-part [ \"?\" query ] [ \"#\" fragment ]\n\n    const relative = options.domain ? rfc.relativeRefCapture : rfc.relativeRef;\n\n    if (options.relativeOnly) {\n        return internals.wrap(relative + suffix);\n    }\n\n    // Custom schemes\n\n    let customScheme = '';\n    if (options.scheme) {\n        Assert(options.scheme instanceof RegExp || typeof options.scheme === 'string' || Array.isArray(options.scheme), 'scheme must be a RegExp, String, or Array');\n\n        const schemes = [].concat(options.scheme);\n        Assert(schemes.length >= 1, 'scheme must have at least 1 scheme specified');\n\n        // Flatten the array into a string to be used to match the schemes\n\n        const selections = [];\n        for (let i = 0; i < schemes.length; ++i) {\n            const scheme = schemes[i];\n            Assert(scheme instanceof RegExp || typeof scheme === 'string', 'scheme at position ' + i + ' must be a RegExp or String');\n\n            if (scheme instanceof RegExp) {\n                selections.push(scheme.source.toString());\n            }\n            else {\n                Assert(rfc.schemeRegex.test(scheme), 'scheme at position ' + i + ' must be a valid scheme');\n                selections.push(EscapeRegex(scheme));\n            }\n        }\n\n        customScheme = selections.join('|');\n    }\n\n    // URI = scheme \":\" hier-part [ \"?\" query ] [ \"#\" fragment ]\n\n    const scheme = customScheme ? '(?:' + customScheme + ')' : rfc.scheme;\n    const absolute = '(?:' + scheme + ':' + (options.domain ? rfc.hierPartCapture : rfc.hierPart) + ')';\n    const prefix = options.allowRelative ? '(?:' + absolute + '|' + relative + ')' : absolute;\n    return internals.wrap(prefix + suffix, customScheme);\n};\n\n\ninternals.wrap = function (raw, scheme) {\n\n    raw = `(?=.)(?!https?\\:/(?:$|[^/]))(?!https?\\:///)(?!https?\\:[^/])${raw}`;     // Require at least one character and explicitly forbid 'http:/' or HTTP with empty domain\n\n    return {\n        raw,\n        regex: new RegExp(`^${raw}$`),\n        scheme\n    };\n};\n\n\ninternals.uriRegex = internals.createRegex({});\n\n\nexports.regex = function (options = {}) {\n\n    if (options.scheme ||\n        options.allowRelative ||\n        options.relativeOnly ||\n        options.allowQuerySquareBrackets ||\n        options.domain) {\n\n        return internals.createRegex(options);\n    }\n\n    return internals.uriRegex;\n};\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\n\nconst Uri = require('./uri');\n\n\nconst internals = {};\n\n\nexports.regex = function (options = {}) {\n\n    // CIDR\n\n    Assert(options.cidr === undefined || typeof options.cidr === 'string', 'options.cidr must be a string');\n    const cidr = options.cidr ? options.cidr.toLowerCase() : 'optional';\n    Assert(['required', 'optional', 'forbidden'].includes(cidr), 'options.cidr must be one of required, optional, forbidden');\n\n    // Versions\n\n    Assert(options.version === undefined || typeof options.version === 'string' || Array.isArray(options.version), 'options.version must be a string or an array of string');\n    let versions = options.version || ['ipv4', 'ipv6', 'ipvfuture'];\n    if (!Array.isArray(versions)) {\n        versions = [versions];\n    }\n\n    Assert(versions.length >= 1, 'options.version must have at least 1 version specified');\n\n    for (let i = 0; i < versions.length; ++i) {\n        Assert(typeof versions[i] === 'string', 'options.version must only contain strings');\n        versions[i] = versions[i].toLowerCase();\n        Assert(['ipv4', 'ipv6', 'ipvfuture'].includes(versions[i]), 'options.version contains unknown version ' + versions[i] + ' - must be one of ipv4, ipv6, ipvfuture');\n    }\n\n    versions = Array.from(new Set(versions));\n\n    // Regex\n\n    const parts = versions.map((version) => {\n\n        // Forbidden\n\n        if (cidr === 'forbidden') {\n            return Uri.ip[version];\n        }\n\n        // Required\n\n        const cidrpart = `\\\\/${version === 'ipv4' ? Uri.ip.v4Cidr : Uri.ip.v6Cidr}`;\n\n        if (cidr === 'required') {\n            return `${Uri.ip[version]}${cidrpart}`;\n        }\n\n        // Optional\n\n        return `${Uri.ip[version]}(?:${cidrpart})?`;\n    });\n\n    const raw = `(?:${parts.join('|')})`;\n    const regex = new RegExp(`^${raw}$`);\n    return { cidr, versions, regex, raw };\n};\n", "'use strict';\n\nconst internals = {};\n\n\n// http://data.iana.org/TLD/tlds-alpha-by-domain.txt\n// # Version 2024012900, Last Updated Mon Jan 29 07:07:01 2024 UTC\n\n\ninternals.tlds = [\n    'AAA',\n    'AARP',\n    'ABB',\n    'ABBOTT',\n    'ABBVIE',\n    'ABC',\n    'ABLE',\n    'ABOGADO',\n    'ABUDHABI',\n    'AC',\n    'ACADEMY',\n    'ACCENTURE',\n    'ACCOUNTANT',\n    'ACCOUNTANTS',\n    'ACO',\n    'ACTOR',\n    'AD',\n    'ADS',\n    'ADULT',\n    'AE',\n    'AEG',\n    'AERO',\n    'AETNA',\n    'AF',\n    'AFL',\n    'AFRICA',\n    'AG',\n    'AGAKHAN',\n    'AGENCY',\n    'AI',\n    'AIG',\n    'AIRBUS',\n    'AIRFORCE',\n    'AIRTEL',\n    'AKDN',\n    'AL',\n    'ALIBABA',\n    'ALIPAY',\n    'ALLFINANZ',\n    'ALLSTATE',\n    'ALLY',\n    'ALSACE',\n    'ALSTOM',\n    'AM',\n    'AMAZON',\n    'AMERICANEXPRESS',\n    'AMERICANFAMILY',\n    'AMEX',\n    'AMFAM',\n    'AMICA',\n    'AMSTERDAM',\n    'ANALYTICS',\n    'ANDROID',\n    'ANQUAN',\n    'ANZ',\n    'AO',\n    'AOL',\n    'APARTMENTS',\n    'APP',\n    'APPLE',\n    'AQ',\n    'AQUARELLE',\n    'AR',\n    'ARAB',\n    'ARAMCO',\n    'ARCHI',\n    'ARMY',\n    'ARPA',\n    'ART',\n    'ARTE',\n    'AS',\n    'ASDA',\n    'ASIA',\n    'ASSOCIATES',\n    'AT',\n    'ATHLETA',\n    'ATTORNEY',\n    'AU',\n    'AUCTION',\n    'AUDI',\n    'AUDIBLE',\n    'AUDIO',\n    'AUSPOST',\n    'AUTHOR',\n    'AUTO',\n    'AUTOS',\n    'AVIANCA',\n    'AW',\n    'AWS',\n    'AX',\n    'AXA',\n    'AZ',\n    'AZURE',\n    'BA',\n    'BABY',\n    'BAIDU',\n    'BANAMEX',\n    'BAND',\n    'BANK',\n    'BAR',\n    'BARCELONA',\n    'BARCLAYCARD',\n    'BARCLAYS',\n    'BAREFOOT',\n    'BARGAINS',\n    'BASEBALL',\n    'BASKETBALL',\n    'BAUHAUS',\n    'BAYERN',\n    'BB',\n    'BBC',\n    'BBT',\n    'BBVA',\n    'BCG',\n    'BCN',\n    'BD',\n    'BE',\n    'BEATS',\n    'BEAUTY',\n    'BEER',\n    'BENTLEY',\n    'BERLIN',\n    'BEST',\n    'BESTBUY',\n    'BET',\n    'BF',\n    'BG',\n    'BH',\n    'BHARTI',\n    'BI',\n    'BIBLE',\n    'BID',\n    'BIKE',\n    'BING',\n    'BINGO',\n    'BIO',\n    'BIZ',\n    'BJ',\n    'BLACK',\n    'BLACKFRIDAY',\n    'BLOCKBUSTER',\n    'BLOG',\n    'BLOOMBERG',\n    'BLUE',\n    'BM',\n    'BMS',\n    'BMW',\n    'BN',\n    'BNPPARIBAS',\n    'BO',\n    'BOATS',\n    'BOEHRINGER',\n    'BOFA',\n    'BOM',\n    'BOND',\n    'BOO',\n    'BOOK',\n    'BOOKING',\n    'BOSCH',\n    'BOSTIK',\n    'BOSTON',\n    'BOT',\n    'BOUTIQUE',\n    'BOX',\n    'BR',\n    'BRADESCO',\n    'BRIDGESTONE',\n    'BROADWAY',\n    'BROKER',\n    'BROTHER',\n    'BRUSSELS',\n    'BS',\n    'BT',\n    'BUILD',\n    'BUILDERS',\n    'BUSINESS',\n    'BUY',\n    'BUZZ',\n    'BV',\n    'BW',\n    'BY',\n    'BZ',\n    'BZH',\n    'CA',\n    'CAB',\n    'CAFE',\n    'CAL',\n    'CALL',\n    'CALVINKLEIN',\n    'CAM',\n    'CAMERA',\n    'CAMP',\n    'CANON',\n    'CAPETOWN',\n    'CAPITAL',\n    'CAPITALONE',\n    'CAR',\n    'CARAVAN',\n    'CARDS',\n    'CARE',\n    'CAREER',\n    'CAREERS',\n    'CARS',\n    'CASA',\n    'CASE',\n    'CASH',\n    'CASINO',\n    'CAT',\n    'CATERING',\n    'CATHOLIC',\n    'CBA',\n    'CBN',\n    'CBRE',\n    'CC',\n    'CD',\n    'CENTER',\n    'CEO',\n    'CERN',\n    'CF',\n    'CFA',\n    'CFD',\n    'CG',\n    'CH',\n    'CHANEL',\n    'CHANNEL',\n    'CHARITY',\n    'CHASE',\n    'CHAT',\n    'CHEAP',\n    'CHINTAI',\n    'CHRISTMAS',\n    'CHROME',\n    'CHURCH',\n    'CI',\n    'CIPRIANI',\n    'CIRCLE',\n    'CISCO',\n    'CITADEL',\n    'CITI',\n    'CITIC',\n    'CITY',\n    'CK',\n    'CL',\n    'CLAIMS',\n    'CLEANING',\n    'CLICK',\n    'CLINIC',\n    'CLINIQUE',\n    'CLOTHING',\n    'CLOUD',\n    'CLUB',\n    'CLUBMED',\n    'CM',\n    'CN',\n    'CO',\n    'COACH',\n    'CODES',\n    'COFFEE',\n    'COLLEGE',\n    'COLOGNE',\n    'COM',\n    'COMCAST',\n    'COMMBANK',\n    'COMMUNITY',\n    'COMPANY',\n    'COMPARE',\n    'COMPUTER',\n    'COMSEC',\n    'CONDOS',\n    'CONSTRUCTION',\n    'CONSULTING',\n    'CONTACT',\n    'CONTRACTORS',\n    'COOKING',\n    'COOL',\n    'COOP',\n    'CORSICA',\n    'COUNTRY',\n    'COUPON',\n    'COUPONS',\n    'COURSES',\n    'CPA',\n    'CR',\n    'CREDIT',\n    'CREDITCARD',\n    'CREDITUNION',\n    'CRICKET',\n    'CROWN',\n    'CRS',\n    'CRUISE',\n    'CRUISES',\n    'CU',\n    'CUISINELLA',\n    'CV',\n    'CW',\n    'CX',\n    'CY',\n    'CYMRU',\n    'CYOU',\n    'CZ',\n    'DABUR',\n    'DAD',\n    'DANCE',\n    'DATA',\n    'DATE',\n    'DATING',\n    'DATSUN',\n    'DAY',\n    'DCLK',\n    'DDS',\n    'DE',\n    'DEAL',\n    'DEALER',\n    'DEALS',\n    'DEGREE',\n    'DELIVERY',\n    'DELL',\n    'DELOITTE',\n    'DELTA',\n    'DEMOCRAT',\n    'DENTAL',\n    'DENTIST',\n    'DESI',\n    'DESIGN',\n    'DEV',\n    'DHL',\n    'DIAMONDS',\n    'DIET',\n    'DIGITAL',\n    'DIRECT',\n    'DIRECTORY',\n    'DISCOUNT',\n    'DISCOVER',\n    'DISH',\n    'DIY',\n    'DJ',\n    'DK',\n    'DM',\n    'DNP',\n    'DO',\n    'DOCS',\n    'DOCTOR',\n    'DOG',\n    'DOMAINS',\n    'DOT',\n    'DOWNLOAD',\n    'DRIVE',\n    'DTV',\n    'DUBAI',\n    'DUNLOP',\n    'DUPONT',\n    'DURBAN',\n    'DVAG',\n    'DVR',\n    'DZ',\n    'EARTH',\n    'EAT',\n    'EC',\n    'ECO',\n    'EDEKA',\n    'EDU',\n    'EDUCATION',\n    'EE',\n    'EG',\n    'EMAIL',\n    'EMERCK',\n    'ENERGY',\n    'ENGINEER',\n    'ENGINEERING',\n    'ENTERPRISES',\n    'EPSON',\n    'EQUIPMENT',\n    'ER',\n    'ERICSSON',\n    'ERNI',\n    'ES',\n    'ESQ',\n    'ESTATE',\n    'ET',\n    'EU',\n    'EUROVISION',\n    'EUS',\n    'EVENTS',\n    'EXCHANGE',\n    'EXPERT',\n    'EXPOSED',\n    'EXPRESS',\n    'EXTRASPACE',\n    'FAGE',\n    'FAIL',\n    'FAIRWINDS',\n    'FAITH',\n    'FAMILY',\n    'FAN',\n    'FANS',\n    'FARM',\n    'FARMERS',\n    'FASHION',\n    'FAST',\n    'FEDEX',\n    'FEEDBACK',\n    'FERRARI',\n    'FERRERO',\n    'FI',\n    'FIDELITY',\n    'FIDO',\n    'FILM',\n    'FINAL',\n    'FINANCE',\n    'FINANCIAL',\n    'FIRE',\n    'FIRESTONE',\n    'FIRMDALE',\n    'FISH',\n    'FISHING',\n    'FIT',\n    'FITNESS',\n    'FJ',\n    'FK',\n    'FLICKR',\n    'FLIGHTS',\n    'FLIR',\n    'FLORIST',\n    'FLOWERS',\n    'FLY',\n    'FM',\n    'FO',\n    'FOO',\n    'FOOD',\n    'FOOTBALL',\n    'FORD',\n    'FOREX',\n    'FORSALE',\n    'FORUM',\n    'FOUNDATION',\n    'FOX',\n    'FR',\n    'FREE',\n    'FRESENIUS',\n    'FRL',\n    'FROGANS',\n    'FRONTIER',\n    'FTR',\n    'FUJITSU',\n    'FUN',\n    'FUND',\n    'FURNITURE',\n    'FUTBOL',\n    'FYI',\n    'GA',\n    'GAL',\n    'GALLERY',\n    'GALLO',\n    'GALLUP',\n    'GAME',\n    'GAMES',\n    'GAP',\n    'GARDEN',\n    'GAY',\n    'GB',\n    'GBIZ',\n    'GD',\n    'GDN',\n    'GE',\n    'GEA',\n    'GENT',\n    'GENTING',\n    'GEORGE',\n    'GF',\n    'GG',\n    'GGEE',\n    'GH',\n    'GI',\n    'GIFT',\n    'GIFTS',\n    'GIVES',\n    'GIVING',\n    'GL',\n    'GLASS',\n    'GLE',\n    'GLOBAL',\n    'GLOBO',\n    'GM',\n    'GMAIL',\n    'GMBH',\n    'GMO',\n    'GMX',\n    'GN',\n    'GODADDY',\n    'GOLD',\n    'GOLDPOINT',\n    'GOLF',\n    'GOO',\n    'GOODYEAR',\n    'GOOG',\n    'GOOGLE',\n    'GOP',\n    'GOT',\n    'GOV',\n    'GP',\n    'GQ',\n    'GR',\n    'GRAINGER',\n    'GRAPHICS',\n    'GRATIS',\n    'GREEN',\n    'GRIPE',\n    'GROCERY',\n    'GROUP',\n    'GS',\n    'GT',\n    'GU',\n    'GUARDIAN',\n    'GUCCI',\n    'GUGE',\n    'GUIDE',\n    'GUITARS',\n    'GURU',\n    'GW',\n    'GY',\n    'HAIR',\n    'HAMBURG',\n    'HANGOUT',\n    'HAUS',\n    'HBO',\n    'HDFC',\n    'HDFCBANK',\n    'HEALTH',\n    'HEALTHCARE',\n    'HELP',\n    'HELSINKI',\n    'HERE',\n    'HERMES',\n    'HIPHOP',\n    'HISAMITSU',\n    'HITACHI',\n    'HIV',\n    'HK',\n    'HKT',\n    'HM',\n    'HN',\n    'HOCKEY',\n    'HOLDINGS',\n    'HOLIDAY',\n    'HOMEDEPOT',\n    'HOMEGOODS',\n    'HOMES',\n    'HOMESENSE',\n    'HONDA',\n    'HORSE',\n    'HOSPITAL',\n    'HOST',\n    'HOSTING',\n    'HOT',\n    'HOTELS',\n    'HOTMAIL',\n    'HOUSE',\n    'HOW',\n    'HR',\n    'HSBC',\n    'HT',\n    'HU',\n    'HUGHES',\n    'HYATT',\n    'HYUNDAI',\n    'IBM',\n    'ICBC',\n    'ICE',\n    'ICU',\n    'ID',\n    'IE',\n    'IEEE',\n    'IFM',\n    'IKANO',\n    'IL',\n    'IM',\n    'IMAMAT',\n    'IMDB',\n    'IMMO',\n    'IMMOBILIEN',\n    'IN',\n    'INC',\n    'INDUSTRIES',\n    'INFINITI',\n    'INFO',\n    'ING',\n    'INK',\n    'INSTITUTE',\n    'INSURANCE',\n    'INSURE',\n    'INT',\n    'INTERNATIONAL',\n    'INTUIT',\n    'INVESTMENTS',\n    'IO',\n    'IPIRANGA',\n    'IQ',\n    'IR',\n    'IRISH',\n    'IS',\n    'ISMAILI',\n    'IST',\n    'ISTANBUL',\n    'IT',\n    'ITAU',\n    'ITV',\n    'JAGUAR',\n    'JAVA',\n    'JCB',\n    'JE',\n    'JEEP',\n    'JETZT',\n    'JEWELRY',\n    'JIO',\n    'JLL',\n    'JM',\n    'JMP',\n    'JNJ',\n    'JO',\n    'JOBS',\n    'JOBURG',\n    'JOT',\n    'JOY',\n    'JP',\n    'JPMORGAN',\n    'JPRS',\n    'JUEGOS',\n    'JUNIPER',\n    'KAUFEN',\n    'KDDI',\n    'KE',\n    'KERRYHOTELS',\n    'KERRYLOGISTICS',\n    'KERRYPROPERTIES',\n    'KFH',\n    'KG',\n    'KH',\n    'KI',\n    'KIA',\n    'KIDS',\n    'KIM',\n    'KINDLE',\n    'KITCHEN',\n    'KIWI',\n    'KM',\n    'KN',\n    'KOELN',\n    'KOMATSU',\n    'KOSHER',\n    'KP',\n    'KPMG',\n    'KPN',\n    'KR',\n    'KRD',\n    'KRED',\n    'KUOKGROUP',\n    'KW',\n    'KY',\n    'KYOTO',\n    'KZ',\n    'LA',\n    'LACAIXA',\n    'LAMBORGHINI',\n    'LAMER',\n    'LANCASTER',\n    'LAND',\n    'LANDROVER',\n    'LANXESS',\n    'LASALLE',\n    'LAT',\n    'LATINO',\n    'LATROBE',\n    'LAW',\n    'LAWYER',\n    'LB',\n    'LC',\n    'LDS',\n    'LEASE',\n    'LECLERC',\n    'LEFRAK',\n    'LEGAL',\n    'LEGO',\n    'LEXUS',\n    'LGBT',\n    'LI',\n    'LIDL',\n    'LIFE',\n    'LIFEINSURANCE',\n    'LIFESTYLE',\n    'LIGHTING',\n    'LIKE',\n    'LILLY',\n    'LIMITED',\n    'LIMO',\n    'LINCOLN',\n    'LINK',\n    'LIPSY',\n    'LIVE',\n    'LIVING',\n    'LK',\n    'LLC',\n    'LLP',\n    'LOAN',\n    'LOANS',\n    'LOCKER',\n    'LOCUS',\n    'LOL',\n    'LONDON',\n    'LOTTE',\n    'LOTTO',\n    'LOVE',\n    'LPL',\n    'LPLFINANCIAL',\n    'LR',\n    'LS',\n    'LT',\n    'LTD',\n    'LTDA',\n    'LU',\n    'LUNDBECK',\n    'LUXE',\n    'LUXURY',\n    'LV',\n    'LY',\n    'MA',\n    'MADRID',\n    'MAIF',\n    'MAISON',\n    'MAKEUP',\n    'MAN',\n    'MANAGEMENT',\n    'MANGO',\n    'MAP',\n    'MARKET',\n    'MARKETING',\n    'MARKETS',\n    'MARRIOTT',\n    'MARSHALLS',\n    'MATTEL',\n    'MBA',\n    'MC',\n    'MCKINSEY',\n    'MD',\n    'ME',\n    'MED',\n    'MEDIA',\n    'MEET',\n    'MELBOURNE',\n    'MEME',\n    'MEMORIAL',\n    'MEN',\n    'MENU',\n    'MERCKMSD',\n    'MG',\n    'MH',\n    'MIAMI',\n    'MICROSOFT',\n    'MIL',\n    'MINI',\n    'MINT',\n    'MIT',\n    'MITSUBISHI',\n    'MK',\n    'ML',\n    'MLB',\n    'MLS',\n    'MM',\n    'MMA',\n    'MN',\n    'MO',\n    'MOBI',\n    'MOBILE',\n    'MODA',\n    'MOE',\n    'MOI',\n    'MOM',\n    'MONASH',\n    'MONEY',\n    'MONSTER',\n    'MORMON',\n    'MORTGAGE',\n    'MOSCOW',\n    'MOTO',\n    'MOTORCYCLES',\n    'MOV',\n    'MOVIE',\n    'MP',\n    'MQ',\n    'MR',\n    'MS',\n    'MSD',\n    'MT',\n    'MTN',\n    'MTR',\n    'MU',\n    'MUSEUM',\n    'MUSIC',\n    'MV',\n    'MW',\n    'MX',\n    'MY',\n    'MZ',\n    'NA',\n    'NAB',\n    'NAGOYA',\n    'NAME',\n    'NATURA',\n    'NAVY',\n    'NBA',\n    'NC',\n    'NE',\n    'NEC',\n    'NET',\n    'NETBANK',\n    'NETFLIX',\n    'NETWORK',\n    'NEUSTAR',\n    'NEW',\n    'NEWS',\n    'NEXT',\n    'NEXTDIRECT',\n    'NEXUS',\n    'NF',\n    'NFL',\n    'NG',\n    'NGO',\n    'NHK',\n    'NI',\n    'NICO',\n    'NIKE',\n    'NIKON',\n    'NINJA',\n    'NISSAN',\n    'NISSAY',\n    'NL',\n    'NO',\n    'NOKIA',\n    'NORTON',\n    'NOW',\n    'NOWRUZ',\n    'NOWTV',\n    'NP',\n    'NR',\n    'NRA',\n    'NRW',\n    'NTT',\n    'NU',\n    'NYC',\n    'NZ',\n    'OBI',\n    'OBSERVER',\n    'OFFICE',\n    'OKINAWA',\n    'OLAYAN',\n    'OLAYANGROUP',\n    'OLLO',\n    'OM',\n    'OMEGA',\n    'ONE',\n    'ONG',\n    'ONL',\n    'ONLINE',\n    'OOO',\n    'OPEN',\n    'ORACLE',\n    'ORANGE',\n    'ORG',\n    'ORGANIC',\n    'ORIGINS',\n    'OSAKA',\n    'OTSUKA',\n    'OTT',\n    'OVH',\n    'PA',\n    'PAGE',\n    'PANASONIC',\n    'PARIS',\n    'PARS',\n    'PARTNERS',\n    'PARTS',\n    'PARTY',\n    'PAY',\n    'PCCW',\n    'PE',\n    'PET',\n    'PF',\n    'PFIZER',\n    'PG',\n    'PH',\n    'PHARMACY',\n    'PHD',\n    'PHILIPS',\n    'PHONE',\n    'PHOTO',\n    'PHOTOGRAPHY',\n    'PHOTOS',\n    'PHYSIO',\n    'PICS',\n    'PICTET',\n    'PICTURES',\n    'PID',\n    'PIN',\n    'PING',\n    'PINK',\n    'PIONEER',\n    'PIZZA',\n    'PK',\n    'PL',\n    'PLACE',\n    'PLAY',\n    'PLAYSTATION',\n    'PLUMBING',\n    'PLUS',\n    'PM',\n    'PN',\n    'PNC',\n    'POHL',\n    'POKER',\n    'POLITIE',\n    'PORN',\n    'POST',\n    'PR',\n    'PRAMERICA',\n    'PRAXI',\n    'PRESS',\n    'PRIME',\n    'PRO',\n    'PROD',\n    'PRODUCTIONS',\n    'PROF',\n    'PROGRESSIVE',\n    'PROMO',\n    'PROPERTIES',\n    'PROPERTY',\n    'PROTECTION',\n    'PRU',\n    'PRUDENTIAL',\n    'PS',\n    'PT',\n    'PUB',\n    'PW',\n    'PWC',\n    'PY',\n    'QA',\n    'QPON',\n    'QUEBEC',\n    'QUEST',\n    'RACING',\n    'RADIO',\n    'RE',\n    'READ',\n    'REALESTATE',\n    'REALTOR',\n    'REALTY',\n    'RECIPES',\n    'RED',\n    'REDSTONE',\n    'REDUMBRELLA',\n    'REHAB',\n    'REISE',\n    'REISEN',\n    'REIT',\n    'RELIANCE',\n    'REN',\n    'RENT',\n    'RENTALS',\n    'REPAIR',\n    'REPORT',\n    'REPUBLICAN',\n    'REST',\n    'RESTAURANT',\n    'REVIEW',\n    'REVIEWS',\n    'REXROTH',\n    'RICH',\n    'RICHARDLI',\n    'RICOH',\n    'RIL',\n    'RIO',\n    'RIP',\n    'RO',\n    'ROCKS',\n    'RODEO',\n    'ROGERS',\n    'ROOM',\n    'RS',\n    'RSVP',\n    'RU',\n    'RUGBY',\n    'RUHR',\n    'RUN',\n    'RW',\n    'RWE',\n    'RYUKYU',\n    'SA',\n    'SAARLAND',\n    'SAFE',\n    'SAFETY',\n    'SAKURA',\n    'SALE',\n    'SALON',\n    'SAMSCLUB',\n    'SAMSUNG',\n    'SANDVIK',\n    'SANDVIKCOROMANT',\n    'SANOFI',\n    'SAP',\n    'SARL',\n    'SAS',\n    'SAVE',\n    'SAXO',\n    'SB',\n    'SBI',\n    'SBS',\n    'SC',\n    'SCB',\n    'SCHAEFFLER',\n    'SCHMIDT',\n    'SCHOLARSHIPS',\n    'SCHOOL',\n    'SCHULE',\n    'SCHWARZ',\n    'SCIENCE',\n    'SCOT',\n    'SD',\n    'SE',\n    'SEARCH',\n    'SEAT',\n    'SECURE',\n    'SECURITY',\n    'SEEK',\n    'SELECT',\n    'SENER',\n    'SERVICES',\n    'SEVEN',\n    'SEW',\n    'SEX',\n    'SEXY',\n    'SFR',\n    'SG',\n    'SH',\n    'SHANGRILA',\n    'SHARP',\n    'SHAW',\n    'SHELL',\n    'SHIA',\n    'SHIKSHA',\n    'SHOES',\n    'SHOP',\n    'SHOPPING',\n    'SHOUJI',\n    'SHOW',\n    'SI',\n    'SILK',\n    'SINA',\n    'SINGLES',\n    'SITE',\n    'SJ',\n    'SK',\n    'SKI',\n    'SKIN',\n    'SKY',\n    'SKYPE',\n    'SL',\n    'SLING',\n    'SM',\n    'SMART',\n    'SMILE',\n    'SN',\n    'SNCF',\n    'SO',\n    'SOCCER',\n    'SOCIAL',\n    'SOFTBANK',\n    'SOFTWARE',\n    'SOHU',\n    'SOLAR',\n    'SOLUTIONS',\n    'SONG',\n    'SONY',\n    'SOY',\n    'SPA',\n    'SPACE',\n    'SPORT',\n    'SPOT',\n    'SR',\n    'SRL',\n    'SS',\n    'ST',\n    'STADA',\n    'STAPLES',\n    'STAR',\n    'STATEBANK',\n    'STATEFARM',\n    'STC',\n    'STCGROUP',\n    'STOCKHOLM',\n    'STORAGE',\n    'STORE',\n    'STREAM',\n    'STUDIO',\n    'STUDY',\n    'STYLE',\n    'SU',\n    'SUCKS',\n    'SUPPLIES',\n    'SUPPLY',\n    'SUPPORT',\n    'SURF',\n    'SURGERY',\n    'SUZUKI',\n    'SV',\n    'SWATCH',\n    'SWISS',\n    'SX',\n    'SY',\n    'SYDNEY',\n    'SYSTEMS',\n    'SZ',\n    'TAB',\n    'TAIPEI',\n    'TALK',\n    'TAOBAO',\n    'TARGET',\n    'TATAMOTORS',\n    'TATAR',\n    'TATTOO',\n    'TAX',\n    'TAXI',\n    'TC',\n    'TCI',\n    'TD',\n    'TDK',\n    'TEAM',\n    'TECH',\n    'TECHNOLOGY',\n    'TEL',\n    'TEMASEK',\n    'TENNIS',\n    'TEVA',\n    'TF',\n    'TG',\n    'TH',\n    'THD',\n    'THEATER',\n    'THEATRE',\n    'TIAA',\n    'TICKETS',\n    'TIENDA',\n    'TIPS',\n    'TIRES',\n    'TIROL',\n    'TJ',\n    'TJMAXX',\n    'TJX',\n    'TK',\n    'TKMAXX',\n    'TL',\n    'TM',\n    'TMALL',\n    'TN',\n    'TO',\n    'TODAY',\n    'TOKYO',\n    'TOOLS',\n    'TOP',\n    'TORAY',\n    'TOSHIBA',\n    'TOTAL',\n    'TOURS',\n    'TOWN',\n    'TOYOTA',\n    'TOYS',\n    'TR',\n    'TRADE',\n    'TRADING',\n    'TRAINING',\n    'TRAVEL',\n    'TRAVELERS',\n    'TRAVELERSINSURANCE',\n    'TRUST',\n    'TRV',\n    'TT',\n    'TUBE',\n    'TUI',\n    'TUNES',\n    'TUSHU',\n    'TV',\n    'TVS',\n    'TW',\n    'TZ',\n    'UA',\n    'UBANK',\n    'UBS',\n    'UG',\n    'UK',\n    'UNICOM',\n    'UNIVERSITY',\n    'UNO',\n    'UOL',\n    'UPS',\n    'US',\n    'UY',\n    'UZ',\n    'VA',\n    'VACATIONS',\n    'VANA',\n    'VANGUARD',\n    'VC',\n    'VE',\n    'VEGAS',\n    'VENTURES',\n    'VERISIGN',\n    'VERSICHERUNG',\n    'VET',\n    'VG',\n    'VI',\n    'VIAJES',\n    'VIDEO',\n    'VIG',\n    'VIKING',\n    'VILLAS',\n    'VIN',\n    'VIP',\n    'VIRGIN',\n    'VISA',\n    'VISION',\n    'VIVA',\n    'VIVO',\n    'VLAANDEREN',\n    'VN',\n    'VODKA',\n    'VOLVO',\n    'VOTE',\n    'VOTING',\n    'VOTO',\n    'VOYAGE',\n    'VU',\n    'WALES',\n    'WALMART',\n    'WALTER',\n    'WANG',\n    'WANGGOU',\n    'WATCH',\n    'WATCHES',\n    'WEATHER',\n    'WEATHERCHANNEL',\n    'WEBCAM',\n    'WEBER',\n    'WEBSITE',\n    'WED',\n    'WEDDING',\n    'WEIBO',\n    'WEIR',\n    'WF',\n    'WHOSWHO',\n    'WIEN',\n    'WIKI',\n    'WILLIAMHILL',\n    'WIN',\n    'WINDOWS',\n    'WINE',\n    'WINNERS',\n    'WME',\n    'WOLTERSKLUWER',\n    'WOODSIDE',\n    'WORK',\n    'WORKS',\n    'WORLD',\n    'WOW',\n    'WS',\n    'WTC',\n    'WTF',\n    'XBOX',\n    'XEROX',\n    'XFINITY',\n    'XIHUAN',\n    'XIN',\n    'XN--11B4C3D',\n    'XN--1CK2E1B',\n    'XN--1QQW23A',\n    'XN--2SCRJ9C',\n    'XN--30RR7Y',\n    'XN--3BST00M',\n    'XN--3DS443G',\n    'XN--3E0B707E',\n    'XN--3HCRJ9C',\n    'XN--3PXU8K',\n    'XN--42C2D9A',\n    'XN--45BR5CYL',\n    'XN--45BRJ9C',\n    'XN--45Q11C',\n    'XN--4DBRK0CE',\n    'XN--4GBRIM',\n    'XN--54B7FTA0CC',\n    'XN--55QW42G',\n    'XN--55QX5D',\n    'XN--5SU34J936BGSG',\n    'XN--5TZM5G',\n    'XN--6FRZ82G',\n    'XN--6QQ986B3XL',\n    'XN--80ADXHKS',\n    'XN--80AO21A',\n    'XN--80AQECDR1A',\n    'XN--80ASEHDB',\n    'XN--80ASWG',\n    'XN--8Y0A063A',\n    'XN--90A3AC',\n    'XN--90AE',\n    'XN--90AIS',\n    'XN--9DBQ2A',\n    'XN--9ET52U',\n    'XN--9KRT00A',\n    'XN--B4W605FERD',\n    'XN--BCK1B9A5DRE4C',\n    'XN--C1AVG',\n    'XN--C2BR7G',\n    'XN--CCK2B3B',\n    'XN--CCKWCXETD',\n    'XN--CG4BKI',\n    'XN--CLCHC0EA0B2G2A9GCD',\n    'XN--CZR694B',\n    'XN--CZRS0T',\n    'XN--CZRU2D',\n    'XN--D1ACJ3B',\n    'XN--D1ALF',\n    'XN--E1A4C',\n    'XN--ECKVDTC9D',\n    'XN--EFVY88H',\n    'XN--FCT429K',\n    'XN--FHBEI',\n    'XN--FIQ228C5HS',\n    'XN--FIQ64B',\n    'XN--FIQS8S',\n    'XN--FIQZ9S',\n    'XN--FJQ720A',\n    'XN--FLW351E',\n    'XN--FPCRJ9C3D',\n    'XN--FZC2C9E2C',\n    'XN--FZYS8D69UVGM',\n    'XN--G2XX48C',\n    'XN--GCKR3F0F',\n    'XN--GECRJ9C',\n    'XN--GK3AT1E',\n    'XN--H2BREG3EVE',\n    'XN--H2BRJ9C',\n    'XN--H2BRJ9C8C',\n    'XN--HXT814E',\n    'XN--I1B6B1A6A2E',\n    'XN--IMR513N',\n    'XN--IO0A7I',\n    'XN--J1AEF',\n    'XN--J1AMH',\n    'XN--J6W193G',\n    'XN--JLQ480N2RG',\n    'XN--JVR189M',\n    'XN--KCRX77D1X4A',\n    'XN--KPRW13D',\n    'XN--KPRY57D',\n    'XN--KPUT3I',\n    'XN--L1ACC',\n    'XN--LGBBAT1AD8J',\n    'XN--MGB9AWBF',\n    'XN--MGBA3A3EJT',\n    'XN--MGBA3A4F16A',\n    'XN--MGBA7C0BBN0A',\n    'XN--MGBAAM7A8H',\n    'XN--MGBAB2BD',\n    'XN--MGBAH1A3HJKRD',\n    'XN--MGBAI9AZGQP6J',\n    'XN--MGBAYH7GPA',\n    'XN--MGBBH1A',\n    'XN--MGBBH1A71E',\n    'XN--MGBC0A9AZCG',\n    'XN--MGBCA7DZDO',\n    'XN--MGBCPQ6GPA1A',\n    'XN--MGBERP4A5D4AR',\n    'XN--MGBGU82A',\n    'XN--MGBI4ECEXP',\n    'XN--MGBPL2FH',\n    'XN--MGBT3DHD',\n    'XN--MGBTX2B',\n    'XN--MGBX4CD0AB',\n    'XN--MIX891F',\n    'XN--MK1BU44C',\n    'XN--MXTQ1M',\n    'XN--NGBC5AZD',\n    'XN--NGBE9E0A',\n    'XN--NGBRX',\n    'XN--NODE',\n    'XN--NQV7F',\n    'XN--NQV7FS00EMA',\n    'XN--NYQY26A',\n    'XN--O3CW4H',\n    'XN--OGBPF8FL',\n    'XN--OTU796D',\n    'XN--P1ACF',\n    'XN--P1AI',\n    'XN--PGBS0DH',\n    'XN--PSSY2U',\n    'XN--Q7CE6A',\n    'XN--Q9JYB4C',\n    'XN--QCKA1PMC',\n    'XN--QXA6A',\n    'XN--QXAM',\n    'XN--RHQV96G',\n    'XN--ROVU88B',\n    'XN--RVC1E0AM3E',\n    'XN--S9BRJ9C',\n    'XN--SES554G',\n    'XN--T60B56A',\n    'XN--TCKWE',\n    'XN--TIQ49XQYJ',\n    'XN--UNUP4Y',\n    'XN--VERMGENSBERATER-CTB',\n    'XN--VERMGENSBERATUNG-PWB',\n    'XN--VHQUV',\n    'XN--VUQ861B',\n    'XN--W4R85EL8FHU5DNRA',\n    'XN--W4RS40L',\n    'XN--WGBH1C',\n    'XN--WGBL6A',\n    'XN--XHQ521B',\n    'XN--XKC2AL3HYE2A',\n    'XN--XKC2DL3A5EE0H',\n    'XN--Y9A3AQ',\n    'XN--YFRO4I67O',\n    'XN--YGBI2AMMX',\n    'XN--ZFR164B',\n    'XXX',\n    'XYZ',\n    'YACHTS',\n    'YAHOO',\n    'YAMAXUN',\n    'YANDEX',\n    'YE',\n    'YODOBASHI',\n    'YOGA',\n    'YOKOHAMA',\n    'YOU',\n    'YOUTUBE',\n    'YT',\n    'YUN',\n    'ZA',\n    'ZAPPOS',\n    'ZARA',\n    'ZERO',\n    'ZIP',\n    'ZM',\n    'ZONE',\n    'ZUERICH',\n    'ZW'\n];\n\n\n// Keep as upper-case to make updating from source easier\n\nmodule.exports = new Set(internals.tlds.map((tld) => tld.toLowerCase()));\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\nconst Domain = require('@sideway/address/lib/domain');\nconst Email = require('@sideway/address/lib/email');\nconst Ip = require('@sideway/address/lib/ip');\nconst EscapeRegex = require('@hapi/hoek/lib/escapeRegex');\nconst Tlds = require('@sideway/address/lib/tlds');\nconst Uri = require('@sideway/address/lib/uri');\n\nconst Any = require('./any');\nconst Common = require('../common');\n\n\nconst internals = {\n    tlds: Tlds instanceof Set ? { tlds: { allow: Tlds, deny: null } } : false,              // $lab:coverage:ignore$\n    base64Regex: {\n        // paddingRequired\n        true: {\n            // urlSafe\n            true: /^(?:[\\w\\-]{2}[\\w\\-]{2})*(?:[\\w\\-]{2}==|[\\w\\-]{3}=)?$/,\n            false: /^(?:[A-Za-z0-9+\\/]{2}[A-Za-z0-9+\\/]{2})*(?:[A-Za-z0-9+\\/]{2}==|[A-Za-z0-9+\\/]{3}=)?$/\n        },\n        false: {\n            true: /^(?:[\\w\\-]{2}[\\w\\-]{2})*(?:[\\w\\-]{2}(==)?|[\\w\\-]{3}=?)?$/,\n            false: /^(?:[A-Za-z0-9+\\/]{2}[A-Za-z0-9+\\/]{2})*(?:[A-Za-z0-9+\\/]{2}(==)?|[A-Za-z0-9+\\/]{3}=?)?$/\n        }\n    },\n    dataUriRegex: /^data:[\\w+.-]+\\/[\\w+.-]+;((charset=[\\w-]+|base64),)?(.*)$/,\n    hexRegex: {\n        withPrefix: /^0x[0-9a-f]+$/i,\n        withOptionalPrefix: /^(?:0x)?[0-9a-f]+$/i,\n        withoutPrefix: /^[0-9a-f]+$/i\n    },\n    ipRegex: Ip.regex({ cidr: 'forbidden' }).regex,\n    isoDurationRegex: /^P(?!$)(\\d+Y)?(\\d+M)?(\\d+W)?(\\d+D)?(T(?=\\d)(\\d+H)?(\\d+M)?(\\d+S)?)?$/,\n\n    guidBrackets: {\n        '{': '}', '[': ']', '(': ')', '': ''\n    },\n    guidVersions: {\n        uuidv1: '1',\n        uuidv2: '2',\n        uuidv3: '3',\n        uuidv4: '4',\n        uuidv5: '5',\n        uuidv6: '6',\n        uuidv7: '7',\n        uuidv8: '8'\n    },\n    guidSeparators: new Set([undefined, true, false, '-', ':']),\n\n    normalizationForms: ['NFC', 'NFD', 'NFKC', 'NFKD']\n};\n\n\nmodule.exports = Any.extend({\n\n    type: 'string',\n\n    flags: {\n\n        insensitive: { default: false },\n        truncate: { default: false }\n    },\n\n    terms: {\n\n        replacements: { init: null }\n    },\n\n    coerce: {\n        from: 'string',\n        method(value, { schema, state, prefs }) {\n\n            const normalize = schema.$_getRule('normalize');\n            if (normalize) {\n                value = value.normalize(normalize.args.form);\n            }\n\n            const casing = schema.$_getRule('case');\n            if (casing) {\n                value = casing.args.direction === 'upper' ? value.toLocaleUpperCase() : value.toLocaleLowerCase();\n            }\n\n            const trim = schema.$_getRule('trim');\n            if (trim &&\n                trim.args.enabled) {\n\n                value = value.trim();\n            }\n\n            if (schema.$_terms.replacements) {\n                for (const replacement of schema.$_terms.replacements) {\n                    value = value.replace(replacement.pattern, replacement.replacement);\n                }\n            }\n\n            const hex = schema.$_getRule('hex');\n            if (hex &&\n                hex.args.options.byteAligned &&\n                value.length % 2 !== 0) {\n\n                value = `0${value}`;\n            }\n\n            if (schema.$_getRule('isoDate')) {\n                const iso = internals.isoDate(value);\n                if (iso) {\n                    value = iso;\n                }\n            }\n\n            if (schema._flags.truncate) {\n                const rule = schema.$_getRule('max');\n                if (rule) {\n                    let limit = rule.args.limit;\n                    if (Common.isResolvable(limit)) {\n                        limit = limit.resolve(value, state, prefs);\n                        if (!Common.limit(limit)) {\n                            return { value, errors: schema.$_createError('any.ref', limit, { ref: rule.args.limit, arg: 'limit', reason: 'must be a positive integer' }, state, prefs) };\n                        }\n                    }\n\n                    value = value.slice(0, limit);\n                }\n            }\n\n            return { value };\n        }\n    },\n\n    validate(value, { schema, error }) {\n\n        if (typeof value !== 'string') {\n            return { value, errors: error('string.base') };\n        }\n\n        if (value === '') {\n            const min = schema.$_getRule('min');\n            if (min &&\n                min.args.limit === 0) {\n\n                return;\n            }\n\n            return { value, errors: error('string.empty') };\n        }\n    },\n\n    rules: {\n\n        alphanum: {\n            method() {\n\n                return this.$_addRule('alphanum');\n            },\n            validate(value, helpers) {\n\n                if (/^[a-zA-Z0-9]+$/.test(value)) {\n                    return value;\n                }\n\n                return helpers.error('string.alphanum');\n            }\n        },\n\n        base64: {\n            method(options = {}) {\n\n                Common.assertOptions(options, ['paddingRequired', 'urlSafe']);\n\n                options = { urlSafe: false, paddingRequired: true, ...options };\n                Assert(typeof options.paddingRequired === 'boolean', 'paddingRequired must be boolean');\n                Assert(typeof options.urlSafe === 'boolean', 'urlSafe must be boolean');\n\n                return this.$_addRule({ name: 'base64', args: { options } });\n            },\n            validate(value, helpers, { options }) {\n\n                const regex = internals.base64Regex[options.paddingRequired][options.urlSafe];\n                if (regex.test(value)) {\n                    return value;\n                }\n\n                return helpers.error('string.base64');\n            }\n        },\n\n        case: {\n            method(direction) {\n\n                Assert(['lower', 'upper'].includes(direction), 'Invalid case:', direction);\n\n                return this.$_addRule({ name: 'case', args: { direction } });\n            },\n            validate(value, helpers, { direction }) {\n\n                if (direction === 'lower' && value === value.toLocaleLowerCase() ||\n                    direction === 'upper' && value === value.toLocaleUpperCase()) {\n\n                    return value;\n                }\n\n                return helpers.error(`string.${direction}case`);\n            },\n            convert: true\n        },\n\n        creditCard: {\n            method() {\n\n                return this.$_addRule('creditCard');\n            },\n            validate(value, helpers) {\n\n                let i = value.length;\n                let sum = 0;\n                let mul = 1;\n\n                while (i--) {\n                    const char = value.charAt(i) * mul;\n                    sum = sum + (char - (char > 9) * 9);\n                    mul = mul ^ 3;\n                }\n\n                if (sum > 0 &&\n                    sum % 10 === 0) {\n\n                    return value;\n                }\n\n                return helpers.error('string.creditCard');\n            }\n        },\n\n        dataUri: {\n            method(options = {}) {\n\n                Common.assertOptions(options, ['paddingRequired']);\n\n                options = { paddingRequired: true, ...options };\n                Assert(typeof options.paddingRequired === 'boolean', 'paddingRequired must be boolean');\n\n                return this.$_addRule({ name: 'dataUri', args: { options } });\n            },\n            validate(value, helpers, { options }) {\n\n                const matches = value.match(internals.dataUriRegex);\n\n                if (matches) {\n                    if (!matches[2]) {\n                        return value;\n                    }\n\n                    if (matches[2] !== 'base64') {\n                        return value;\n                    }\n\n                    const base64regex = internals.base64Regex[options.paddingRequired].false;\n                    if (base64regex.test(matches[3])) {\n                        return value;\n                    }\n                }\n\n                return helpers.error('string.dataUri');\n            }\n        },\n\n        domain: {\n            method(options) {\n\n                if (options) {\n                    Common.assertOptions(options, ['allowFullyQualified', 'allowUnicode', 'maxDomainSegments', 'minDomainSegments', 'tlds']);\n                }\n\n                const address = internals.addressOptions(options);\n                return this.$_addRule({ name: 'domain', args: { options }, address });\n            },\n            validate(value, helpers, args, { address }) {\n\n                if (Domain.isValid(value, address)) {\n                    return value;\n                }\n\n                return helpers.error('string.domain');\n            }\n        },\n\n        email: {\n            method(options = {}) {\n\n                Common.assertOptions(options, ['allowFullyQualified', 'allowUnicode', 'ignoreLength', 'maxDomainSegments', 'minDomainSegments', 'multiple', 'separator', 'tlds']);\n                Assert(options.multiple === undefined || typeof options.multiple === 'boolean', 'multiple option must be an boolean');\n\n                const address = internals.addressOptions(options);\n                const regex = new RegExp(`\\\\s*[${options.separator ? EscapeRegex(options.separator) : ','}]\\\\s*`);\n\n                return this.$_addRule({ name: 'email', args: { options }, regex, address });\n            },\n            validate(value, helpers, { options }, { regex, address }) {\n\n                const emails = options.multiple ? value.split(regex) : [value];\n                const invalids = [];\n                for (const email of emails) {\n                    if (!Email.isValid(email, address)) {\n                        invalids.push(email);\n                    }\n                }\n\n                if (!invalids.length) {\n                    return value;\n                }\n\n                return helpers.error('string.email', { value, invalids });\n            }\n        },\n\n        guid: {\n            alias: 'uuid',\n            method(options = {}) {\n\n                Common.assertOptions(options, ['version', 'separator']);\n\n                let versionNumbers = '';\n\n                if (options.version) {\n                    const versions = [].concat(options.version);\n\n                    Assert(versions.length >= 1, 'version must have at least 1 valid version specified');\n                    const set = new Set();\n\n                    for (let i = 0; i < versions.length; ++i) {\n                        const version = versions[i];\n                        Assert(typeof version === 'string', 'version at position ' + i + ' must be a string');\n                        const versionNumber = internals.guidVersions[version.toLowerCase()];\n                        Assert(versionNumber, 'version at position ' + i + ' must be one of ' + Object.keys(internals.guidVersions).join(', '));\n                        Assert(!set.has(versionNumber), 'version at position ' + i + ' must not be a duplicate');\n\n                        versionNumbers += versionNumber;\n                        set.add(versionNumber);\n                    }\n                }\n\n                Assert(internals.guidSeparators.has(options.separator), 'separator must be one of true, false, \"-\", or \":\"');\n                const separator = options.separator === undefined ? '[:-]?' :\n                    options.separator === true ? '[:-]' :\n                        options.separator === false ? '[]?' : `\\\\${options.separator}`;\n\n                const regex = new RegExp(`^([\\\\[{\\\\(]?)[0-9A-F]{8}(${separator})[0-9A-F]{4}\\\\2?[${versionNumbers || '0-9A-F'}][0-9A-F]{3}\\\\2?[${versionNumbers ? '89AB' : '0-9A-F'}][0-9A-F]{3}\\\\2?[0-9A-F]{12}([\\\\]}\\\\)]?)$`, 'i');\n\n                return this.$_addRule({ name: 'guid', args: { options }, regex });\n            },\n            validate(value, helpers, args, { regex }) {\n\n                const results = regex.exec(value);\n\n                if (!results) {\n                    return helpers.error('string.guid');\n                }\n\n                // Matching braces\n\n                if (internals.guidBrackets[results[1]] !== results[results.length - 1]) {\n                    return helpers.error('string.guid');\n                }\n\n                return value;\n            }\n        },\n\n        hex: {\n            method(options = {}) {\n\n                Common.assertOptions(options, ['byteAligned', 'prefix']);\n\n                options = { byteAligned: false, prefix: false, ...options };\n                Assert(typeof options.byteAligned === 'boolean', 'byteAligned must be boolean');\n                Assert(typeof options.prefix === 'boolean' || options.prefix === 'optional', 'prefix must be boolean or \"optional\"');\n\n                return this.$_addRule({ name: 'hex', args: { options } });\n            },\n            validate(value, helpers, { options }) {\n\n                const re = options.prefix === 'optional' ?\n                    internals.hexRegex.withOptionalPrefix :\n                    options.prefix === true ?\n                        internals.hexRegex.withPrefix :\n                        internals.hexRegex.withoutPrefix;\n                if (!re.test(value)) {\n                    return helpers.error('string.hex');\n                }\n\n                if (options.byteAligned &&\n                    value.length % 2 !== 0) {\n\n                    return helpers.error('string.hexAlign');\n                }\n\n                return value;\n            }\n        },\n\n        hostname: {\n            method() {\n\n                return this.$_addRule('hostname');\n            },\n            validate(value, helpers) {\n\n                if (Domain.isValid(value, { minDomainSegments: 1 }) ||\n                    internals.ipRegex.test(value)) {\n\n                    return value;\n                }\n\n                return helpers.error('string.hostname');\n            }\n        },\n\n        insensitive: {\n            method() {\n\n                return this.$_setFlag('insensitive', true);\n            }\n        },\n\n        ip: {\n            method(options = {}) {\n\n                Common.assertOptions(options, ['cidr', 'version']);\n\n                const { cidr, versions, regex } = Ip.regex(options);\n                const version = options.version ? versions : undefined;\n                return this.$_addRule({ name: 'ip', args: { options: { cidr, version } }, regex });\n            },\n            validate(value, helpers, { options }, { regex }) {\n\n                if (regex.test(value)) {\n                    return value;\n                }\n\n                if (options.version) {\n                    return helpers.error('string.ipVersion', { value, cidr: options.cidr, version: options.version });\n                }\n\n                return helpers.error('string.ip', { value, cidr: options.cidr });\n            }\n        },\n\n        isoDate: {\n            method() {\n\n                return this.$_addRule('isoDate');\n            },\n            validate(value, { error }) {\n\n                if (internals.isoDate(value)) {\n                    return value;\n                }\n\n                return error('string.isoDate');\n            }\n        },\n\n        isoDuration: {\n            method() {\n\n                return this.$_addRule('isoDuration');\n            },\n            validate(value, helpers) {\n\n                if (internals.isoDurationRegex.test(value)) {\n                    return value;\n                }\n\n                return helpers.error('string.isoDuration');\n            }\n        },\n\n        length: {\n            method(limit, encoding) {\n\n                return internals.length(this, 'length', limit, '=', encoding);\n            },\n            validate(value, helpers, { limit, encoding }, { name, operator, args }) {\n\n                const length = encoding ? Buffer && Buffer.byteLength(value, encoding) : value.length;      // $lab:coverage:ignore$\n                if (Common.compare(length, limit, operator)) {\n                    return value;\n                }\n\n                return helpers.error('string.' + name, { limit: args.limit, value, encoding });\n            },\n            args: [\n                {\n                    name: 'limit',\n                    ref: true,\n                    assert: Common.limit,\n                    message: 'must be a positive integer'\n                },\n                'encoding'\n            ]\n        },\n\n        lowercase: {\n            method() {\n\n                return this.case('lower');\n            }\n        },\n\n        max: {\n            method(limit, encoding) {\n\n                return internals.length(this, 'max', limit, '<=', encoding);\n            },\n            args: ['limit', 'encoding']\n        },\n\n        min: {\n            method(limit, encoding) {\n\n                return internals.length(this, 'min', limit, '>=', encoding);\n            },\n            args: ['limit', 'encoding']\n        },\n\n        normalize: {\n            method(form = 'NFC') {\n\n                Assert(internals.normalizationForms.includes(form), 'normalization form must be one of ' + internals.normalizationForms.join(', '));\n\n                return this.$_addRule({ name: 'normalize', args: { form } });\n            },\n            validate(value, { error }, { form }) {\n\n                if (value === value.normalize(form)) {\n                    return value;\n                }\n\n                return error('string.normalize', { value, form });\n            },\n            convert: true\n        },\n\n        pattern: {\n            alias: 'regex',\n            method(regex, options = {}) {\n\n                Assert(regex instanceof RegExp, 'regex must be a RegExp');\n                Assert(!regex.flags.includes('g') && !regex.flags.includes('y'), 'regex should not use global or sticky mode');\n\n                if (typeof options === 'string') {\n                    options = { name: options };\n                }\n\n                Common.assertOptions(options, ['invert', 'name']);\n\n                const errorCode = ['string.pattern', options.invert ? '.invert' : '', options.name ? '.name' : '.base'].join('');\n                return this.$_addRule({ name: 'pattern', args: { regex, options }, errorCode });\n            },\n            validate(value, helpers, { regex, options }, { errorCode }) {\n\n                const patternMatch = regex.test(value);\n\n                if (patternMatch ^ options.invert) {\n                    return value;\n                }\n\n                return helpers.error(errorCode, { name: options.name, regex, value });\n            },\n            args: ['regex', 'options'],\n            multi: true\n        },\n\n        replace: {\n            method(pattern, replacement) {\n\n                if (typeof pattern === 'string') {\n                    pattern = new RegExp(EscapeRegex(pattern), 'g');\n                }\n\n                Assert(pattern instanceof RegExp, 'pattern must be a RegExp');\n                Assert(typeof replacement === 'string', 'replacement must be a String');\n\n                const obj = this.clone();\n\n                if (!obj.$_terms.replacements) {\n                    obj.$_terms.replacements = [];\n                }\n\n                obj.$_terms.replacements.push({ pattern, replacement });\n                return obj;\n            }\n        },\n\n        token: {\n            method() {\n\n                return this.$_addRule('token');\n            },\n            validate(value, helpers) {\n\n                if (/^\\w+$/.test(value)) {\n                    return value;\n                }\n\n                return helpers.error('string.token');\n            }\n        },\n\n        trim: {\n            method(enabled = true) {\n\n                Assert(typeof enabled === 'boolean', 'enabled must be a boolean');\n\n                return this.$_addRule({ name: 'trim', args: { enabled } });\n            },\n            validate(value, helpers, { enabled }) {\n\n                if (!enabled ||\n                    value === value.trim()) {\n\n                    return value;\n                }\n\n                return helpers.error('string.trim');\n            },\n            convert: true\n        },\n\n        truncate: {\n            method(enabled = true) {\n\n                Assert(typeof enabled === 'boolean', 'enabled must be a boolean');\n\n                return this.$_setFlag('truncate', enabled);\n            }\n        },\n\n        uppercase: {\n            method() {\n\n                return this.case('upper');\n            }\n        },\n\n        uri: {\n            method(options = {}) {\n\n                Common.assertOptions(options, ['allowRelative', 'allowQuerySquareBrackets', 'domain', 'relativeOnly', 'scheme', 'encodeUri']);\n\n                if (options.domain) {\n                    Common.assertOptions(options.domain, ['allowFullyQualified', 'allowUnicode', 'maxDomainSegments', 'minDomainSegments', 'tlds']);\n                }\n\n                const { regex, scheme } = Uri.regex(options);\n                const domain = options.domain ? internals.addressOptions(options.domain) : null;\n                return this.$_addRule({ name: 'uri', args: { options }, regex, domain, scheme });\n            },\n            validate(value, helpers, { options }, { regex, domain, scheme }) {\n\n                if (['http:/', 'https:/'].includes(value)) {            // scheme:/ is technically valid but makes no sense\n                    return helpers.error('string.uri');\n                }\n\n                let match = regex.exec(value);\n\n                if (!match && helpers.prefs.convert && options.encodeUri) {\n                    const encoded = encodeURI(value);\n                    match = regex.exec(encoded);\n                    if (match) {\n                        value = encoded;\n                    }\n                }\n\n                if (match) {\n                    const matched = match[1] || match[2];\n                    if (domain &&\n                        (!options.allowRelative || matched) &&\n                        !Domain.isValid(matched, domain)) {\n\n                        return helpers.error('string.domain', { value: matched });\n                    }\n\n                    return value;\n                }\n\n                if (options.relativeOnly) {\n                    return helpers.error('string.uriRelativeOnly');\n                }\n\n                if (options.scheme) {\n                    return helpers.error('string.uriCustomScheme', { scheme, value });\n                }\n\n                return helpers.error('string.uri');\n            }\n        }\n    },\n\n    manifest: {\n\n        build(obj, desc) {\n\n            if (desc.replacements) {\n                for (const { pattern, replacement } of desc.replacements) {\n                    obj = obj.replace(pattern, replacement);\n                }\n            }\n\n            return obj;\n        }\n    },\n\n    messages: {\n        'string.alphanum': '{{#label}} must only contain alpha-numeric characters',\n        'string.base': '{{#label}} must be a string',\n        'string.base64': '{{#label}} must be a valid base64 string',\n        'string.creditCard': '{{#label}} must be a credit card',\n        'string.dataUri': '{{#label}} must be a valid dataUri string',\n        'string.domain': '{{#label}} must contain a valid domain name',\n        'string.email': '{{#label}} must be a valid email',\n        'string.empty': '{{#label}} is not allowed to be empty',\n        'string.guid': '{{#label}} must be a valid GUID',\n        'string.hex': '{{#label}} must only contain hexadecimal characters',\n        'string.hexAlign': '{{#label}} hex decoded representation must be byte aligned',\n        'string.hostname': '{{#label}} must be a valid hostname',\n        'string.ip': '{{#label}} must be a valid ip address with a {{#cidr}} CIDR',\n        'string.ipVersion': '{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR',\n        'string.isoDate': '{{#label}} must be in iso format',\n        'string.isoDuration': '{{#label}} must be a valid ISO 8601 duration',\n        'string.length': '{{#label}} length must be {{#limit}} characters long',\n        'string.lowercase': '{{#label}} must only contain lowercase characters',\n        'string.max': '{{#label}} length must be less than or equal to {{#limit}} characters long',\n        'string.min': '{{#label}} length must be at least {{#limit}} characters long',\n        'string.normalize': '{{#label}} must be unicode normalized in the {{#form}} form',\n        'string.token': '{{#label}} must only contain alpha-numeric and underscore characters',\n        'string.pattern.base': '{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}',\n        'string.pattern.name': '{{#label}} with value {:[.]} fails to match the {{#name}} pattern',\n        'string.pattern.invert.base': '{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}',\n        'string.pattern.invert.name': '{{#label}} with value {:[.]} matches the inverted {{#name}} pattern',\n        'string.trim': '{{#label}} must not have leading or trailing whitespace',\n        'string.uri': '{{#label}} must be a valid uri',\n        'string.uriCustomScheme': '{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern',\n        'string.uriRelativeOnly': '{{#label}} must be a valid relative uri',\n        'string.uppercase': '{{#label}} must only contain uppercase characters'\n    }\n});\n\n\n// Helpers\n\ninternals.addressOptions = function (options) {\n\n    if (!options) {\n        return internals.tlds || options;      // $lab:coverage:ignore$\n    }\n\n    // minDomainSegments\n\n    Assert(options.minDomainSegments === undefined ||\n        Number.isSafeInteger(options.minDomainSegments) && options.minDomainSegments > 0, 'minDomainSegments must be a positive integer');\n\n    // maxDomainSegments\n\n    Assert(options.maxDomainSegments === undefined ||\n        Number.isSafeInteger(options.maxDomainSegments) && options.maxDomainSegments > 0, 'maxDomainSegments must be a positive integer');\n\n    // tlds\n\n    if (options.tlds === false) {\n        return options;\n    }\n\n    if (options.tlds === true ||\n        options.tlds === undefined) {\n\n        Assert(internals.tlds, 'Built-in TLD list disabled');\n        return Object.assign({}, options, internals.tlds);\n    }\n\n    Assert(typeof options.tlds === 'object', 'tlds must be true, false, or an object');\n\n    const deny = options.tlds.deny;\n    if (deny) {\n        if (Array.isArray(deny)) {\n            options = Object.assign({}, options, { tlds: { deny: new Set(deny) } });\n        }\n\n        Assert(options.tlds.deny instanceof Set, 'tlds.deny must be an array, Set, or boolean');\n        Assert(!options.tlds.allow, 'Cannot specify both tlds.allow and tlds.deny lists');\n        internals.validateTlds(options.tlds.deny, 'tlds.deny');\n        return options;\n    }\n\n    const allow = options.tlds.allow;\n    if (!allow) {\n        return options;\n    }\n\n    if (allow === true) {\n        Assert(internals.tlds, 'Built-in TLD list disabled');\n        return Object.assign({}, options, internals.tlds);\n    }\n\n    if (Array.isArray(allow)) {\n        options = Object.assign({}, options, { tlds: { allow: new Set(allow) } });\n    }\n\n    Assert(options.tlds.allow instanceof Set, 'tlds.allow must be an array, Set, or boolean');\n    internals.validateTlds(options.tlds.allow, 'tlds.allow');\n    return options;\n};\n\n\ninternals.validateTlds = function (set, source) {\n\n    for (const tld of set) {\n        Assert(Domain.isValid(tld, { minDomainSegments: 1, maxDomainSegments: 1 }), `${source} must contain valid top level domain names`);\n    }\n};\n\n\ninternals.isoDate = function (value) {\n\n    if (!Common.isIsoDate(value)) {\n        return null;\n    }\n\n    if (/.*T.*[+-]\\d\\d$/.test(value)) {             // Add missing trailing zeros to timeshift\n        value += '00';\n    }\n\n    const date = new Date(value);\n    if (isNaN(date.getTime())) {\n        return null;\n    }\n\n    return date.toISOString();\n};\n\n\ninternals.length = function (schema, name, limit, operator, encoding) {\n\n    Assert(!encoding || Buffer && Buffer.isEncoding(encoding), 'Invalid encoding:', encoding);      // $lab:coverage:ignore$\n\n    return schema.$_addRule({ name, method: 'length', args: { limit, encoding }, operator });\n};\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\n\nconst Any = require('./any');\n\n\nconst internals = {};\n\n\ninternals.Map = class extends Map {\n\n    slice() {\n\n        return new internals.Map(this);\n    }\n};\n\n\nmodule.exports = Any.extend({\n\n    type: 'symbol',\n\n    terms: {\n\n        map: { init: new internals.Map() }\n    },\n\n    coerce: {\n        method(value, { schema, error }) {\n\n            const lookup = schema.$_terms.map.get(value);\n            if (lookup) {\n                value = lookup;\n            }\n\n            if (!schema._flags.only ||\n                typeof value === 'symbol') {\n\n                return { value };\n            }\n\n            return { value, errors: error('symbol.map', { map: schema.$_terms.map }) };\n        }\n    },\n\n    validate(value, { error }) {\n\n        if (typeof value !== 'symbol') {\n            return { value, errors: error('symbol.base') };\n        }\n    },\n\n    rules: {\n        map: {\n            method(iterable) {\n\n                if (iterable &&\n                    !iterable[Symbol.iterator] &&\n                    typeof iterable === 'object') {\n\n                    iterable = Object.entries(iterable);\n                }\n\n                Assert(iterable && iterable[Symbol.iterator], 'Iterable must be an iterable or object');\n\n                const obj = this.clone();\n\n                const symbols = [];\n                for (const entry of iterable) {\n                    Assert(entry && entry[Symbol.iterator], 'Entry must be an iterable');\n                    const [key, value] = entry;\n\n                    Assert(typeof key !== 'object' && typeof key !== 'function' && typeof key !== 'symbol', 'Key must not be of type object, function, or Symbol');\n                    Assert(typeof value === 'symbol', 'Value must be a Symbol');\n\n                    obj.$_terms.map.set(key, value);\n                    symbols.push(value);\n                }\n\n                return obj.valid(...symbols);\n            }\n        }\n    },\n\n    manifest: {\n\n        build(obj, desc) {\n\n            if (desc.map) {\n                obj = obj.map(desc.map);\n            }\n\n            return obj;\n        }\n    },\n\n    messages: {\n        'symbol.base': '{{#label}} must be a symbol',\n        'symbol.map': '{{#label}} must be one of {{#map}}'\n    }\n});\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\n\nconst Any = require('./any');\nconst Common = require('../common');\n\n\nconst internals = {};\n\n\nmodule.exports = Any.extend({\n\n    type: 'binary',\n\n    coerce: {\n        from: ['string', 'object'],\n        method(value, { schema }) {\n\n            if (typeof value === 'string' || (value !== null && value.type === 'Buffer')) {\n                try {\n                    return { value: Buffer.from(value, schema._flags.encoding) };\n                }\n                catch (ignoreErr) { }\n            }\n        }\n    },\n\n    validate(value, { error }) {\n\n        if (!Buffer.isBuffer(value)) {\n            return { value, errors: error('binary.base') };\n        }\n    },\n\n    rules: {\n        encoding: {\n            method(encoding) {\n\n                Assert(Buffer.isEncoding(encoding), 'Invalid encoding:', encoding);\n\n                return this.$_setFlag('encoding', encoding);\n            }\n        },\n\n        length: {\n            method(limit) {\n\n                return this.$_addRule({ name: 'length', method: 'length', args: { limit }, operator: '=' });\n            },\n            validate(value, helpers, { limit }, { name, operator, args }) {\n\n                if (Common.compare(value.length, limit, operator)) {\n                    return value;\n                }\n\n                return helpers.error('binary.' + name, { limit: args.limit, value });\n            },\n            args: [\n                {\n                    name: 'limit',\n                    ref: true,\n                    assert: Common.limit,\n                    message: 'must be a positive integer'\n                }\n            ]\n        },\n\n        max: {\n            method(limit) {\n\n                return this.$_addRule({ name: 'max', method: 'length', args: { limit }, operator: '<=' });\n            }\n        },\n\n        min: {\n            method(limit) {\n\n                return this.$_addRule({ name: 'min', method: 'length', args: { limit }, operator: '>=' });\n            }\n        }\n    },\n\n    cast: {\n        string: {\n            from: (value) => Buffer.isBuffer(value),\n            to(value, helpers) {\n\n                return value.toString();\n            }\n        }\n    },\n\n    messages: {\n        'binary.base': '{{#label}} must be a buffer or a string',\n        'binary.length': '{{#label}} must be {{#limit}} bytes',\n        'binary.max': '{{#label}} must be less than or equal to {{#limit}} bytes',\n        'binary.min': '{{#label}} must be at least {{#limit}} bytes'\n    }\n});\n", "'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\nconst Clone = require('@hapi/hoek/lib/clone');\n\nconst Cache = require('./cache');\nconst Common = require('./common');\nconst Compile = require('./compile');\nconst Errors = require('./errors');\nconst Extend = require('./extend');\nconst Manifest = require('./manifest');\nconst Ref = require('./ref');\nconst Template = require('./template');\nconst Trace = require('./trace');\n\nlet Schemas;\n\n\nconst internals = {\n    types: {\n        alternatives: require('./types/alternatives'),\n        any: require('./types/any'),\n        array: require('./types/array'),\n        boolean: require('./types/boolean'),\n        date: require('./types/date'),\n        function: require('./types/function'),\n        link: require('./types/link'),\n        number: require('./types/number'),\n        object: require('./types/object'),\n        string: require('./types/string'),\n        symbol: require('./types/symbol')\n    },\n    aliases: {\n        alt: 'alternatives',\n        bool: 'boolean',\n        func: 'function'\n    }\n};\n\n\nif (Buffer) {                                                           // $lab:coverage:ignore$\n    internals.types.binary = require('./types/binary');\n}\n\n\ninternals.root = function () {\n\n    const root = {\n        _types: new Set(Object.keys(internals.types))\n    };\n\n    // Types\n\n    for (const type of root._types) {\n        root[type] = function (...args) {\n\n            Assert(!args.length || ['alternatives', 'link', 'object'].includes(type), 'The', type, 'type does not allow arguments');\n            return internals.generate(this, internals.types[type], args);\n        };\n    }\n\n    // Shortcuts\n\n    for (const method of ['allow', 'custom', 'disallow', 'equal', 'exist', 'forbidden', 'invalid', 'not', 'only', 'optional', 'options', 'prefs', 'preferences', 'required', 'strip', 'valid', 'when']) {\n        root[method] = function (...args) {\n\n            return this.any()[method](...args);\n        };\n    }\n\n    // Methods\n\n    Object.assign(root, internals.methods);\n\n    // Aliases\n\n    for (const alias in internals.aliases) {\n        const target = internals.aliases[alias];\n        root[alias] = root[target];\n    }\n\n    root.x = root.expression;\n\n    // Trace\n\n    if (Trace.setup) {                                          // $lab:coverage:ignore$\n        Trace.setup(root);\n    }\n\n    return root;\n};\n\n\ninternals.methods = {\n\n    ValidationError: Errors.ValidationError,\n    version: Common.version,\n    cache: Cache.provider,\n\n    assert(value, schema, ...args /* [message], [options] */) {\n\n        internals.assert(value, schema, true, args);\n    },\n\n    attempt(value, schema, ...args /* [message], [options] */) {\n\n        return internals.assert(value, schema, false, args);\n    },\n\n    build(desc) {\n\n        Assert(typeof Manifest.build === 'function', 'Manifest functionality disabled');\n        return Manifest.build(this, desc);\n    },\n\n    checkPreferences(prefs) {\n\n        Common.checkPreferences(prefs);\n    },\n\n    compile(schema, options) {\n\n        return Compile.compile(this, schema, options);\n    },\n\n    defaults(modifier) {\n\n        Assert(typeof modifier === 'function', 'modifier must be a function');\n\n        const joi = Object.assign({}, this);\n        for (const type of joi._types) {\n            const schema = modifier(joi[type]());\n            Assert(Common.isSchema(schema), 'modifier must return a valid schema object');\n\n            joi[type] = function (...args) {\n\n                return internals.generate(this, schema, args);\n            };\n        }\n\n        return joi;\n    },\n\n    expression(...args) {\n\n        return new Template(...args);\n    },\n\n    extend(...extensions) {\n\n        Common.verifyFlat(extensions, 'extend');\n\n        Schemas = Schemas || require('./schemas');\n\n        Assert(extensions.length, 'You need to provide at least one extension');\n        this.assert(extensions, Schemas.extensions);\n\n        const joi = Object.assign({}, this);\n        joi._types = new Set(joi._types);\n\n        for (let extension of extensions) {\n            if (typeof extension === 'function') {\n                extension = extension(joi);\n            }\n\n            this.assert(extension, Schemas.extension);\n\n            const expanded = internals.expandExtension(extension, joi);\n            for (const item of expanded) {\n                Assert(joi[item.type] === undefined || joi._types.has(item.type), 'Cannot override name', item.type);\n\n                const base = item.base || this.any();\n                const schema = Extend.type(base, item);\n\n                joi._types.add(item.type);\n                joi[item.type] = function (...args) {\n\n                    return internals.generate(this, schema, args);\n                };\n            }\n        }\n\n        return joi;\n    },\n\n    isError: Errors.ValidationError.isError,\n    isExpression: Template.isTemplate,\n    isRef: Ref.isRef,\n    isSchema: Common.isSchema,\n\n    in(...args) {\n\n        return Ref.in(...args);\n    },\n\n    override: Common.symbols.override,\n\n    ref(...args) {\n\n        return Ref.create(...args);\n    },\n\n    types() {\n\n        const types = {};\n        for (const type of this._types) {\n            types[type] = this[type]();\n        }\n\n        for (const target in internals.aliases) {\n            types[target] = this[target]();\n        }\n\n        return types;\n    }\n};\n\n\n// Helpers\n\ninternals.assert = function (value, schema, annotate, args /* [message], [options] */) {\n\n    const message = args[0] instanceof Error || typeof args[0] === 'string' ? args[0] : null;\n    const options = message !== null ? args[1] : args[0];\n    const result = schema.validate(value, Common.preferences({ errors: { stack: true } }, options || {}));\n\n    let error = result.error;\n    if (!error) {\n        return result.value;\n    }\n\n    if (message instanceof Error) {\n        throw message;\n    }\n\n    const display = annotate && typeof error.annotate === 'function' ? error.annotate() : error.message;\n\n    if (error instanceof Errors.ValidationError === false) {\n        error = Clone(error);\n    }\n\n    error.message = message ? `${message} ${display}` : display;\n    throw error;\n};\n\n\ninternals.generate = function (root, schema, args) {\n\n    Assert(root, 'Must be invoked on a Joi instance.');\n\n    schema.$_root = root;\n\n    if (!schema._definition.args ||\n        !args.length) {\n\n        return schema;\n    }\n\n    return schema._definition.args(schema, ...args);\n};\n\n\ninternals.expandExtension = function (extension, joi) {\n\n    if (typeof extension.type === 'string') {\n        return [extension];\n    }\n\n    const extended = [];\n    for (const type of joi._types) {\n        if (extension.type.test(type)) {\n            const item = Object.assign({}, extension);\n            item.type = type;\n            item.base = joi[type]();\n            extended.push(item);\n        }\n    }\n\n    return extended;\n};\n\n\nmodule.exports = internals.root();\n", "import { APIGatewayProxyEvent, APIGatewayProxyResult } from 'aws-lambda';\nimport { BaseHandler } from '../shared/base-handler';\nimport { UserService } from '../services/user-service';\nimport { PasswordService } from '../services/password-service';\nimport { JwtService } from '../services/jwt-service';\nimport { ValidationService } from '../services/validation-service';\nimport { \n  UserRegistrationRequest, \n  UserLoginRequest, \n  AuthResponse, \n  RefreshTokenRequest,\n  ApiError,\n  ErrorCode\n} from '../types';\n\n/**\n * Auth Handler - Real JWT token generation and user authentication with DynamoDB\n */\nclass AuthHandler extends BaseHandler {\n  private userService: UserService;\n  private passwordService: PasswordService;\n  private jwtService: JwtService;\n  private validationService: ValidationService;\n\n  constructor() {\n    super('AuthHandler');\n    this.userService = new UserService();\n    this.passwordService = new PasswordService();\n    this.jwtService = new JwtService();\n    this.validationService = new ValidationService();\n  }\n\n  /**\n   * Handle user registration - POST /auth/register\n   */\n  public async register(event: APIGatewayProxyEvent): Promise<APIGatewayProxyResult> {\n    const requestId = event.requestContext.requestId;\n    \n    try {\n      // Parse and validate request body\n      const body = this.parseJsonBody<UserRegistrationRequest>(event);\n      if (!body) {\n        return this.error('Request body is required', ErrorCode.VALIDATION_ERROR);\n      }\n\n      this.validationService.validateRegistration(body);\n\n      // Validate password strength\n      const passwordStrength = this.passwordService.validatePasswordStrength(body.password);\n      if (!passwordStrength.isValid) {\n        return this.error('Password does not meet requirements', ErrorCode.VALIDATION_ERROR, {\n          errors: passwordStrength.errors\n        });\n      }\n\n      // Check if user already exists\n      const existingUser = await this.userService.findUserByEmail(body.email);\n      if (existingUser) {\n        return this.error('User with this email already exists', ErrorCode.VALIDATION_ERROR);\n      }\n\n      // Hash password\n      const passwordHash = await this.passwordService.hashPassword(body.password);\n\n      // Create user\n      const user = await this.userService.createUser({\n        email: body.email,\n        passwordHash,\n        name: body.name\n      });\n\n      // Generate tokens\n      const { accessToken, refreshToken, expiresIn } = this.jwtService.generateTokenPair(\n        user.userId,\n        user.email,\n        user.role\n      );\n\n      // Update last login\n      await this.userService.updateLastLogin(user.userId);\n\n      const response: AuthResponse = {\n        user,\n        token: accessToken,\n        refreshToken,\n        expiresIn\n      };\n\n      this.logger.info(`[${requestId}] User registration successful`, {\n        userId: user.userId,\n        email: user.email\n      });\n\n      return this.created(response, 'User registered successfully');\n\n    } catch (error) {\n      if (error instanceof ApiError) {\n        return this.error(error.message, error.code, error.details);\n      }\n      \n      this.logger.error(`[${requestId}] Registration failed`, error);\n      return this.error('Registration failed', ErrorCode.INTERNAL_ERROR);\n    }\n  }\n\n  /**\n   * Handle user login - POST /auth/login\n   */\n  public async login(event: APIGatewayProxyEvent): Promise<APIGatewayProxyResult> {\n    const requestId = event.requestContext.requestId;\n    \n    try {\n      // Parse and validate request body\n      const body = this.parseJsonBody<UserLoginRequest>(event);\n      if (!body) {\n        return this.error('Request body is required', ErrorCode.VALIDATION_ERROR);\n      }\n\n      this.validationService.validateLogin(body);\n\n      // Find user by email\n      const userWithPassword = await this.userService.findUserByEmail(body.email);\n      if (!userWithPassword) {\n        this.logger.warn(`[${requestId}] Login attempt with non-existent email`, {\n          email: body.email\n        });\n        return this.error('Invalid email or password', ErrorCode.UNAUTHORIZED);\n      }\n\n      // Check if user is active\n      if (!userWithPassword.isActive) {\n        this.logger.warn(`[${requestId}] Login attempt with inactive user`, {\n          userId: userWithPassword.userId,\n          email: userWithPassword.email\n        });\n        return this.error('Account is disabled', ErrorCode.FORBIDDEN);\n      }\n\n      // Validate password\n      const isPasswordValid = await this.passwordService.validatePassword(\n        body.password,\n        userWithPassword.passwordHash\n      );\n\n      if (!isPasswordValid) {\n        this.logger.warn(`[${requestId}] Login attempt with invalid password`, {\n          userId: userWithPassword.userId,\n          email: userWithPassword.email\n        });\n        return this.error('Invalid email or password', ErrorCode.UNAUTHORIZED);\n      }\n\n      // Extract user data without password hash\n      const { passwordHash, ...user } = userWithPassword;\n\n      // Generate tokens\n      const { accessToken, refreshToken, expiresIn } = this.jwtService.generateTokenPair(\n        user.userId,\n        user.email,\n        user.role\n      );\n\n      // Update last login\n      await this.userService.updateLastLogin(user.userId);\n\n      const response: AuthResponse = {\n        user,\n        token: accessToken,\n        refreshToken,\n        expiresIn\n      };\n\n      this.logger.info(`[${requestId}] User login successful`, {\n        userId: user.userId,\n        email: user.email\n      });\n\n      return this.success(response, 'Login successful');\n\n    } catch (error) {\n      if (error instanceof ApiError) {\n        return this.error(error.message, error.code, error.details);\n      }\n      \n      this.logger.error(`[${requestId}] Login failed`, error);\n      return this.error('Login failed', ErrorCode.INTERNAL_ERROR);\n    }\n  }\n\n  /**\n   * Handle token refresh - POST /auth/refresh\n   */\n  public async refresh(event: APIGatewayProxyEvent): Promise<APIGatewayProxyResult> {\n    const requestId = event.requestContext.requestId;\n    \n    try {\n      // Parse and validate request body\n      const body = this.parseJsonBody<RefreshTokenRequest>(event);\n      if (!body) {\n        return this.error('Request body is required', ErrorCode.VALIDATION_ERROR);\n      }\n\n      this.validationService.validateRefreshToken(body);\n\n      // Validate refresh token\n      const refreshTokenResult = this.jwtService.validateRefreshToken(body.refreshToken);\n      if (!refreshTokenResult.isValid || !refreshTokenResult.userId) {\n        this.logger.warn(`[${requestId}] Invalid refresh token`, {\n          error: refreshTokenResult.error\n        });\n        return this.error(refreshTokenResult.error || 'Invalid refresh token', ErrorCode.UNAUTHORIZED);\n      }\n\n      // Find user\n      const user = await this.userService.findUserById(refreshTokenResult.userId);\n      if (!user) {\n        this.logger.warn(`[${requestId}] Refresh token for non-existent user`, {\n          userId: refreshTokenResult.userId\n        });\n        return this.error('User not found', ErrorCode.UNAUTHORIZED);\n      }\n\n      // Check if user is active\n      if (!user.isActive) {\n        this.logger.warn(`[${requestId}] Refresh token for inactive user`, {\n          userId: user.userId\n        });\n        return this.error('Account is disabled', ErrorCode.FORBIDDEN);\n      }\n\n      // Generate new tokens\n      const { accessToken, refreshToken, expiresIn } = this.jwtService.generateTokenPair(\n        user.userId,\n        user.email,\n        user.role\n      );\n\n      const response: AuthResponse = {\n        user,\n        token: accessToken,\n        refreshToken,\n        expiresIn\n      };\n\n      this.logger.info(`[${requestId}] Token refresh successful`, {\n        userId: user.userId,\n        email: user.email\n      });\n\n      return this.success(response, 'Token refreshed successfully');\n\n    } catch (error) {\n      if (error instanceof ApiError) {\n        return this.error(error.message, error.code, error.details);\n      }\n      \n      this.logger.error(`[${requestId}] Token refresh failed`, error);\n      return this.error('Token refresh failed', ErrorCode.INTERNAL_ERROR);\n    }\n  }\n\n  /**\n   * Helper method to create error responses\n   */\n  private error(message: string, code: ErrorCode, details?: any): APIGatewayProxyResult {\n    throw new ApiError(code, message, details);\n  }\n}\n\nconst authHandler = new AuthHandler();\n\n// Export different endpoints based on HTTP method and path\nexport const handler = authHandler.withoutAuth(async (event: APIGatewayProxyEvent) => {\n  const method = event.httpMethod;\n  const path = event.resource;\n\n  // Route to appropriate handler based on method and path\n  if (method === 'POST' && path.endsWith('/auth/register')) {\n    return authHandler.register(event);\n  } else if (method === 'POST' && path.endsWith('/auth/login')) {\n    return authHandler.login(event);\n  } else if (method === 'POST' && path.endsWith('/auth/refresh')) {\n    return authHandler.refresh(event);\n  } else {\n    return {\n      statusCode: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Access-Control-Allow-Headers': 'Content-Type,Authorization',\n        'Access-Control-Allow-Methods': 'GET,POST,PUT,DELETE,OPTIONS'\n      },\n      body: JSON.stringify({\n        success: true,\n        message: 'Auth handler is working',\n        timestamp: new Date().toISOString(),\n        version: '2.0.0'\n      })\n    };\n  }\n});", "import { APIGatewayProxyEvent, APIGatewayProxyResult, APIGatewayTokenAuthorizerEvent, APIGatewayAuthorizerResult } from 'aws-lambda';\n\n// Base Handler Types\nexport type PublicHandler = (event: APIGatewayProxyEvent) => Promise<APIGatewayProxyResult>;\nexport type AuthenticatedHandler = (event: APIGatewayProxyEvent, userId: string) => Promise<APIGatewayProxyResult>;\nexport type AuthorizerHandler = (event: APIGatewayTokenAuthorizerEvent) => Promise<APIGatewayAuthorizerResult>;\n\n// Common API Response Structure\nexport interface ApiResponse<T = any> {\n  success: boolean;\n  data?: T;\n  message?: string;\n  error?: string;\n  timestamp: string;\n  version: string;\n}\n\n// Error Types\nexport enum ErrorCode {\n  UNAUTHORIZED = 'UNAUTHORIZED',\n  FORBIDDEN = 'FORBIDDEN',\n  NOT_FOUND = 'NOT_FOUND',\n  VALIDATION_ERROR = 'VALIDATION_ERROR',\n  INTERNAL_ERROR = 'INTERNAL_ERROR',\n  RATE_LIMITED = 'RATE_LIMITED'\n}\n\nexport class ApiError extends Error {\n  constructor(\n    public code: ErrorCode,\n    message: string,\n    public details?: any\n  ) {\n    super(message);\n    this.name = 'ApiError';\n  }\n}\n\n// User Context\nexport interface UserContext {\n  userId: string;\n  email: string;\n  role?: string;\n  permissions?: string[];\n}\n\n// JWT Token Payload\nexport interface JwtPayload {\n  userId: string;\n  email: string;\n  role?: string;\n  iat: number;\n  exp: number;\n}\n\n// Database Entities\nexport interface User {\n  userId: string;\n  email: string;\n  name?: string;\n  role: string;\n  createdAt: string;\n  updatedAt: string;\n  lastLoginAt?: string;\n  isActive: boolean;\n}\n\n// Auth-related types\nexport interface UserRegistrationRequest {\n  email: string;\n  password: string;\n  name?: string;\n}\n\nexport interface UserLoginRequest {\n  email: string;\n  password: string;\n}\n\nexport interface AuthResponse {\n  user: User;\n  token: string;\n  refreshToken: string;\n  expiresIn: number;\n}\n\nexport interface RefreshTokenRequest {\n  refreshToken: string;\n}\n\n// Enhanced Session Types for comprehensive session management\nexport interface StudySession {\n  sessionId: string;\n  userId: string;\n  provider: string;\n  exam: string;\n  status: 'active' | 'completed' | 'paused' | 'expired';\n  startTime: string;\n  endTime?: string;\n  \n  // Question Management\n  totalQuestions: number;\n  questionsAnswered: number;\n  correctAnswers: number;\n  currentQuestionIndex: number;\n  selectedQuestionIds: string[]; // Pre-selected questions for the session\n  \n  // Session Configuration\n  sessionConfig: SessionConfiguration;\n  \n  // Progress Tracking\n  progress: SessionProgress;\n  \n  // Performance Analytics\n  analytics: SessionAnalytics;\n  \n  // Timestamps and TTL\n  createdAt: string;\n  updatedAt: string;\n  lastActivityAt: string;\n  expiresAt: number; // DynamoDB TTL (Unix timestamp)\n}\n\n// Session configuration options\nexport interface SessionConfiguration {\n  questionCount: number;\n  timeLimit?: number; // in minutes, optional\n  difficulty?: 'easy' | 'medium' | 'hard';\n  topics?: string[];\n  serviceCategories?: string[];\n  awsServices?: string[];\n  questionTypes?: ('single_choice' | 'multiple_choice')[];\n  shuffleQuestions: boolean;\n  immediateResultsFeedback: boolean;\n  allowReview: boolean;\n}\n\n// Detailed progress tracking\nexport interface SessionProgress {\n  percentage: number; // 0-100\n  questionsCorrect: number;\n  questionsIncorrect: number;\n  questionsSkipped: number;\n  averageTimePerQuestion: number; // in seconds\n  timeSpent: number; // total time spent in seconds\n  streakCurrent: number;\n  streakBest: number;\n}\n\n// Session performance analytics\nexport interface SessionAnalytics {\n  difficultyBreakdown: {\n    easy: { correct: number; total: number };\n    medium: { correct: number; total: number };\n    hard: { correct: number; total: number };\n  };\n  topicPerformance: { [topic: string]: { correct: number; total: number } };\n  servicePerformance: { [service: string]: { correct: number; total: number } };\n  questionTypePerformance: {\n    single_choice: { correct: number; total: number };\n    multiple_choice: { correct: number; total: number };\n  };\n  timeAnalytics: {\n    fastestAnswer: number; // in seconds\n    slowestAnswer: number; // in seconds\n    averageAnswerTime: number; // in seconds\n  };\n}\n\n// Answer submission for a question in a session\nexport interface SessionAnswer {\n  questionId: string;\n  questionIndex: number;\n  userAnswer: string | string[];\n  isCorrect: boolean;\n  timeSpent: number; // in seconds\n  submittedAt: string;\n  explanation?: string;\n}\n\n// Session state for current question delivery\nexport interface SessionState {\n  sessionId: string;\n  currentQuestion: Question;\n  questionIndex: number;\n  progress: SessionProgress;\n  timeRemaining?: number; // if timed session\n  canGoBack: boolean;\n  canSkip: boolean;\n}\n\n// Session results when completed\nexport interface SessionResults {\n  sessionId: string;\n  finalScore: number; // percentage\n  questionsCorrect: number;\n  questionsTotal: number;\n  timeSpent: number; // in seconds\n  performance: SessionAnalytics;\n  grade: 'A' | 'B' | 'C' | 'D' | 'F';\n  passed: boolean;\n  recommendations: string[];\n  completedAt: string;\n}\n\nexport interface StudyGoal {\n  goalId: string;\n  userId: string;\n  title: string;\n  description?: string;\n  targetDate: string;\n  status: 'active' | 'completed' | 'paused';\n  progress: number; // 0-100\n  metrics: {\n    questionsTarget: number;\n    questionsCompleted: number;\n    accuracyTarget: number;\n    currentAccuracy: number;\n  };\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface AnalyticsEvent {\n  userId: string;\n  eventType: string;\n  eventData: any;\n  timestamp: string;\n  sessionId?: string;\n  provider?: string;\n  exam?: string;\n  expiresAt: number; // TTL\n}\n\nexport interface Provider {\n  id: string;\n  name: string;\n  description: string;\n  exams: Exam[];\n}\n\nexport interface Exam {\n  id: string;\n  name: string;\n  description: string;\n  questionCount: number;\n  duration?: number;\n  passingScore?: number;\n}\n\nexport interface Question {\n  questionId: string;\n  questionNumber: number;\n  provider: string;\n  exam: string;\n  text: string;\n  options: string[][];\n  questionType: 'single_choice' | 'multiple_choice';\n  expectedAnswers: number;\n  correctAnswer: string | string[];\n  explanation?: string;\n  difficulty: 'easy' | 'medium' | 'hard';\n  topics: string[];\n  serviceCategory?: string;\n  awsServices?: string[];\n  keywords?: string[];\n  createdAt: string;\n  parsingConfidence?: number;\n  hasExplanation?: boolean;\n}\n\n// Raw question data from S3 (matches study_data_final.json structure)\nexport interface RawQuestionData {\n  question_number: number;\n  question: {\n    text: string;\n    options: string[][];\n    question_type: 'single_choice' | 'multiple_choice';\n    expected_answers: number;\n    topic: string;\n    service_category?: string;\n    aws_services?: string[];\n  };\n  answer?: {\n    correct_answer: string;\n    explanation?: string;\n    keywords?: string[];\n    parsing_confidence?: number;\n    source?: string;\n  };\n  study_metadata?: {\n    difficulty: 'easy' | 'medium' | 'hard';\n    completeness: string;\n    question_preview: string;\n    has_explanation: boolean;\n    confidence_level: string;\n  };\n}\n\n// Session Request/Response Types\nexport interface CreateSessionRequest {\n  provider: string;\n  exam: string;\n  config?: Partial<SessionConfiguration>;\n}\n\nexport interface UpdateSessionRequest {\n  config?: Partial<SessionConfiguration>;\n  status?: 'paused' | 'active';\n}\n\nexport interface SubmitAnswerRequest {\n  questionId: string;\n  answer: string | string[];\n  timeSpent?: number; // in seconds\n}\n\nexport interface SubmitAnswerResponse {\n  isCorrect: boolean;\n  correctAnswer: string | string[];\n  explanation?: string;\n  nextQuestion?: Question;\n  sessionProgress: SessionProgress;\n  sessionCompleted: boolean;\n}\n\nexport interface GetSessionResponse {\n  session: StudySession;\n  currentState?: SessionState;\n}\n\nexport interface ListSessionsRequest {\n  status?: 'active' | 'completed' | 'paused';\n  provider?: string;\n  exam?: string;\n  limit?: number;\n  lastEvaluatedKey?: string;\n}\n\nexport interface CompleteSessionResponse {\n  results: SessionResults;\n  achievements?: Achievement[];\n}\n\n// Achievement system for gamification\nexport interface Achievement {\n  id: string;\n  name: string;\n  description: string;\n  type: 'accuracy' | 'speed' | 'streak' | 'completion' | 'improvement';\n  criteria: any;\n  earnedAt: string;\n}\n\nexport interface CreateGoalRequest {\n  title: string;\n  description?: string;\n  targetDate: string;\n  questionsTarget: number;\n  accuracyTarget: number;\n}\n\n// ============================================================================\n// AI-POWERED STUDY FEATURES TYPES - Phase 5\n// ============================================================================\n\n// Enhanced Goal Types with AI Features\nexport interface EnhancedStudyGoal extends StudyGoal {\n  aiOptimized: boolean;\n  adaptiveSettings: {\n    difficultyLevel: 'adaptive' | 'fixed';\n    spacedRepetition: boolean;\n    personalizedSchedule: boolean;\n  };\n  milestones: GoalMilestone[];\n  studyPlan: StudyPlanReference;\n  aiRecommendations: AIRecommendation[];\n  learningPath: LearningPathNode[];\n  achievements: GoalAchievement[];\n  analyticsSnapshot: GoalAnalyticsSnapshot;\n}\n\nexport interface GoalMilestone {\n  milestoneId: string;\n  title: string;\n  description?: string;\n  targetDate: string;\n  completed: boolean;\n  completedAt?: string;\n  requirements: MilestoneRequirement[];\n  rewards: string[];\n  aiGenerated: boolean;\n}\n\nexport interface MilestoneRequirement {\n  type: 'accuracy' | 'questions' | 'time' | 'topics' | 'sessions';\n  target: number;\n  current: number;\n  description: string;\n}\n\nexport interface StudyPlanReference {\n  planId: string;\n  generatedAt: string;\n  duration: number; // days\n  adaptiveAdjustments: number;\n  lastOptimized: string;\n}\n\nexport interface AIRecommendation {\n  id: string;\n  type: 'study_schedule' | 'difficulty_adjustment' | 'topic_focus' | 'break_suggestion';\n  priority: 'high' | 'medium' | 'low';\n  title: string;\n  description: string;\n  reasoning: string;\n  actionItems: string[];\n  validUntil: string;\n  applied: boolean;\n  appliedAt?: string;\n  effectiveness?: number; // 0-100, measured after application\n}\n\nexport interface LearningPathNode {\n  nodeId: string;\n  topic: string;\n  estimatedTime: number; // minutes\n  prerequisites: string[];\n  completed: boolean;\n  completedAt?: string;\n  difficultyLevel: number; // 1-5\n  adaptiveWeight: number; // Higher weight = more important\n  nextReviewDate?: string; // For spaced repetition\n}\n\nexport interface GoalAchievement {\n  achievementId: string;\n  name: string;\n  description: string;\n  earnedAt: string;\n  category: 'progress' | 'consistency' | 'improvement' | 'mastery';\n  points: number;\n}\n\nexport interface GoalAnalyticsSnapshot {\n  lastUpdated: string;\n  currentAccuracy: number;\n  weeklyProgress: number;\n  studyVelocity: number; // questions per day\n  difficultyTrend: 'increasing' | 'decreasing' | 'stable';\n  topicMastery: { [topic: string]: number }; // 0-100 mastery score\n  predictedCompletionDate: string;\n  confidenceScore: number; // 0-100\n}\n\n// Spaced Repetition and Adaptive Learning Types\nexport interface SpacedRepetitionItem {\n  itemId: string;\n  userId: string;\n  conceptId: string; // Could be questionId, topicId, or skill\n  conceptType: 'question' | 'topic' | 'skill';\n  \n  // SM-2 Algorithm fields\n  easinessFactor: number; // 1.3 - 2.5, default 2.5\n  interval: number; // Days until next review\n  repetition: number; // Number of successful reviews\n  nextReviewDate: string;\n  \n  // Performance tracking\n  totalAttempts: number;\n  correctAttempts: number;\n  lastAttemptDate: string;\n  averageResponseTime: number; // milliseconds\n  masteryLevel: 'learning' | 'reviewing' | 'mastered';\n  \n  // Difficulty adaptation\n  currentDifficulty: number; // 0-100\n  optimalDifficulty: number; // Target difficulty for user\n  difficultyAdjustments: DifficultyAdjustment[];\n  \n  // Context and metadata\n  provider?: string;\n  exam?: string;\n  topic?: string;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface DifficultyAdjustment {\n  adjustmentDate: string;\n  previousDifficulty: number;\n  newDifficulty: number;\n  reason: string;\n  performanceMetrics: {\n    accuracy: number;\n    responseTime: number;\n    confidence: number;\n  };\n}\n\nexport interface LearningSessionPlan {\n  planId: string;\n  userId: string;\n  sessionType: 'review' | 'learning' | 'mixed' | 'assessment';\n  \n  // Content selection\n  selectedItems: SpacedRepetitionItem[];\n  questionPool: Question[];\n  targetDifficulty: number;\n  adaptiveDifficultyEnabled: boolean;\n  \n  // Session parameters\n  estimatedDuration: number; // minutes\n  targetQuestions: number;\n  difficultyDistribution: {\n    easy: number;\n    medium: number;\n    hard: number;\n  };\n  \n  // Spaced repetition settings\n  reviewPriority: 'overdue' | 'due_today' | 'upcoming' | 'mixed';\n  newContentRatio: number; // 0-1, percentage of new vs review content\n  \n  // AI optimization\n  personalizedOrder: string[]; // Question IDs in optimized order\n  difficultyProgression: number[]; // Difficulty progression through session\n  breakSuggestions: number[]; // Suggested break points (question indices)\n  \n  createdAt: string;\n  validUntil: string;\n}\n\n// AI Recommendation System Types\nexport interface AIStudyRecommendation extends RecommendationItem {\n  confidence: number; // 0-100, confidence in recommendation\n  personalizedData: {\n    userPerformanceFactors: UserPerformanceFactors;\n    adaptiveLearningInsights: AdaptiveLearningInsights;\n    behavioralPatterns: BehavioralPatterns;\n  };\n  dynamicAdjustments: DynamicAdjustment[];\n  successMetrics: SuccessMetric[];\n  followUpActions: FollowUpAction[];\n}\n\nexport interface UserPerformanceFactors {\n  overallAccuracy: number;\n  accuracyTrend: 'improving' | 'stable' | 'declining';\n  strongTopics: string[];\n  weakTopics: string[];\n  averageStudyTime: number; // minutes per day\n  studyConsistency: number; // 0-100\n  difficultyPreference: 'easy' | 'medium' | 'hard' | 'adaptive';\n  learningVelocity: number; // questions mastered per week\n}\n\nexport interface AdaptiveLearningInsights {\n  spacedRepetitionEffectiveness: number; // 0-100\n  optimalReviewInterval: number; // hours\n  difficultyAdaptationSuccess: number; // 0-100\n  masteredConcepts: number;\n  strugglingConcepts: number;\n  overdueReviews: number;\n  predictedPerformanceGain: number; // Expected improvement with recommendation\n}\n\nexport interface BehavioralPatterns {\n  preferredStudyTimes: string[]; // e.g., ['morning', 'evening']\n  averageSessionLength: number; // minutes\n  studyFrequency: number; // sessions per week\n  breakPreferences: BreakPreference;\n  motivationFactors: MotivationFactor[];\n  procrastinationRisk: 'low' | 'medium' | 'high';\n  studyConsistency: number; // 0-100, consistency score\n}\n\nexport interface BreakPreference {\n  frequency: number; // minutes between breaks\n  duration: number; // break duration in minutes\n  type: 'short' | 'medium' | 'long';\n}\n\nexport interface MotivationFactor {\n  factor: 'achievements' | 'progress' | 'competition' | 'learning' | 'goals';\n  weight: number; // 0-1, importance to user\n  effectiveness: number; // 0-100, how well it works for user\n}\n\nexport interface DynamicAdjustment {\n  parameter: string;\n  originalValue: any;\n  adjustedValue: any;\n  reason: string;\n  expectedImpact: number; // 0-100\n}\n\nexport interface SuccessMetric {\n  metric: string;\n  currentValue: number;\n  targetValue: number;\n  timeframe: string; // e.g., '1 week', '1 month'\n  probability: number; // 0-100, probability of achieving target\n}\n\nexport interface FollowUpAction {\n  action: string;\n  timing: string; // when to perform action\n  condition: string; // condition that triggers action\n  priority: 'high' | 'medium' | 'low';\n}\n\n// Enhanced Study Plan Types\nexport interface AIStudyPlan extends StudyPlan {\n  aiOptimizations: {\n    personalizedScheduling: boolean;\n    adaptiveDifficulty: boolean;\n    spacedRepetitionIntegration: boolean;\n    behaviorBasedAdjustments: boolean;\n  };\n  performancePredictions: {\n    expectedAccuracyImprovement: number;\n    estimatedCompletionDate: string;\n    confidenceLevel: number;\n  };\n  contingencyPlans: ContingencyPlan[];\n  motivationalElements: MotivationalElement[];\n}\n\nexport interface ContingencyPlan {\n  trigger: string; // What triggers this plan\n  adjustments: string[]; // What adjustments to make\n  timeline: string; // How long to try adjustments\n}\n\nexport interface MotivationalElement {\n  type: 'achievement' | 'progress_visualization' | 'competition' | 'reward';\n  description: string;\n  triggerConditions: string[];\n  impact: 'high' | 'medium' | 'low';\n}\n\n// Performance Prediction and Analytics\nexport interface PerformancePrediction {\n  userId: string;\n  conceptId: string;\n  \n  // Predictions\n  predictedAccuracy: number; // 0-100\n  predictedResponseTime: number; // milliseconds\n  confidenceScore: number; // 0-100, confidence in predictions\n  \n  // Model factors\n  factors: {\n    historicalPerformance: number; // Weight: 40%\n    timeSinceLastPractice: number; // Weight: 20%\n    conceptDifficulty: number; // Weight: 15%\n    userSkillLevel: number; // Weight: 15%\n    contextualFactors: number; // Weight: 10%\n  };\n  \n  // Recommendations\n  recommendedAction: 'practice' | 'review' | 'skip' | 'intensive_study';\n  optimalTimingHours: number; // Optimal time until next practice\n  \n  calculatedAt: string;\n}\n\n// Recommendation Feedback System\nexport interface RecommendationFeedback {\n  recommendationId: string;\n  userId: string;\n  feedbackType: 'helpful' | 'not_helpful' | 'partially_helpful' | 'irrelevant';\n  effectiveness: number; // 0-100, how effective was the recommendation\n  appliedSuggestions: string[];\n  ignoredSuggestions: string[];\n  userComments?: string;\n  performanceChange: {\n    beforeAccuracy: number;\n    afterAccuracy: number;\n    beforeStudyTime: number;\n    afterStudyTime: number;\n    timeframe: string;\n  };\n  submittedAt: string;\n}\n\n// Achievement System for Gamification\nexport interface AchievementDefinition {\n  id: string;\n  name: string;\n  description: string;\n  type: 'accuracy' | 'speed' | 'streak' | 'completion' | 'improvement' | 'consistency';\n  criteria: AchievementCriteria;\n  points: number;\n  badge?: string;\n  rarity: 'common' | 'uncommon' | 'rare' | 'epic' | 'legendary';\n}\n\nexport interface AchievementCriteria {\n  metric: string;\n  threshold: number;\n  timeframe?: string;\n  conditions?: { [key: string]: any };\n}\n\nexport interface UserAchievementProgress {\n  userId: string;\n  achievementId: string;\n  currentProgress: number;\n  targetProgress: number;\n  progressPercentage: number;\n  isCompleted: boolean;\n  completedAt?: string;\n  lastUpdated: string;\n}\n\n// Study Session Enhancement Types\nexport interface EnhancedStudySession extends StudySession {\n  aiEnhancements: {\n    adaptiveDifficultyEnabled: boolean;\n    spacedRepetitionIntegrated: boolean;\n    personalizedOrdering: boolean;\n    realTimeAdjustments: boolean;\n  };\n  learningMetrics: {\n    conceptsMastered: string[];\n    conceptsReviewed: string[];\n    difficultyAdjustments: DifficultyAdjustment[];\n    optimalBreakPoints: number[];\n    retentionPrediction: number; // 0-100\n  };\n  aiRecommendations: {\n    nextSessionType: 'review' | 'learning' | 'mixed' | 'assessment';\n    optimalTimingHours: number;\n    suggestedTopics: string[];\n    difficultyRecommendation: 'increase' | 'decrease' | 'maintain';\n  };\n}\n\n// API Request/Response Types for AI Features\nexport interface GenerateRecommendationsRequest {\n  includeStudyPlan?: boolean;\n  planDuration?: number; // days\n  focusAreas?: string[];\n  urgency?: 'low' | 'medium' | 'high';\n  timeAvailable?: number; // minutes per day\n}\n\nexport interface GenerateRecommendationsResponse {\n  recommendations: AIStudyRecommendation[];\n  studyPlan?: AIStudyPlan;\n  lastUpdated: string;\n  metadata: {\n    totalRecommendations: number;\n    highPriorityCount: number;\n    averageConfidence: number;\n    planIncluded: boolean;\n  };\n}\n\nexport interface SessionRecommendationsRequest {\n  availableTime: number; // minutes\n  preferredDifficulty?: 'easy' | 'medium' | 'hard' | 'adaptive';\n  focusTopics?: string[];\n  sessionType?: 'review' | 'learning' | 'mixed' | 'assessment';\n}\n\nexport interface SessionRecommendationsResponse {\n  sessionPlan: LearningSessionPlan;\n  recommendations: AIStudyRecommendation[];\n  sessionInfo: {\n    estimatedDuration: number;\n    targetQuestions: number;\n    sessionType: string;\n    difficultyDistribution: { easy: number; medium: number; hard: number };\n    breakSuggestions: number[];\n    personalizedOrder: boolean;\n  };\n}\n\n// Learning Analytics Enhancement\nexport interface LearningAnalytics extends UserProgressAnalytics {\n  aiInsights: {\n    learningEfficiency: number; // 0-100\n    retentionRate: number; // 0-100\n    optimalStudyPattern: string;\n    predictedPerformance: PerformancePrediction[];\n    recommendedAdjustments: string[];\n  };\n  adaptiveLearningStats: {\n    spacedRepetitionItems: number;\n    masteryProgression: { [concept: string]: number };\n    difficultyAdaptationSuccess: number;\n    overallLearningVelocity: number;\n  };\n}\n\nexport interface GetQuestionsRequest {\n  provider: string;\n  exam: string;\n  limit?: number;\n  offset?: number;\n  difficulty?: 'easy' | 'medium' | 'hard';\n  topics?: string[];\n  serviceCategory?: string;\n  awsServices?: string[];\n  search?: string;\n  hasExplanation?: boolean;\n  questionType?: 'single_choice' | 'multiple_choice';\n}\n\nexport interface QuestionFilter {\n  difficulty?: 'easy' | 'medium' | 'hard';\n  topics?: string[];\n  serviceCategory?: string;\n  awsServices?: string[];\n  search?: string;\n  hasExplanation?: boolean;\n  questionType?: 'single_choice' | 'multiple_choice';\n}\n\nexport interface PaginationOptions {\n  limit: number;\n  offset: number;\n}\n\nexport interface QuestionSearchResult {\n  questions: Question[];\n  totalCount: number;\n  hasMore: boolean;\n  filters: {\n    availableTopics: string[];\n    availableServiceCategories: string[];\n    availableAwsServices: string[];\n    difficultyDistribution: { [key: string]: number };\n  };\n}\n\n// ============================================================================\n// ANALYTICS TYPES - Phase 4: Analytics & Progress Tracking\n// ============================================================================\n\n// User Progress Analytics\nexport interface UserProgressAnalytics {\n  userId: string;\n  overallStats: OverallProgressStats;\n  providerStats: ProviderProgressStats[];\n  examStats: ExamProgressStats[];\n  recentActivity: RecentActivityStats;\n  achievements: Achievement[];\n  calculatedAt: string;\n}\n\nexport interface OverallProgressStats {\n  totalSessions: number;\n  completedSessions: number;\n  totalQuestions: number;\n  correctAnswers: number;\n  overallAccuracy: number;\n  totalStudyTime: number; // in seconds\n  averageSessionScore: number;\n  bestSessionScore: number;\n  currentStreak: number;\n  longestStreak: number;\n  lastActivityDate: string;\n  studyDaysCount: number;\n}\n\nexport interface ProviderProgressStats {\n  provider: string;\n  totalSessions: number;\n  completedSessions: number;\n  totalQuestions: number;\n  correctAnswers: number;\n  accuracy: number;\n  studyTime: number;\n  averageScore: number;\n  bestScore: number;\n  lastSessionDate?: string;\n  exams: ExamProgressStats[];\n}\n\nexport interface ExamProgressStats {\n  provider: string;\n  exam: string;\n  totalSessions: number;\n  completedSessions: number;\n  totalQuestions: number;\n  correctAnswers: number;\n  accuracy: number;\n  studyTime: number;\n  averageScore: number;\n  bestScore: number;\n  lastSessionDate?: string;\n  readinessScore: number; // 0-100, calculated readiness for this exam\n  topicMastery: TopicMasteryStats[];\n}\n\nexport interface TopicMasteryStats {\n  topic: string;\n  questionsAnswered: number;\n  correctAnswers: number;\n  accuracy: number;\n  masteryLevel: 'beginner' | 'intermediate' | 'advanced' | 'expert';\n  confidenceScore: number; // 0-100\n  lastPracticed?: string;\n  improvementTrend: 'improving' | 'stable' | 'declining';\n}\n\nexport interface RecentActivityStats {\n  last7Days: DailyActivityStats[];\n  last30Days: DailyActivityStats[];\n  currentWeekStats: WeeklyActivityStats;\n  currentMonthStats: MonthlyActivityStats;\n}\n\nexport interface DailyActivityStats {\n  date: string; // YYYY-MM-DD\n  sessionsCount: number;\n  questionsAnswered: number;\n  correctAnswers: number;\n  studyTimeMinutes: number;\n  accuracy: number;\n}\n\nexport interface WeeklyActivityStats {\n  weekStartDate: string;\n  totalSessions: number;\n  totalQuestions: number;\n  totalCorrect: number;\n  totalStudyTime: number;\n  averageAccuracy: number;\n  studyDays: number;\n}\n\nexport interface MonthlyActivityStats {\n  month: string; // YYYY-MM\n  totalSessions: number;\n  totalQuestions: number;\n  totalCorrect: number;\n  totalStudyTime: number;\n  averageAccuracy: number;\n  studyDays: number;\n}\n\n// Performance Metrics and Trends\nexport interface PerformanceMetrics {\n  userId: string;\n  timeRange: 'week' | 'month' | 'quarter' | 'year' | 'all';\n  trends: PerformanceTrends;\n  comparisons: PerformanceComparisons;\n  insights: PerformanceInsights;\n  calculatedAt: string;\n}\n\nexport interface PerformanceTrends {\n  accuracyTrend: TrendData[];\n  speedTrend: TrendData[];\n  studyTimeTrend: TrendData[];\n  sessionCompletionTrend: TrendData[];\n  difficultyProgressionTrend: DifficultyTrendData[];\n}\n\nexport interface TrendData {\n  date: string;\n  value: number;\n  change?: number; // percentage change from previous period\n}\n\nexport interface DifficultyTrendData {\n  date: string;\n  easy: { accuracy: number; count: number };\n  medium: { accuracy: number; count: number };\n  hard: { accuracy: number; count: number };\n}\n\nexport interface PerformanceComparisons {\n  vsLastPeriod: ComparisonData;\n  vsPersonalBest: ComparisonData;\n  vsAverageUser: ComparisonData; // if available\n}\n\nexport interface ComparisonData {\n  accuracy: { current: number; comparison: number; change: number };\n  speed: { current: number; comparison: number; change: number };\n  studyTime: { current: number; comparison: number; change: number };\n  completion: { current: number; comparison: number; change: number };\n}\n\nexport interface PerformanceInsights {\n  strengths: string[];\n  weaknesses: string[];\n  recommendations: string[];\n  milestoneProgress: MilestoneProgress[];\n}\n\nexport interface MilestoneProgress {\n  milestone: string;\n  description: string;\n  progress: number; // 0-100\n  target: number;\n  current: number;\n  estimatedCompletion?: string;\n}\n\n// Session Analytics and History\nexport interface SessionAnalyticsData {\n  userId: string;\n  sessions: SessionSummary[];\n  aggregatedStats: SessionAggregatedStats;\n  patterns: SessionPatterns;\n  calculatedAt: string;\n}\n\nexport interface SessionSummary {\n  sessionId: string;\n  provider: string;\n  exam: string;\n  startTime: string;\n  endTime?: string;\n  duration: number; // in seconds\n  status: 'active' | 'completed' | 'paused' | 'expired';\n  score: number;\n  questionsTotal: number;\n  questionsCorrect: number;\n  accuracy: number;\n  averageTimePerQuestion: number;\n  difficultyBreakdown: {\n    easy: { correct: number; total: number };\n    medium: { correct: number; total: number };\n    hard: { correct: number; total: number };\n  };\n}\n\nexport interface SessionAggregatedStats {\n  totalSessions: number;\n  completedSessions: number;\n  averageScore: number;\n  averageDuration: number;\n  averageAccuracy: number;\n  bestPerformance: SessionSummary;\n  recentPerformance: SessionSummary[];\n}\n\nexport interface SessionPatterns {\n  preferredStudyTimes: TimeOfDayPattern[];\n  sessionLengthDistribution: SessionLengthPattern;\n  accuracyByTimeOfDay: TimeOfDayAccuracy[];\n  studyStreak: StreakData;\n}\n\nexport interface TimeOfDayPattern {\n  hour: number;\n  sessionCount: number;\n  averageAccuracy: number;\n}\n\nexport interface SessionLengthPattern {\n  short: number; // < 15 minutes\n  medium: number; // 15-60 minutes\n  long: number; // > 60 minutes\n}\n\nexport interface TimeOfDayAccuracy {\n  timeRange: string; // e.g., \"09:00-12:00\"\n  averageAccuracy: number;\n  sessionCount: number;\n}\n\nexport interface StreakData {\n  currentStreak: number;\n  longestStreak: number;\n  streakDates: string[];\n}\n\n// Cross-Provider Comparison Analytics\nexport interface CrossProviderAnalytics {\n  userId: string;\n  providerComparisons: ProviderComparison[];\n  skillTransferability: SkillTransferAnalysis[];\n  recommendations: CrossProviderRecommendations;\n  calculatedAt: string;\n}\n\nexport interface ProviderComparison {\n  provider: string;\n  totalQuestions: number;\n  accuracy: number;\n  averageScore: number;\n  studyTime: number;\n  completionRate: number;\n  strengthAreas: string[];\n  weaknessAreas: string[];\n  relativePerformance: number; // compared to user's average across all providers\n}\n\nexport interface SkillTransferAnalysis {\n  sharedTopic: string;\n  providers: string[];\n  consistencyScore: number; // 0-100, how consistent performance is across providers\n  averageAccuracy: number;\n  recommendations: string[];\n}\n\nexport interface CrossProviderRecommendations {\n  suggestedFocusProvider: string;\n  reasonForSuggestion: string;\n  skillGapAreas: string[];\n  strengthLeverageOpportunities: string[];\n}\n\n// Predictive Analytics for Exam Readiness\nexport interface ExamReadinessAssessment {\n  userId: string;\n  provider: string;\n  exam: string;\n  readinessScore: number; // 0-100\n  confidence: 'low' | 'medium' | 'high';\n  prediction: ReadinessPrediction;\n  factors: ReadinessFactors;\n  timeline: ReadinessTimeline;\n  calculatedAt: string;\n}\n\nexport interface ReadinessPrediction {\n  passLikelihood: number; // 0-100\n  recommendedWaitTime: number; // days before attempting real exam\n  minimumStudyHours: number;\n  targetAccuracy: number;\n}\n\nexport interface ReadinessFactors {\n  currentAccuracy: { value: number; weight: number; impact: 'positive' | 'negative' | 'neutral' };\n  topicCoverage: { value: number; weight: number; impact: 'positive' | 'negative' | 'neutral' };\n  consistencyScore: { value: number; weight: number; impact: 'positive' | 'negative' | 'neutral' };\n  recentPerformance: { value: number; weight: number; impact: 'positive' | 'negative' | 'neutral' };\n  studyVolume: { value: number; weight: number; impact: 'positive' | 'negative' | 'neutral' };\n  timeSpent: { value: number; weight: number; impact: 'positive' | 'negative' | 'neutral' };\n}\n\nexport interface ReadinessTimeline {\n  currentLevel: ReadinessLevel;\n  milestones: ReadinessMilestone[];\n  projectedReadyDate: string;\n}\n\nexport interface ReadinessLevel {\n  level: 'beginner' | 'intermediate' | 'advanced' | 'ready';\n  description: string;\n  requirements: string[];\n}\n\nexport interface ReadinessMilestone {\n  milestone: string;\n  description: string;\n  targetDate: string;\n  completed: boolean;\n  requirements: string[];\n}\n\n// Study Recommendations System\nexport interface StudyRecommendations {\n  userId: string;\n  recommendations: RecommendationItem[];\n  priorityActions: PriorityAction[];\n  studyPlan: StudyPlan;\n  calculatedAt: string;\n}\n\nexport interface RecommendationItem {\n  id: string;\n  type: 'topic_focus' | 'difficulty_adjustment' | 'study_pattern' | 'exam_preparation' | 'skill_development';\n  priority: 'high' | 'medium' | 'low';\n  title: string;\n  description: string;\n  reasoning: string;\n  actionItems: string[];\n  estimatedImpact: number; // 0-100\n  estimatedTimeInvestment: number; // in hours\n  applicableProviders: string[];\n  applicableExams: string[];\n}\n\nexport interface PriorityAction {\n  action: string;\n  description: string;\n  timeframe: string;\n  expectedOutcome: string;\n}\n\nexport interface StudyPlan {\n  planId: string;\n  duration: number; // in days\n  dailyTargets: DailyStudyTarget[];\n  weeklyGoals: WeeklyStudyGoal[];\n  milestones: StudyMilestone[];\n}\n\nexport interface DailyStudyTarget {\n  date: string;\n  targetQuestions: number;\n  targetAccuracy: number;\n  recommendedTopics: string[];\n  estimatedTime: number; // in minutes\n}\n\nexport interface WeeklyStudyGoal {\n  weekStartDate: string;\n  focusAreas: string[];\n  targetSessions: number;\n  targetQuestions: number;\n  targetAccuracy: number;\n}\n\nexport interface StudyMilestone {\n  milestone: string;\n  targetDate: string;\n  criteria: MilestoneCriteria;\n  rewards: string[];\n}\n\nexport interface MilestoneCriteria {\n  minimumSessions: number;\n  minimumAccuracy: number;\n  requiredTopics: string[];\n  requiredQuestions: number;\n}\n\n// Analytics API Request/Response Types\nexport interface GetProgressAnalyticsRequest {\n  timeRange?: 'week' | 'month' | 'quarter' | 'year' | 'all';\n  includeProviders?: string[];\n  includeExams?: string[];\n}\n\nexport interface GetPerformanceMetricsRequest {\n  timeRange: 'week' | 'month' | 'quarter' | 'year' | 'all';\n  includeComparisons?: boolean;\n  includeTrends?: boolean;\n}\n\nexport interface GetSessionAnalyticsRequest {\n  timeRange?: 'week' | 'month' | 'quarter' | 'year' | 'all';\n  provider?: string;\n  exam?: string;\n  status?: 'active' | 'completed' | 'paused';\n  limit?: number;\n  lastEvaluatedKey?: string;\n}\n\nexport interface GetTopicAnalyticsRequest {\n  provider?: string;\n  exam?: string;\n  topics?: string[];\n  timeRange?: 'week' | 'month' | 'quarter' | 'year' | 'all';\n}\n\nexport interface GetReadinessAssessmentRequest {\n  provider: string;\n  exam: string;\n  includeTimeline?: boolean;\n  includeDetailedFactors?: boolean;\n}\n\nexport interface GetRecommendationsRequest {\n  includeStudyPlan?: boolean;\n  planDuration?: number; // in days\n  focusAreas?: string[];\n}\n\nexport interface GetComparisonAnalyticsRequest {\n  providers?: string[];\n  includeSkillTransfer?: boolean;\n  includeRecommendations?: boolean;\n}\n\n// Analytics Storage Types for DynamoDB\nexport interface AnalyticsRecord {\n  PK: string; // Partition Key: userId\n  SK: string; // Sort Key: analyticsType#provider#exam#date\n  userId: string;\n  analyticsType: 'progress' | 'performance' | 'session' | 'topic' | 'readiness' | 'recommendation';\n  provider?: string;\n  exam?: string;\n  data: any;\n  calculatedAt: string;\n  expiresAt: number; // TTL\n}\n\nexport interface AnalyticsAggregation {\n  PK: string; // Partition Key: userId#provider#exam\n  SK: string; // Sort Key: aggregationType#date\n  aggregationType: 'daily' | 'weekly' | 'monthly' | 'quarterly' | 'yearly';\n  date: string;\n  data: {\n    sessions: number;\n    questions: number;\n    correct: number;\n    studyTime: number;\n    averageAccuracy: number;\n  };\n  expiresAt: number; // TTL\n}\n\n// ============================================================================\n// HEALTH & MONITORING TYPES - Phase 6: System Health & Monitoring\n// ============================================================================\n\n// System Health Types\nexport interface SystemHealthCheck {\n  status: 'healthy' | 'degraded' | 'unhealthy';\n  timestamp: string;\n  environment: EnvironmentInfo;\n  dependencies: DependencyHealth;\n  performance: HealthPerformanceMetrics;\n  dataQuality: DataQualityStatus;\n  alerts: HealthAlert[];\n  recommendations: string[];\n}\n\nexport interface EnvironmentInfo {\n  stage: string;\n  version: string;\n  region: string;\n  functionName: string;\n  memorySize: string;\n  logLevel: string;\n  uptime: number; // in seconds\n  coldStart: boolean;\n}\n\nexport interface DependencyHealth {\n  dynamodb: DatabaseHealthStatus;\n  s3: S3HealthStatus;\n  external: ExternalServiceHealthStatus[];\n  overall: 'healthy' | 'degraded' | 'unhealthy';\n}\n\nexport interface DatabaseHealthStatus {\n  status: 'healthy' | 'degraded' | 'unhealthy';\n  tables: TableHealthStatus[];\n  connectivity: {\n    canConnect: boolean;\n    responseTime: number; // in milliseconds\n    lastChecked: string;\n  };\n  performance: {\n    readLatency: number;\n    writeLatency: number;\n    throughputUtilization: number; // percentage\n    errorRate: number; // percentage\n  };\n  capacity: {\n    consumedReadCapacity: number;\n    consumedWriteCapacity: number;\n    provisionedReadCapacity: number;\n    provisionedWriteCapacity: number;\n    utilizationPercentage: number;\n  };\n}\n\nexport interface TableHealthStatus {\n  tableName: string;\n  status: 'healthy' | 'degraded' | 'unhealthy';\n  itemCount?: number;\n  sizeBytes?: number;\n  readCapacityUtilization: number;\n  writeCapacityUtilization: number;\n  gsiStatus?: GSIHealthStatus[];\n  errors: string[];\n}\n\nexport interface GSIHealthStatus {\n  indexName: string;\n  status: 'healthy' | 'degraded' | 'unhealthy';\n  readCapacityUtilization: number;\n  writeCapacityUtilization: number;\n}\n\nexport interface S3HealthStatus {\n  status: 'healthy' | 'degraded' | 'unhealthy';\n  buckets: S3BucketHealthStatus[];\n  connectivity: {\n    canConnect: boolean;\n    responseTime: number;\n    lastChecked: string;\n  };\n  performance: {\n    uploadLatency: number;\n    downloadLatency: number;\n    errorRate: number;\n  };\n}\n\nexport interface S3BucketHealthStatus {\n  bucketName: string;\n  status: 'healthy' | 'degraded' | 'unhealthy';\n  accessible: boolean;\n  objectCount?: number;\n  sizeBytes?: number;\n  errors: string[];\n}\n\nexport interface ExternalServiceHealthStatus {\n  serviceName: string;\n  url: string;\n  status: 'healthy' | 'degraded' | 'unhealthy';\n  responseTime: number;\n  statusCode?: number;\n  lastChecked: string;\n  uptime: number; // percentage over last 24 hours\n  errors: string[];\n}\n\n// Performance Monitoring Types for Health System\nexport interface HealthPerformanceMetrics {\n  memory: MemoryMetrics;\n  execution: ExecutionMetrics;\n  throughput: ThroughputMetrics;\n  errors: ErrorMetrics;\n  trends: HealthPerformanceTrends;\n}\n\nexport interface MemoryMetrics {\n  current: number; // MB\n  peak: number; // MB\n  limit: number; // MB\n  utilizationPercentage: number;\n  gcFrequency: number; // garbage collections per minute\n}\n\nexport interface ExecutionMetrics {\n  coldStartFrequency: number; // percentage of executions\n  averageExecutionTime: number; // milliseconds\n  p95ExecutionTime: number; // milliseconds\n  p99ExecutionTime: number; // milliseconds\n  timeouts: number; // count over last hour\n}\n\nexport interface ThroughputMetrics {\n  requestsPerSecond: number;\n  requestsPerMinute: number;\n  requestsPerHour: number;\n  peakThroughput: number;\n  averageResponseTime: number; // milliseconds\n}\n\nexport interface ErrorMetrics {\n  errorRate: number; // percentage over last hour\n  errorCount: number; // count over last hour\n  errorsByType: { [errorType: string]: number };\n  criticalErrors: number;\n  warnings: number;\n}\n\nexport interface HealthPerformanceTrends {\n  responseTimeTrend: 'improving' | 'stable' | 'degrading';\n  errorRateTrend: 'improving' | 'stable' | 'degrading';\n  throughputTrend: 'increasing' | 'stable' | 'decreasing';\n  memoryUsageTrend: 'improving' | 'stable' | 'degrading';\n}\n\n// Data Quality Types\nexport interface DataQualityStatus {\n  overall: 'excellent' | 'good' | 'fair' | 'poor';\n  checks: DataQualityCheck[];\n  lastAssessment: string;\n  trends: DataQualityTrends;\n}\n\nexport interface DataQualityCheck {\n  checkName: string;\n  table: string;\n  status: 'passed' | 'warning' | 'failed';\n  result: {\n    expected: number | string;\n    actual: number | string;\n    threshold?: number;\n  };\n  lastChecked: string;\n  impact: 'low' | 'medium' | 'high' | 'critical';\n  description: string;\n}\n\nexport interface DataQualityTrends {\n  dataConsistency: 'improving' | 'stable' | 'degrading';\n  dataCompleteness: 'improving' | 'stable' | 'degrading';\n  dataAccuracy: 'improving' | 'stable' | 'degrading';\n  dataDuplication: 'improving' | 'stable' | 'degrading';\n}\n\n// Health Alert Types\nexport interface HealthAlert {\n  alertId: string;\n  severity: 'info' | 'warning' | 'error' | 'critical';\n  category: 'performance' | 'availability' | 'data_quality' | 'security' | 'capacity';\n  title: string;\n  description: string;\n  source: string; // service or component that generated the alert\n  threshold?: {\n    metric: string;\n    value: number;\n    comparison: 'greater_than' | 'less_than' | 'equals';\n  };\n  currentValue: number | string;\n  impact: string;\n  recommendations: string[];\n  createdAt: string;\n  resolvedAt?: string;\n  acknowledged: boolean;\n  acknowledgedBy?: string;\n  tags: string[];\n}\n\nexport interface AlertThreshold {\n  metric: string;\n  warningThreshold: number;\n  errorThreshold: number;\n  criticalThreshold: number;\n  comparison: 'greater_than' | 'less_than';\n  enabled: boolean;\n}\n\n// Health History and Reporting Types\nexport interface HealthHistoryEntry {\n  timestamp: string;\n  overallStatus: 'healthy' | 'degraded' | 'unhealthy';\n  componentStatuses: { [component: string]: 'healthy' | 'degraded' | 'unhealthy' };\n  metrics: {\n    responseTime: number;\n    errorRate: number;\n    throughput: number;\n    memoryUsage: number;\n  };\n  alerts: number; // count of active alerts\n  incidents: number; // count of active incidents\n}\n\nexport interface HealthReport {\n  reportId: string;\n  generatedAt: string;\n  timeRange: {\n    start: string;\n    end: string;\n    duration: string; // e.g., '24h', '7d', '30d'\n  };\n  summary: {\n    overallHealth: 'excellent' | 'good' | 'fair' | 'poor';\n    uptimePercentage: number;\n    totalIncidents: number;\n    resolvedIncidents: number;\n    averageResponseTime: number;\n    errorRate: number;\n  };\n  trends: {\n    availabilityTrend: 'improving' | 'stable' | 'degrading';\n    performanceTrend: 'improving' | 'stable' | 'degrading';\n    errorTrend: 'improving' | 'stable' | 'degrading';\n    dataQualityTrend: 'improving' | 'stable' | 'degrading';\n  };\n  topIssues: HealthAlert[];\n  recommendations: SystemRecommendation[];\n  history: HealthHistoryEntry[];\n}\n\nexport interface SystemRecommendation {\n  id: string;\n  priority: 'high' | 'medium' | 'low';\n  category: 'performance' | 'reliability' | 'cost' | 'security';\n  title: string;\n  description: string;\n  reasoning: string;\n  actionItems: string[];\n  estimatedImpact: {\n    performance: number; // percentage improvement\n    cost: number; // dollar savings or cost\n    reliability: number; // uptime improvement percentage\n  };\n  effort: 'low' | 'medium' | 'high';\n  timeline: string;\n}\n\n// Health Check Configuration Types\nexport interface HealthCheckConfig {\n  enabled: boolean;\n  interval: number; // seconds between checks\n  timeout: number; // seconds before timeout\n  retries: number;\n  dependencies: {\n    dynamodb: {\n      enabled: boolean;\n      tables: string[];\n      performanceChecks: boolean;\n    };\n    s3: {\n      enabled: boolean;\n      buckets: string[];\n      performanceChecks: boolean;\n    };\n    external: {\n      enabled: boolean;\n      services: ExternalServiceConfig[];\n    };\n  };\n  dataQuality: {\n    enabled: boolean;\n    checks: DataQualityCheckConfig[];\n  };\n  alerts: {\n    enabled: boolean;\n    thresholds: AlertThreshold[];\n  };\n}\n\nexport interface ExternalServiceConfig {\n  name: string;\n  url: string;\n  method: 'GET' | 'POST' | 'HEAD';\n  headers?: { [key: string]: string };\n  timeout: number;\n  expectedStatusCode: number;\n}\n\nexport interface DataQualityCheckConfig {\n  name: string;\n  table: string;\n  checkType: 'count' | 'consistency' | 'completeness' | 'accuracy' | 'duplication';\n  query: string; // DynamoDB query or expression\n  expectedValue?: number | string;\n  threshold?: number;\n  critical: boolean;\n}\n\n// Health API Request/Response Types\nexport interface GetHealthRequest {\n  includeDetails?: boolean;\n  includeHistory?: boolean;\n  components?: string[];\n}\n\nexport interface GetHealthResponse {\n  health: SystemHealthCheck;\n  history?: HealthHistoryEntry[];\n  uptime: {\n    current: number; // percentage\n    last24h: number;\n    last7d: number;\n    last30d: number;\n  };\n}\n\nexport interface GetHealthPerformanceMetricsRequest {\n  timeRange?: 'hour' | 'day' | 'week' | 'month';\n  metrics?: string[];\n  includeHistorical?: boolean;\n}\n\nexport interface GetHealthPerformanceMetricsResponse {\n  current: HealthPerformanceMetrics;\n  historical?: { [timestamp: string]: HealthPerformanceMetrics };\n  trends: HealthPerformanceTrends;\n}\n\nexport interface GetAlertsRequest {\n  severity?: 'info' | 'warning' | 'error' | 'critical';\n  category?: 'performance' | 'availability' | 'data_quality' | 'security' | 'capacity';\n  status?: 'active' | 'resolved' | 'acknowledged';\n  limit?: number;\n}\n\nexport interface GetAlertsResponse {\n  alerts: HealthAlert[];\n  summary: {\n    total: number;\n    active: number;\n    resolved: number;\n    acknowledged: number;\n    bySeverity: { [severity: string]: number };\n    byCategory: { [category: string]: number };\n  };\n}\n\nexport interface GetHealthHistoryRequest {\n  timeRange: 'hour' | 'day' | 'week' | 'month';\n  resolution?: 'minute' | 'hour' | 'day';\n  components?: string[];\n}\n\nexport interface GetHealthHistoryResponse {\n  entries: HealthHistoryEntry[];\n  summary: {\n    totalDataPoints: number;\n    averageHealth: number; // 0-100 score\n    incidents: number;\n    majorOutages: number;\n  };\n}\n\nexport interface GenerateHealthReportRequest {\n  timeRange: {\n    start: string;\n    end: string;\n  };\n  includeRecommendations?: boolean;\n  format?: 'json' | 'summary';\n}\n\nexport interface GenerateHealthReportResponse {\n  report: HealthReport;\n  downloadUrl?: string; // if format is not json\n}", "import { APIGatewayProxyResult } from 'aws-lambda';\nimport { ApiResponse, ErrorCode } from '../types';\n\n/**\n * Enhanced Response Builder - V2\n * Provides consistent API responses with proper CORS headers\n */\nexport class ResponseBuilder {\n  private static readonly VERSION = '2.0.0';\n\n  private static readonly CORS_HEADERS = {\n    'Content-Type': 'application/json',\n    'Access-Control-Allow-Origin': '*', // Configure specific origins in production\n    'Access-Control-Allow-Headers': 'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Auth-Token',\n    'Access-Control-Allow-Methods': 'GET,POST,PUT,DELETE,OPTIONS,HEAD',\n    'Access-Control-Allow-Credentials': 'true',\n    'Cache-Control': 'no-cache, no-store, must-revalidate',\n    'Pragma': 'no-cache',\n    'Expires': '0'\n  };\n\n  /**\n   * Create successful response\n   */\n  public static success<T>(\n    data: T, \n    statusCode: number = 200,\n    message?: string\n  ): APIGatewayProxyResult {\n    const response: ApiResponse<T> = {\n      success: true,\n      data,\n      message,\n      timestamp: new Date().toISOString(),\n      version: this.VERSION\n    };\n\n    return {\n      statusCode,\n      headers: this.CORS_HEADERS,\n      body: JSON.stringify(response)\n    };\n  }\n\n  /**\n   * Create error response\n   */\n  public static error(\n    message: string,\n    code: ErrorCode = ErrorCode.INTERNAL_ERROR,\n    details?: any,\n    statusCode: number = 500\n  ): APIGatewayProxyResult {\n    const response: ApiResponse = {\n      success: false,\n      error: message,\n      message: `[${code}] ${message}`,\n      timestamp: new Date().toISOString(),\n      version: this.VERSION,\n      ...(details && { data: details })\n    };\n\n    return {\n      statusCode,\n      headers: this.CORS_HEADERS,\n      body: JSON.stringify(response)\n    };\n  }\n\n  /**\n   * Bad Request (400)\n   */\n  public static badRequest(message: string, details?: any): APIGatewayProxyResult {\n    return this.error(message, ErrorCode.VALIDATION_ERROR, details, 400);\n  }\n\n  /**\n   * Unauthorized (401)\n   */\n  public static unauthorized(message: string = 'Unauthorized'): APIGatewayProxyResult {\n    return this.error(message, ErrorCode.UNAUTHORIZED, undefined, 401);\n  }\n\n  /**\n   * Forbidden (403)\n   */\n  public static forbidden(message: string = 'Forbidden'): APIGatewayProxyResult {\n    return this.error(message, ErrorCode.FORBIDDEN, undefined, 403);\n  }\n\n  /**\n   * Not Found (404)\n   */\n  public static notFound(message: string = 'Resource not found'): APIGatewayProxyResult {\n    return this.error(message, ErrorCode.NOT_FOUND, undefined, 404);\n  }\n\n  /**\n   * Rate Limited (429)\n   */\n  public static rateLimited(message: string = 'Rate limit exceeded'): APIGatewayProxyResult {\n    return this.error(message, ErrorCode.RATE_LIMITED, undefined, 429);\n  }\n\n  /**\n   * Internal Server Error (500)\n   */\n  public static internalError(message: string = 'Internal server error'): APIGatewayProxyResult {\n    return this.error(message, ErrorCode.INTERNAL_ERROR, undefined, 500);\n  }\n\n  /**\n   * CORS preflight response\n   */\n  public static cors(): APIGatewayProxyResult {\n    return {\n      statusCode: 200,\n      headers: {\n        ...this.CORS_HEADERS,\n        'Access-Control-Max-Age': '86400' // Cache preflight for 24 hours\n      },\n      body: ''\n    };\n  }\n\n  /**\n   * Health check response\n   */\n  public static health(data: any): APIGatewayProxyResult {\n    return this.success({\n      status: 'healthy',\n      timestamp: new Date().toISOString(),\n      version: this.VERSION,\n      environment: process.env.STAGE || 'unknown',\n      ...data\n    });\n  }\n\n  /**\n   * Paginated response\n   */\n  public static paginated<T>(\n    items: T[],\n    totalCount: number,\n    page: number,\n    pageSize: number,\n    message?: string\n  ): APIGatewayProxyResult {\n    const totalPages = Math.ceil(totalCount / pageSize);\n    const hasNextPage = page < totalPages;\n    const hasPrevPage = page > 1;\n\n    return this.success({\n      items,\n      pagination: {\n        totalCount,\n        totalPages,\n        currentPage: page,\n        pageSize,\n        hasNextPage,\n        hasPrevPage\n      }\n    }, 200, message);\n  }\n}", "/**\n * Structured Logger - V2\n * Provides consistent logging across all Lambda functions\n */\nexport class Logger {\n  private readonly context: string;\n  private readonly logLevel: string;\n\n  constructor(context: string) {\n    this.context = context;\n    this.logLevel = process.env.LOG_LEVEL || 'INFO';\n  }\n\n  /**\n   * Info level logging\n   */\n  public info(message: string, data?: any): void {\n    if (this.shouldLog('INFO')) {\n      this.log('INFO', message, data);\n    }\n  }\n\n  /**\n   * Debug level logging\n   */\n  public debug(message: string, data?: any): void {\n    if (this.shouldLog('DEBUG')) {\n      this.log('DEBUG', message, data);\n    }\n  }\n\n  /**\n   * Warning level logging\n   */\n  public warn(message: string, data?: any): void {\n    if (this.shouldLog('WARN')) {\n      this.log('WARN', message, data);\n    }\n  }\n\n  /**\n   * Error level logging\n   */\n  public error(message: string, error?: any): void {\n    const errorData = error instanceof Error ? {\n      name: error.name,\n      message: error.message,\n      stack: error.stack\n    } : error;\n\n    this.log('ERROR', message, errorData);\n  }\n\n  /**\n   * Performance logging\n   */\n  public perf(operation: string, duration: number, data?: any): void {\n    this.info(`Performance: ${operation}`, {\n      duration: `${duration}ms`,\n      operation,\n      ...data\n    });\n  }\n\n  /**\n   * Core logging method\n   */\n  private log(level: string, message: string, data?: any): void {\n    const logEntry = {\n      timestamp: new Date().toISOString(),\n      level,\n      context: this.context,\n      message,\n      stage: process.env.STAGE || 'unknown',\n      version: '2.0.0',\n      ...(data && { data })\n    };\n\n    // Use console methods for CloudWatch integration\n    switch (level) {\n      case 'ERROR':\n        console.error(JSON.stringify(logEntry));\n        break;\n      case 'WARN':\n        console.warn(JSON.stringify(logEntry));\n        break;\n      default:\n        console.log(JSON.stringify(logEntry));\n    }\n  }\n\n  /**\n   * Check if message should be logged based on log level\n   */\n  private shouldLog(level: string): boolean {\n    const levels = ['ERROR', 'WARN', 'INFO', 'DEBUG'];\n    const currentLevelIndex = levels.indexOf(this.logLevel);\n    const messageLevelIndex = levels.indexOf(level);\n    \n    return messageLevelIndex <= currentLevelIndex;\n  }\n}", "import { APIGatewayProxyEvent, APIGatewayProxyResult } from 'aws-lambda';\nimport { PublicHandler, AuthenticatedHandler, ApiResponse, ErrorCode, ApiError } from '../types';\nimport { ResponseBuilder } from './response-builder';\nimport { Logger } from './logger';\n\n/**\n * Base Handler Class - Eliminates ALL boilerplate code across Lambda functions\n * \n * This addresses the V1 issue where auth code was duplicated across 7+ handlers.\n * Now ALL common functionality is centralized in this base class.\n */\nexport abstract class BaseHandler {\n  protected logger: Logger;\n  protected version: string = '2.0.0';\n\n  constructor(protected handlerName: string) {\n    this.logger = new Logger(handlerName);\n  }\n\n  /**\n   * Main entry point for authenticated handlers\n   * Handles ALL common concerns: auth, CORS, logging, error handling\n   */\n  public withAuth(handler: AuthenticatedHandler): PublicHandler {\n    return async (event: APIGatewayProxyEvent): Promise<APIGatewayProxyResult> => {\n      const requestId = event.requestContext.requestId;\n      const route = `${event.httpMethod} ${event.resource}`;\n      \n      try {\n        this.logger.info(`[${requestId}] ${route} - Request started`, {\n          httpMethod: event.httpMethod,\n          resource: event.resource,\n          userAgent: event.headers['User-Agent'],\n          sourceIp: event.requestContext.identity.sourceIp\n        });\n\n        // Handle CORS preflight\n        if (event.httpMethod === 'OPTIONS') {\n          return ResponseBuilder.cors();\n        }\n\n        // Extract and validate user context\n        const userId = this.extractUserId(event);\n        \n        if (!userId) {\n          this.logger.warn(`[${requestId}] ${route} - No userId in authorizer context`, {\n            authorizerContext: event.requestContext.authorizer\n          });\n          return ResponseBuilder.unauthorized('User not authenticated');\n        }\n\n        this.logger.info(`[${requestId}] ${route} - Authenticated user: ${userId}`);\n\n        // Validate request if needed\n        const validationError = await this.validateRequest(event);\n        if (validationError) {\n          this.logger.warn(`[${requestId}] ${route} - Validation failed`, validationError);\n          return ResponseBuilder.badRequest(validationError.message, validationError);\n        }\n\n        // Execute the actual handler\n        const startTime = Date.now();\n        const result = await handler(event, userId);\n        const duration = Date.now() - startTime;\n\n        this.logger.info(`[${requestId}] ${route} - Request completed`, {\n          statusCode: result.statusCode,\n          duration: `${duration}ms`\n        });\n\n        return result;\n\n      } catch (error) {\n        this.logger.error(`[${requestId}] ${route} - Request failed`, error);\n        return this.handleError(error);\n      }\n    };\n  }\n\n  /**\n   * Entry point for public handlers (no auth required)\n   * Still handles common concerns: CORS, logging, error handling\n   */\n  public withoutAuth(handler: PublicHandler): PublicHandler {\n    return async (event: APIGatewayProxyEvent): Promise<APIGatewayProxyResult> => {\n      const requestId = event.requestContext.requestId;\n      const route = `${event.httpMethod} ${event.resource}`;\n      \n      try {\n        this.logger.info(`[${requestId}] ${route} - Public request started`);\n\n        // Handle CORS preflight\n        if (event.httpMethod === 'OPTIONS') {\n          return ResponseBuilder.cors();\n        }\n\n        // Execute the handler\n        const startTime = Date.now();\n        const result = await handler(event);\n        const duration = Date.now() - startTime;\n\n        this.logger.info(`[${requestId}] ${route} - Public request completed`, {\n          statusCode: result.statusCode,\n          duration: `${duration}ms`\n        });\n\n        return result;\n\n      } catch (error) {\n        this.logger.error(`[${requestId}] ${route} - Public request failed`, error);\n        return this.handleError(error);\n      }\n    };\n  }\n\n  /**\n   * Extract userId from API Gateway authorizer context\n   * Handles both TOKEN and REQUEST authorizer formats\n   */\n  private extractUserId(event: APIGatewayProxyEvent): string | null {\n    const authorizer = event.requestContext.authorizer;\n    \n    if (!authorizer) {\n      return null;\n    }\n\n    // Try different possible locations for userId\n    return (\n      authorizer.userId ||\n      authorizer.principalId ||\n      authorizer.claims?.userId ||\n      authorizer.claims?.sub ||\n      null\n    );\n  }\n\n  /**\n   * Validate request - override in specific handlers\n   */\n  protected async validateRequest(event: APIGatewayProxyEvent): Promise<ApiError | null> {\n    return null; // No validation by default\n  }\n\n  /**\n   * Centralized error handling\n   */\n  private handleError(error: any): APIGatewayProxyResult {\n    if (error instanceof ApiError) {\n      return ResponseBuilder.error(error.message, error.code, error.details);\n    }\n\n    if (error.name === 'ValidationError') {\n      return ResponseBuilder.badRequest(error.message);\n    }\n\n    if (error.name === 'UnauthorizedError') {\n      return ResponseBuilder.unauthorized(error.message);\n    }\n\n    if (error.name === 'ForbiddenError') {\n      return ResponseBuilder.forbidden(error.message);\n    }\n\n    if (error.name === 'NotFoundError') {\n      return ResponseBuilder.notFound(error.message);\n    }\n\n    // Default to internal server error\n    return ResponseBuilder.internalError('An unexpected error occurred');\n  }\n\n  /**\n   * Helper: Parse JSON body safely\n   */\n  protected parseJsonBody<T>(event: APIGatewayProxyEvent): T | null {\n    if (!event.body) {\n      return null;\n    }\n\n    try {\n      // Handle base64 encoded body\n      let bodyString = event.body;\n      if (event.isBase64Encoded) {\n        bodyString = Buffer.from(event.body, 'base64').toString('utf-8');\n      }\n      \n      this.logger.debug('Parsing request body', { \n        isBase64Encoded: event.isBase64Encoded, \n        bodyLength: bodyString.length,\n        rawBody: bodyString.substring(0, 200) // Log first 200 chars for debugging\n      });\n      \n      return JSON.parse(bodyString) as T;\n    } catch (error: any) {\n      this.logger.error('JSON parsing failed', { \n        body: event.body, \n        bodyString: bodyString.substring(0, 200),\n        isBase64Encoded: event.isBase64Encoded, \n        error: error.message,\n        contentType: event.headers['Content-Type'] || event.headers['content-type']\n      });\n      throw new ApiError(ErrorCode.VALIDATION_ERROR, 'Invalid JSON in request body');\n    }\n  }\n\n  /**\n   * Helper: Get query parameter with default\n   */\n  protected getQueryParam(event: APIGatewayProxyEvent, key: string, defaultValue?: string): string | undefined {\n    return event.queryStringParameters?.[key] || defaultValue;\n  }\n\n  /**\n   * Helper: Get path parameter\n   */\n  protected getPathParam(event: APIGatewayProxyEvent, key: string): string | undefined {\n    return event.pathParameters?.[key];\n  }\n\n  /**\n   * Helper: Get header value\n   */\n  protected getHeader(event: APIGatewayProxyEvent, key: string): string | undefined {\n    return event.headers[key] || event.headers[key.toLowerCase()];\n  }\n\n  /**\n   * Helper: Create success response with data\n   */\n  protected success<T>(data: T, message?: string): APIGatewayProxyResult {\n    return ResponseBuilder.success(data, 200, message);\n  }\n\n  /**\n   * Helper: Create created response\n   */\n  protected created<T>(data: T, message?: string): APIGatewayProxyResult {\n    return ResponseBuilder.success(data, 201, message);\n  }\n\n  /**\n   * Helper: Create no content response\n   */\n  protected noContent(): APIGatewayProxyResult {\n    return ResponseBuilder.success(null, 204);\n  }\n\n  /**\n   * Helper: Create bad request response\n   */\n  protected badRequest(message: string, details?: any): APIGatewayProxyResult {\n    return ResponseBuilder.badRequest(message, details);\n  }\n\n  /**\n   * Helper: Create not found response\n   */\n  protected notFound(message: string): APIGatewayProxyResult {\n    return ResponseBuilder.notFound(message);\n  }\n\n  /**\n   * Helper: Create internal error response\n   */\n  protected internalError(message: string): APIGatewayProxyResult {\n    return ResponseBuilder.internalError(message);\n  }\n}", "import { DynamoDBClient } from '@aws-sdk/client-dynamodb';\nimport { DynamoDBDocumentClient, PutCommand, GetCommand, UpdateCommand, QueryCommand } from '@aws-sdk/lib-dynamodb';\nimport { Logger } from '../shared/logger';\nimport { User, ApiError, ErrorCode } from '../types';\nimport { v4 as uuidv4 } from 'uuid';\n\n/**\n * User Service - Handles all user-related DynamoDB operations\n */\nexport class UserService {\n  private client: DynamoDBDocumentClient;\n  private logger: Logger;\n  private tableName: string;\n\n  constructor() {\n    this.logger = new Logger('UserService');\n    \n    // Initialize DynamoDB client\n    const dynamoClient = new DynamoDBClient({\n      region: process.env.AWS_REGION || 'us-east-1'\n    });\n    this.client = DynamoDBDocumentClient.from(dynamoClient);\n    \n    this.tableName = process.env.USERS_TABLE || 'StudyApp-Users';\n    \n    this.logger.info('UserService initialized', {\n      tableName: this.tableName,\n      region: process.env.AWS_REGION || 'us-east-1'\n    });\n  }\n\n  /**\n   * Create a new user in DynamoDB\n   */\n  async createUser(userData: {\n    email: string;\n    passwordHash: string;\n    name?: string;\n  }): Promise<User> {\n    const now = new Date().toISOString();\n    const userWithPassword = {\n      userId: uuidv4(),\n      email: userData.email.toLowerCase(),\n      passwordHash: userData.passwordHash,\n      name: userData.name,\n      role: 'user',\n      createdAt: now,\n      updatedAt: now,\n      isActive: true\n    };\n\n    try {\n      const command = new PutCommand({\n        TableName: this.tableName,\n        Item: userWithPassword,\n        ConditionExpression: 'attribute_not_exists(email)' // Prevent duplicate emails\n      });\n\n      await this.client.send(command);\n\n      this.logger.info('User created successfully', {\n        userId: userWithPassword.userId,\n        email: userWithPassword.email\n      });\n\n      // Return user without password hash\n      const { passwordHash, ...user } = userWithPassword;\n      return user as User;\n\n    } catch (error: any) {\n      if (error.name === 'ConditionalCheckFailedException') {\n        this.logger.warn('User creation failed - email already exists', {\n          email: userData.email\n        });\n        throw new ApiError(ErrorCode.VALIDATION_ERROR, 'User with this email already exists');\n      }\n\n      this.logger.error('Failed to create user', {\n        error: error.message,\n        email: userData.email\n      });\n      throw new ApiError(ErrorCode.INTERNAL_ERROR, 'Failed to create user account');\n    }\n  }\n\n  /**\n   * Find user by email\n   */\n  async findUserByEmail(email: string): Promise<(User & { passwordHash: string }) | null> {\n    try {\n      // Using query on GSI with email as partition key\n      const command = new QueryCommand({\n        TableName: this.tableName,\n        IndexName: 'email-index', // Assuming we have a GSI on email\n        KeyConditionExpression: 'email = :email',\n        ExpressionAttributeValues: {\n          ':email': email.toLowerCase()\n        }\n      });\n\n      const result = await this.client.send(command);\n      \n      if (!result.Items || result.Items.length === 0) {\n        return null;\n      }\n\n      const user = result.Items[0] as (User & { passwordHash: string });\n      \n      this.logger.debug('User found by email', {\n        userId: user.userId,\n        email: user.email\n      });\n\n      return user;\n\n    } catch (error: any) {\n      this.logger.error('Failed to find user by email', {\n        error: error.message,\n        email\n      });\n      throw new ApiError(ErrorCode.INTERNAL_ERROR, 'Failed to lookup user');\n    }\n  }\n\n  /**\n   * Find user by userId\n   */\n  async findUserById(userId: string): Promise<User | null> {\n    try {\n      const command = new GetCommand({\n        TableName: this.tableName,\n        Key: { userId }\n      });\n\n      const result = await this.client.send(command);\n      \n      if (!result.Item) {\n        return null;\n      }\n\n      const { passwordHash, ...user } = result.Item as (User & { passwordHash: string });\n      \n      this.logger.debug('User found by ID', {\n        userId: user.userId,\n        email: user.email\n      });\n\n      return user;\n\n    } catch (error: any) {\n      this.logger.error('Failed to find user by ID', {\n        error: error.message,\n        userId\n      });\n      throw new ApiError(ErrorCode.INTERNAL_ERROR, 'Failed to lookup user');\n    }\n  }\n\n  /**\n   * Update user's last login timestamp\n   */\n  async updateLastLogin(userId: string): Promise<void> {\n    try {\n      const now = new Date().toISOString();\n      \n      const command = new UpdateCommand({\n        TableName: this.tableName,\n        Key: { userId },\n        UpdateExpression: 'SET lastLoginAt = :lastLogin, updatedAt = :updatedAt',\n        ExpressionAttributeValues: {\n          ':lastLogin': now,\n          ':updatedAt': now\n        }\n      });\n\n      await this.client.send(command);\n\n      this.logger.debug('Updated user last login', {\n        userId,\n        lastLoginAt: now\n      });\n\n    } catch (error: any) {\n      this.logger.error('Failed to update last login', {\n        error: error.message,\n        userId\n      });\n      // Don't throw error for last login update - it's not critical\n    }\n  }\n\n  /**\n   * Update user profile\n   */\n  async updateUser(userId: string, updates: Partial<Pick<User, 'name' | 'isActive'>>): Promise<User | null> {\n    try {\n      const now = new Date().toISOString();\n      \n      // Build update expression dynamically\n      const updateExpressions: string[] = ['updatedAt = :updatedAt'];\n      const expressionAttributeValues: Record<string, any> = {\n        ':updatedAt': now\n      };\n\n      if (updates.name !== undefined) {\n        updateExpressions.push('name = :name');\n        expressionAttributeValues[':name'] = updates.name;\n      }\n\n      if (updates.isActive !== undefined) {\n        updateExpressions.push('isActive = :isActive');\n        expressionAttributeValues[':isActive'] = updates.isActive;\n      }\n\n      const command = new UpdateCommand({\n        TableName: this.tableName,\n        Key: { userId },\n        UpdateExpression: `SET ${updateExpressions.join(', ')}`,\n        ExpressionAttributeValues: expressionAttributeValues,\n        ReturnValues: 'ALL_NEW'\n      });\n\n      const result = await this.client.send(command);\n      \n      if (!result.Attributes) {\n        return null;\n      }\n\n      const { passwordHash, ...user } = result.Attributes as (User & { passwordHash: string });\n\n      this.logger.info('User updated successfully', {\n        userId,\n        updates\n      });\n\n      return user;\n\n    } catch (error: any) {\n      this.logger.error('Failed to update user', {\n        error: error.message,\n        userId,\n        updates\n      });\n      throw new ApiError(ErrorCode.INTERNAL_ERROR, 'Failed to update user');\n    }\n  }\n}", "import validate from './validate.js';\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  //\n  // Note to future-self: No, you can't remove the `toLowerCase()` call.\n  // REF: https://github.com/uuidjs/uuid/pull/677#issuecomment-1757351351\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset);\n  // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n  return uuid;\n}\nexport default stringify;", "import crypto from 'node:crypto';\nconst rnds8Pool = new Uint8Array(256); // # of random values to pre-allocate\nlet poolPtr = rnds8Pool.length;\nexport default function rng() {\n  if (poolPtr > rnds8Pool.length - 16) {\n    crypto.randomFillSync(rnds8Pool);\n    poolPtr = 0;\n  }\n  return rnds8Pool.slice(poolPtr, poolPtr += 16);\n}", "import crypto from 'node:crypto';\nexport default {\n  randomUUID: crypto.randomUUID\n};", "import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    offset = offset || 0;\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n    return buf;\n  }\n  return unsafeStringify(rnds);\n}\nexport default v4;", "/*\n Copyright (c) 2012 Nevins Bartolomeo <nevins.bartolomeo@gmail.com>\n Copyright (c) 2012 Shane Girish <shaneGirish@gmail.com>\n Copyright (c) 2025 Daniel Wirtz <dcode@dcode.io>\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions\n are met:\n 1. Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n 2. Redistributions in binary form must reproduce the above copyright\n notice, this list of conditions and the following disclaimer in the\n documentation and/or other materials provided with the distribution.\n 3. The name of the author may not be used to endorse or promote products\n derived from this software without specific prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR\n IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\n OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.\n IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,\n INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT\n NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n// The Node.js crypto module is used as a fallback for the Web Crypto API. When\n// building for the browser, inclusion of the crypto module should be disabled,\n// which the package hints at in its package.json for bundlers that support it.\nimport nodeCrypto from \"crypto\";\n\n/**\n * The random implementation to use as a fallback.\n * @type {?function(number):!Array.<number>}\n * @inner\n */\nvar randomFallback = null;\n\n/**\n * Generates cryptographically secure random bytes.\n * @function\n * @param {number} len Bytes length\n * @returns {!Array.<number>} Random bytes\n * @throws {Error} If no random implementation is available\n * @inner\n */\nfunction randomBytes(len) {\n  // Web Crypto API. Globally available in the browser and in Node.js >=23.\n  try {\n    return crypto.getRandomValues(new Uint8Array(len));\n  } catch {}\n  // Node.js crypto module for non-browser environments.\n  try {\n    return nodeCrypto.randomBytes(len);\n  } catch {}\n  // Custom fallback specified with `setRandomFallback`.\n  if (!randomFallback) {\n    throw Error(\n      \"Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative\",\n    );\n  }\n  return randomFallback(len);\n}\n\n/**\n * Sets the pseudo random number generator to use as a fallback if neither node's `crypto` module nor the Web Crypto\n *  API is available. Please note: It is highly important that the PRNG used is cryptographically secure and that it\n *  is seeded properly!\n * @param {?function(number):!Array.<number>} random Function taking the number of bytes to generate as its\n *  sole argument, returning the corresponding array of cryptographically secure random byte values.\n * @see http://nodejs.org/api/crypto.html\n * @see http://www.w3.org/TR/WebCryptoAPI/\n */\nexport function setRandomFallback(random) {\n  randomFallback = random;\n}\n\n/**\n * Synchronously generates a salt.\n * @param {number=} rounds Number of rounds to use, defaults to 10 if omitted\n * @param {number=} seed_length Not supported.\n * @returns {string} Resulting salt\n * @throws {Error} If a random fallback is required but not set\n */\nexport function genSaltSync(rounds, seed_length) {\n  rounds = rounds || GENSALT_DEFAULT_LOG2_ROUNDS;\n  if (typeof rounds !== \"number\")\n    throw Error(\n      \"Illegal arguments: \" + typeof rounds + \", \" + typeof seed_length,\n    );\n  if (rounds < 4) rounds = 4;\n  else if (rounds > 31) rounds = 31;\n  var salt = [];\n  salt.push(\"$2b$\");\n  if (rounds < 10) salt.push(\"0\");\n  salt.push(rounds.toString());\n  salt.push(\"$\");\n  salt.push(base64_encode(randomBytes(BCRYPT_SALT_LEN), BCRYPT_SALT_LEN)); // May throw\n  return salt.join(\"\");\n}\n\n/**\n * Asynchronously generates a salt.\n * @param {(number|function(Error, string=))=} rounds Number of rounds to use, defaults to 10 if omitted\n * @param {(number|function(Error, string=))=} seed_length Not supported.\n * @param {function(Error, string=)=} callback Callback receiving the error, if any, and the resulting salt\n * @returns {!Promise} If `callback` has been omitted\n * @throws {Error} If `callback` is present but not a function\n */\nexport function genSalt(rounds, seed_length, callback) {\n  if (typeof seed_length === \"function\")\n    (callback = seed_length), (seed_length = undefined); // Not supported.\n  if (typeof rounds === \"function\") (callback = rounds), (rounds = undefined);\n  if (typeof rounds === \"undefined\") rounds = GENSALT_DEFAULT_LOG2_ROUNDS;\n  else if (typeof rounds !== \"number\")\n    throw Error(\"illegal arguments: \" + typeof rounds);\n\n  function _async(callback) {\n    nextTick(function () {\n      // Pretty thin, but salting is fast enough\n      try {\n        callback(null, genSaltSync(rounds));\n      } catch (err) {\n        callback(err);\n      }\n    });\n  }\n\n  if (callback) {\n    if (typeof callback !== \"function\")\n      throw Error(\"Illegal callback: \" + typeof callback);\n    _async(callback);\n  } else\n    return new Promise(function (resolve, reject) {\n      _async(function (err, res) {\n        if (err) {\n          reject(err);\n          return;\n        }\n        resolve(res);\n      });\n    });\n}\n\n/**\n * Synchronously generates a hash for the given password.\n * @param {string} password Password to hash\n * @param {(number|string)=} salt Salt length to generate or salt to use, default to 10\n * @returns {string} Resulting hash\n */\nexport function hashSync(password, salt) {\n  if (typeof salt === \"undefined\") salt = GENSALT_DEFAULT_LOG2_ROUNDS;\n  if (typeof salt === \"number\") salt = genSaltSync(salt);\n  if (typeof password !== \"string\" || typeof salt !== \"string\")\n    throw Error(\"Illegal arguments: \" + typeof password + \", \" + typeof salt);\n  return _hash(password, salt);\n}\n\n/**\n * Asynchronously generates a hash for the given password.\n * @param {string} password Password to hash\n * @param {number|string} salt Salt length to generate or salt to use\n * @param {function(Error, string=)=} callback Callback receiving the error, if any, and the resulting hash\n * @param {function(number)=} progressCallback Callback successively called with the percentage of rounds completed\n *  (0.0 - 1.0), maximally once per `MAX_EXECUTION_TIME = 100` ms.\n * @returns {!Promise} If `callback` has been omitted\n * @throws {Error} If `callback` is present but not a function\n */\nexport function hash(password, salt, callback, progressCallback) {\n  function _async(callback) {\n    if (typeof password === \"string\" && typeof salt === \"number\")\n      genSalt(salt, function (err, salt) {\n        _hash(password, salt, callback, progressCallback);\n      });\n    else if (typeof password === \"string\" && typeof salt === \"string\")\n      _hash(password, salt, callback, progressCallback);\n    else\n      nextTick(\n        callback.bind(\n          this,\n          Error(\"Illegal arguments: \" + typeof password + \", \" + typeof salt),\n        ),\n      );\n  }\n\n  if (callback) {\n    if (typeof callback !== \"function\")\n      throw Error(\"Illegal callback: \" + typeof callback);\n    _async(callback);\n  } else\n    return new Promise(function (resolve, reject) {\n      _async(function (err, res) {\n        if (err) {\n          reject(err);\n          return;\n        }\n        resolve(res);\n      });\n    });\n}\n\n/**\n * Compares two strings of the same length in constant time.\n * @param {string} known Must be of the correct length\n * @param {string} unknown Must be the same length as `known`\n * @returns {boolean}\n * @inner\n */\nfunction safeStringCompare(known, unknown) {\n  var diff = known.length ^ unknown.length;\n  for (var i = 0; i < known.length; ++i) {\n    diff |= known.charCodeAt(i) ^ unknown.charCodeAt(i);\n  }\n  return diff === 0;\n}\n\n/**\n * Synchronously tests a password against a hash.\n * @param {string} password Password to compare\n * @param {string} hash Hash to test against\n * @returns {boolean} true if matching, otherwise false\n * @throws {Error} If an argument is illegal\n */\nexport function compareSync(password, hash) {\n  if (typeof password !== \"string\" || typeof hash !== \"string\")\n    throw Error(\"Illegal arguments: \" + typeof password + \", \" + typeof hash);\n  if (hash.length !== 60) return false;\n  return safeStringCompare(\n    hashSync(password, hash.substring(0, hash.length - 31)),\n    hash,\n  );\n}\n\n/**\n * Asynchronously tests a password against a hash.\n * @param {string} password Password to compare\n * @param {string} hashValue Hash to test against\n * @param {function(Error, boolean)=} callback Callback receiving the error, if any, otherwise the result\n * @param {function(number)=} progressCallback Callback successively called with the percentage of rounds completed\n *  (0.0 - 1.0), maximally once per `MAX_EXECUTION_TIME = 100` ms.\n * @returns {!Promise} If `callback` has been omitted\n * @throws {Error} If `callback` is present but not a function\n */\nexport function compare(password, hashValue, callback, progressCallback) {\n  function _async(callback) {\n    if (typeof password !== \"string\" || typeof hashValue !== \"string\") {\n      nextTick(\n        callback.bind(\n          this,\n          Error(\n            \"Illegal arguments: \" + typeof password + \", \" + typeof hashValue,\n          ),\n        ),\n      );\n      return;\n    }\n    if (hashValue.length !== 60) {\n      nextTick(callback.bind(this, null, false));\n      return;\n    }\n    hash(\n      password,\n      hashValue.substring(0, 29),\n      function (err, comp) {\n        if (err) callback(err);\n        else callback(null, safeStringCompare(comp, hashValue));\n      },\n      progressCallback,\n    );\n  }\n\n  if (callback) {\n    if (typeof callback !== \"function\")\n      throw Error(\"Illegal callback: \" + typeof callback);\n    _async(callback);\n  } else\n    return new Promise(function (resolve, reject) {\n      _async(function (err, res) {\n        if (err) {\n          reject(err);\n          return;\n        }\n        resolve(res);\n      });\n    });\n}\n\n/**\n * Gets the number of rounds used to encrypt the specified hash.\n * @param {string} hash Hash to extract the used number of rounds from\n * @returns {number} Number of rounds used\n * @throws {Error} If `hash` is not a string\n */\nexport function getRounds(hash) {\n  if (typeof hash !== \"string\")\n    throw Error(\"Illegal arguments: \" + typeof hash);\n  return parseInt(hash.split(\"$\")[2], 10);\n}\n\n/**\n * Gets the salt portion from a hash. Does not validate the hash.\n * @param {string} hash Hash to extract the salt from\n * @returns {string} Extracted salt part\n * @throws {Error} If `hash` is not a string or otherwise invalid\n */\nexport function getSalt(hash) {\n  if (typeof hash !== \"string\")\n    throw Error(\"Illegal arguments: \" + typeof hash);\n  if (hash.length !== 60)\n    throw Error(\"Illegal hash length: \" + hash.length + \" != 60\");\n  return hash.substring(0, 29);\n}\n\n/**\n * Tests if a password will be truncated when hashed, that is its length is\n * greater than 72 bytes when converted to UTF-8.\n * @param {string} password The password to test\n * @returns {boolean} `true` if truncated, otherwise `false`\n */\nexport function truncates(password) {\n  if (typeof password !== \"string\")\n    throw Error(\"Illegal arguments: \" + typeof password);\n  return utf8Length(password) > 72;\n}\n\n/**\n * Continues with the callback on the next tick.\n * @function\n * @param {function(...[*])} callback Callback to execute\n * @inner\n */\nvar nextTick =\n  typeof process !== \"undefined\" &&\n  process &&\n  typeof process.nextTick === \"function\"\n    ? typeof setImmediate === \"function\"\n      ? setImmediate\n      : process.nextTick\n    : setTimeout;\n\n/** Calculates the byte length of a string encoded as UTF8. */\nfunction utf8Length(string) {\n  var len = 0,\n    c = 0;\n  for (var i = 0; i < string.length; ++i) {\n    c = string.charCodeAt(i);\n    if (c < 128) len += 1;\n    else if (c < 2048) len += 2;\n    else if (\n      (c & 0xfc00) === 0xd800 &&\n      (string.charCodeAt(i + 1) & 0xfc00) === 0xdc00\n    ) {\n      ++i;\n      len += 4;\n    } else len += 3;\n  }\n  return len;\n}\n\n/** Converts a string to an array of UTF8 bytes. */\nfunction utf8Array(string) {\n  var offset = 0,\n    c1,\n    c2;\n  var buffer = new Array(utf8Length(string));\n  for (var i = 0, k = string.length; i < k; ++i) {\n    c1 = string.charCodeAt(i);\n    if (c1 < 128) {\n      buffer[offset++] = c1;\n    } else if (c1 < 2048) {\n      buffer[offset++] = (c1 >> 6) | 192;\n      buffer[offset++] = (c1 & 63) | 128;\n    } else if (\n      (c1 & 0xfc00) === 0xd800 &&\n      ((c2 = string.charCodeAt(i + 1)) & 0xfc00) === 0xdc00\n    ) {\n      c1 = 0x10000 + ((c1 & 0x03ff) << 10) + (c2 & 0x03ff);\n      ++i;\n      buffer[offset++] = (c1 >> 18) | 240;\n      buffer[offset++] = ((c1 >> 12) & 63) | 128;\n      buffer[offset++] = ((c1 >> 6) & 63) | 128;\n      buffer[offset++] = (c1 & 63) | 128;\n    } else {\n      buffer[offset++] = (c1 >> 12) | 224;\n      buffer[offset++] = ((c1 >> 6) & 63) | 128;\n      buffer[offset++] = (c1 & 63) | 128;\n    }\n  }\n  return buffer;\n}\n\n// A base64 implementation for the bcrypt algorithm. This is partly non-standard.\n\n/**\n * bcrypt's own non-standard base64 dictionary.\n * @type {!Array.<string>}\n * @const\n * @inner\n **/\nvar BASE64_CODE =\n  \"./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\".split(\"\");\n\n/**\n * @type {!Array.<number>}\n * @const\n * @inner\n **/\nvar BASE64_INDEX = [\n  -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\n  -1, -1, -1, -1, -1, -1, -1, -1, 0, 1, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63,\n  -1, -1, -1, -1, -1, -1, -1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,\n  16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, -1, -1, -1, -1, -1, -1, 28,\n  29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47,\n  48, 49, 50, 51, 52, 53, -1, -1, -1, -1, -1,\n];\n\n/**\n * Encodes a byte array to base64 with up to len bytes of input.\n * @param {!Array.<number>} b Byte array\n * @param {number} len Maximum input length\n * @returns {string}\n * @inner\n */\nfunction base64_encode(b, len) {\n  var off = 0,\n    rs = [],\n    c1,\n    c2;\n  if (len <= 0 || len > b.length) throw Error(\"Illegal len: \" + len);\n  while (off < len) {\n    c1 = b[off++] & 0xff;\n    rs.push(BASE64_CODE[(c1 >> 2) & 0x3f]);\n    c1 = (c1 & 0x03) << 4;\n    if (off >= len) {\n      rs.push(BASE64_CODE[c1 & 0x3f]);\n      break;\n    }\n    c2 = b[off++] & 0xff;\n    c1 |= (c2 >> 4) & 0x0f;\n    rs.push(BASE64_CODE[c1 & 0x3f]);\n    c1 = (c2 & 0x0f) << 2;\n    if (off >= len) {\n      rs.push(BASE64_CODE[c1 & 0x3f]);\n      break;\n    }\n    c2 = b[off++] & 0xff;\n    c1 |= (c2 >> 6) & 0x03;\n    rs.push(BASE64_CODE[c1 & 0x3f]);\n    rs.push(BASE64_CODE[c2 & 0x3f]);\n  }\n  return rs.join(\"\");\n}\n\n/**\n * Decodes a base64 encoded string to up to len bytes of output.\n * @param {string} s String to decode\n * @param {number} len Maximum output length\n * @returns {!Array.<number>}\n * @inner\n */\nfunction base64_decode(s, len) {\n  var off = 0,\n    slen = s.length,\n    olen = 0,\n    rs = [],\n    c1,\n    c2,\n    c3,\n    c4,\n    o,\n    code;\n  if (len <= 0) throw Error(\"Illegal len: \" + len);\n  while (off < slen - 1 && olen < len) {\n    code = s.charCodeAt(off++);\n    c1 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\n    code = s.charCodeAt(off++);\n    c2 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\n    if (c1 == -1 || c2 == -1) break;\n    o = (c1 << 2) >>> 0;\n    o |= (c2 & 0x30) >> 4;\n    rs.push(String.fromCharCode(o));\n    if (++olen >= len || off >= slen) break;\n    code = s.charCodeAt(off++);\n    c3 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\n    if (c3 == -1) break;\n    o = ((c2 & 0x0f) << 4) >>> 0;\n    o |= (c3 & 0x3c) >> 2;\n    rs.push(String.fromCharCode(o));\n    if (++olen >= len || off >= slen) break;\n    code = s.charCodeAt(off++);\n    c4 = code < BASE64_INDEX.length ? BASE64_INDEX[code] : -1;\n    o = ((c3 & 0x03) << 6) >>> 0;\n    o |= c4;\n    rs.push(String.fromCharCode(o));\n    ++olen;\n  }\n  var res = [];\n  for (off = 0; off < olen; off++) res.push(rs[off].charCodeAt(0));\n  return res;\n}\n\n/**\n * @type {number}\n * @const\n * @inner\n */\nvar BCRYPT_SALT_LEN = 16;\n\n/**\n * @type {number}\n * @const\n * @inner\n */\nvar GENSALT_DEFAULT_LOG2_ROUNDS = 10;\n\n/**\n * @type {number}\n * @const\n * @inner\n */\nvar BLOWFISH_NUM_ROUNDS = 16;\n\n/**\n * @type {number}\n * @const\n * @inner\n */\nvar MAX_EXECUTION_TIME = 100;\n\n/**\n * @type {Array.<number>}\n * @const\n * @inner\n */\nvar P_ORIG = [\n  0x243f6a88, 0x85a308d3, 0x13198a2e, 0x03707344, 0xa4093822, 0x299f31d0,\n  0x082efa98, 0xec4e6c89, 0x452821e6, 0x38d01377, 0xbe5466cf, 0x34e90c6c,\n  0xc0ac29b7, 0xc97c50dd, 0x3f84d5b5, 0xb5470917, 0x9216d5d9, 0x8979fb1b,\n];\n\n/**\n * @type {Array.<number>}\n * @const\n * @inner\n */\nvar S_ORIG = [\n  0xd1310ba6, 0x98dfb5ac, 0x2ffd72db, 0xd01adfb7, 0xb8e1afed, 0x6a267e96,\n  0xba7c9045, 0xf12c7f99, 0x24a19947, 0xb3916cf7, 0x0801f2e2, 0x858efc16,\n  0x636920d8, 0x71574e69, 0xa458fea3, 0xf4933d7e, 0x0d95748f, 0x728eb658,\n  0x718bcd58, 0x82154aee, 0x7b54a41d, 0xc25a59b5, 0x9c30d539, 0x2af26013,\n  0xc5d1b023, 0x286085f0, 0xca417918, 0xb8db38ef, 0x8e79dcb0, 0x603a180e,\n  0x6c9e0e8b, 0xb01e8a3e, 0xd71577c1, 0xbd314b27, 0x78af2fda, 0x55605c60,\n  0xe65525f3, 0xaa55ab94, 0x57489862, 0x63e81440, 0x55ca396a, 0x2aab10b6,\n  0xb4cc5c34, 0x1141e8ce, 0xa15486af, 0x7c72e993, 0xb3ee1411, 0x636fbc2a,\n  0x2ba9c55d, 0x741831f6, 0xce5c3e16, 0x9b87931e, 0xafd6ba33, 0x6c24cf5c,\n  0x7a325381, 0x28958677, 0x3b8f4898, 0x6b4bb9af, 0xc4bfe81b, 0x66282193,\n  0x61d809cc, 0xfb21a991, 0x487cac60, 0x5dec8032, 0xef845d5d, 0xe98575b1,\n  0xdc262302, 0xeb651b88, 0x23893e81, 0xd396acc5, 0x0f6d6ff3, 0x83f44239,\n  0x2e0b4482, 0xa4842004, 0x69c8f04a, 0x9e1f9b5e, 0x21c66842, 0xf6e96c9a,\n  0x670c9c61, 0xabd388f0, 0x6a51a0d2, 0xd8542f68, 0x960fa728, 0xab5133a3,\n  0x6eef0b6c, 0x137a3be4, 0xba3bf050, 0x7efb2a98, 0xa1f1651d, 0x39af0176,\n  0x66ca593e, 0x82430e88, 0x8cee8619, 0x456f9fb4, 0x7d84a5c3, 0x3b8b5ebe,\n  0xe06f75d8, 0x85c12073, 0x401a449f, 0x56c16aa6, 0x4ed3aa62, 0x363f7706,\n  0x1bfedf72, 0x429b023d, 0x37d0d724, 0xd00a1248, 0xdb0fead3, 0x49f1c09b,\n  0x075372c9, 0x80991b7b, 0x25d479d8, 0xf6e8def7, 0xe3fe501a, 0xb6794c3b,\n  0x976ce0bd, 0x04c006ba, 0xc1a94fb6, 0x409f60c4, 0x5e5c9ec2, 0x196a2463,\n  0x68fb6faf, 0x3e6c53b5, 0x1339b2eb, 0x3b52ec6f, 0x6dfc511f, 0x9b30952c,\n  0xcc814544, 0xaf5ebd09, 0xbee3d004, 0xde334afd, 0x660f2807, 0x192e4bb3,\n  0xc0cba857, 0x45c8740f, 0xd20b5f39, 0xb9d3fbdb, 0x5579c0bd, 0x1a60320a,\n  0xd6a100c6, 0x402c7279, 0x679f25fe, 0xfb1fa3cc, 0x8ea5e9f8, 0xdb3222f8,\n  0x3c7516df, 0xfd616b15, 0x2f501ec8, 0xad0552ab, 0x323db5fa, 0xfd238760,\n  0x53317b48, 0x3e00df82, 0x9e5c57bb, 0xca6f8ca0, 0x1a87562e, 0xdf1769db,\n  0xd542a8f6, 0x287effc3, 0xac6732c6, 0x8c4f5573, 0x695b27b0, 0xbbca58c8,\n  0xe1ffa35d, 0xb8f011a0, 0x10fa3d98, 0xfd2183b8, 0x4afcb56c, 0x2dd1d35b,\n  0x9a53e479, 0xb6f84565, 0xd28e49bc, 0x4bfb9790, 0xe1ddf2da, 0xa4cb7e33,\n  0x62fb1341, 0xcee4c6e8, 0xef20cada, 0x36774c01, 0xd07e9efe, 0x2bf11fb4,\n  0x95dbda4d, 0xae909198, 0xeaad8e71, 0x6b93d5a0, 0xd08ed1d0, 0xafc725e0,\n  0x8e3c5b2f, 0x8e7594b7, 0x8ff6e2fb, 0xf2122b64, 0x8888b812, 0x900df01c,\n  0x4fad5ea0, 0x688fc31c, 0xd1cff191, 0xb3a8c1ad, 0x2f2f2218, 0xbe0e1777,\n  0xea752dfe, 0x8b021fa1, 0xe5a0cc0f, 0xb56f74e8, 0x18acf3d6, 0xce89e299,\n  0xb4a84fe0, 0xfd13e0b7, 0x7cc43b81, 0xd2ada8d9, 0x165fa266, 0x80957705,\n  0x93cc7314, 0x211a1477, 0xe6ad2065, 0x77b5fa86, 0xc75442f5, 0xfb9d35cf,\n  0xebcdaf0c, 0x7b3e89a0, 0xd6411bd3, 0xae1e7e49, 0x00250e2d, 0x2071b35e,\n  0x226800bb, 0x57b8e0af, 0x2464369b, 0xf009b91e, 0x5563911d, 0x59dfa6aa,\n  0x78c14389, 0xd95a537f, 0x207d5ba2, 0x02e5b9c5, 0x83260376, 0x6295cfa9,\n  0x11c81968, 0x4e734a41, 0xb3472dca, 0x7b14a94a, 0x1b510052, 0x9a532915,\n  0xd60f573f, 0xbc9bc6e4, 0x2b60a476, 0x81e67400, 0x08ba6fb5, 0x571be91f,\n  0xf296ec6b, 0x2a0dd915, 0xb6636521, 0xe7b9f9b6, 0xff34052e, 0xc5855664,\n  0x53b02d5d, 0xa99f8fa1, 0x08ba4799, 0x6e85076a, 0x4b7a70e9, 0xb5b32944,\n  0xdb75092e, 0xc4192623, 0xad6ea6b0, 0x49a7df7d, 0x9cee60b8, 0x8fedb266,\n  0xecaa8c71, 0x699a17ff, 0x5664526c, 0xc2b19ee1, 0x193602a5, 0x75094c29,\n  0xa0591340, 0xe4183a3e, 0x3f54989a, 0x5b429d65, 0x6b8fe4d6, 0x99f73fd6,\n  0xa1d29c07, 0xefe830f5, 0x4d2d38e6, 0xf0255dc1, 0x4cdd2086, 0x8470eb26,\n  0x6382e9c6, 0x021ecc5e, 0x09686b3f, 0x3ebaefc9, 0x3c971814, 0x6b6a70a1,\n  0x687f3584, 0x52a0e286, 0xb79c5305, 0xaa500737, 0x3e07841c, 0x7fdeae5c,\n  0x8e7d44ec, 0x5716f2b8, 0xb03ada37, 0xf0500c0d, 0xf01c1f04, 0x0200b3ff,\n  0xae0cf51a, 0x3cb574b2, 0x25837a58, 0xdc0921bd, 0xd19113f9, 0x7ca92ff6,\n  0x94324773, 0x22f54701, 0x3ae5e581, 0x37c2dadc, 0xc8b57634, 0x9af3dda7,\n  0xa9446146, 0x0fd0030e, 0xecc8c73e, 0xa4751e41, 0xe238cd99, 0x3bea0e2f,\n  0x3280bba1, 0x183eb331, 0x4e548b38, 0x4f6db908, 0x6f420d03, 0xf60a04bf,\n  0x2cb81290, 0x24977c79, 0x5679b072, 0xbcaf89af, 0xde9a771f, 0xd9930810,\n  0xb38bae12, 0xdccf3f2e, 0x5512721f, 0x2e6b7124, 0x501adde6, 0x9f84cd87,\n  0x7a584718, 0x7408da17, 0xbc9f9abc, 0xe94b7d8c, 0xec7aec3a, 0xdb851dfa,\n  0x63094366, 0xc464c3d2, 0xef1c1847, 0x3215d908, 0xdd433b37, 0x24c2ba16,\n  0x12a14d43, 0x2a65c451, 0x50940002, 0x133ae4dd, 0x71dff89e, 0x10314e55,\n  0x81ac77d6, 0x5f11199b, 0x043556f1, 0xd7a3c76b, 0x3c11183b, 0x5924a509,\n  0xf28fe6ed, 0x97f1fbfa, 0x9ebabf2c, 0x1e153c6e, 0x86e34570, 0xeae96fb1,\n  0x860e5e0a, 0x5a3e2ab3, 0x771fe71c, 0x4e3d06fa, 0x2965dcb9, 0x99e71d0f,\n  0x803e89d6, 0x5266c825, 0x2e4cc978, 0x9c10b36a, 0xc6150eba, 0x94e2ea78,\n  0xa5fc3c53, 0x1e0a2df4, 0xf2f74ea7, 0x361d2b3d, 0x1939260f, 0x19c27960,\n  0x5223a708, 0xf71312b6, 0xebadfe6e, 0xeac31f66, 0xe3bc4595, 0xa67bc883,\n  0xb17f37d1, 0x018cff28, 0xc332ddef, 0xbe6c5aa5, 0x65582185, 0x68ab9802,\n  0xeecea50f, 0xdb2f953b, 0x2aef7dad, 0x5b6e2f84, 0x1521b628, 0x29076170,\n  0xecdd4775, 0x619f1510, 0x13cca830, 0xeb61bd96, 0x0334fe1e, 0xaa0363cf,\n  0xb5735c90, 0x4c70a239, 0xd59e9e0b, 0xcbaade14, 0xeecc86bc, 0x60622ca7,\n  0x9cab5cab, 0xb2f3846e, 0x648b1eaf, 0x19bdf0ca, 0xa02369b9, 0x655abb50,\n  0x40685a32, 0x3c2ab4b3, 0x319ee9d5, 0xc021b8f7, 0x9b540b19, 0x875fa099,\n  0x95f7997e, 0x623d7da8, 0xf837889a, 0x97e32d77, 0x11ed935f, 0x16681281,\n  0x0e358829, 0xc7e61fd6, 0x96dedfa1, 0x7858ba99, 0x57f584a5, 0x1b227263,\n  0x9b83c3ff, 0x1ac24696, 0xcdb30aeb, 0x532e3054, 0x8fd948e4, 0x6dbc3128,\n  0x58ebf2ef, 0x34c6ffea, 0xfe28ed61, 0xee7c3c73, 0x5d4a14d9, 0xe864b7e3,\n  0x42105d14, 0x203e13e0, 0x45eee2b6, 0xa3aaabea, 0xdb6c4f15, 0xfacb4fd0,\n  0xc742f442, 0xef6abbb5, 0x654f3b1d, 0x41cd2105, 0xd81e799e, 0x86854dc7,\n  0xe44b476a, 0x3d816250, 0xcf62a1f2, 0x5b8d2646, 0xfc8883a0, 0xc1c7b6a3,\n  0x7f1524c3, 0x69cb7492, 0x47848a0b, 0x5692b285, 0x095bbf00, 0xad19489d,\n  0x1462b174, 0x23820e00, 0x58428d2a, 0x0c55f5ea, 0x1dadf43e, 0x233f7061,\n  0x3372f092, 0x8d937e41, 0xd65fecf1, 0x6c223bdb, 0x7cde3759, 0xcbee7460,\n  0x4085f2a7, 0xce77326e, 0xa6078084, 0x19f8509e, 0xe8efd855, 0x61d99735,\n  0xa969a7aa, 0xc50c06c2, 0x5a04abfc, 0x800bcadc, 0x9e447a2e, 0xc3453484,\n  0xfdd56705, 0x0e1e9ec9, 0xdb73dbd3, 0x105588cd, 0x675fda79, 0xe3674340,\n  0xc5c43465, 0x713e38d8, 0x3d28f89e, 0xf16dff20, 0x153e21e7, 0x8fb03d4a,\n  0xe6e39f2b, 0xdb83adf7, 0xe93d5a68, 0x948140f7, 0xf64c261c, 0x94692934,\n  0x411520f7, 0x7602d4f7, 0xbcf46b2e, 0xd4a20068, 0xd4082471, 0x3320f46a,\n  0x43b7d4b7, 0x500061af, 0x1e39f62e, 0x97244546, 0x14214f74, 0xbf8b8840,\n  0x4d95fc1d, 0x96b591af, 0x70f4ddd3, 0x66a02f45, 0xbfbc09ec, 0x03bd9785,\n  0x7fac6dd0, 0x31cb8504, 0x96eb27b3, 0x55fd3941, 0xda2547e6, 0xabca0a9a,\n  0x28507825, 0x530429f4, 0x0a2c86da, 0xe9b66dfb, 0x68dc1462, 0xd7486900,\n  0x680ec0a4, 0x27a18dee, 0x4f3ffea2, 0xe887ad8c, 0xb58ce006, 0x7af4d6b6,\n  0xaace1e7c, 0xd3375fec, 0xce78a399, 0x406b2a42, 0x20fe9e35, 0xd9f385b9,\n  0xee39d7ab, 0x3b124e8b, 0x1dc9faf7, 0x4b6d1856, 0x26a36631, 0xeae397b2,\n  0x3a6efa74, 0xdd5b4332, 0x6841e7f7, 0xca7820fb, 0xfb0af54e, 0xd8feb397,\n  0x454056ac, 0xba489527, 0x55533a3a, 0x20838d87, 0xfe6ba9b7, 0xd096954b,\n  0x55a867bc, 0xa1159a58, 0xcca92963, 0x99e1db33, 0xa62a4a56, 0x3f3125f9,\n  0x5ef47e1c, 0x9029317c, 0xfdf8e802, 0x04272f70, 0x80bb155c, 0x05282ce3,\n  0x95c11548, 0xe4c66d22, 0x48c1133f, 0xc70f86dc, 0x07f9c9ee, 0x41041f0f,\n  0x404779a4, 0x5d886e17, 0x325f51eb, 0xd59bc0d1, 0xf2bcc18f, 0x41113564,\n  0x257b7834, 0x602a9c60, 0xdff8e8a3, 0x1f636c1b, 0x0e12b4c2, 0x02e1329e,\n  0xaf664fd1, 0xcad18115, 0x6b2395e0, 0x333e92e1, 0x3b240b62, 0xeebeb922,\n  0x85b2a20e, 0xe6ba0d99, 0xde720c8c, 0x2da2f728, 0xd0127845, 0x95b794fd,\n  0x647d0862, 0xe7ccf5f0, 0x5449a36f, 0x877d48fa, 0xc39dfd27, 0xf33e8d1e,\n  0x0a476341, 0x992eff74, 0x3a6f6eab, 0xf4f8fd37, 0xa812dc60, 0xa1ebddf8,\n  0x991be14c, 0xdb6e6b0d, 0xc67b5510, 0x6d672c37, 0x2765d43b, 0xdcd0e804,\n  0xf1290dc7, 0xcc00ffa3, 0xb5390f92, 0x690fed0b, 0x667b9ffb, 0xcedb7d9c,\n  0xa091cf0b, 0xd9155ea3, 0xbb132f88, 0x515bad24, 0x7b9479bf, 0x763bd6eb,\n  0x37392eb3, 0xcc115979, 0x8026e297, 0xf42e312d, 0x6842ada7, 0xc66a2b3b,\n  0x12754ccc, 0x782ef11c, 0x6a124237, 0xb79251e7, 0x06a1bbe6, 0x4bfb6350,\n  0x1a6b1018, 0x11caedfa, 0x3d25bdd8, 0xe2e1c3c9, 0x44421659, 0x0a121386,\n  0xd90cec6e, 0xd5abea2a, 0x64af674e, 0xda86a85f, 0xbebfe988, 0x64e4c3fe,\n  0x9dbc8057, 0xf0f7c086, 0x60787bf8, 0x6003604d, 0xd1fd8346, 0xf6381fb0,\n  0x7745ae04, 0xd736fccc, 0x83426b33, 0xf01eab71, 0xb0804187, 0x3c005e5f,\n  0x77a057be, 0xbde8ae24, 0x55464299, 0xbf582e61, 0x4e58f48f, 0xf2ddfda2,\n  0xf474ef38, 0x8789bdc2, 0x5366f9c3, 0xc8b38e74, 0xb475f255, 0x46fcd9b9,\n  0x7aeb2661, 0x8b1ddf84, 0x846a0e79, 0x915f95e2, 0x466e598e, 0x20b45770,\n  0x8cd55591, 0xc902de4c, 0xb90bace1, 0xbb8205d0, 0x11a86248, 0x7574a99e,\n  0xb77f19b6, 0xe0a9dc09, 0x662d09a1, 0xc4324633, 0xe85a1f02, 0x09f0be8c,\n  0x4a99a025, 0x1d6efe10, 0x1ab93d1d, 0x0ba5a4df, 0xa186f20f, 0x2868f169,\n  0xdcb7da83, 0x573906fe, 0xa1e2ce9b, 0x4fcd7f52, 0x50115e01, 0xa70683fa,\n  0xa002b5c4, 0x0de6d027, 0x9af88c27, 0x773f8641, 0xc3604c06, 0x61a806b5,\n  0xf0177a28, 0xc0f586e0, 0x006058aa, 0x30dc7d62, 0x11e69ed7, 0x2338ea63,\n  0x53c2dd94, 0xc2c21634, 0xbbcbee56, 0x90bcb6de, 0xebfc7da1, 0xce591d76,\n  0x6f05e409, 0x4b7c0188, 0x39720a3d, 0x7c927c24, 0x86e3725f, 0x724d9db9,\n  0x1ac15bb4, 0xd39eb8fc, 0xed545578, 0x08fca5b5, 0xd83d7cd3, 0x4dad0fc4,\n  0x1e50ef5e, 0xb161e6f8, 0xa28514d9, 0x6c51133c, 0x6fd5c7e7, 0x56e14ec4,\n  0x362abfce, 0xddc6c837, 0xd79a3234, 0x92638212, 0x670efa8e, 0x406000e0,\n  0x3a39ce37, 0xd3faf5cf, 0xabc27737, 0x5ac52d1b, 0x5cb0679e, 0x4fa33742,\n  0xd3822740, 0x99bc9bbe, 0xd5118e9d, 0xbf0f7315, 0xd62d1c7e, 0xc700c47b,\n  0xb78c1b6b, 0x21a19045, 0xb26eb1be, 0x6a366eb4, 0x5748ab2f, 0xbc946e79,\n  0xc6a376d2, 0x6549c2c8, 0x530ff8ee, 0x468dde7d, 0xd5730a1d, 0x4cd04dc6,\n  0x2939bbdb, 0xa9ba4650, 0xac9526e8, 0xbe5ee304, 0xa1fad5f0, 0x6a2d519a,\n  0x63ef8ce2, 0x9a86ee22, 0xc089c2b8, 0x43242ef6, 0xa51e03aa, 0x9cf2d0a4,\n  0x83c061ba, 0x9be96a4d, 0x8fe51550, 0xba645bd6, 0x2826a2f9, 0xa73a3ae1,\n  0x4ba99586, 0xef5562e9, 0xc72fefd3, 0xf752f7da, 0x3f046f69, 0x77fa0a59,\n  0x80e4a915, 0x87b08601, 0x9b09e6ad, 0x3b3ee593, 0xe990fd5a, 0x9e34d797,\n  0x2cf0b7d9, 0x022b8b51, 0x96d5ac3a, 0x017da67d, 0xd1cf3ed6, 0x7c7d2d28,\n  0x1f9f25cf, 0xadf2b89b, 0x5ad6b472, 0x5a88f54c, 0xe029ac71, 0xe019a5e6,\n  0x47b0acfd, 0xed93fa9b, 0xe8d3c48d, 0x283b57cc, 0xf8d56629, 0x79132e28,\n  0x785f0191, 0xed756055, 0xf7960e44, 0xe3d35e8c, 0x15056dd4, 0x88f46dba,\n  0x03a16125, 0x0564f0bd, 0xc3eb9e15, 0x3c9057a2, 0x97271aec, 0xa93a072a,\n  0x1b3f6d9b, 0x1e6321f5, 0xf59c66fb, 0x26dcf319, 0x7533d928, 0xb155fdf5,\n  0x03563482, 0x8aba3cbb, 0x28517711, 0xc20ad9f8, 0xabcc5167, 0xccad925f,\n  0x4de81751, 0x3830dc8e, 0x379d5862, 0x9320f991, 0xea7a90c2, 0xfb3e7bce,\n  0x5121ce64, 0x774fbe32, 0xa8b6e37e, 0xc3293d46, 0x48de5369, 0x6413e680,\n  0xa2ae0810, 0xdd6db224, 0x69852dfd, 0x09072166, 0xb39a460a, 0x6445c0dd,\n  0x586cdecf, 0x1c20c8ae, 0x5bbef7dd, 0x1b588d40, 0xccd2017f, 0x6bb4e3bb,\n  0xdda26a7e, 0x3a59ff45, 0x3e350a44, 0xbcb4cdd5, 0x72eacea8, 0xfa6484bb,\n  0x8d6612ae, 0xbf3c6f47, 0xd29be463, 0x542f5d9e, 0xaec2771b, 0xf64e6370,\n  0x740e0d8d, 0xe75b1357, 0xf8721671, 0xaf537d5d, 0x4040cb08, 0x4eb4e2cc,\n  0x34d2466a, 0x0115af84, 0xe1b00428, 0x95983a1d, 0x06b89fb4, 0xce6ea048,\n  0x6f3f3b82, 0x3520ab82, 0x011a1d4b, 0x277227f8, 0x611560b1, 0xe7933fdc,\n  0xbb3a792b, 0x344525bd, 0xa08839e1, 0x51ce794b, 0x2f32c9b7, 0xa01fbac9,\n  0xe01cc87e, 0xbcc7d1f6, 0xcf0111c3, 0xa1e8aac7, 0x1a908749, 0xd44fbd9a,\n  0xd0dadecb, 0xd50ada38, 0x0339c32a, 0xc6913667, 0x8df9317c, 0xe0b12b4f,\n  0xf79e59b7, 0x43f5bb3a, 0xf2d519ff, 0x27d9459c, 0xbf97222c, 0x15e6fc2a,\n  0x0f91fc71, 0x9b941525, 0xfae59361, 0xceb69ceb, 0xc2a86459, 0x12baa8d1,\n  0xb6c1075e, 0xe3056a0c, 0x10d25065, 0xcb03a442, 0xe0ec6e0e, 0x1698db3b,\n  0x4c98a0be, 0x3278e964, 0x9f1f9532, 0xe0d392df, 0xd3a0342b, 0x8971f21e,\n  0x1b0a7441, 0x4ba3348c, 0xc5be7120, 0xc37632d8, 0xdf359f8d, 0x9b992f2e,\n  0xe60b6f47, 0x0fe3f11d, 0xe54cda54, 0x1edad891, 0xce6279cf, 0xcd3e7e6f,\n  0x1618b166, 0xfd2c1d05, 0x848fd2c5, 0xf6fb2299, 0xf523f357, 0xa6327623,\n  0x93a83531, 0x56cccd02, 0xacf08162, 0x5a75ebb5, 0x6e163697, 0x88d273cc,\n  0xde966292, 0x81b949d0, 0x4c50901b, 0x71c65614, 0xe6c6c7bd, 0x327a140a,\n  0x45e1d006, 0xc3f27b9a, 0xc9aa53fd, 0x62a80f00, 0xbb25bfe2, 0x35bdd2f6,\n  0x71126905, 0xb2040222, 0xb6cbcf7c, 0xcd769c2b, 0x53113ec0, 0x1640e3d3,\n  0x38abbd60, 0x2547adf0, 0xba38209c, 0xf746ce76, 0x77afa1c5, 0x20756060,\n  0x85cbfe4e, 0x8ae88dd8, 0x7aaaf9b0, 0x4cf9aa7e, 0x1948c25c, 0x02fb8a8c,\n  0x01c36ae4, 0xd6ebe1f9, 0x90d4f869, 0xa65cdea0, 0x3f09252d, 0xc208e69f,\n  0xb74e6132, 0xce77e25b, 0x578fdfe3, 0x3ac372e6,\n];\n\n/**\n * @type {Array.<number>}\n * @const\n * @inner\n */\nvar C_ORIG = [\n  0x4f727068, 0x65616e42, 0x65686f6c, 0x64657253, 0x63727944, 0x6f756274,\n];\n\n/**\n * @param {Array.<number>} lr\n * @param {number} off\n * @param {Array.<number>} P\n * @param {Array.<number>} S\n * @returns {Array.<number>}\n * @inner\n */\nfunction _encipher(lr, off, P, S) {\n  // This is our bottleneck: 1714/1905 ticks / 90% - see profile.txt\n  var n,\n    l = lr[off],\n    r = lr[off + 1];\n\n  l ^= P[0];\n\n  /*\n    for (var i=0, k=BLOWFISH_NUM_ROUNDS-2; i<=k;)\n        // Feistel substitution on left word\n        n  = S[l >>> 24],\n        n += S[0x100 | ((l >> 16) & 0xff)],\n        n ^= S[0x200 | ((l >> 8) & 0xff)],\n        n += S[0x300 | (l & 0xff)],\n        r ^= n ^ P[++i],\n        // Feistel substitution on right word\n        n  = S[r >>> 24],\n        n += S[0x100 | ((r >> 16) & 0xff)],\n        n ^= S[0x200 | ((r >> 8) & 0xff)],\n        n += S[0x300 | (r & 0xff)],\n        l ^= n ^ P[++i];\n    */\n\n  //The following is an unrolled version of the above loop.\n  //Iteration 0\n  n = S[l >>> 24];\n  n += S[0x100 | ((l >> 16) & 0xff)];\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\n  n += S[0x300 | (l & 0xff)];\n  r ^= n ^ P[1];\n  n = S[r >>> 24];\n  n += S[0x100 | ((r >> 16) & 0xff)];\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\n  n += S[0x300 | (r & 0xff)];\n  l ^= n ^ P[2];\n  //Iteration 1\n  n = S[l >>> 24];\n  n += S[0x100 | ((l >> 16) & 0xff)];\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\n  n += S[0x300 | (l & 0xff)];\n  r ^= n ^ P[3];\n  n = S[r >>> 24];\n  n += S[0x100 | ((r >> 16) & 0xff)];\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\n  n += S[0x300 | (r & 0xff)];\n  l ^= n ^ P[4];\n  //Iteration 2\n  n = S[l >>> 24];\n  n += S[0x100 | ((l >> 16) & 0xff)];\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\n  n += S[0x300 | (l & 0xff)];\n  r ^= n ^ P[5];\n  n = S[r >>> 24];\n  n += S[0x100 | ((r >> 16) & 0xff)];\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\n  n += S[0x300 | (r & 0xff)];\n  l ^= n ^ P[6];\n  //Iteration 3\n  n = S[l >>> 24];\n  n += S[0x100 | ((l >> 16) & 0xff)];\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\n  n += S[0x300 | (l & 0xff)];\n  r ^= n ^ P[7];\n  n = S[r >>> 24];\n  n += S[0x100 | ((r >> 16) & 0xff)];\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\n  n += S[0x300 | (r & 0xff)];\n  l ^= n ^ P[8];\n  //Iteration 4\n  n = S[l >>> 24];\n  n += S[0x100 | ((l >> 16) & 0xff)];\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\n  n += S[0x300 | (l & 0xff)];\n  r ^= n ^ P[9];\n  n = S[r >>> 24];\n  n += S[0x100 | ((r >> 16) & 0xff)];\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\n  n += S[0x300 | (r & 0xff)];\n  l ^= n ^ P[10];\n  //Iteration 5\n  n = S[l >>> 24];\n  n += S[0x100 | ((l >> 16) & 0xff)];\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\n  n += S[0x300 | (l & 0xff)];\n  r ^= n ^ P[11];\n  n = S[r >>> 24];\n  n += S[0x100 | ((r >> 16) & 0xff)];\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\n  n += S[0x300 | (r & 0xff)];\n  l ^= n ^ P[12];\n  //Iteration 6\n  n = S[l >>> 24];\n  n += S[0x100 | ((l >> 16) & 0xff)];\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\n  n += S[0x300 | (l & 0xff)];\n  r ^= n ^ P[13];\n  n = S[r >>> 24];\n  n += S[0x100 | ((r >> 16) & 0xff)];\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\n  n += S[0x300 | (r & 0xff)];\n  l ^= n ^ P[14];\n  //Iteration 7\n  n = S[l >>> 24];\n  n += S[0x100 | ((l >> 16) & 0xff)];\n  n ^= S[0x200 | ((l >> 8) & 0xff)];\n  n += S[0x300 | (l & 0xff)];\n  r ^= n ^ P[15];\n  n = S[r >>> 24];\n  n += S[0x100 | ((r >> 16) & 0xff)];\n  n ^= S[0x200 | ((r >> 8) & 0xff)];\n  n += S[0x300 | (r & 0xff)];\n  l ^= n ^ P[16];\n\n  lr[off] = r ^ P[BLOWFISH_NUM_ROUNDS + 1];\n  lr[off + 1] = l;\n  return lr;\n}\n\n/**\n * @param {Array.<number>} data\n * @param {number} offp\n * @returns {{key: number, offp: number}}\n * @inner\n */\nfunction _streamtoword(data, offp) {\n  for (var i = 0, word = 0; i < 4; ++i)\n    (word = (word << 8) | (data[offp] & 0xff)),\n      (offp = (offp + 1) % data.length);\n  return { key: word, offp: offp };\n}\n\n/**\n * @param {Array.<number>} key\n * @param {Array.<number>} P\n * @param {Array.<number>} S\n * @inner\n */\nfunction _key(key, P, S) {\n  var offset = 0,\n    lr = [0, 0],\n    plen = P.length,\n    slen = S.length,\n    sw;\n  for (var i = 0; i < plen; i++)\n    (sw = _streamtoword(key, offset)),\n      (offset = sw.offp),\n      (P[i] = P[i] ^ sw.key);\n  for (i = 0; i < plen; i += 2)\n    (lr = _encipher(lr, 0, P, S)), (P[i] = lr[0]), (P[i + 1] = lr[1]);\n  for (i = 0; i < slen; i += 2)\n    (lr = _encipher(lr, 0, P, S)), (S[i] = lr[0]), (S[i + 1] = lr[1]);\n}\n\n/**\n * Expensive key schedule Blowfish.\n * @param {Array.<number>} data\n * @param {Array.<number>} key\n * @param {Array.<number>} P\n * @param {Array.<number>} S\n * @inner\n */\nfunction _ekskey(data, key, P, S) {\n  var offp = 0,\n    lr = [0, 0],\n    plen = P.length,\n    slen = S.length,\n    sw;\n  for (var i = 0; i < plen; i++)\n    (sw = _streamtoword(key, offp)), (offp = sw.offp), (P[i] = P[i] ^ sw.key);\n  offp = 0;\n  for (i = 0; i < plen; i += 2)\n    (sw = _streamtoword(data, offp)),\n      (offp = sw.offp),\n      (lr[0] ^= sw.key),\n      (sw = _streamtoword(data, offp)),\n      (offp = sw.offp),\n      (lr[1] ^= sw.key),\n      (lr = _encipher(lr, 0, P, S)),\n      (P[i] = lr[0]),\n      (P[i + 1] = lr[1]);\n  for (i = 0; i < slen; i += 2)\n    (sw = _streamtoword(data, offp)),\n      (offp = sw.offp),\n      (lr[0] ^= sw.key),\n      (sw = _streamtoword(data, offp)),\n      (offp = sw.offp),\n      (lr[1] ^= sw.key),\n      (lr = _encipher(lr, 0, P, S)),\n      (S[i] = lr[0]),\n      (S[i + 1] = lr[1]);\n}\n\n/**\n * Internaly crypts a string.\n * @param {Array.<number>} b Bytes to crypt\n * @param {Array.<number>} salt Salt bytes to use\n * @param {number} rounds Number of rounds\n * @param {function(Error, Array.<number>=)=} callback Callback receiving the error, if any, and the resulting bytes. If\n *  omitted, the operation will be performed synchronously.\n *  @param {function(number)=} progressCallback Callback called with the current progress\n * @returns {!Array.<number>|undefined} Resulting bytes if callback has been omitted, otherwise `undefined`\n * @inner\n */\nfunction _crypt(b, salt, rounds, callback, progressCallback) {\n  var cdata = C_ORIG.slice(),\n    clen = cdata.length,\n    err;\n\n  // Validate\n  if (rounds < 4 || rounds > 31) {\n    err = Error(\"Illegal number of rounds (4-31): \" + rounds);\n    if (callback) {\n      nextTick(callback.bind(this, err));\n      return;\n    } else throw err;\n  }\n  if (salt.length !== BCRYPT_SALT_LEN) {\n    err = Error(\n      \"Illegal salt length: \" + salt.length + \" != \" + BCRYPT_SALT_LEN,\n    );\n    if (callback) {\n      nextTick(callback.bind(this, err));\n      return;\n    } else throw err;\n  }\n  rounds = (1 << rounds) >>> 0;\n\n  var P,\n    S,\n    i = 0,\n    j;\n\n  //Use typed arrays when available - huge speedup!\n  if (typeof Int32Array === \"function\") {\n    P = new Int32Array(P_ORIG);\n    S = new Int32Array(S_ORIG);\n  } else {\n    P = P_ORIG.slice();\n    S = S_ORIG.slice();\n  }\n\n  _ekskey(salt, b, P, S);\n\n  /**\n   * Calcualtes the next round.\n   * @returns {Array.<number>|undefined} Resulting array if callback has been omitted, otherwise `undefined`\n   * @inner\n   */\n  function next() {\n    if (progressCallback) progressCallback(i / rounds);\n    if (i < rounds) {\n      var start = Date.now();\n      for (; i < rounds; ) {\n        i = i + 1;\n        _key(b, P, S);\n        _key(salt, P, S);\n        if (Date.now() - start > MAX_EXECUTION_TIME) break;\n      }\n    } else {\n      for (i = 0; i < 64; i++)\n        for (j = 0; j < clen >> 1; j++) _encipher(cdata, j << 1, P, S);\n      var ret = [];\n      for (i = 0; i < clen; i++)\n        ret.push(((cdata[i] >> 24) & 0xff) >>> 0),\n          ret.push(((cdata[i] >> 16) & 0xff) >>> 0),\n          ret.push(((cdata[i] >> 8) & 0xff) >>> 0),\n          ret.push((cdata[i] & 0xff) >>> 0);\n      if (callback) {\n        callback(null, ret);\n        return;\n      } else return ret;\n    }\n    if (callback) nextTick(next);\n  }\n\n  // Async\n  if (typeof callback !== \"undefined\") {\n    next();\n\n    // Sync\n  } else {\n    var res;\n    while (true) if (typeof (res = next()) !== \"undefined\") return res || [];\n  }\n}\n\n/**\n * Internally hashes a password.\n * @param {string} password Password to hash\n * @param {?string} salt Salt to use, actually never null\n * @param {function(Error, string=)=} callback Callback receiving the error, if any, and the resulting hash. If omitted,\n *  hashing is performed synchronously.\n *  @param {function(number)=} progressCallback Callback called with the current progress\n * @returns {string|undefined} Resulting hash if callback has been omitted, otherwise `undefined`\n * @inner\n */\nfunction _hash(password, salt, callback, progressCallback) {\n  var err;\n  if (typeof password !== \"string\" || typeof salt !== \"string\") {\n    err = Error(\"Invalid string / salt: Not a string\");\n    if (callback) {\n      nextTick(callback.bind(this, err));\n      return;\n    } else throw err;\n  }\n\n  // Validate the salt\n  var minor, offset;\n  if (salt.charAt(0) !== \"$\" || salt.charAt(1) !== \"2\") {\n    err = Error(\"Invalid salt version: \" + salt.substring(0, 2));\n    if (callback) {\n      nextTick(callback.bind(this, err));\n      return;\n    } else throw err;\n  }\n  if (salt.charAt(2) === \"$\") (minor = String.fromCharCode(0)), (offset = 3);\n  else {\n    minor = salt.charAt(2);\n    if (\n      (minor !== \"a\" && minor !== \"b\" && minor !== \"y\") ||\n      salt.charAt(3) !== \"$\"\n    ) {\n      err = Error(\"Invalid salt revision: \" + salt.substring(2, 4));\n      if (callback) {\n        nextTick(callback.bind(this, err));\n        return;\n      } else throw err;\n    }\n    offset = 4;\n  }\n\n  // Extract number of rounds\n  if (salt.charAt(offset + 2) > \"$\") {\n    err = Error(\"Missing salt rounds\");\n    if (callback) {\n      nextTick(callback.bind(this, err));\n      return;\n    } else throw err;\n  }\n  var r1 = parseInt(salt.substring(offset, offset + 1), 10) * 10,\n    r2 = parseInt(salt.substring(offset + 1, offset + 2), 10),\n    rounds = r1 + r2,\n    real_salt = salt.substring(offset + 3, offset + 25);\n  password += minor >= \"a\" ? \"\\x00\" : \"\";\n\n  var passwordb = utf8Array(password),\n    saltb = base64_decode(real_salt, BCRYPT_SALT_LEN);\n\n  /**\n   * Finishes hashing.\n   * @param {Array.<number>} bytes Byte array\n   * @returns {string}\n   * @inner\n   */\n  function finish(bytes) {\n    var res = [];\n    res.push(\"$2\");\n    if (minor >= \"a\") res.push(minor);\n    res.push(\"$\");\n    if (rounds < 10) res.push(\"0\");\n    res.push(rounds.toString());\n    res.push(\"$\");\n    res.push(base64_encode(saltb, saltb.length));\n    res.push(base64_encode(bytes, C_ORIG.length * 4 - 1));\n    return res.join(\"\");\n  }\n\n  // Sync\n  if (typeof callback == \"undefined\")\n    return finish(_crypt(passwordb, saltb, rounds));\n  // Async\n  else {\n    _crypt(\n      passwordb,\n      saltb,\n      rounds,\n      function (err, bytes) {\n        if (err) callback(err, null);\n        else callback(null, finish(bytes));\n      },\n      progressCallback,\n    );\n  }\n}\n\n/**\n * Encodes a byte array to base64 with up to len bytes of input, using the custom bcrypt alphabet.\n * @function\n * @param {!Array.<number>} bytes Byte array\n * @param {number} length Maximum input length\n * @returns {string}\n */\nexport function encodeBase64(bytes, length) {\n  return base64_encode(bytes, length);\n}\n\n/**\n * Decodes a base64 encoded string to up to len bytes of output, using the custom bcrypt alphabet.\n * @function\n * @param {string} string String to decode\n * @param {number} length Maximum output length\n * @returns {!Array.<number>}\n */\nexport function decodeBase64(string, length) {\n  return base64_decode(string, length);\n}\n\nexport default {\n  setRandomFallback,\n  genSaltSync,\n  genSalt,\n  hashSync,\n  hash,\n  compareSync,\n  compare,\n  getRounds,\n  getSalt,\n  truncates,\n  encodeBase64,\n  decodeBase64,\n};\n", "import * as bcrypt from 'bcryptjs';\nimport { Logger } from '../shared/logger';\n\n/**\n * Password Service - Handles password hashing and validation\n */\nexport class PasswordService {\n  private logger: Logger;\n  private saltRounds: number;\n\n  constructor() {\n    this.logger = new Logger('PasswordService');\n    this.saltRounds = parseInt(process.env.BCRYPT_SALT_ROUNDS || '12', 10);\n    \n    this.logger.debug('PasswordService initialized', {\n      saltRounds: this.saltRounds\n    });\n  }\n\n  /**\n   * Hash a password using bcrypt\n   */\n  async hashPassword(password: string): Promise<string> {\n    try {\n      const hash = await bcrypt.hash(password, this.saltRounds);\n      \n      this.logger.debug('Password hashed successfully');\n      \n      return hash;\n    } catch (error: any) {\n      this.logger.error('Failed to hash password', error);\n      throw new Error('Password hashing failed');\n    }\n  }\n\n  /**\n   * Validate a password against a hash\n   */\n  async validatePassword(password: string, hash: string): Promise<boolean> {\n    try {\n      const isValid = await bcrypt.compare(password, hash);\n      \n      this.logger.debug('Password validation completed', {\n        isValid\n      });\n      \n      return isValid;\n    } catch (error: any) {\n      this.logger.error('Failed to validate password', error);\n      return false;\n    }\n  }\n\n  /**\n   * Check password strength\n   */\n  validatePasswordStrength(password: string): { isValid: boolean; errors: string[] } {\n    const errors: string[] = [];\n\n    if (password.length < 8) {\n      errors.push('Password must be at least 8 characters long');\n    }\n\n    if (password.length > 128) {\n      errors.push('Password must not exceed 128 characters');\n    }\n\n    if (!/[a-z]/.test(password)) {\n      errors.push('Password must contain at least one lowercase letter');\n    }\n\n    if (!/[A-Z]/.test(password)) {\n      errors.push('Password must contain at least one uppercase letter');\n    }\n\n    if (!/\\d/.test(password)) {\n      errors.push('Password must contain at least one number');\n    }\n\n    if (!/[!@#$%^&*(),.?\":{}|<>]/.test(password)) {\n      errors.push('Password must contain at least one special character');\n    }\n\n    // Check for common weak passwords\n    const commonPasswords = [\n      'password', '123456', '123456789', 'qwerty', 'abc123', \n      'password123', 'admin', 'letmein', 'welcome', 'monkey'\n    ];\n    \n    if (commonPasswords.includes(password.toLowerCase())) {\n      errors.push('Password is too common and easily guessed');\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors\n    };\n  }\n}", "import * as jwt from 'jsonwebtoken';\nimport { JwtPayload } from '../types';\nimport { Logger } from '../shared/logger';\nimport { v4 as uuidv4 } from 'uuid';\n\n/**\n * JWT Service - V2\n * Centralized JWT token validation, generation, and refresh token management\n */\nexport class JwtService {\n  private logger: Logger;\n  private jwtSecret: string;\n  private refreshSecret: string;\n\n  constructor() {\n    this.logger = new Logger('JwtService');\n    this.jwtSecret = process.env.JWT_SECRET || 'your-jwt-secret'; // TODO: Use Parameter Store\n    this.refreshSecret = process.env.REFRESH_TOKEN_SECRET || 'your-refresh-secret'; // TODO: Use Parameter Store\n  }\n\n  /**\n   * Validate JWT token and extract user context\n   */\n  public validateToken(token: string): { isValid: boolean; payload?: JwtPayload; error?: string } {\n    try {\n      // Remove 'Bearer ' prefix if present\n      const cleanToken = token.replace(/^Bearer\\s+/i, '');\n\n      if (!cleanToken) {\n        return { isValid: false, error: 'Token is empty' };\n      }\n\n      // Verify and decode token\n      const decoded = jwt.verify(cleanToken, this.jwtSecret) as JwtPayload;\n\n      // Validate required fields\n      if (!decoded.userId || !decoded.email) {\n        return { isValid: false, error: 'Token missing required fields' };\n      }\n\n      // Check expiration\n      if (decoded.exp && decoded.exp < Math.floor(Date.now() / 1000)) {\n        return { isValid: false, error: 'Token has expired' };\n      }\n\n      this.logger.debug('Token validated successfully', {\n        userId: decoded.userId,\n        email: decoded.email,\n        exp: decoded.exp\n      });\n\n      return { isValid: true, payload: decoded };\n\n    } catch (error) {\n      let errorMessage = 'Token validation failed';\n      \n      if (error instanceof jwt.JsonWebTokenError) {\n        errorMessage = 'Invalid token format';\n      } else if (error instanceof jwt.TokenExpiredError) {\n        errorMessage = 'Token has expired';\n      } else if (error instanceof jwt.NotBeforeError) {\n        errorMessage = 'Token not active yet';\n      }\n\n      this.logger.warn('Token validation failed', {\n        error: error instanceof Error ? error.message : error,\n        errorType: error instanceof Error ? error.constructor.name : 'Unknown'\n      });\n\n      return { isValid: false, error: errorMessage };\n    }\n  }\n\n  /**\n   * Generate access token\n   */\n  public generateAccessToken(userId: string, email: string, role?: string): string {\n    const payload = {\n      userId,\n      email,\n      role,\n      iat: Math.floor(Date.now() / 1000),\n      tokenId: uuidv4() // For token revocation if needed\n    };\n\n    const expiresIn = process.env.ACCESS_TOKEN_EXPIRES_IN || '15m';\n    \n    const token = jwt.sign(payload, this.jwtSecret, { expiresIn } as jwt.SignOptions);\n    \n    this.logger.debug('Access token generated', {\n      userId,\n      email,\n      expiresIn\n    });\n\n    return token;\n  }\n\n  /**\n   * Generate refresh token\n   */\n  public generateRefreshToken(userId: string): string {\n    const payload = {\n      userId,\n      tokenType: 'refresh',\n      tokenId: uuidv4(),\n      iat: Math.floor(Date.now() / 1000)\n    };\n\n    const expiresIn = process.env.REFRESH_TOKEN_EXPIRES_IN || '7d';\n    \n    const token = jwt.sign(payload, this.refreshSecret, { expiresIn } as jwt.SignOptions);\n    \n    this.logger.debug('Refresh token generated', {\n      userId,\n      expiresIn\n    });\n\n    return token;\n  }\n\n  /**\n   * Generate both access and refresh tokens\n   */\n  public generateTokenPair(userId: string, email: string, role?: string): {\n    accessToken: string;\n    refreshToken: string;\n    expiresIn: number;\n  } {\n    const accessToken = this.generateAccessToken(userId, email, role);\n    const refreshToken = this.generateRefreshToken(userId);\n    \n    // Parse expiration from environment or default to 15 minutes\n    const expiresInStr = process.env.ACCESS_TOKEN_EXPIRES_IN || '15m';\n    const expiresIn = this.parseExpirationTime(expiresInStr);\n\n    return {\n      accessToken,\n      refreshToken,\n      expiresIn\n    };\n  }\n\n  /**\n   * Validate refresh token\n   */\n  public validateRefreshToken(token: string): { isValid: boolean; userId?: string; error?: string } {\n    try {\n      const cleanToken = token.replace(/^Bearer\\s+/i, '');\n\n      if (!cleanToken) {\n        return { isValid: false, error: 'Refresh token is empty' };\n      }\n\n      const decoded = jwt.verify(cleanToken, this.refreshSecret) as any;\n\n      // Validate required fields\n      if (!decoded.userId || decoded.tokenType !== 'refresh') {\n        return { isValid: false, error: 'Invalid refresh token format' };\n      }\n\n      // Check expiration\n      if (decoded.exp && decoded.exp < Math.floor(Date.now() / 1000)) {\n        return { isValid: false, error: 'Refresh token has expired' };\n      }\n\n      this.logger.debug('Refresh token validated successfully', {\n        userId: decoded.userId\n      });\n\n      return { isValid: true, userId: decoded.userId };\n\n    } catch (error) {\n      let errorMessage = 'Refresh token validation failed';\n      \n      if (error instanceof jwt.JsonWebTokenError) {\n        errorMessage = 'Invalid refresh token format';\n      } else if (error instanceof jwt.TokenExpiredError) {\n        errorMessage = 'Refresh token has expired';\n      }\n\n      this.logger.warn('Refresh token validation failed', {\n        error: error instanceof Error ? error.message : error\n      });\n\n      return { isValid: false, error: errorMessage };\n    }\n  }\n\n  /**\n   * Parse expiration time string to seconds\n   */\n  private parseExpirationTime(expiresIn: string): number {\n    const timeUnit = expiresIn.slice(-1);\n    const timeValue = parseInt(expiresIn.slice(0, -1), 10);\n\n    switch (timeUnit) {\n      case 's': return timeValue;\n      case 'm': return timeValue * 60;\n      case 'h': return timeValue * 60 * 60;\n      case 'd': return timeValue * 24 * 60 * 60;\n      default: return 900; // Default 15 minutes\n    }\n  }\n\n  /**\n   * Extract user ID from token without full validation (for logging)\n   */\n  public extractUserIdUnsafe(token: string): string | null {\n    try {\n      const cleanToken = token.replace(/^Bearer\\s+/i, '');\n      const decoded = jwt.decode(cleanToken) as JwtPayload;\n      return decoded?.userId || null;\n    } catch {\n      return null;\n    }\n  }\n}", "import * as Joi from 'joi';\nimport { Logger } from '../shared/logger';\nimport { ApiError, ErrorCode } from '../types';\n\n/**\n * Validation Service - Centralized request validation using Joi\n */\nexport class ValidationService {\n  private logger: Logger;\n\n  constructor() {\n    this.logger = new Logger('ValidationService');\n  }\n\n  /**\n   * User registration validation schema\n   */\n  public static readonly registerSchema = Joi.object({\n    email: Joi.string()\n      .email({ minDomainSegments: 2, tlds: { allow: true } })\n      .required()\n      .max(255)\n      .messages({\n        'string.email': 'Email must be a valid email address',\n        'any.required': 'Email is required',\n        'string.max': 'Email must not exceed 255 characters'\n      }),\n    \n    password: Joi.string()\n      .min(8)\n      .max(128)\n      .required()\n      .messages({\n        'string.min': 'Password must be at least 8 characters long',\n        'string.max': 'Password must not exceed 128 characters',\n        'any.required': 'Password is required'\n      }),\n    \n    name: Joi.string()\n      .min(1)\n      .max(100)\n      .optional()\n      .trim()\n      .messages({\n        'string.min': 'Name must be at least 1 character long',\n        'string.max': 'Name must not exceed 100 characters'\n      })\n  });\n\n  /**\n   * User login validation schema\n   */\n  public static readonly loginSchema = Joi.object({\n    email: Joi.string()\n      .email({ minDomainSegments: 2, tlds: { allow: true } })\n      .required()\n      .max(255)\n      .messages({\n        'string.email': 'Email must be a valid email address',\n        'any.required': 'Email is required',\n        'string.max': 'Email must not exceed 255 characters'\n      }),\n    \n    password: Joi.string()\n      .min(1)\n      .max(128)\n      .required()\n      .messages({\n        'string.min': 'Password is required',\n        'string.max': 'Password must not exceed 128 characters',\n        'any.required': 'Password is required'\n      })\n  });\n\n  /**\n   * Refresh token validation schema\n   */\n  public static readonly refreshTokenSchema = Joi.object({\n    refreshToken: Joi.string()\n      .required()\n      .messages({\n        'any.required': 'Refresh token is required'\n      })\n  });\n\n  /**\n   * Validate registration request\n   */\n  validateRegistration(data: any): void {\n    const { error } = ValidationService.registerSchema.validate(data, {\n      abortEarly: false,\n      stripUnknown: true\n    });\n\n    if (error) {\n      const validationErrors = error.details.map(detail => detail.message);\n      this.logger.warn('Registration validation failed', {\n        errors: validationErrors,\n        data: { email: data?.email } // Only log non-sensitive data\n      });\n\n      throw new ApiError(\n        ErrorCode.VALIDATION_ERROR,\n        'Validation failed',\n        { errors: validationErrors }\n      );\n    }\n\n    this.logger.debug('Registration validation passed');\n  }\n\n  /**\n   * Validate login request\n   */\n  validateLogin(data: any): void {\n    const { error } = ValidationService.loginSchema.validate(data, {\n      abortEarly: false,\n      stripUnknown: true\n    });\n\n    if (error) {\n      const validationErrors = error.details.map(detail => detail.message);\n      this.logger.warn('Login validation failed', {\n        errors: validationErrors,\n        data: { email: data?.email } // Only log non-sensitive data\n      });\n\n      throw new ApiError(\n        ErrorCode.VALIDATION_ERROR,\n        'Validation failed',\n        { errors: validationErrors }\n      );\n    }\n\n    this.logger.debug('Login validation passed');\n  }\n\n  /**\n   * Validate refresh token request\n   */\n  validateRefreshToken(data: any): void {\n    const { error } = ValidationService.refreshTokenSchema.validate(data, {\n      abortEarly: false,\n      stripUnknown: true\n    });\n\n    if (error) {\n      const validationErrors = error.details.map(detail => detail.message);\n      this.logger.warn('Refresh token validation failed', {\n        errors: validationErrors\n      });\n\n      throw new ApiError(\n        ErrorCode.VALIDATION_ERROR,\n        'Validation failed',\n        { errors: validationErrors }\n      );\n    }\n\n    this.logger.debug('Refresh token validation passed');\n  }\n\n  /**\n   * Generic validation method\n   */\n  validate<T>(schema: Joi.ObjectSchema, data: any): T {\n    const { error, value } = schema.validate(data, {\n      abortEarly: false,\n      stripUnknown: true\n    });\n\n    if (error) {\n      const validationErrors = error.details.map(detail => detail.message);\n      this.logger.warn('Validation failed', {\n        errors: validationErrors\n      });\n\n      throw new ApiError(\n        ErrorCode.VALIDATION_ERROR,\n        'Validation failed',\n        { errors: validationErrors }\n      );\n    }\n\n    return value as T;\n  }\n}"],
  "mappings": "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AAG,4CAA8CD,EAASC,CAAC,EAAI,yCAAyC,EAGrKD,EAAW,MAAM,KAAK,IAAI,IAAIA,CAAQ,CAAC,EAyBvC,IAAME,EAAM,MArBEF,EAAS,IAAKG,GAAY,CAIpC,GAAIJ,IAAS,YACT,OAAOF,GAAI,GAAGM,CAAO,EAKzB,IAAMC,EAAW,MAAMD,IAAY,OAASN,GAAI,GAAG,OAASA,GAAI,GAAG,MAAM,GAEzE,OAAIE,IAAS,WACF,GAAGF,GAAI,GAAGM,CAAO,CAAC,GAAGC,CAAQ,GAKjC,GAAGP,GAAI,GAAGM,CAAO,CAAC,MAAMC,CAAQ,IAC3C,CAAC,EAEuB,KAAK,GAAG,CAAC,IAC3BC,EAAQ,IAAI,OAAO,IAAIH,CAAG,GAAG,EACnC,MAAO,CAAE,KAAAH,EAAM,SAAAC,EAAU,MAAAK,EAAO,IAAAH,CAAI,CACxC,IC9DA,IAAAI,GAAAC,EAAA,CAAAC,GAAAC,KAAA,cAEA,IAAMC,GAAY,CAAC,EAOnBA,GAAU,KAAO,CACb,MACA,OACA,MACA,SACA,SACA,MACA,OACA,UACA,WACA,KACA,UACA,YACA,aACA,cACA,MACA,QACA,KACA,MACA,QACA,KACA,MACA,OACA,QACA,KACA,MACA,SACA,KACA,UACA,SACA,KACA,MACA,SACA,WACA,SACA,OACA,KACA,UACA,SACA,YACA,WACA,OACA,SACA,SACA,KACA,SACA,kBACA,iBACA,OACA,QACA,QACA,YACA,YACA,UACA,SACA,MACA,KACA,MACA,aACA,MACA,QACA,KACA,YACA,KACA,OACA,SACA,QACA,OACA,OACA,MACA,OACA,KACA,OACA,OACA,aACA,KACA,UACA,WACA,KACA,UACA,OACA,UACA,QACA,UACA,SACA,OACA,QACA,UACA,KACA,MACA,KACA,MACA,KACA,QACA,KACA,OACA,QACA,UACA,OACA,OACA,MACA,YACA,cACA,WACA,WACA,WACA,WACA,aACA,UACA,SACA,KACA,MACA,MACA,OACA,MACA,MACA,KACA,KACA,QACA,SACA,OACA,UACA,SACA,OACA,UACA,MACA,KACA,KACA,KACA,SACA,KACA,QACA,MACA,OACA,OACA,QACA,MACA,MACA,KACA,QACA,cACA,cACA,OACA,YACA,OACA,KACA,MACA,MACA,KACA,aACA,KACA,QACA,aACA,OACA,MACA,OACA,MACA,OACA,UACA,QACA,SACA,SACA,MACA,WACA,MACA,KACA,WACA,cACA,WACA,SACA,UACA,WACA,KACA,KACA,QACA,WACA,WACA,MACA,OACA,KACA,KACA,KACA,KACA,MACA,KACA,MACA,OACA,MACA,OACA,cACA,MACA,SACA,OACA,QACA,WACA,UACA,aACA,MACA,UACA,QACA,OACA,SACA,UACA,OACA,OACA,OACA,OACA,SACA,MACA,WACA,WACA,MACA,MACA,OACA,KACA,KACA,SACA,MACA,OACA,KACA,MACA,MACA,KACA,KACA,SACA,UACA,UACA,QACA,OACA,QACA,UACA,YACA,SACA,SACA,KACA,WACA,SACA,QACA,UACA,OACA,QACA,OACA,KACA,KACA,SACA,WACA,QACA,SACA,WACA,WACA,QACA,OACA,UACA,KACA,KACA,KACA,QACA,QACA,SACA,UACA,UACA,MACA,UACA,WACA,YACA,UACA,UACA,WACA,SACA,SACA,eACA,aACA,UACA,cACA,UACA,OACA,OACA,UACA,UACA,SACA,UACA,UACA,MACA,KACA,SACA,aACA,cACA,UACA,QACA,MACA,SACA,UACA,KACA,aACA,KACA,KACA,KACA,KACA,QACA,OACA,KACA,QACA,MACA,QACA,OACA,OACA,SACA,SACA,MACA,OACA,MACA,KACA,OACA,SACA,QACA,SACA,WACA,OACA,WACA,QACA,WACA,SACA,UACA,OACA,SACA,MACA,MACA,WACA,OACA,UACA,SACA,YACA,WACA,WACA,OACA,MACA,KACA,KACA,KACA,MACA,KACA,OACA,SACA,MACA,UACA,MACA,WACA,QACA,MACA,QACA,SACA,SACA,SACA,OACA,MACA,KACA,QACA,MACA,KACA,MACA,QACA,MACA,YACA,KACA,KACA,QACA,SACA,SACA,WACA,cACA,cACA,QACA,YACA,KACA,WACA,OACA,KACA,MACA,SACA,KACA,KACA,aACA,MACA,SACA,WACA,SACA,UACA,UACA,aACA,OACA,OACA,YACA,QACA,SACA,MACA,OACA,OACA,UACA,UACA,OACA,QACA,WACA,UACA,UACA,KACA,WACA,OACA,OACA,QACA,UACA,YACA,OACA,YACA,WACA,OACA,UACA,MACA,UACA,KACA,KACA,SACA,UACA,OACA,UACA,UACA,MACA,KACA,KACA,MACA,OACA,WACA,OACA,QACA,UACA,QACA,aACA,MACA,KACA,OACA,YACA,MACA,UACA,WACA,MACA,UACA,MACA,OACA,YACA,SACA,MACA,KACA,MACA,UACA,QACA,SACA,OACA,QACA,MACA,SACA,MACA,KACA,OACA,KACA,MACA,KACA,MACA,OACA,UACA,SACA,KACA,KACA,OACA,KACA,KACA,OACA,QACA,QACA,SACA,KACA,QACA,MACA,SACA,QACA,KACA,QACA,OACA,MACA,MACA,KACA,UACA,OACA,YACA,OACA,MACA,WACA,OACA,SACA,MACA,MACA,MACA,KACA,KACA,KACA,WACA,WACA,SACA,QACA,QACA,UACA,QACA,KACA,KACA,KACA,WACA,QACA,OACA,QACA,UACA,OACA,KACA,KACA,OACA,UACA,UACA,OACA,MACA,OACA,WACA,SACA,aACA,OACA,WACA,OACA,SACA,SACA,YACA,UACA,MACA,KACA,MACA,KACA,KACA,SACA,WACA,UACA,YACA,YACA,QACA,YACA,QACA,QACA,WACA,OACA,UACA,MACA,SACA,UACA,QACA,MACA,KACA,OACA,KACA,KACA,SACA,QACA,UACA,MACA,OACA,MACA,MACA,KACA,KACA,OACA,MACA,QACA,KACA,KACA,SACA,OACA,OACA,aACA,KACA,MACA,aACA,WACA,OACA,MACA,MACA,YACA,YACA,SACA,MACA,gBACA,SACA,cACA,KACA,WACA,KACA,KACA,QACA,KACA,UACA,MACA,WACA,KACA,OACA,MACA,SACA,OACA,MACA,KACA,OACA,QACA,UACA,MACA,MACA,KACA,MACA,MACA,KACA,OACA,SACA,MACA,MACA,KACA,WACA,OACA,SACA,UACA,SACA,OACA,KACA,cACA,iBACA,kBACA,MACA,KACA,KACA,KACA,MACA,OACA,MACA,SACA,UACA,OACA,KACA,KACA,QACA,UACA,SACA,KACA,OACA,MACA,KACA,MACA,OACA,YACA,KACA,KACA,QACA,KACA,KACA,UACA,cACA,QACA,YACA,OACA,YACA,UACA,UACA,MACA,SACA,UACA,MACA,SACA,KACA,KACA,MACA,QACA,UACA,SACA,QACA,OACA,QACA,OACA,KACA,OACA,OACA,gBACA,YACA,WACA,OACA,QACA,UACA,OACA,UACA,OACA,QACA,OACA,SACA,KACA,MACA,MACA,OACA,QACA,SACA,QACA,MACA,SACA,QACA,QACA,OACA,MACA,eACA,KACA,KACA,KACA,MACA,OACA,KACA,WACA,OACA,SACA,KACA,KACA,KACA,SACA,OACA,SACA,SACA,MACA,aACA,QACA,MACA,SACA,YACA,UACA,WACA,YACA,SACA,MACA,KACA,WACA,KACA,KACA,MACA,QACA,OACA,YACA,OACA,WACA,MACA,OACA,WACA,KACA,KACA,QACA,YACA,MACA,OACA,OACA,MACA,aACA,KACA,KACA,MACA,MACA,KACA,MACA,KACA,KACA,OACA,SACA,OACA,MACA,MACA,MACA,SACA,QACA,UACA,SACA,WACA,SACA,OACA,cACA,MACA,QACA,KACA,KACA,KACA,KACA,MACA,KACA,MACA,MACA,KACA,SACA,QACA,KACA,KACA,KACA,KACA,KACA,KACA,MACA,SACA,OACA,SACA,OACA,MACA,KACA,KACA,MACA,MACA,UACA,UACA,UACA,UACA,MACA,OACA,OACA,aACA,QACA,KACA,MACA,KACA,MACA,MACA,KACA,OACA,OACA,QACA,QACA,SACA,SACA,KACA,KACA,QACA,SACA,MACA,SACA,QACA,KACA,KACA,MACA,MACA,MACA,KACA,MACA,KACA,MACA,WACA,SACA,UACA,SACA,cACA,OACA,KACA,QACA,MACA,MACA,MACA,SACA,MACA,OACA,SACA,SACA,MACA,UACA,UACA,QACA,SACA,MACA,MACA,KACA,OACA,YACA,QACA,OACA,WACA,QACA,QACA,MACA,OACA,KACA,MACA,KACA,SACA,KACA,KACA,WACA,MACA,UACA,QACA,QACA,cACA,SACA,SACA,OACA,SACA,WACA,MACA,MACA,OACA,OACA,UACA,QACA,KACA,KACA,QACA,OACA,cACA,WACA,OACA,KACA,KACA,MACA,OACA,QACA,UACA,OACA,OACA,KACA,YACA,QACA,QACA,QACA,MACA,OACA,cACA,OACA,cACA,QACA,aACA,WACA,aACA,MACA,aACA,KACA,KACA,MACA,KACA,MACA,KACA,KACA,OACA,SACA,QACA,SACA,QACA,KACA,OACA,aACA,UACA,SACA,UACA,MACA,WACA,cACA,QACA,QACA,SACA,OACA,WACA,MACA,OACA,UACA,SACA,SACA,aACA,OACA,aACA,SACA,UACA,UACA,OACA,YACA,QACA,MACA,MACA,MACA,KACA,QACA,QACA,SACA,OACA,KACA,OACA,KACA,QACA,OACA,MACA,KACA,MACA,SACA,KACA,WACA,OACA,SACA,SACA,OACA,QACA,WACA,UACA,UACA,kBACA,SACA,MACA,OACA,MACA,OACA,OACA,KACA,MACA,MACA,KACA,MACA,aACA,UACA,eACA,SACA,SACA,UACA,UACA,OACA,KACA,KACA,SACA,OACA,SACA,WACA,OACA,SACA,QACA,WACA,QACA,MACA,MACA,OACA,MACA,KACA,KACA,YACA,QACA,OACA,QACA,OACA,UACA,QACA,OACA,WACA,SACA,OACA,KACA,OACA,OACA,UACA,OACA,KACA,KACA,MACA,OACA,MACA,QACA,KACA,QACA,KACA,QACA,QACA,KACA,OACA,KACA,SACA,SACA,WACA,WACA,OACA,QACA,YACA,OACA,OACA,MACA,MACA,QACA,QACA,OACA,KACA,MACA,KACA,KACA,QACA,UACA,OACA,YACA,YACA,MACA,WACA,YACA,UACA,QACA,SACA,SACA,QACA,QACA,KACA,QACA,WACA,SACA,UACA,OACA,UACA,SACA,KACA,SACA,QACA,KACA,KACA,SACA,UACA,KACA,MACA,SACA,OACA,SACA,SACA,aACA,QACA,SACA,MACA,OACA,KACA,MACA,KACA,MACA,OACA,OACA,aACA,MACA,UACA,SACA,OACA,KACA,KACA,KACA,MACA,UACA,UACA,OACA,UACA,SACA,OACA,QACA,QACA,KACA,SACA,MACA,KACA,SACA,KACA,KACA,QACA,KACA,KACA,QACA,QACA,QACA,MACA,QACA,UACA,QACA,QACA,OACA,SACA,OACA,KACA,QACA,UACA,WACA,SACA,YACA,qBACA,QACA,MACA,KACA,OACA,MACA,QACA,QACA,KACA,MACA,KACA,KACA,KACA,QACA,MACA,KACA,KACA,SACA,aACA,MACA,MACA,MACA,KACA,KACA,KACA,KACA,YACA,OACA,WACA,KACA,KACA,QACA,WACA,WACA,eACA,MACA,KACA,KACA,SACA,QACA,MACA,SACA,SACA,MACA,MACA,SACA,OACA,SACA,OACA,OACA,aACA,KACA,QACA,QACA,OACA,SACA,OACA,SACA,KACA,QACA,UACA,SACA,OACA,UACA,QACA,UACA,UACA,iBACA,SACA,QACA,UACA,MACA,UACA,QACA,OACA,KACA,UACA,OACA,OACA,cACA,MACA,UACA,OACA,UACA,MACA,gBACA,WACA,OACA,QACA,QACA,MACA,KACA,MACA,MACA,OACA,QACA,UACA,SACA,MACA,cACA,cACA,cACA,cACA,aACA,cACA,cACA,eACA,cACA,aACA,cACA,eACA,cACA,aACA,eACA,aACA,iBACA,cACA,aACA,oBACA,aACA,cACA,iBACA,eACA,cACA,iBACA,eACA,aACA,eACA,aACA,WACA,YACA,aACA,aACA,cACA,iBACA,oBACA,YACA,aACA,cACA,gBACA,aACA,yBACA,cACA,aACA,aACA,cACA,YACA,YACA,gBACA,cACA,cACA,YACA,iBACA,aACA,aACA,aACA,cACA,cACA,gBACA,gBACA,mBACA,cACA,eACA,cACA,cACA,iBACA,cACA,gBACA,cACA,kBACA,cACA,aACA,YACA,YACA,cACA,iBACA,cACA,kBACA,cACA,cACA,aACA,YACA,kBACA,eACA,iBACA,kBACA,mBACA,iBACA,eACA,oBACA,oBACA,iBACA,cACA,iBACA,kBACA,iBACA,mBACA,oBACA,eACA,iBACA,eACA,eACA,cACA,iBACA,cACA,eACA,aACA,eACA,eACA,YACA,WACA,YACA,kBACA,cACA,aACA,eACA,cACA,YACA,WACA,cACA,aACA,aACA,cACA,eACA,YACA,WACA,cACA,cACA,iBACA,cACA,cACA,cACA,YACA,gBACA,aACA,0BACA,2BACA,YACA,cACA,uBACA,cACA,aACA,aACA,cACA,mBACA,oBACA,aACA,gBACA,gBACA,cACA,MACA,MACA,SACA,QACA,UACA,SACA,KACA,YACA,OACA,WACA,MACA,UACA,KACA,MACA,KACA,SACA,OACA,OACA,MACA,KACA,OACA,UACA,IACJ,EAKAD,GAAO,QAAU,IAAI,IAAIC,GAAU,KAAK,IAAKC,GAAQA,EAAI,YAAY,CAAC,CAAC,IC37CvE,IAAAC,GAAAC,EAAA,CAAAC,GAAAC,KAAA,cAEA,IAAMC,EAAS,IACTC,GAAS,KACTC,GAAQ,KACRC,GAAK,KACLC,GAAc,KACdC,GAAO,KACPC,GAAM,KAENC,GAAM,KACNC,GAAS,IAGTC,EAAY,CACd,KAAMJ,cAAgB,IAAM,CAAE,KAAM,CAAE,MAAOA,GAAM,KAAM,IAAK,CAAE,EAAI,GACpE,YAAa,CAET,KAAM,CAEF,KAAM,uDACN,MAAO,sFACX,EACA,MAAO,CACH,KAAM,2DACN,MAAO,0FACX,CACJ,EACA,aAAc,4DACd,SAAU,CACN,WAAY,iBACZ,mBAAoB,sBACpB,cAAe,cACnB,EACA,QAASF,GAAG,MAAM,CAAE,KAAM,WAAY,CAAC,EAAE,MACzC,iBAAkB,sEAElB,aAAc,CACV,IAAK,IAAK,IAAK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AAY,WAAY,WAAY,WAAY,UAC5D,UAAY,WAAY,UAAY,WAAY,WAAY,WAC5D,UAAY,WAAY,UAAY,WAAY,WAAY,WAC5D,WAAY,SAAY,WAAY,WAAY,WAAY,UAC5D,WAAY,WAAY,UAAY,UAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,UAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,UAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,UAAY,WAAY,UAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,UAAY,WAC5D,WAAY,UAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,UAAY,WAAY,WAAY,UAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,UAAY,WAAY,UAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,UAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,UAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,UAAY,WAC5D,WAAY,UAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,QAAY,UAC5D,UAAY,WAAY,UAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,UAAY,SAAY,WAAY,WAC5D,UAAY,WAAY,WAAY,WAAY,UAAY,WAC5D,WAAY,WAAY,UAAY,WAAY,UAAY,WAC5D,WAAY,UAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,UAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,SAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,UAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,SAAY,UAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,SAC5D,WAAY,WAAY,UAAY,WAAY,WAAY,WAC5D,WAAY,UAAY,UAAY,UAAY,WAAY,WAC5D,WAAY,UAAY,WAAY,WAAY,WAAY,WAC5D,UAAY,UAAY,WAAY,WAAY,WAAY,WAC5D,UAAY,UAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,UAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,UAAY,WAAY,UAC5D,UAAY,UAAY,WAAY,UAAY,WAAY,UAC5D,WAAY,WAAY,SAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,UAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,UAAY,WAC5D,WAAY,WAAY,UAAY,WAAY,WAAY,WAC5D,WAAY,UAAY,WAAY,UAAY,UAAY,UAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,SAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,UAAY,WAAY,UAAY,UAC5D,WAAY,WAAY,UAAY,WAAY,SAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,UAAY,WAAY,WAC5D,WAAY,WAAY,UAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,UAAY,UAC5D,UAAY,WAAY,WAAY,WAAY,WAAY,UAC5D,WAAY,UAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,UAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,UAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,UAAY,WAC5D,UAAY,UAAY,WAAY,UAAY,UAAY,UAC5D,UAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,UAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,UAAY,WAAY,UAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,UAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,UAC5D,WAAY,WAAY,UAAY,WAAY,UAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,SAC5D,WAAY,UAAY,WAAY,WAAY,WAAY,WAC5D,UAAY,WAAY,UAAY,WAAY,WAAY,WAC5D,WAAY,UAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,UAAY,WAC5D,WAAY,UAAY,UAAY,WAAY,UAAY,WAC5D,UAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,UAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,SAAY,WAAY,SAC5D,WAAY,WAAY,WAAY,WAAY,UAAY,WAC5D,WAAY,WAAY,UAAY,WAAY,WAAY,WAC5D,UAAY,WAAY,WAAY,UAAY,UAAY,SAC5D,WAAY,WAAY,WAAY,UAAY,UAAY,WAC5D,WAAY,WAAY,WAAY,UAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,UAAY,WAAY,UAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,UAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,UAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,UAAY,WAAY,WAAY,WAAY,UAAY,WAC5D,UAAY,UAAY,WAAY,WAAY,WAAY,UAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,UAC5D,WAAY,WAAY,WAAY,WAAY,UAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,UAC5D,WAAY,UAAY,UAAY,UAAY,WAAY,UAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,UAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,QAAY,UAAY,UAAY,UAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,UAAY,WAAY,WAAY,WAC5D,UAAY,WAAY,WAAY,UAAY,WAAY,WAC5D,UAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,UAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,UAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,UAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,UAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,UAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,UAAY,WAAY,WAC5D,UAAY,SAAY,WAAY,SAAY,WAAY,WAC5D,UAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,UAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,UAAY,WAC5D,SAAY,SAAY,WAAY,WAAY,WAAY,WAC5D,UAAY,UAAY,WAAY,UAAY,WAAY,WAC5D,SAAY,WAAY,UAAY,WAAY,WAAY,WAC5D,WAAY,UAAY,UAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,UAAY,WAAY,WAC5D,WAAY,UAAY,WAAY,UAAY,WAAY,WAC5D,WAAY,UAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,UAAY,SAAY,UAAY,WAAY,UAAY,WAC5D,WAAY,UAAY,SAAY,UAAY,WAAY,WAC5D,WAAY,UAAY,WAAY,WAAY,UAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,UAAY,WAC5D,WAAY,WAAY,SAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,UAAY,WAAY,UAC5D,UAAY,WAAY,WAAY,WAAY,WAAY,UAC5D,WAAY,WAAY,UAAY,WAAY,WAAY,UAC5D,WAAY,UAAY,WAAY,WAAY,WAAY,WAC5D,UAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,UAAY,WAAY,UAAY,WAAY,WAC5D,UAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,UAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,UAC5D,WAAY,WAAY,WAAY,WAAY,WAAY,UAC5D,UAAY,UAAY,WAAY,WAAY,WAAY,UAC5D,WAAY,WAAY,WAAY,WAAY,UAAY,SAC5D,SAAY,WAAY,WAAY,WAAY,WAAY,WAC5D,WAAY,WAAY,WAAY,SACtC,EAOIC,GAAS,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",
  "names": ["require_safe_buffer", "__commonJSMin", "exports", "module", "buffer", "Buffer", "copyProps", "src", "dst", "key", "SafeBuffer", "arg", "encodingOrOffset", "length", "size", "fill", "encoding", "buf", "require_data_stream", "__commonJSMin", "exports", "module", "Buffer", "Stream", "util", "DataStream", "data", "require_param_bytes_for_alg", "__commonJSMin", "exports", "module", "getParamSize", "keySize", "result", "paramBytesForAlg", "getParamBytesForAlg", "alg", "paramBytes", "require_ecdsa_sig_formatter", "__commonJSMin", "exports", "module", "Buffer", "getParamBytesForAlg", "MAX_OCTET", "CLASS_UNIVERSAL", "PRIMITIVE_BIT", "TAG_SEQ", "TAG_INT", "ENCODED_TAG_SEQ", "ENCODED_TAG_INT", "base64Url", "base64", "signatureAsBuffer", "signature", "derToJose", "alg", "paramBytes", "maxEncodedParamLength", "inputLength", "offset", "seqLength", "rLength", "rOffset", "sLength", "sOffset", "rPadding", "sPadding", "dst", "o", "countPadding", "buf", "start", "stop", "padding", "needsSign", "joseToDer", "signatureBytes", "rsBytes", "shortLength", "require_buffer_equal_constant_time", "__commonJSMin", "exports", "module", "Buffer", "SlowBuffer", "bufferEq", "a", "b", "c", "i", "that", "origBufEqual", "origSlowBufEqual", "require_jwa", "__commonJSMin", "exports", "module", "Buffer", "crypto", "formatEcdsa", "util", "MSG_INVALID_ALGORITHM", "MSG_INVALID_SECRET", "MSG_INVALID_VERIFIER_KEY", "MSG_INVALID_SIGNER_KEY", "supportsKeyObjects", "checkIsPublicKey", "key", "typeError", "checkIsPrivateKey", "checkIsSecretKey", "fromBase64", "base64", "toBase64", "base64url", "padding", "i", "template", "args", "errMsg", "bufferOrString", "obj", "normalizeInput", "thing", "createHmacSigner", "bits", "secret", "hmac", "sig", "bufferEqual", "timingSafeEqual", "a", "b", "createHmacVerifier", "signature", "computedSig", "createKeySigner", "privateKey", "signer", "createKeyVerifier", "publicKey", "verifier", "createPSSKeySigner", "createPSSKeyVerifier", "createECDSASigner", "inner", "createECDSAVerifer", "result", "createNoneSigner", "createNoneVerifier", "algorithm", "signerFactories", "verifierFactories", "match", "algo", "require_tostring", "__commonJSMin", "exports", "module", "Buffer", "obj", "require_sign_stream", "__commonJSMin", "exports", "module", "Buffer", "DataStream", "jwa", "Stream", "toString", "util", "base64url", "string", "encoding", "jwsSecuredInput", "header", "payload", "encodedHeader", "encodedPayload", "jwsSign", "opts", "secretOrKey", "algo", "securedInput", "signature", "SignStream", "secret", "secretStream", "e", "require_verify_stream", "__commonJSMin", "exports", "module", "Buffer", "DataStream", "jwa", "Stream", "toString", "util", "JWS_REGEX", "isObject", "thing", "safeJsonParse", "headerFromJWS", "jwsSig", "encodedHeader", "securedInputFromJWS", "signatureFromJWS", "payloadFromJWS", "encoding", "payload", "isValidJws", "string", "jwsVerify", "algorithm", "secretOrKey", "err", "signature", "securedInput", "algo", "jwsDecode", "opts", "header", "VerifyStream", "secretStream", "valid", "obj", "e", "require_jws", "__commonJSMin", "exports", "SignStream", "VerifyStream", "ALGORITHMS", "opts", "require_decode", "__commonJSMin", "exports", "module", "jws", "jwt", "options", "decoded", "payload", "obj", "require_JsonWebTokenError", "__commonJSMin", "exports", "module", "JsonWebTokenError", "message", "error", "require_NotBeforeError", "__commonJSMin", "exports", "module", "JsonWebTokenError", "NotBeforeError", "message", "date", "require_TokenExpiredError", "__commonJSMin", "exports", "module", "JsonWebTokenError", "TokenExpiredError", "message", "expiredAt", "require_ms", "__commonJSMin", "exports", "module", "s", "m", "h", "d", "w", "y", "val", "options", "type", "parse", "fmtLong", "fmtShort", "str", "match", "n", "ms", "msAbs", "plural", "name", "isPlural", "require_timespan", "__commonJSMin", "exports", "module", "ms", "time", "iat", "timestamp", "milliseconds", "require_constants", "__commonJSMin", "exports", "module", "SEMVER_SPEC_VERSION", "MAX_SAFE_INTEGER", "MAX_SAFE_COMPONENT_LENGTH", "MAX_SAFE_BUILD_LENGTH", "RELEASE_TYPES", "require_debug", "__commonJSMin", "exports", "module", "debug", "args", "require_re", "__commonJSMin", "exports", "module", "MAX_SAFE_COMPONENT_LENGTH", "MAX_SAFE_BUILD_LENGTH", "MAX_LENGTH", "debug", "re", "safeRe", "src", "safeSrc", "t", "R", "LETTERDASHNUMBER", "safeRegexReplacements", "makeSafeRegex", "value", "token", "max", "createToken", "name", "isGlobal", "safe", "index", "require_parse_options", "__commonJSMin", "exports", "module", "looseOption", "emptyOpts", "parseOptions", "options", "require_identifiers", "__commonJSMin", "exports", "module", "numeric", "compareIdentifiers", "a", "b", "anum", "bnum", "rcompareIdentifiers", "require_semver", "__commonJSMin", "exports", "module", "debug", "MAX_LENGTH", "MAX_SAFE_INTEGER", "re", "t", "parseOptions", "compareIdentifiers", "SemVer", "_SemVer", "version", "options", "m", "id", "num", "other", "i", "a", "b", "release", "identifier", "identifierBase", "match", "base", "prerelease", "require_parse", "__commonJSMin", "exports", "module", "SemVer", "parse", "version", "options", "throwErrors", "er", "require_valid", "__commonJSMin", "exports", "module", "parse", "valid", "version", "options", "v", "require_clean", "__commonJSMin", "exports", "module", "parse", "clean", "version", "options", "s", "require_inc", "__commonJSMin", "exports", "module", "SemVer", "inc", "version", "release", "options", "identifier", "identifierBase", "require_diff", "__commonJSMin", "exports", "module", "parse", "diff", "version1", "version2", "v1", "v2", "comparison", "v1Higher", "highVersion", "lowVersion", "highHasPre", "prefix", "require_major", "__commonJSMin", "exports", "module", "SemVer", "major", "a", "loose", "require_minor", "__commonJSMin", "exports", "module", "SemVer", "minor", "a", "loose", "require_patch", "__commonJSMin", "exports", "module", "SemVer", "patch", "a", "loose", "require_prerelease", "__commonJSMin", "exports", "module", "parse", "prerelease", "version", "options", "parsed", "require_compare", "__commonJSMin", "exports", "module", "SemVer", "compare", "a", "b", "loose", "require_rcompare", "__commonJSMin", "exports", "module", "compare", "rcompare", "a", "b", "loose", "require_compare_loose", "__commonJSMin", "exports", "module", "compare", "compareLoose", "a", "b", "require_compare_build", "__commonJSMin", "exports", "module", "SemVer", "compareBuild", "a", "b", "loose", "versionA", "versionB", "require_sort", "__commonJSMin", "exports", "module", "compareBuild", "sort", "list", "loose", "a", "b", "require_rsort", "__commonJSMin", "exports", "module", "compareBuild", "rsort", "list", "loose", "a", "b", "require_gt", "__commonJSMin", "exports", "module", "compare", "gt", "a", "b", "loose", "require_lt", "__commonJSMin", "exports", "module", "compare", "lt", "a", "b", "loose", "require_eq", "__commonJSMin", "exports", "module", "compare", "eq", "a", "b", "loose", "require_neq", "__commonJSMin", "exports", "module", "compare", "neq", "a", "b", "loose", "require_gte", "__commonJSMin", "exports", "module", "compare", "gte", "a", "b", "loose", "require_lte", "__commonJSMin", "exports", "module", "compare", "lte", "a", "b", "loose", "require_cmp", "__commonJSMin", "exports", "module", "eq", "neq", "gt", "gte", "lt", "lte", "cmp", "a", "op", "b", "loose", "require_coerce", "__commonJSMin", "exports", "module", "SemVer", "parse", "re", "t", "coerce", "version", "options", "match", "coerceRtlRegex", "next", "major", "minor", "patch", "prerelease", "build", "require_lrucache", "__commonJSMin", "exports", "module", "LRUCache", "key", "value", "firstKey", "require_range", "__commonJSMin", "exports", "module", "SPACE_CHARACTERS", "Range", "_Range", "range", "options", "parseOptions", "Comparator", "r", "c", "first", "isNullSet", "isAny", "i", "comps", "k", "memoKey", "FLAG_INCLUDE_PRERELEASE", "FLAG_LOOSE", "cached", "cache", "loose", "hr", "re", "t", "hyphenReplace", "debug", "comparatorTrimReplace", "tildeTrimReplace", "caretTrimReplace", "rangeList", "comp", "parseComparator", "replaceGTE0", "rangeMap", "comparators", "result", "thisComparators", "isSatisfiable", "rangeComparators", "thisComparator", "rangeComparator", "version", "SemVer", "testSet", "LRU", "remainingComparators", "testComparator", "otherComparator", "replaceCarets", "replaceTildes", "replaceXRanges", "replaceStars", "isX", "id", "replaceTilde", "_", "M", "m", "p", "pr", "ret", "replaceCaret", "z", "replaceXRange", "gtlt", "xM", "xm", "xp", "anyX", "incPr", "$0", "from", "fM", "fm", "fp", "fpr", "fb", "to", "tM", "tm", "tp", "tpr", "set", "allowed", "require_comparator", "__commonJSMin", "exports", "module", "ANY", "Comparator", "_Comparator", "comp", "options", "parseOptions", "debug", "re", "t", "m", "SemVer", "version", "cmp", "Range", "require_satisfies", "__commonJSMin", "exports", "module", "Range", "satisfies", "version", "range", "options", "require_to_comparators", "__commonJSMin", "exports", "module", "Range", "toComparators", "range", "options", "comp", "c", "require_max_satisfying", "__commonJSMin", "exports", "module", "SemVer", "Range", "maxSatisfying", "versions", "range", "options", "max", "maxSV", "rangeObj", "v", "require_min_satisfying", "__commonJSMin", "exports", "module", "SemVer", "Range", "minSatisfying", "versions", "range", "options", "min", "minSV", "rangeObj", "v", "require_min_version", "__commonJSMin", "exports", "module", "SemVer", "Range", "gt", "minVersion", "range", "loose", "minver", "i", "comparators", "setMin", "comparator", "compver", "require_valid", "__commonJSMin", "exports", "module", "Range", "validRange", "range", "options", "require_outside", "__commonJSMin", "exports", "module", "SemVer", "Comparator", "ANY", "Range", "satisfies", "gt", "lt", "lte", "gte", "outside", "version", "range", "hilo", "options", "gtfn", "ltefn", "ltfn", "comp", "ecomp", "i", "comparators", "high", "low", "comparator", "require_gtr", "__commonJSMin", "exports", "module", "outside", "gtr", "version", "range", "options", "require_ltr", "__commonJSMin", "exports", "module", "outside", "ltr", "version", "range", "options", "require_intersects", "__commonJSMin", "exports", "module", "Range", "intersects", "r1", "r2", "options", "require_simplify", "__commonJSMin", "exports", "module", "satisfies", "compare", "versions", "range", "options", "set", "first", "prev", "v", "a", "b", "version", "ranges", "min", "max", "simplified", "original", "require_subset", "__commonJSMin", "exports", "module", "Range", "Comparator", "ANY", "satisfies", "compare", "subset", "sub", "dom", "options", "sawNonNull", "OUTER", "simpleSub", "simpleDom", "isSub", "simpleSubset", "minimumVersionWithPreRelease", "minimumVersion", "eqSet", "gt", "lt", "c", "higherGT", "lowerLT", "gtltComp", "eq", "higher", "lower", "hasDomLT", "hasDomGT", "needDomLTPre", "needDomGTPre", "a", "b", "comp", "require_semver", "__commonJSMin", "exports", "module", "internalRe", "constants", "SemVer", "identifiers", "parse", "valid", "clean", "inc", "diff", "major", "minor", "patch", "prerelease", "compare", "rcompare", "compareLoose", "compareBuild", "sort", "rsort", "gt", "lt", "eq", "neq", "gte", "lte", "cmp", "coerce", "Comparator", "Range", "satisfies", "toComparators", "maxSatisfying", "minSatisfying", "minVersion", "validRange", "outside", "gtr", "ltr", "intersects", "simplifyRange", "subset", "require_asymmetricKeyDetailsSupported", "__commonJSMin", "exports", "module", "semver", "require_rsaPssKeyDetailsSupported", "__commonJSMin", "exports", "module", "semver", "require_validateAsymmetricKey", "__commonJSMin", "exports", "module", "ASYMMETRIC_KEY_DETAILS_SUPPORTED", "RSA_PSS_KEY_DETAILS_SUPPORTED", "allowedAlgorithmsForKeys", "allowedCurves", "algorithm", "key", "keyType", "allowedAlgorithms", "keyCurve", "allowedCurve", "length", "hashAlgorithm", "mgf1HashAlgorithm", "saltLength", "require_psSupported", "__commonJSMin", "exports", "module", "semver", "require_verify", "__commonJSMin", "exports", "module", "JsonWebTokenError", "NotBeforeError", "TokenExpiredError", "decode", "timespan", "validateAsymmetricKey", "PS_SUPPORTED", "jws", "KeyObject", "createSecretKey", "createPublicKey", "PUB_KEY_ALGS", "EC_KEY_ALGS", "RSA_KEY_ALGS", "HS_ALGS", "jwtString", "secretOrPublicKey", "options", "callback", "done", "err", "data", "clockTimestamp", "parts", "decodedToken", "header", "getSecret", "secretCallback", "hasSignature", "e", "valid", "payload", "audiences", "targetAudience", "audience", "maxAgeTimestamp", "signature", "require_lodash", "__commonJSMin", "exports", "module", "INFINITY", "MAX_SAFE_INTEGER", "MAX_INTEGER", "NAN", "argsTag", "funcTag", "genTag", "stringTag", "symbolTag", "reTrim", "reIsBadHex", "reIsBinary", "reIsOctal", "reIsUint", "freeParseInt", "arrayMap", "array", "iteratee", "index", "length", "result", "baseFindIndex", "predicate", "fromIndex", "fromRight", "baseIndexOf", "value", "baseIsNaN", "baseTimes", "n", "baseValues", "object", "props", "key", "overArg", "func", "transform", "arg", "objectProto", "hasOwnProperty", "objectToString", "propertyIsEnumerable", "nativeKeys", "nativeMax", "arrayLikeKeys", "inherited", "isArray", "isArguments", "skipIndexes", "isIndex", "baseKeys", "isPrototype", "Ctor", "proto", "includes", "collection", "guard", "isArrayLike", "values", "toInteger", "isString", "isArrayLikeObject", "isLength", "isFunction", "isObjectLike", "tag", "isObject", "type", "isSymbol", "toFinite", "toNumber", "sign", "remainder", "other", "isBinary", "keys", "require_lodash", "__commonJSMin", "exports", "module", "boolTag", "objectProto", "objectToString", "isBoolean", "value", "isObjectLike", "require_lodash", "__commonJSMin", "exports", "module", "INFINITY", "MAX_INTEGER", "NAN", "symbolTag", "reTrim", "reIsBadHex", "reIsBinary", "reIsOctal", "freeParseInt", "objectProto", "objectToString", "isInteger", "value", "toInteger", "isObject", "type", "isObjectLike", "isSymbol", "toFinite", "toNumber", "sign", "result", "remainder", "other", "isBinary", "require_lodash", "__commonJSMin", "exports", "module", "numberTag", "objectProto", "objectToString", "isObjectLike", "value", "isNumber", "require_lodash", "__commonJSMin", "exports", "module", "objectTag", "isHostObject", "value", "result", "overArg", "func", "transform", "arg", "funcProto", "objectProto", "funcToString", "hasOwnProperty", "objectCtorString", "objectToString", "getPrototype", "isObjectLike", "isPlainObject", "proto", "Ctor", "require_lodash", "__commonJSMin", "exports", "module", "stringTag", "objectProto", "objectToString", "isArray", "isObjectLike", "value", "isString", "require_lodash", "__commonJSMin", "exports", "module", "FUNC_ERROR_TEXT", "INFINITY", "MAX_INTEGER", "NAN", "symbolTag", "reTrim", "reIsBadHex", "reIsBinary", "reIsOctal", "freeParseInt", "objectProto", "objectToString", "before", "n", "func", "result", "toInteger", "once", "isObject", "value", "type", "isObjectLike", "isSymbol", "toFinite", "toNumber", "sign", "remainder", "other", "isBinary", "require_sign", "__commonJSMin", "exports", "module", "timespan", "PS_SUPPORTED", "validateAsymmetricKey", "jws", "includes", "isBoolean", "isInteger", "isNumber", "isPlainObject", "isString", "once", "KeyObject", "createSecretKey", "createPrivateKey", "SUPPORTED_ALGS", "sign_options_schema", "value", "registered_claims_schema", "validate", "schema", "allowUnknown", "object", "parameterName", "key", "validator", "validateOptions", "options", "validatePayload", "payload", "options_to_payload", "options_for_objects", "secretOrPrivateKey", "callback", "isObjectPayload", "header", "failure", "err", "error", "invalid_options", "opt", "timestamp", "claim", "encoding", "signature", "require_jsonwebtoken", "__commonJSMin", "exports", "module", "require_stringify", "__commonJSMin", "exports", "module", "args", "err", "require_error", "__commonJSMin", "exports", "module", "Stringify", "args", "msgs", "arg", "require_assert", "__commonJSMin", "exports", "module", "AssertError", "condition", "args", "require_reach", "__commonJSMin", "exports", "module", "Assert", "internals", "obj", "chain", "options", "isChainArray", "path", "ref", "i", "key", "type", "number", "require_types", "__commonJSMin", "exports", "module", "internals", "obj", "objName", "require_utils", "__commonJSMin", "exports", "obj", "options", "require_clone", "__commonJSMin", "exports", "module", "Reach", "Types", "Utils", "internals", "obj", "options", "_seen", "clone", "seen", "value", "lookup", "baseProto", "newObj", "key", "keys", "descriptor", "source", "ref", "proto", "require_package", "__commonJSMin", "exports", "module", "require_schemas", "__commonJSMin", "exports", "Joi", "internals", "require_escapeHtml", "__commonJSMin", "exports", "module", "internals", "input", "escaped", "i", "charCode", "namedEscape", "safe", "require_lib", "__commonJSMin", "exports", "internals", "string", "options", "constant", "value", "parts", "current", "parenthesis", "literal", "flush", "inner", "last", "sub", "c", "part", "i", "operator", "name", "method", "args", "arg", "context", "innerValues", "set", "left", "right", "result", "negative", "require_annotate", "__commonJSMin", "exports", "Clone", "Common", "internals", "stripColorCodes", "redFgEscape", "redBgEscape", "endColor", "obj", "i", "pos", "error", "path", "node", "j", "seg", "refAnnotations", "cacheKey", "replacers", "message", "$0", "$1", "$2", "spaces", "keys", "stack", "cycleReplacer", "key", "value", "thisPos", "annotations", "annotated", "errorKey", "missingKey", "require_errors", "__commonJSMin", "exports", "Annotate", "Common", "Template", "code", "value", "local", "flags", "messages", "state", "prefs", "key", "template", "localized", "path", "label", "segment", "lang", "normalized", "errors", "original", "override", "message", "details", "limit", "validationError", "options", "item", "v", "err", "require_ref", "__commonJSMin", "exports", "Assert", "Clone", "Reach", "Common", "Template", "internals", "key", "options", "ref", "separator", "context", "ancestor", "slice", "value", "state", "prefs", "local", "target", "resolved", "mapped", "lead", "desc", "prefix", "globalp", "root", "i", "source", "item", "copy", "require_template", "__commonJSMin", "exports", "module", "Assert", "Clone", "EscapeHtml", "Formula", "Common", "Errors", "Ref", "internals", "source", "options", "functions", "opts", "key", "encoded", "parts", "refs", "processed", "head", "part", "raw", "ender", "end", "variable", "wrapped", "dynamic", "rest", "date", "prefs", "desc", "template", "value", "state", "local", "args", "rendered", "string", "result", "content", "reference", "ref", "context", "resolved", "formula", "err", "$0", "$1", "current", "i", "char", "next", "ends", "original", "type", "wrap", "skipWrap", "pairs", "sym", "values", "item", "condition", "then", "otherwise", "code", "messages", "require_messages", "__commonJSMin", "exports", "Assert", "Clone", "Template", "messages", "target", "code", "message", "language", "localized", "base", "extended", "require_common", "__commonJSMin", "exports", "Assert", "AssertError", "Pkg", "Messages", "Schemas", "internals", "options", "keys", "name", "unknownKeys", "k", "prefs", "result", "a", "b", "operator", "value", "defaultValue", "date", "obj", "schema", "any", "target", "source", "merged", "fn", "key", "err", "label", "assert", "message", "args", "method", "arg", "require_cache", "__commonJSMin", "exports", "Assert", "Clone", "Common", "internals", "options", "key", "value", "node", "next", "prev", "require_compile", "__commonJSMin", "exports", "Assert", "Common", "Ref", "internals", "Joi", "config", "options", "err", "valid", "base", "values", "item", "id", "root", "schema", "any", "compiler", "key", "value", "condition", "rule", "is", "i", "test", "last", "otherwise", "require_extend", "__commonJSMin", "exports", "Assert", "Clone", "Common", "Messages", "internals", "from", "options", "base", "prototype", "schema", "def", "parent", "terms", "name", "term", "rules", "rule", "method", "aliases", "alias", "arg", "modifiers", "modifier", "override", "manifest", "child", "obj", "desc", "value", "helpers", "coerced", "own", "prepared", "result", "require_manifest", "__commonJSMin", "exports", "Assert", "Clone", "Common", "Messages", "Ref", "Template", "Schemas", "internals", "schema", "def", "desc", "flag", "rule", "item", "custom", "key", "arg", "term", "items", "manifest", "mapped", "normalized", "from", "to", "options", "value", "joi", "setter", "args", "built", "keys", "definition", "name", "terms", "when", "string", "end", "exp", "flags", "require_deepEqual", "__commonJSMin", "exports", "module", "Types", "internals", "obj", "ref", "options", "seen", "type", "instanceType", "i", "checkPrototype", "objValueOf", "err", "key", "entry", "isDeepEqual", "valueOf", "hasOwnEnumerableProperty", "keys", "getOwnPropertySymbols", "objValue", "refValue", "ref2", "objEntry", "found", "refEntry", "value", "valueOfObj", "valueOfRef", "objKeys", "skipped", "objSymbols", "refSymbols", "require_lib", "__commonJSMin", "exports", "depth", "orig", "ignore", "stack", "capture", "line", "require_trace", "__commonJSMin", "exports", "DeepEqual", "Pinpoint", "Errors", "internals", "root", "trace", "schema", "existing", "store", "filename", "line", "merged", "sources", "file", "coverage", "missing", "skipped", "log", "type", "set", "values", "refs", "value", "ref", "rules", "rule", "name", "status", "report", "state", "source", "result", "to", "by", "from", "each", "_path", "path", "sub", "subId", "item", "key", "paths", "skip", "event", "require_merge", "__commonJSMin", "exports", "module", "Assert", "Clone", "Utils", "internals", "target", "source", "options", "i", "keys", "key", "value", "require_modify", "__commonJSMin", "exports", "Assert", "Common", "Ref", "internals", "clone", "source", "id", "value", "key", "path", "adjuster", "root", "chain", "tail", "adjusted", "node", "behind", "current", "forward", "schema", "existing", "nodes", "replacement", "each", "item", "obj", "options", "name", "result", "i", "rule", "_path", "_key", "require_ignore", "__commonJSMin", "exports", "module", "require_state", "__commonJSMin", "exports", "module", "Clone", "Reach", "Common", "internals", "path", "ancestors", "state", "schema", "debug", "value", "reason", "node", "i", "segment", "next", "parents", "own", "parent", "require_validator", "__commonJSMin", "exports", "Assert", "Clone", "Ignore", "Reach", "Common", "Errors", "State", "internals", "value", "schema", "prefs", "settings", "result", "outcome", "mainstay", "root", "errors", "external", "path", "linked", "node", "key", "parent", "ancestors", "original", "current", "segment", "createError", "code", "local", "output", "messages", "err", "tracer", "debug", "links", "snapshot", "cleanup", "schemas", "state", "error", "overrides", "localState", "helpers", "def", "prepared", "coerced", "empty", "presence", "match", "report", "base", "rule", "definition", "ret", "args", "resolver", "resolved", "normalized", "invalid", "failover", "defaulted", "caster", "casted", "method", "isDefaultOptions", "flag", "source", "trim", "require_values", "__commonJSMin", "exports", "module", "Assert", "DeepEqual", "Common", "internals", "values", "refs", "value", "target", "source", "remove", "item", "state", "prefs", "insensitive", "found", "ref", "resolved", "items", "options", "set", "normalized", "from", "map", "require_base", "__commonJSMin", "exports", "module", "Assert", "Clone", "DeepEqual", "Merge", "Cache", "Common", "Compile", "Errors", "Extend", "Manifest", "Messages", "Modify", "Ref", "Trace", "Validator", "Values", "internals", "type", "values", "targets", "obj", "target", "adjuster", "id", "to", "value", "options", "desc", "schema", "err", "example", "method", "description", "name", "meta", "notes", "note", "mode", "prefs", "enabled", "convert", "tags", "tag", "condition", "when", "conditions", "item", "cache", "source", "tmpObj", "key", "test", "flags", "terms", "path", "paths", "def", "start", "i", "original", "rule", "definition", "args", "arg", "resolver", "error", "code", "local", "state", "messages", "overrides", "result", "each", "family", "flag", "override", "term", "whens", "ids", "input", "tests", "before", "j", "is", "then", "otherwise", "baseId", "localState", "generated", "filtered", "other", "require_any", "__commonJSMin", "exports", "module", "Assert", "Base", "Common", "Messages", "method", "description", "value", "helpers", "err", "messages", "schema", "obj", "code", "local", "rule", "enabled", "message", "desc", "key", "values", "alter", "target", "adjuster", "ref", "is", "not", "then", "otherwise", "concat", "require_alternatives", "__commonJSMin", "exports", "module", "Assert", "Merge", "Any", "Common", "Compile", "Errors", "Ref", "internals", "schema", "schemas", "value", "helpers", "error", "state", "prefs", "matched", "failed", "i", "item", "localState", "result", "context", "f", "isAnyObj", "alternative", "v", "acc", "errors", "input", "tests", "j", "test", "is", "then", "otherwise", "id", "condition", "options", "obj", "match", "conditions", "mode", "name", "each", "source", "desc", "ref", "not", "failures", "valids", "complex", "reports", "report", "valid", "type", "code", "failure", "require_array", "__commonJSMin", "exports", "module", "Assert", "DeepEqual", "Reach", "Any", "Common", "Compile", "internals", "value", "schema", "state", "prefs", "sort", "error", "single", "obj", "has", "ancestors", "i", "localState", "patternLabel", "schemas", "type", "errorsArray", "requireds", "ordereds", "inclusions", "wasArray", "errors", "il", "item", "errored", "isValid", "key", "path", "exclusion", "ordered", "res", "requiredChecks", "jl", "stripUnknown", "inclusion", "previousCheck", "limit", "helpers", "name", "operator", "args", "enabled", "options", "settings", "sorted", "comparator", "rule", "separator", "raw", "found", "compare", "ignoreUndefined", "records", "entries", "current", "context", "desc", "knownMisses", "unknownMisses", "required", "label", "requiredOrdereds", "overrides", "trailingUndefined", "override", "arr", "pos", "order", "aFirst", "bFirst", "a", "b", "err", "require_boolean", "__commonJSMin", "exports", "module", "Assert", "Any", "Common", "Values", "internals", "value", "schema", "normalized", "error", "values", "obj", "i", "enabled", "helpers", "desc", "require_date", "__commonJSMin", "exports", "module", "Assert", "Any", "Common", "Template", "internals", "value", "schema", "error", "prefs", "format", "helpers", "date", "name", "operator", "args", "to", "type", "original", "require_applyToDefaults", "__commonJSMin", "exports", "module", "Assert", "Clone", "Merge", "Reach", "internals", "defaults", "source", "options", "copy", "nullOverride", "keys", "seen", "merge", "key", "ref", "dst", "src", "path", "segment", "val", "value", "require_lib", "__commonJSMin", "exports", "Assert", "internals", "nodes", "options", "before", "after", "group", "sort", "node", "item", "valid", "others", "other", "i", "graph", "graphAfters", "groups", "seq", "expandedGroups", "graphNodeItem", "ancestors", "children", "child", "visited", "sorted", "next", "j", "shouldSeeCount", "seenCount", "k", "seqIndex", "value", "sortedItem", "a", "b", "require_keys", "__commonJSMin", "exports", "module", "ApplyToDefaults", "Assert", "Clone", "Topo", "Any", "Common", "Compile", "Errors", "Ref", "Template", "internals", "schema", "keys", "value", "error", "state", "prefs", "errors", "unprocessed", "ancestors", "child", "key", "item", "localState", "result", "early", "dep", "failed", "report", "peers", "subject", "message", "obj", "about", "path", "constructor", "name", "helpers", "limit", "operator", "args", "pattern", "options", "isRegExp", "config", "from", "to", "rename", "type", "allow", "topo", "desc", "rel", "regex", "rule", "fallthrough", "matches", "clone", "separator", "paths", "peer", "missing", "present", "count", "isPresent", "main", "values", "context", "resolved", "renamed", "match", "hasMatches", "i", "stpm", "details", "stripUnknown", "unprocessedKey", "source", "pos", "require_function", "__commonJSMin", "exports", "module", "Assert", "Keys", "n", "value", "helpers", "require_link", "__commonJSMin", "exports", "module", "Assert", "Any", "Common", "Compile", "Errors", "internals", "schema", "ref", "value", "state", "prefs", "linked", "obj", "enabled", "source", "desc", "perspective", "path", "key", "shared", "condition", "message", "require_number", "__commonJSMin", "exports", "module", "Assert", "Any", "Common", "internals", "value", "str", "dindex", "eindex", "schema", "error", "result", "string", "prefs", "rule", "precision", "helpers", "limit", "name", "operator", "args", "base", "baseDecimalPlace", "pfactor", "options", "places", "sign", "enabled", "require_object", "__commonJSMin", "exports", "module", "Keys", "value", "helpers", "require_errors", "__commonJSMin", "exports", "code", "require_domain", "__commonJSMin", "exports", "Url", "Errors", "internals", "domain", "options", "minDomainSegments", "segments", "tlds", "tld", "i", "segment", "require_email", "__commonJSMin", "exports", "Util", "Domain", "Errors", "internals", "email", "options", "ascii", "parts", "local", "domain", "segments", "segment", "char", "binary", "v", "require_escapeRegex", "__commonJSMin", "exports", "module", "string", "require_uri", "__commonJSMin", "exports", "Assert", "EscapeRegex", "internals", "rfc3986", "hexDigit", "hexDigitOnly", "unreserved", "subDelims", "pctEncoded", "pchar", "pcharOnly", "decOctect", "h16", "ls32", "IPv6SixHex", "IPv6FiveHex", "IPv6FourHex", "IPv6ThreeHex", "IPv6TwoHex", "IPv6OneHex", "IPv6NoneHex", "IPv6NoneHex2", "IPv6NoneHex3", "userinfo", "IPLiteral", "regName", "host", "port", "authority", "authorityCapture", "segment", "segmentNz", "segmentNzNc", "pathEmpty", "pathAbEmpty", "pathAbsolute", "pathRootless", "pathNoScheme", "pathAbNoAuthority", "options", "rfc", "suffix", "relative", "customScheme", "schemes", "selections", "i", "scheme", "absolute", "prefix", "raw", "require_ip", "__commonJSMin", "exports", "Assert", "Uri", "options", "cidr", "versions", "i", "raw", "version", "cidrpart", "regex", "require_tlds", "__commonJSMin", "exports", "module", "internals", "tld", "require_string", "__commonJSMin", "exports", "module", "Assert", "Domain", "Email", "Ip", "EscapeRegex", "Tlds", "Uri", "Any", "Common", "internals", "value", "schema", "state", "prefs", "normalize", "casing", "trim", "replacement", "hex", "iso", "rule", "limit", "error", "min", "helpers", "options", "direction", "i", "sum", "mul", "char", "matches", "address", "args", "regex", "emails", "invalids", "email", "versionNumbers", "versions", "set", "version", "versionNumber", "separator", "results", "cidr", "encoding", "name", "operator", "length", "form", "errorCode", "pattern", "obj", "enabled", "scheme", "domain", "match", "encoded", "matched", "desc", "deny", "allow", "source", "tld", "date", "require_symbol", "__commonJSMin", "exports", "module", "Assert", "Any", "internals", "value", "schema", "error", "lookup", "iterable", "obj", "symbols", "entry", "key", "desc", "require_binary", "__commonJSMin", "exports", "module", "Assert", "Any", "Common", "value", "schema", "error", "encoding", "limit", "helpers", "name", "operator", "args", "require_lib", "__commonJSMin", "exports", "module", "Assert", "Clone", "Cache", "Common", "Compile", "Errors", "Extend", "Manifest", "Ref", "Template", "Trace", "Schemas", "internals", "root", "type", "args", "method", "alias", "target", "value", "schema", "desc", "prefs", "options", "modifier", "joi", "extensions", "extension", "expanded", "item", "base", "types", "annotate", "message", "result", "error", "display", "extended", "auth_handler_exports", "__export", "handler", "__toCommonJS", "ApiError", "code", "message", "details", "ResponseBuilder", "data", "statusCode", "message", "response", "code", "details", "items", "totalCount", "page", "pageSize", "totalPages", "hasNextPage", "hasPrevPage", "Logger", "context", "message", "data", "error", "errorData", "operation", "duration", "level", "logEntry", "levels", "currentLevelIndex", "BaseHandler", "handlerName", "Logger", "handler", "event", "requestId", "route", "ResponseBuilder", "userId", "validationError", "startTime", "result", "duration", "error", "authorizer", "ApiError", "bodyString", "key", "defaultValue", "data", "message", "details", "import_client_dynamodb", "import_lib_dynamodb", "byteToHex", "i", "unsafeStringify", "arr", "offset", "import_node_crypto", "rnds8Pool", "poolPtr", "rng", "crypto", "import_node_crypto", "native_default", "crypto", "v4", "options", "buf", "offset", "native_default", "rnds", "rng", "i", "unsafeStringify", "v4_default", "UserService", "Logger", "dynamoClient", "userData", "now", "userWithPassword", "v4_default", "command", "passwordHash", "user", "error", "ApiError", "email", "result", "userId", "updates", "updateExpressions", "expressionAttributeValues", "import_crypto", "randomFallback", "randomBytes", "len", "nodeCrypto", "genSaltSync", "rounds", "seed_length", "GENSALT_DEFAULT_LOG2_ROUNDS", "salt", "base64_encode", "randomBytes", "BCRYPT_SALT_LEN", "genSalt", "callback", "_async", "nextTick", "err", "resolve", "reject", "res", "hash", "password", "salt", "callback", "progressCallback", "_async", "genSalt", "err", "_hash", "nextTick", "resolve", "reject", "res", "safeStringCompare", "known", "unknown", "diff", "i", "compare", "password", "hashValue", "callback", "progressCallback", "_async", "nextTick", "hash", "err", "comp", "safeStringCompare", "resolve", "reject", "res", "nextTick", "utf8Length", "string", "len", "c", "i", "utf8Array", "offset", "c1", "c2", "buffer", "k", "BASE64_CODE", "BASE64_INDEX", "base64_encode", "b", "off", "rs", "base64_decode", "s", "slen", "olen", "c3", "c4", "o", "code", "res", "BCRYPT_SALT_LEN", "GENSALT_DEFAULT_LOG2_ROUNDS", "BLOWFISH_NUM_ROUNDS", "MAX_EXECUTION_TIME", "P_ORIG", "S_ORIG", "C_ORIG", "_encipher", "lr", "P", "S", "n", "l", "r", "_streamtoword", "data", "offp", "word", "_key", "key", "plen", "sw", "_ekskey", "_crypt", "salt", "rounds", "callback", "progressCallback", "cdata", "clen", "err", "j", "next", "start", "ret", "_hash", "password", "minor", "r1", "r2", "real_salt", "passwordb", "saltb", "finish", "bytes", "PasswordService", "Logger", "password", "hash", "error", "isValid", "compare", "errors", "jwt", "JwtService", "Logger", "token", "cleanToken", "decoded", "error", "errorMessage", "userId", "email", "role", "payload", "v4_default", "expiresIn", "accessToken", "refreshToken", "expiresInStr", "timeUnit", "timeValue", "Joi", "_ValidationService", "Logger", "data", "error", "validationErrors", "detail", "ApiError", "schema", "value", "ValidationService", "AuthHandler", "BaseHandler", "UserService", "PasswordService", "JwtService", "ValidationService", "event", "requestId", "body", "passwordStrength", "passwordHash", "user", "accessToken", "refreshToken", "expiresIn", "response", "error", "ApiError", "userWithPassword", "refreshTokenResult", "message", "code", "details", "authHandler", "handler", "method", "path"]
}
